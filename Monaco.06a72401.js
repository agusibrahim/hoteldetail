import{j as r1,z as s1,u as nd,h as o1,l as la,n as a1,g as c1,y as pp,a as u1,b as mp,t as d1}from"./web.dd2e8e92.js";import{i as cs,a as l1,b as Eg,c as sv,d as h1,e as f1,f as g1,g as p1,E as ov,h as N,U as x,j as Yn,C as Mt,S as el,k as m1,R as gi,l as Tg,N as av,Q as Ua,m as v1,I as _1,V as rt,D as Jt,n as Qo,o as ja,s as vp,p as kg,q as y1,L as cv,r as uv,P as dv,T as w1,M as id,t as b1,u as ha,v as Pg,w as Xo,x as tl,y as C1,z as lv,A as S1,W as hv,B as D1,F as E1,G as za,H as fv,J as T1,K as k1,O as P1,X as In,Y as Zi,Z as R1,_ as Rg,$ as Ba,a0 as I1,a1 as rd,a2 as gv,a3 as x1,a4 as st,a5 as F1,a6 as M1,a7 as A1,a8 as kn,a9 as ho,aa as nl,ab as Ui,ac as _p,ad as L1,ae as O1,af as pv,ag as mv,ah as Li,ai as Un,aj as mr,ak as us,al as vv,am as $1,an as N1,ao as H1,ap as Gt,aq as _v,ar as q1,as as W1,at as U1,au as Qe,av as z,aw as j1,ax as yv,ay as Yo,az as fo,aA as yp,aB as z1,aC as B1,aD as Ma,aE as V1,aF as il,aG as pi,aH as Ig,aI as K1,aJ as wv,aK as G1,aL as J1,aM as Q1,aN as X1,aO as Y1,aP as nt,aQ as Fe,aR as Zo,aS as xg,aT as Rt,aU as Fg,aV as Mg,aW as Z1,aX as ew,aY as sd,aZ as tw,a_ as wp,a$ as nw,b0 as Aa,b1 as Jc,b2 as at,b3 as iw,b4 as Ag,b5 as rw,b6 as mn,b7 as Ie,b8 as Oi,b9 as sw,ba as qn,bb as ow,bc as ea,bd as bv,be as aw,bf as bp,bg as ri,bh as cw,bi as Cp,bj as Ti,bk as uw,bl as dw,bm as lw,bn as hw,bo as fw,bp as gw,bq as pw,br as Sp,bs as od,bt as mw,bu as vw,bv as go,bw as _w,bx as rl,by as vr,bz as yw,bA as Cv,bB as sl,bC as Fs,bD as Qc,bE as ww,bF as bw,bG as Sv,bH as Dp,bI as Cw,bJ as Sw,bK as Dv,bL as Ev,bM as Tv,bN as Dw,bO as ta,bP as Xc,bQ as qi,bR as kv,bS as xn,bT as Ew,bU as ro,bV as Tw,bW as ol,bX as kw,bY as Pw,bZ as Lg,b_ as Pv,b$ as Rv,c0 as Iv,c1 as xv,c2 as Ep,c3 as Fv,c4 as Mv,c5 as Av,c6 as Rw,c7 as Iw,c8 as Lv,c9 as Ov,ca as xw,cb as Fw,cc as na,cd as Mw,ce as Aw,cf as Lw,cg as Ow,ch as $w,ci as Nw,cj as al,ck as Hw,cl as qw,cm as Ww,cn as Uw,co as jw,cp as Tp,cq as kp,cr as cl,cs as zw,ct as Bw,cu as Pp,cv as Lt,cw as Vw,cx as $v,cy as Kw,cz as Gw,cA as Jw,cB as Qw,cC as Nv,cD as ul,cE as Xw,cF as Va,cG as Yw,cH as Rp,cI as Zw,cJ as eb,cK as tb,cL as nb,cM as Hv,cN as qv,cO as dl,cP as ib,cQ as rb,cR as sb,cS as Zs,cT as ad,cU as po,cV as ob,cW as ab,cX as La,cY as so,cZ as Ip,c_ as Wv,c$ as er,d0 as Ms,d1 as xp,d2 as cb,d3 as ub,d4 as db,d5 as cd,d6 as Fp,d7 as yi,d8 as Mp,d9 as lb,da as hb,db as Ap,dc as fb,dd as Lp,de as fa,df as gb,dg as pb,dh as mb,di as vb,dj as _b,dk as ga,dl as Op,dm as yb,dn as wb,dp as bb,dq as Cb,dr as Sb}from"./entry.66857af9.js";import{a as Uv,c as yn}from"./_commonjsHelpers.37791fd4.js";/* empty css                       */import{s as Pr}from"./plausible.3e0677a9.js";import"./firebase.023e4ae1.js";import"./store.f7677aa4.js";import"./icons.7fc7b3d0.js";import"./Statistic.84a2d0bd.js";var Ka={};const ce=ov;function Db(i,e,t){const n=[];function r(a,c,u){if(c===0&&u.length===0)return;const l=n[n.length-1];l&&l.start+l.deleteCount===a?(l.deleteCount+=c,l.toInsert.push(...u)):n.push({start:a,deleteCount:c,toInsert:u})}let s=0,o=0;for(;;){if(s===i.length){r(s,0,e.slice(o));break}if(o===e.length){r(s,i.length-s,[]);break}const a=i[s],c=e[o],u=t(a,c);u===0?(s+=1,o+=1):u<0?(r(s,1,[]),s+=1):u>0&&(r(s,0,[c]),o+=1)}return n}function Eb(i,e,t){const n=Db(i,e,t),r=[],s=[];for(const o of n)r.push(...i.slice(o.start,o.start+o.deleteCount)),s.push(...o.toInsert);return{removed:r,added:s}}function Tb(i){let e=0;for(let t=0;t<i.length;t++)i[t]&&(i[e]=i[t],e+=1);i.length=e}function $p(i,e){let t;if(typeof e=="number"){let n=e;t=()=>{const r=Math.sin(n++)*179426549;return r-Math.floor(r)}}else t=Math.random;for(let n=i.length-1;n>0;n-=1){const r=Math.floor(t()*(n+1)),s=i[n];i[n]=i[r],i[r]=s}}function Np(i,e){return Array.isArray(i)?i.map(e):e(i)}var Hp;(function(i){i[i.WORKSPACE=0]="WORKSPACE",i[i.PROFILE=1]="PROFILE",i[i.APPLICATION=2]="APPLICATION"})(Hp||(Hp={}));var qp;(function(i){i[i.OFF=0]="OFF",i[i.SILENT=1]="SILENT",i[i.ERROR=2]="ERROR"})(qp||(qp={}));class kb{constructor(){this.progress=new Pb,this.onDidClose=N.None,this.onDidChangeVisibility=N.None}updateSeverity(e){}updateMessage(e){}updateActions(e){}close(){}}class Pb{infinite(){}done(){}total(e){}worked(e){}}function B(i,e,t,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s}function G(i,e){return function(t,n){e(t,n,i)}}function he(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)}function Ii(i,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(i,t):r?r.value=t:e.set(i,t),t}const xt=new Map;xt.set("false",!1);xt.set("true",!0);xt.set("isMac",cs);xt.set("isLinux",l1);xt.set("isWindows",Eg);xt.set("isWeb",sv);xt.set("isMacNative",cs&&!sv);xt.set("isEdge",h1);xt.set("isFirefox",f1);xt.set("isChrome",g1);xt.set("isSafari",p1);var Wp;(function(i){i[i.False=0]="False",i[i.True=1]="True",i[i.Defined=2]="Defined",i[i.Not=3]="Not",i[i.Equals=4]="Equals",i[i.NotEquals=5]="NotEquals",i[i.And=6]="And",i[i.Regex=7]="Regex",i[i.NotRegex=8]="NotRegex",i[i.Or=9]="Or",i[i.In=10]="In",i[i.NotIn=11]="NotIn",i[i.Greater=12]="Greater",i[i.GreaterEquals=13]="GreaterEquals",i[i.Smaller=14]="Smaller",i[i.SmallerEquals=15]="SmallerEquals"})(Wp||(Wp={}));class An{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return Ln.INSTANCE}}An.INSTANCE=new An;class Ln{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return An.INSTANCE}}Ln.INSTANCE=new Ln;class Ss{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(e,t=null){const n=xt.get(e);return typeof n=="boolean"?n?Ln.INSTANCE:An.INSTANCE:new Ss(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:jv(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=xt.get(this.key);return typeof e=="boolean"?e?Ln.INSTANCE:An.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||(this.negated=ia.create(this.key,this)),this.negated}}class Yc{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}static create(e,t,n=null){if(typeof t=="boolean")return t?Ss.create(e,n):ia.create(e,n);const r=xt.get(e);return typeof r=="boolean"?t===(r?"true":"false")?Ln.INSTANCE:An.INSTANCE:new Yc(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:zv(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=xt.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Ln.INSTANCE:An.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Zc.create(this.key,this.value,this)),this.negated}}class Zc{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}static create(e,t,n=null){if(typeof t=="boolean")return t?ia.create(e,n):Ss.create(e,n);const r=xt.get(e);return typeof r=="boolean"?t===(r?"true":"false")?An.INSTANCE:Ln.INSTANCE:new Zc(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:zv(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=xt.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?An.INSTANCE:Ln.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Yc.create(this.key,this.value,this)),this.negated}}class ia{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(e,t=null){const n=xt.get(e);return typeof n=="boolean"?n?An.INSTANCE:Ln.INSTANCE:new ia(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:jv(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=xt.get(this.key);return typeof e=="boolean"?e?An.INSTANCE:Ln.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||(this.negated=Ss.create(this.key,this)),this.negated}}class Kr extends Ss{constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?Kr._info.push({...n,key:e}):n!==!0&&Kr._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}static all(){return Kr._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return Yc.create(this.key,e)}notEqualsTo(e){return Zc.create(this.key,e)}}Kr._info=[];function jv(i,e){return i<e?-1:i>e?1:0}function zv(i,e,t,n){return i<t?-1:i>t?1:e<n?-1:e>n?1:0}function Rb(i){const e=i;return typeof e?.id=="string"&&x.isUri(e.configPath)}class Ib{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return Yn(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}class xb{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?mo.isErrorNoTelemetry(e)?new mo(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}function ud(i){return i?new Error(`readonly property '${i} cannot be changed'`):new Error("readonly property cannot be changed")}function ji(i){const e=new Error(`${i} has been disposed`);return e.name="DISPOSED",e}class Fb extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}}class mo extends Error{constructor(e){super(e),this.name="ErrorNoTelemetry"}static fromError(e){if(e instanceof mo)return e;const t=new mo;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="ErrorNoTelemetry"}}const pa=typeof Buffer<"u";let dd,ld;class Ht{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static alloc(e){return pa?new Ht(Buffer.allocUnsafe(e)):new Ht(new Uint8Array(e))}static wrap(e){return pa&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new Ht(e)}static fromString(e,t){return!(t?.dontUseNodeBuffer||!1)&&pa?new Ht(Buffer.from(e)):(dd||(dd=new TextEncoder),new Ht(dd.encode(e)))}static fromByteArray(e){const t=Ht.alloc(e.length);for(let n=0,r=e.length;n<r;n++)t.buffer[n]=e[n];return t}static concat(e,t){if(typeof t>"u"){t=0;for(let s=0,o=e.length;s<o;s++)t+=e[s].byteLength}const n=Ht.alloc(t);let r=0;for(let s=0,o=e.length;s<o;s++){const a=e[s];n.set(a,r),r+=a.byteLength}return n}clone(){const e=Ht.alloc(this.byteLength);return e.set(this),e}toString(){return pa?this.buffer.toString():(ld||(ld=new TextDecoder),ld.decode(this.buffer))}slice(e,t){return new Ht(this.buffer.subarray(e,t))}set(e,t){if(e instanceof Ht)this.buffer.set(e.buffer,t);else if(e instanceof Uint8Array)this.buffer.set(e,t);else if(e instanceof ArrayBuffer)this.buffer.set(new Uint8Array(e),t);else if(ArrayBuffer.isView(e))this.buffer.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t);else throw new Error("Unknown argument 'array'")}readUInt32BE(e){return Mb(this.buffer,e)}writeUInt32BE(e,t){Ab(this.buffer,e,t)}readUInt32LE(e){return Lb(this.buffer,e)}writeUInt32LE(e,t){Ob(this.buffer,e,t)}readUInt8(e){return $b(this.buffer,e)}writeUInt8(e,t){Nb(this.buffer,e,t)}}function Mb(i,e){return i[e]*2**24+i[e+1]*2**16+i[e+2]*2**8+i[e+3]}function Ab(i,e,t){i[t+3]=e,e=e>>>8,i[t+2]=e,e=e>>>8,i[t+1]=e,e=e>>>8,i[t]=e}function Lb(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0|i[e+2]<<16>>>0|i[e+3]<<24>>>0}function Ob(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255,e=e>>>8,i[t+2]=e&255,e=e>>>8,i[t+3]=e&255}function $b(i,e){return i[e]}function Nb(i,e,t){i[t]=e}const Hb={ThemingContribution:"base.contributions.theming"};class qb extends Jt{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}getColor(e,t){let n=this.theme.getColor(e);return n&&t&&(n=t(n,this.theme)),n?n.toString():null}}const Wb={JSONContribution:"base.contributions.json"},hd="done",fd="active",ma="infinite",va="infinite-long-running",gd="discrete",Ub={progressBarBackground:Mt.fromHex("#0E70C0")};class eu extends Jt{constructor(e,t){super(),this.options=t||Object.create(null),Qo(this.options,Ub,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this.showDelayedScheduler=this._register(new ja(()=>vp(this.element),0)),this.longRunningScheduler=this._register(new ja(()=>this.infiniteLongRunning(),eu.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(fd,ma,va,gd),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}done(){return this.doDone(!0)}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(hd),this.element.classList.contains(ma)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(gd,hd,va),this.element.classList.add(fd,ma),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(va)}total(e){return this.workedVal=0,this.totalWork=e,this.element.setAttribute("aria-valuemax",e.toString()),this}hasTotal(){return kg(this.totalWork)}worked(e){return e=Math.max(1,Number(e)),this.doSetWorked(this.workedVal+e)}setWorked(e){return e=Math.max(1,Number(e)),this.doSetWorked(e)}doSetWorked(e){const t=this.totalWork||100;return this.workedVal=e,this.workedVal=Math.min(t,this.workedVal),this.element.classList.remove(ma,va,hd),this.element.classList.add(fd,gd),this.element.setAttribute("aria-valuenow",e.toString()),this.bit.style.width=100*(this.workedVal/t)+"%",this}getContainer(){return this.element}show(e){this.showDelayedScheduler.cancel(),typeof e=="number"?this.showDelayedScheduler.schedule(e):vp(this.element)}hide(){y1(this.element),this.showDelayedScheduler.cancel()}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}eu.LONG_RUNNING_INFINITE_THRESHOLD=1e4;class vo extends Jt{constructor(e=!1){super(),this._onDidEncounterLanguage=this._register(new ce),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onDidChange=this._register(new ce({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,vo.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new cv(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){vo.instanceCount--,super.dispose()}registerLanguage(e){return this._registry.registerLanguage(e)}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getRegisteredLanguageIds(){return this._registry.getRegisteredLanguageIds()}getSortedRegisteredLanguageNames(){return this._registry.getSortedRegisteredLanguageNames()}getLanguageName(e){return this._registry.getLanguageName(e)}getMimeType(e){return this._registry.getMimeType(e)}getIcon(e){return this._registry.getIcon(e)}getExtensions(e){return this._registry.getExtensions(e)}getFilenames(e){return this._registry.getFilenames(e)}getConfigurationFiles(e){return this._registry.getConfigurationFiles(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const n=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return uv(n,null)}createById(e){return new pd(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByMimeType(e){return new pd(this.onDidChange,()=>{const t=this.getLanguageIdByMimeType(e);return this._createAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new pd(this.onDidChange,()=>{const n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=dv),this._encounteredLanguages.has(e)||(this._encounteredLanguages.add(e),w1.getOrCreate(e),this._onDidEncounterLanguage.fire(e)),e}}vo.instanceCount=0;class pd{constructor(e,t){this._onDidChangeLanguages=e,this._selector=t,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new ce({onLastListenerRemove:()=>{this._dispose()}})),this._emitter.event}_evaluate(){const e=this._selector();e!==this.languageId&&(this.languageId=e,this._emitter?.fire(this.languageId))}}var Up;(function(i){i.DEFAULT={allowTrailingComma:!0}})(Up||(Up={}));var jp,zp;class jb{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class zb{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?pv(e,this._value,0,e.length,this._from,this._to):mv(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Bv{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const n=this._value.charCodeAt(t);if(!(n===47||this._splitOnBackslash&&n===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?pv(e,this._value,0,e.length,this._from,this._to):mv(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Bb{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new Bv(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return tl(e,this._value.scheme);if(this._states[this._stateIdx]===2)return tl(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return Li(e,this._value.query);if(this._states[this._stateIdx]===5)return Li(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class _a{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}class qr{constructor(e){this._iter=e}static forUris(e=()=>!1,t=()=>!1){return new qr(new Bb(e,t))}static forPaths(e=!1){return new qr(new Bv(void 0,!e))}static forStrings(){return new qr(new jb)}static forConfigKeys(){return new qr(new zb)}clear(){this._root=void 0}fill(e,t){if(t){const n=t.slice(0);$p(n);for(const r of n)this.set(r,e)}else{const n=e.slice(0);$p(n);for(const r of n)this.set(r[0],r[1])}}set(e,t){const n=this._iter.reset(e);let r;this._root||(this._root=new _a,this._root.segment=n.value());const s=[];for(r=this._root;;){const a=n.cmp(r.segment);if(a>0)r.left||(r.left=new _a,r.left.segment=n.value()),s.push([-1,r]),r=r.left;else if(a<0)r.right||(r.right=new _a,r.right.segment=n.value()),s.push([1,r]),r=r.right;else if(n.hasNext())n.next(),r.mid||(r.mid=new _a,r.mid.segment=n.value()),s.push([0,r]),r=r.mid;else break}const o=r.value;r.value=t,r.key=e;for(let a=s.length-1;a>=0;a--){const c=s[a][1];c.updateHeight();const u=c.balanceFactor();if(u<-1||u>1){const l=s[a][0],g=s[a+1][0];if(l===1&&g===1)s[a][1]=c.rotateLeft();else if(l===-1&&g===-1)s[a][1]=c.rotateRight();else if(l===1&&g===-1)c.right=s[a+1][1]=s[a+1][1].rotateRight(),s[a][1]=c.rotateLeft();else if(l===-1&&g===1)c.left=s[a+1][1]=s[a+1][1].rotateLeft(),s[a][1]=c.rotateRight();else throw new Error;if(a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}return o}get(e){return this._getNode(e)?.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const n=this._iter.reset(e),r=[];let s=this._root;for(;s;){const o=n.cmp(s.segment);if(o>0)r.push([-1,s]),s=s.left;else if(o<0)r.push([1,s]),s=s.right;else if(n.hasNext())n.next(),r.push([0,s]),s=s.mid;else break}if(!!s){if(t?(s.left=void 0,s.mid=void 0,s.right=void 0,s.height=1):(s.key=void 0,s.value=void 0),!s.mid&&!s.value)if(s.left&&s.right){const o=this._min(s.right),{key:a,value:c,segment:u}=o;this._delete(o.key,!1),s.key=a,s.value=c,s.segment=u}else{const o=s.left??s.right;if(r.length>0){const[a,c]=r[r.length-1];switch(a){case-1:c.left=o;break;case 0:c.mid=o;break;case 1:c.right=o;break}}else this._root=o}for(let o=r.length-1;o>=0;o--){const a=r[o][1];a.updateHeight();const c=a.balanceFactor();if(c>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),r[o][1]=a.rotateLeft()):c<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),r[o][1]=a.rotateRight()),o>0)switch(r[o-1][0]){case-1:r[o-1][1].left=r[o][1];break;case 1:r[o-1][1].right=r[o][1];break;case 0:r[o-1][1].mid=r[o][1];break}else this._root=r[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,r;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),r=n.value||r,n=n.mid;else break}return n&&n.value||r}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){!e||(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}_isBalanced(){const e=t=>{if(!t)return!0;const n=t.balanceFactor();return n<-1||n>1?!1:e(t.left)&&e(t.right)};return e(this._root)}}class Vb{constructor(e,t){this.uri=e,this.value=t}}class dr{constructor(e,t){this[jp]="ResourceMap",e instanceof dr?(this.map=new Map(e.map),this.toKey=t??dr.defaultToKey):(this.map=new Map,this.toKey=e??dr.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new Vb(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[n,r]of this.map)e(r.value,r.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(jp=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}}dr.defaultToKey=i=>i.toString();class Kb{constructor(e,t){this[zp]="ResourceSet",!e||typeof e=="function"?this._map=new dr(e):(this._map=new dr(t),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach((n,r)=>e.call(t,r,r,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(zp=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}class Pn{constructor(e={},t=[],n=[]){this._contents=e,this._keys=t,this._overrides=n,this.frozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}isFrozen(){return this.frozen}getValue(e){return e?Ba(this.contents,e):this.contents}getOverrideValue(e,t){const n=this.getContentsForOverrideIdentifer(t);return n?e?Ba(n,e):n:void 0}getKeysForOverrideIdentifier(e){const t=[];for(const n of this.overrides)n.identifiers.includes(e)&&t.push(...n.keys);return Zi(t)}getAllOverrideIdentifiers(){const e=[];for(const t of this.overrides)e.push(...t.identifiers);return Zi(e)}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=Un(this.contents),n=Un(this.overrides),r=[...this.keys];for(const s of e)if(!s.isEmpty()){this.mergeContents(t,s.contents);for(const o of s.overrides){const[a]=n.filter(c=>mr(c.identifiers,o.identifiers));a?(this.mergeContents(a.contents,o.contents),a.keys.push(...o.keys),a.keys=Zi(a.keys)):n.push(Un(o))}for(const o of s.keys)r.indexOf(o)===-1&&r.push(o)}return new Pn(t,r,n)}freeze(){return this.frozen=!0,this}clone(){return new Pn(Un(this.contents),[...this.keys],Un(this.overrides))}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const n={};for(const r of Zi([...Object.keys(this.contents),...Object.keys(t)])){let s=this.contents[r];const o=t[r];o&&(typeof s=="object"&&typeof o=="object"?(s=Un(s),this.mergeContents(s,o)):s=o),n[r]=s}return new Pn(n,this.keys,this.overrides)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&us(e[n])&&us(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=Un(t[n])}}checkAndFreeze(e){return this.frozen&&!Object.isFrozen(e)?vv(e):e}getContentsForOverrideIdentifer(e){let t=null,n=null;const r=s=>{s&&(n?this.mergeContents(n,s):n=Un(s))};for(const s of this.overrides)mr(s.identifiers,[e])?t=s.contents:s.identifiers.includes(e)&&r(s.contents);return r(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),$1(this.contents,e,t,n=>{throw new Error(n)})}removeValue(e){this.removeKey(e)&&N1(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)e.indexOf(this.keys[n])===0&&(t=n);this.keys.splice(t,1,e)}removeKey(e){const t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}class Og{constructor(e,t,n,r,s=new Pn,o=new Pn,a=new In,c=new Pn,u=new In,l=!0){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=n,this._localUserConfiguration=r,this._remoteUserConfiguration=s,this._workspaceConfiguration=o,this._folderConfigurations=a,this._memoryConfiguration=c,this._memoryConfigurationByResource=u,this._freeze=l,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new In,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidatedConfigurationModel(e,t,n).getValue(e)}updateValue(e,t,n={}){let r;n.resource?(r=this._memoryConfigurationByResource.get(n.resource),r||(r=new Pn,this._memoryConfigurationByResource.set(n.resource,r))):r=this._memoryConfiguration,t===void 0?r.removeValue(e):r.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,n){const r=this.getConsolidatedConfigurationModel(e,t,n),s=this.getFolderConfigurationModelForResource(t.resource,n),o=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=t.overrideIdentifier?this._defaultConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._defaultConfiguration.freeze().getValue(e),c=this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration.freeze().getValue(e),u=this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration.freeze().getValue(e),l=t.overrideIdentifier?this.userConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.userConfiguration.freeze().getValue(e),g=t.overrideIdentifier?this.localUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.localUserConfiguration.freeze().getValue(e),h=t.overrideIdentifier?this.remoteUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.remoteUserConfiguration.freeze().getValue(e),d=n?t.overrideIdentifier?this._workspaceConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._workspaceConfiguration.freeze().getValue(e):void 0,p=s?t.overrideIdentifier?s.freeze().override(t.overrideIdentifier).getValue(e):s.freeze().getValue(e):void 0,_=t.overrideIdentifier?o.override(t.overrideIdentifier).getValue(e):o.getValue(e),b=r.getValue(e),k=Zi(r.overrides.map(y=>y.identifiers).flat()).filter(y=>r.getOverrideValue(e,y)!==void 0);return{defaultValue:a,policyValue:c,applicationValue:u,userValue:l,userLocalValue:g,userRemoteValue:h,workspaceValue:d,workspaceFolderValue:p,memoryValue:_,value:b,default:a!==void 0?{value:this._defaultConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this._defaultConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,policy:c!==void 0?{value:c}:void 0,application:u!==void 0?{value:u,override:t.overrideIdentifier?this.applicationConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,user:l!==void 0?{value:this.userConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.userConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,userLocal:g!==void 0?{value:this.localUserConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.localUserConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,userRemote:h!==void 0?{value:this.remoteUserConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.remoteUserConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,workspace:d!==void 0?{value:this._workspaceConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this._workspaceConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,workspaceFolder:p!==void 0?{value:s?.freeze().getValue(e),override:t.overrideIdentifier?s?.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,memory:_!==void 0?{value:o.getValue(e),override:t.overrideIdentifier?o.getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,overrideIdentifiers:k.length?k:void 0}}keys(e){const t=this.getFolderConfigurationModelForResource(void 0,e);return{default:this._defaultConfiguration.freeze().keys,user:this.userConfiguration.freeze().keys,workspace:this._workspaceConfiguration.freeze().keys,workspaceFolder:t?t.freeze().keys:[]}}updateDefaultConfiguration(e){this._defaultConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updatePolicyConfiguration(e){this._policyConfiguration=e}updateApplicationConfiguration(e){this._applicationConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateLocalUserConfiguration(e){this._localUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateRemoteUserConfiguration(e){this._remoteUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateWorkspaceConfiguration(e){this._workspaceConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateFolderConfiguration(e,t){this._folderConfigurations.set(e,t),this._foldersConsolidatedConfigurations.delete(e)}deleteFolderConfiguration(e){this.folderConfigurations.delete(e),this._foldersConsolidatedConfigurations.delete(e)}compareAndUpdateDefaultConfiguration(e,t){const n=[];if(!t){const{added:r,updated:s,removed:o}=wi(this._defaultConfiguration,e);t=[...r,...s,...o]}for(const r of t)for(const s of R1(r)){const o=this._defaultConfiguration.getKeysForOverrideIdentifier(s),a=e.getKeysForOverrideIdentifier(s),c=[...a.filter(u=>o.indexOf(u)===-1),...o.filter(u=>a.indexOf(u)===-1),...o.filter(u=>!Rg(this._defaultConfiguration.override(s).getValue(u),e.override(s).getValue(u)))];n.push([s,c])}return this.updateDefaultConfiguration(e),{keys:t,overrides:n}}compareAndUpdatePolicyConfiguration(e){const{added:t,updated:n,removed:r}=wi(this._policyConfiguration,e),s=[...t,...n,...r];return s.length&&this.updatePolicyConfiguration(e),{keys:s,overrides:[]}}compareAndUpdateApplicationConfiguration(e){const{added:t,updated:n,removed:r,overrides:s}=wi(this.applicationConfiguration,e),o=[...t,...n,...r];return o.length&&this.updateApplicationConfiguration(e),{keys:o,overrides:s}}compareAndUpdateLocalUserConfiguration(e){const{added:t,updated:n,removed:r,overrides:s}=wi(this.localUserConfiguration,e),o=[...t,...n,...r];return o.length&&this.updateLocalUserConfiguration(e),{keys:o,overrides:s}}compareAndUpdateRemoteUserConfiguration(e){const{added:t,updated:n,removed:r,overrides:s}=wi(this.remoteUserConfiguration,e),o=[...t,...n,...r];return o.length&&this.updateRemoteUserConfiguration(e),{keys:o,overrides:s}}compareAndUpdateWorkspaceConfiguration(e){const{added:t,updated:n,removed:r,overrides:s}=wi(this.workspaceConfiguration,e),o=[...t,...n,...r];return o.length&&this.updateWorkspaceConfiguration(e),{keys:o,overrides:s}}compareAndUpdateFolderConfiguration(e,t){const n=this.folderConfigurations.get(e),{added:r,updated:s,removed:o,overrides:a}=wi(n,t),c=[...r,...s,...o];return(c.length||!n)&&this.updateFolderConfiguration(e,t),{keys:c,overrides:a}}compareAndDeleteFolderConfiguration(e){const t=this.folderConfigurations.get(e);if(!t)throw new Error("Unknown folder");this.deleteFolderConfiguration(e);const{added:n,updated:r,removed:s,overrides:o}=wi(t,void 0);return{keys:[...n,...r,...s],overrides:o}}get defaults(){return this._defaultConfiguration}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}get workspaceConfiguration(){return this._workspaceConfiguration}get folderConfigurations(){return this._folderConfigurations}getConsolidatedConfigurationModel(e,t,n){let r=this.getConsolidatedConfigurationModelForResource(t,n);return t.overrideIdentifier&&(r=r.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(r=r.merge(this._policyConfiguration)),r}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const r=t.getFolder(e);r&&(n=this.getFolderConsolidatedConfiguration(r.uri)||n);const s=this._memoryConfigurationByResource.get(e);s&&(n=n.merge(s))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),r=this._folderConfigurations.get(e);r?(t=n.merge(r),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const n=t.getFolder(e);if(n)return this._folderConfigurations.get(n.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:r,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:r,keys:s}]),e},[])}}allKeys(){const e=new Set;return this._defaultConfiguration.freeze().keys.forEach(t=>e.add(t)),this.userConfiguration.freeze().keys.forEach(t=>e.add(t)),this._workspaceConfiguration.freeze().keys.forEach(t=>e.add(t)),this._folderConfigurations.forEach(t=>t.freeze().keys.forEach(n=>e.add(n))),[...e.values()]}allOverrideIdentifiers(){const e=new Set;return this._defaultConfiguration.freeze().getAllOverrideIdentifiers().forEach(t=>e.add(t)),this.userConfiguration.freeze().getAllOverrideIdentifiers().forEach(t=>e.add(t)),this._workspaceConfiguration.freeze().getAllOverrideIdentifiers().forEach(t=>e.add(t)),this._folderConfigurations.forEach(t=>t.freeze().getAllOverrideIdentifiers().forEach(n=>e.add(n))),[...e.values()]}getAllKeysForOverrideIdentifier(e){const t=new Set;return this._defaultConfiguration.getKeysForOverrideIdentifier(e).forEach(n=>t.add(n)),this.userConfiguration.getKeysForOverrideIdentifier(e).forEach(n=>t.add(n)),this._workspaceConfiguration.getKeysForOverrideIdentifier(e).forEach(n=>t.add(n)),this._folderConfigurations.forEach(n=>n.getKeysForOverrideIdentifier(e).forEach(r=>t.add(r))),[...t.values()]}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.policy),r=this.parseConfigurationModel(e.application),s=this.parseConfigurationModel(e.user),o=this.parseConfigurationModel(e.workspace),a=e.folders.reduce((c,u)=>(c.set(x.revive(u[0]),this.parseConfigurationModel(u[1])),c),new In);return new Og(t,n,r,s,new Pn,o,a,new Pn,new In,!1)}static parseConfigurationModel(e){return new Pn(e.contents,e.keys,e.overrides).freeze()}}function wi(i,e){const{added:t,removed:n,updated:r}=Bp(e,i),s=[],o=i?.getAllOverrideIdentifiers()||[],a=e?.getAllOverrideIdentifiers()||[];if(e){const c=a.filter(u=>!o.includes(u));for(const u of c)s.push([u,e.getKeysForOverrideIdentifier(u)])}if(i){const c=o.filter(u=>!a.includes(u));for(const u of c)s.push([u,i.getKeysForOverrideIdentifier(u)])}if(e&&i){for(const c of o)if(a.includes(c)){const u=Bp({contents:i.getOverrideValue(void 0,c)||{},keys:i.getKeysForOverrideIdentifier(c)},{contents:e.getOverrideValue(void 0,c)||{},keys:e.getKeysForOverrideIdentifier(c)});s.push([c,[...u.added,...u.removed,...u.updated]])}}return{added:t,removed:n,updated:r,overrides:s}}function Bp(i,e){const t=i?e?i.keys.filter(s=>e.keys.indexOf(s)===-1):[...i.keys]:[],n=e?i?e.keys.filter(s=>i.keys.indexOf(s)===-1):[...e.keys]:[],r=[];if(i&&e){for(const s of e.keys)if(i.keys.indexOf(s)!==-1){const o=Ba(e.contents,s),a=Ba(i.contents,s);Rg(o,a)||r.push(s)}}return{added:t,removed:n,updated:r}}function hn(){return new Date().toISOString()}var Zn;(function(i){i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.Off=6]="Off"})(Zn||(Zn={}));const Vv=Zn.Info;class Gb extends Jt{constructor(){super(...arguments),this.level=Vv,this._onDidChangeLogLevel=this._register(new ce),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class Jb extends Gb{constructor(e=Vv){super(),this.setLevel(e),this.useColors=!Eg}trace(e,...t){this.getLevel()<=Zn.Trace&&(this.useColors?console.log(`\x1B[90m[main ${hn()}]\x1B[0m`,e,...t):console.log(`[main ${hn()}]`,e,...t))}debug(e,...t){this.getLevel()<=Zn.Debug&&(this.useColors?console.log(`\x1B[90m[main ${hn()}]\x1B[0m`,e,...t):console.log(`[main ${hn()}]`,e,...t))}info(e,...t){this.getLevel()<=Zn.Info&&(this.useColors?console.log(`\x1B[90m[main ${hn()}]\x1B[0m`,e,...t):console.log(`[main ${hn()}]`,e,...t))}warn(e,...t){this.getLevel()<=Zn.Warning&&(this.useColors?console.warn(`\x1B[93m[main ${hn()}]\x1B[0m`,e,...t):console.warn(`[main ${hn()}]`,e,...t))}error(e,...t){this.getLevel()<=Zn.Error&&(this.useColors?console.error(`\x1B[91m[main ${hn()}]\x1B[0m`,e,...t):console.error(`[main ${hn()}]`,e,...t))}critical(e,...t){this.getLevel()<=Zn.Critical&&(this.useColors?console.error(`\x1B[90m[main ${hn()}]\x1B[0m`,e,...t):console.error(`[main ${hn()}]`,e,...t))}dispose(){}flush(){}}class Qb extends Jt{constructor(e){super(),this.logger=e,this._register(e)}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}critical(e,...t){this.logger.critical(e,...t)}flush(){this.logger.flush()}}function Vp(i){return i&&typeof i=="object"&&(!i.overrideIdentifier||typeof i.overrideIdentifier=="string")&&(!i.resource||i.resource instanceof x)}class Xb{constructor(){this._onDidChangeConfiguration=new ce,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new za(new I1,new rd,new rd,new rd)}getValue(e,t){const n=typeof e=="string"?e:void 0,r=Vp(e)?e:Vp(t)?t:{};return this._configuration.getValue(n,r,void 0)}updateValues(e){const t={data:this._configuration.toData()},n=[];for(const r of e){const[s,o]=r;this.getValue(s)!==o&&(this._configuration.updateValue(s,o),n.push(s))}if(n.length>0){const r=new gv({keys:n,overrides:[]},t,this._configuration);r.source=8,r.sourceConfig=null,this._onDidChangeConfiguration.fire(r)}return Promise.resolve()}updateValue(e,t,n,r){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}keys(){return this._configuration.keys(void 0)}reloadConfiguration(){return Promise.resolve(void 0)}getConfigurationData(){const e={contents:{},keys:[],overrides:[]};return{defaults:e,policy:e,application:e,user:e,workspace:e,folders:[]}}}const En=Object.prototype.hasOwnProperty,Kp="vs.editor.nullLanguage";class Yb{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(Kp,0),this._register(dv,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||Kp}}class _o extends Jt{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new ce),this.onDidChange=this._onDidChange.event,_o.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new Yb,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(id.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){_o.instanceCount--,super.dispose()}setDynamicLanguages(e){this._dynamicLanguages=e,this._initializeFromRegistry()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},b1();const e=[].concat(id.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}registerLanguage(e){return id.registerLanguage(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(r=>{this._lowercaseNameMap[r.toLowerCase()]=n.identifier}),n.mimetypes.forEach(r=>{this._mimeTypesMap[r]=n.identifier})}),gi.as(Tg.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;En.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let r=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),r=t.mimetypes[0]),r||(r=`text/x-${n}`,e.mimetypes.push(r)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)ha({id:n,mime:r,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)ha({id:n,mime:r,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)ha({id:n,mime:r,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const c=new RegExp(a);Pg(c)||ha({id:n,mime:r,firstline:c},this._warnOnOverwrite)}catch(c){Xo(c)}}e.aliases.push(n);let s=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?s=[null]:s=t.aliases),s!==null)for(const a of s)!a||a.length===0||e.aliases.push(a);const o=s!==null&&s.length>0;if(!(o&&s[0]===null)){const a=(o?s[0]:null)||n;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?En.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getSortedRegisteredLanguageNames(){const e=[];for(const t in this._nameMap)En.call(this._nameMap,t)&&e.push({languageName:t,languageId:this._nameMap[t]});return e.sort((t,n)=>tl(t.languageName,n.languageName)),e}getLanguageName(e){return En.call(this._languages,e)?this._languages[e].name:null}getMimeType(e){return En.call(this._languages,e)&&this._languages[e].mimetypes[0]||null}getExtensions(e){return En.call(this._languages,e)?this._languages[e].extensions:[]}getFilenames(e){return En.call(this._languages,e)?this._languages[e].filenames:[]}getIcon(e){return En.call(this._languages,e)&&this._languages[e].icons[0]||null}getConfigurationFiles(e){return En.call(this._languages,e)?this._languages[e].configurationFiles||[]:[]}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return En.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&En.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:C1(e,t)}}_o.instanceCount=0;class Zb{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){const r=this.renderedElements.findIndex(s=>s.templateData===n);if(r>=0){const s=this.renderedElements[r];this.trait.unrender(n),s.index=t}else{const s={index:t,templateData:n};this.renderedElements.push(s)}this.trait.renderIndex(t,n)}splice(e,t,n){const r=[];for(const s of this.renderedElements)s.index<e?r.push(s):s.index>=e+t&&r.push({index:s.index+n-t,templateData:s.templateData});this.renderedElements=r}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}class ll{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new ce,this.onChange=this._onChange.event}get name(){return this._trait}get renderer(){return new Zb(this)}splice(e,t,n){t=Math.max(0,Math.min(t,this.length-e));const r=n.length-t,s=e+t,o=[...this.sortedIndexes.filter(c=>c<e),...n.map((c,u)=>c?u+e:-1).filter(c=>c!==-1),...this.sortedIndexes.filter(c=>c>=s).map(c=>c+r)],a=this.length+r;if(this.sortedIndexes.length>0&&o.length===0&&a>0){const c=this.sortedIndexes.find(u=>u>=e)??a-1;o.push(Math.min(c,a-1))}this.renderer.splice(e,t,n.length),this._set(o,o),this.length=a}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(Jp),t)}_set(e,t,n){const r=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=hl(s,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:n}),r}get(){return this.indexes}contains(e){return H1(this.sortedIndexes,e,Jp)>=0}dispose(){Gt(this._onChange)}}class eC extends ll{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class md{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,n.map(()=>!1));const r=this.trait.get().map(o=>this.identityProvider.getId(this.view.element(o)).toString()),s=n.map(o=>r.indexOf(this.identityProvider.getId(o).toString())>-1);this.trait.splice(e,t,s)}}function yo(i){return i.tagName==="INPUT"||i.tagName==="TEXTAREA"}function eo(i){return i.classList.contains("monaco-editor")?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:eo(i.parentElement)}class tC{constructor(e,t,n){this.list=e,this.view=t,this.disposables=new st,this.multipleSelectionDisposables=new st,this.onKeyDown.filter(r=>r.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport!==!1&&this.onKeyDown.filter(r=>(cs?r.metaKey:r.ctrlKey)&&r.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return this.disposables.add(N.chain(this.disposables.add(new kn(this.view.domNode,"keydown")).event).filter(e=>!yo(e.target)).map(e=>new ho(e)))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(cs?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(_v(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}var oo;(function(i){i[i.Automatic=0]="Automatic",i[i.Trigger=1]="Trigger"})(oo||(oo={}));var Wr;(function(i){i[i.Idle=0]="Idle",i[i.Typing=1]="Typing"})(Wr||(Wr={}));const nC=new class{mightProducePrintableCharacter(i){return i.ctrlKey||i.metaKey||i.altKey?!1:i.keyCode>=31&&i.keyCode<=56||i.keyCode>=21&&i.keyCode<=30||i.keyCode>=93&&i.keyCode<=102||i.keyCode>=80&&i.keyCode<=90}};class iC{constructor(e,t,n,r,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.keyboardNavigationEventFilter=r,this.delegate=s,this.enabled=!1,this.state=Wr.Idle,this.mode=oo.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new st,this.disposables=new st,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??oo.Automatic}trigger(){this.triggered=!this.triggered}enable(){if(this.enabled)return;let e=!1;const t=this.enabledDisposables.add(N.chain(this.enabledDisposables.add(new kn(this.view.domNode,"keydown")).event)).filter(s=>!yo(s.target)).filter(()=>this.mode===oo.Automatic||this.triggered).map(s=>new ho(s)).filter(s=>e||this.keyboardNavigationEventFilter(s)).filter(s=>this.delegate.mightProducePrintableCharacter(s)).forEach(nl).map(s=>s.browserEvent.key).event,n=N.debounce(t,()=>null,800,void 0,void 0,this.enabledDisposables);N.reduce(N.any(t,n),(s,o)=>o===null?null:(s||"")+o,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){!this.enabled||(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){const e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){const t=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(e[0]));t&&q1(t)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=Wr.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,r=this.state===Wr.Idle?1:0;this.state=Wr.Typing;for(let s=0;s<this.list.length;s++){const o=(n+s+r)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),c=a&&a.toString();if(typeof c>"u"||W1(e,c)){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class rC{constructor(e,t){this.list=e,this.view=t,this.disposables=new st,this.disposables.add(N.chain(this.disposables.add(new kn(t.domNode,"keydown")).event)).filter(r=>!yo(r.target)).map(r=>new ho(r)).filter(r=>r.keyCode===2&&!r.ctrlKey&&!r.metaKey&&!r.shiftKey&&!r.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const r=n.querySelector("[tabIndex]");if(!r||!(r instanceof HTMLElement)||r.tabIndex===-1)return;const s=window.getComputedStyle(r);s.visibility==="hidden"||s.display==="none"||(e.preventDefault(),e.stopPropagation(),r.focus())}dispose(){this.disposables.dispose()}}function sC(i){return cs?i.browserEvent.metaKey:i.browserEvent.ctrlKey}function oC(i){return i.browserEvent.shiftKey}function aC(i){return i instanceof MouseEvent&&i.button===2}const Gp={isSelectionSingleChangeEvent:sC,isSelectionRangeChangeEvent:oC};class cC{constructor(e){this.list=e,this.disposables=new st,this._onPointer=new ce,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||Gp),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(U1.addTarget(e.getHTMLElement()))),N.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||Gp))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){eo(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(eo(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||yo(e.browserEvent.target)||eo(e.browserEvent.target))return;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),aC(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(yo(e.browserEvent.target)||eo(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof n>"u"&&(n=this.list.getFocus()[0]??t,this.list.setAnchor(n));const r=Math.min(n,t),s=Math.max(n,t),o=_v(r,s+1),a=this.list.getSelection(),c=hC(hl(a,[n]),n);if(c.length===0)return;const u=hl(o,fC(a,c));this.list.setSelection(u,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const r=this.list.getSelection(),s=r.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),r.length===s.length?this.list.setSelection([...s,t],e.browserEvent):this.list.setSelection(s,e.browserEvent)}}dispose(){this.disposables.dispose()}}class uC{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&(e.listBackground.isOpaque()?n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):cs||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionOutline&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { outline-color: ${e.listFocusAndSelectionOutline} !important; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.tableColumnsBorder&&n.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}}const dC={listFocusBackground:Mt.fromHex("#7FB0D0"),listActiveSelectionBackground:Mt.fromHex("#0E639C"),listActiveSelectionForeground:Mt.fromHex("#FFFFFF"),listActiveSelectionIconForeground:Mt.fromHex("#FFFFFF"),listFocusAndSelectionOutline:Mt.fromHex("#90C2F9"),listFocusAndSelectionBackground:Mt.fromHex("#094771"),listFocusAndSelectionForeground:Mt.fromHex("#FFFFFF"),listInactiveSelectionBackground:Mt.fromHex("#3F3F46"),listInactiveSelectionIconForeground:Mt.fromHex("#FFFFFF"),listHoverBackground:Mt.fromHex("#2A2D2E"),listDropBackground:Mt.fromHex("#383B3D"),treeIndentGuidesStroke:Mt.fromHex("#a9a9a9"),tableColumnsBorder:Mt.fromHex("#cccccc").transparent(.2),tableOddRowsBackgroundColor:Mt.fromHex("#cccccc").transparent(.04)},lC={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function hC(i,e){const t=i.indexOf(e);if(t===-1)return[];const n=[];let r=t-1;for(;r>=0&&i[r]===e-(t-r);)n.push(i[r--]);for(n.reverse(),r=t;r<i.length&&i[r]===e+(r-t);)n.push(i[r++]);return n}function hl(i,e){const t=[];let n=0,r=0;for(;n<i.length||r<e.length;)if(n>=i.length)t.push(e[r++]);else if(r>=e.length)t.push(i[n++]);else if(i[n]===e[r]){t.push(i[n]),n++,r++;continue}else i[n]<e[r]?t.push(i[n++]):t.push(e[r++]);return t}function fC(i,e){const t=[];let n=0,r=0;for(;n<i.length||r<e.length;)if(n>=i.length)t.push(e[r++]);else if(r>=e.length)t.push(i[n++]);else if(i[n]===e[r]){n++,r++;continue}else i[n]<e[r]?t.push(i[n++]):r++;return t}const Jp=(i,e)=>i-e;class gC{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,r){let s=0;for(const o of this.renderers)o.renderElement(e,t,n[s++],r)}disposeElement(e,t,n,r){let s=0;for(const o of this.renderers)o.disposeElement?.(e,t,n[s],r),s+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class pC{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const r=this.accessibilityProvider.getAriaLabel(e);r?n.setAttribute("aria-label",r):n.removeAttribute("aria-label");const s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof s=="number"?n.setAttribute("aria-level",`${s}`):n.removeAttribute("aria-level")}disposeTemplate(e){}}class mC{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart?.(e,t)}onDragOver(e,t,n,r){return this.dnd.onDragOver(e,t,n,r)}onDragLeave(e,t,n,r){this.dnd.onDragLeave?.(e,t,n,r)}onDragEnd(e){this.dnd.onDragEnd?.(e)}drop(e,t,n,r){this.dnd.drop(e,t,n,r)}}class vC{constructor(e,t,n,r,s=lC){this.user=e,this._options=s,this.focus=new ll("focused"),this.anchor=new ll("anchor"),this.eventBufferer=new x1,this._ariaLabel="",this.disposables=new st,this._onDidDispose=new ce,this.onDidDispose=this._onDidDispose.event;const o=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():"list";this.selection=new eC(o!=="listbox"),Qo(s,dC,!1);const a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=s.accessibilityProvider,this.accessibilityProvider&&(a.push(new pC(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),r=r.map(u=>new gC(u.templateId,[...a,u]));const c={...s,dnd:s.dnd&&new mC(this,s.dnd)};if(this.view=new F1(t,n,r,c),this.view.domNode.setAttribute("role",o),s.styleController)this.styleController=s.styleController(this.view.domId);else{const u=M1(this.view.domNode);this.styleController=new uC(u,this.view.domId)}if(this.spliceable=new A1([new md(this.focus,this.view,s.identityProvider),new md(this.selection,this.view,s.identityProvider),new md(this.anchor,this.view,s.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new rC(this,this.view)),(typeof s.keyboardSupport!="boolean"||s.keyboardSupport)&&(this.keyboardController=new tC(this,this.view,s),this.disposables.add(this.keyboardController)),s.keyboardNavigationLabelProvider){const u=s.keyboardNavigationDelegate||nC;this.typeNavigationController=new iC(this,this.view,s.keyboardNavigationLabelProvider,s.keyboardNavigationEventFilter??(()=>!0),u),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(s),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return N.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return N.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseUp(){return this.view.onMouseUp}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseMove(){return this.view.onMouseMove}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=this.disposables.add(N.chain(this.disposables.add(new kn(this.view.domNode,"keydown")).event)).map(s=>new ho(s)).filter(s=>e=s.keyCode===58||s.shiftKey&&s.keyCode===68).map(nl).filter(()=>!1).event,n=this.disposables.add(N.chain(this.disposables.add(new kn(this.view.domNode,"keyup")).event)).forEach(()=>e=!1).map(s=>new ho(s)).filter(s=>s.keyCode===58||s.shiftKey&&s.keyCode===68).map(nl).map(({browserEvent:s})=>{const o=this.getFocus(),a=o.length?o[0]:void 0,c=typeof a<"u"?this.view.element(a):void 0,u=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:c,anchor:u,browserEvent:s}}).event,r=this.disposables.add(N.chain(this.view.onContextMenu)).filter(s=>!e).map(({element:s,index:o,browserEvent:a})=>({element:s,index:o,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return N.any(t,n,r)}get onKeyDown(){return this.disposables.add(new kn(this.view.domNode,"keydown")).event}get onKeyUp(){return this.disposables.add(new kn(this.view.domNode,"keyup")).event}get onKeyPress(){return this.disposables.add(new kn(this.view.domNode,"keypress")).event}get onDidFocus(){return N.signal(this.disposables.add(new kn(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return N.signal(this.disposables.add(new kn(this.view.domNode,"blur",!0)).event)}createMouseController(e){return new cC(this)}updateOptions(e={}){this._options={...this._options,...e},this.typeNavigationController?.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),this.keyboardController?.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new Ui(this.user,`Invalid start index: ${e}`);if(t<0)throw new Ui(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}updateWidth(e){this.view.updateWidth(e)}updateElementHeight(e,t){this.view.updateElementHeight(e,t,null)}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollLeft(){return this.view.getScrollLeft()}set scrollLeft(e){this.view.setScrollLeft(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get lastVisibleIndex(){return this.view.lastVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}triggerTypeNavigation(){this.typeNavigationController&&this.typeNavigationController.trigger()}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new Ui(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new Ui(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return uv(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new Ui(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,r){if(this.length===0)return;const s=this.focus.get(),o=this.findNextIndex(s.length>0?s[0]+e:0,t,r);o>-1&&this.setFocus([o],n)}focusPrevious(e=1,t=!1,n,r){if(this.length===0)return;const s=this.focus.get(),o=this.findPreviousIndex(s.length>0?s[0]-e:0,t,r);o>-1&&this.setFocus([o],n)}async focusNextPage(e,t){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const r=this.getFocus()[0];if(r!==n&&(r===void 0||n>r)){const s=this.findPreviousIndex(n,!1,t);s>-1&&r!==s?this.setFocus([s],e):this.setFocus([n],e)}else{const s=this.view.getScrollTop();let o=s+this.view.renderHeight;n>r&&(o-=this.view.elementHeight(n)),this.view.setScrollTop(o),this.view.getScrollTop()!==s&&(this.setFocus([]),await _p(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t){let n;const r=this.view.getScrollTop();r===0?n=this.view.indexAt(r):n=this.view.indexAfter(r-1);const s=this.getFocus()[0];if(s!==n&&(s===void 0||s>=n)){const o=this.findNextIndex(n,!1,t);o>-1&&s!==o?this.setFocus([o],e):this.setFocus([n],e)}else{const o=r;this.view.setScrollTop(r-this.view.renderHeight),this.view.getScrollTop()!==o&&(this.setFocus([]),await _p(0),await this.focusPreviousPage(e,t))}}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const r=this.findNextIndex(e,!1,n);r>-1&&this.setFocus([r],t)}findNextIndex(e,t=!1,n){for(let r=0;r<this.length;r++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let r=0;r<this.length;r++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new Ui(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),r=this.view.elementTop(e),s=this.view.elementHeight(e);if(kg(t)){const o=s-this.view.renderHeight;this.view.setScrollTop(o*L1(t,0,1)+r)}else{const o=r+s,a=n+this.view.renderHeight;r<n&&o>=a||(r<n||o>=a&&s>=this.view.renderHeight?this.view.setScrollTop(r):o>=a&&this.view.setScrollTop(o-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new Ui(this.user,`Invalid index ${e}`);const t=this.view.getScrollTop(),n=this.view.elementTop(e),r=this.view.elementHeight(e);if(n<t||n+r>t+this.view.renderHeight)return null;const s=r-this.view.renderHeight;return Math.abs((t-n)/s)}isDOMFocused(){return this.view.domNode===document.activeElement}getHTMLElement(){return this.view.domNode}getElementID(e){return this.view.getElementDomId(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){const e=this.focus.get();if(e.length>0){let t;this.accessibilityProvider?.getActiveDescendantId&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",t||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}function xi(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}class vt{constructor(e,t,n,r=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=xi(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Rn{constructor(e,t,n,r){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=xi(Math.max(Math.min(1,t),0),3),this.l=xi(Math.max(Math.min(1,n),0),3),this.a=xi(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,r=e.b/255,s=e.a,o=Math.max(t,n,r),a=Math.min(t,n,r);let c=0,u=0;const l=(a+o)/2,g=o-a;if(g>0){switch(u=Math.min(l<=.5?g/(2*l):g/(2-2*l),1),o){case t:c=(n-r)/g+(n<r?6:0);break;case n:c=(r-t)/g+2;break;case r:c=(t-n)/g+4;break}c*=60,c=Math.round(c)}return new Rn(c,u,l,s)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:r,a:s}=e;let o,a,c;if(n===0)o=a=c=r;else{const u=r<.5?r*(1+n):r+n-r*n,l=2*r-u;o=Rn._hue2rgb(l,u,t+1/3),a=Rn._hue2rgb(l,u,t),c=Rn._hue2rgb(l,u,t-1/3)}return new vt(Math.round(o*255),Math.round(a*255),Math.round(c*255),s)}}class Ur{constructor(e,t,n,r){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=xi(Math.max(Math.min(1,t),0),3),this.v=xi(Math.max(Math.min(1,n),0),3),this.a=xi(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,r=e.b/255,s=Math.max(t,n,r),o=Math.min(t,n,r),a=s-o,c=s===0?0:a/s;let u;return a===0?u=0:s===t?u=((n-r)/a%6+6)%6:s===n?u=(r-t)/a+2:u=(t-n)/a+4,new Ur(Math.round(u*60),c,s,e.a)}static toRGBA(e){const{h:t,s:n,v:r,a:s}=e,o=r*n,a=o*(1-Math.abs(t/60%2-1)),c=r-o;let[u,l,g]=[0,0,0];return t<60?(u=o,l=a):t<120?(u=a,l=o):t<180?(l=o,g=a):t<240?(l=a,g=o):t<300?(u=a,g=o):t<=360&&(u=o,g=a),u=Math.round((u+c)*255),l=Math.round((l+c)*255),g=Math.round((g+c)*255),new vt(u,l,g,s)}}class Re{constructor(e){if(e)if(e instanceof vt)this.rgba=e;else if(e instanceof Rn)this._hsla=e,this.rgba=Rn.toRGBA(e);else if(e instanceof Ur)this._hsva=e,this.rgba=Ur.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return Re.Format.CSS.parseHex(e)||Re.red}get hsla(){return this._hsla?this._hsla:Rn.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Ur.fromRGBA(this.rgba)}equals(e){return!!e&&vt.equals(this.rgba,e.rgba)&&Rn.equals(this.hsla,e.hsla)&&Ur.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Re._relativeLuminanceForComponent(this.rgba.r),t=Re._relativeLuminanceForComponent(this.rgba.g),n=Re._relativeLuminanceForComponent(this.rgba.b),r=.2126*e+.7152*t+.0722*n;return xi(r,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}getContrastRatio(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new Re(new Rn(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Re(new Rn(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:r,a:s}=this.rgba;return new Re(new vt(t,n,r,s*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new Re(new vt(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(e){const t=e.rgba,n=this.rgba.a,r=t.a,s=n+r*(1-n);if(s<1e-6)return Re.transparent;const o=this.rgba.r*n/s+t.r*r*(1-n)/s,a=this.rgba.g*n/s+t.g*r*(1-n)/s,c=this.rgba.b*n/s+t.b*r*(1-n)/s;return new Re(new vt(o,a,c,s))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:n,b:r,a:s}=this.rgba;return new Re(new vt(e.rgba.r-s*(e.rgba.r-t),e.rgba.g-s*(e.rgba.g-n),e.rgba.b-s*(e.rgba.b-r),1))}flatten(...e){const t=e.reduceRight((n,r)=>Re._flatten(r,n));return Re._flatten(this,t)}static _flatten(e,t){const n=1-e.rgba.a;return new Re(new vt(n*t.rgba.r+e.rgba.a*e.rgba.r,n*t.rgba.g+e.rgba.a*e.rgba.g,n*t.rgba.b+e.rgba.a*e.rgba.b))}toString(){return this._toString||(this._toString=Re.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const r=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(s-r)/s,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const r=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(r-s)/r,e.darken(n)}}Re.white=new Re(new vt(255,255,255,1));Re.black=new Re(new vt(0,0,0,1));Re.red=new Re(new vt(255,0,0,1));Re.blue=new Re(new vt(0,0,255,1));Re.green=new Re(new vt(0,255,0,1));Re.cyan=new Re(new vt(0,255,255,1));Re.lightgrey=new Re(new vt(211,211,211,1));Re.transparent=new Re(new vt(0,0,0,0));(function(i){(function(e){(function(t){function n(d){return d.rgba.a===1?`rgb(${d.rgba.r}, ${d.rgba.g}, ${d.rgba.b})`:i.Format.CSS.formatRGBA(d)}t.formatRGB=n;function r(d){return`rgba(${d.rgba.r}, ${d.rgba.g}, ${d.rgba.b}, ${+d.rgba.a.toFixed(2)})`}t.formatRGBA=r;function s(d){return d.hsla.a===1?`hsl(${d.hsla.h}, ${(d.hsla.s*100).toFixed(2)}%, ${(d.hsla.l*100).toFixed(2)}%)`:i.Format.CSS.formatHSLA(d)}t.formatHSL=s;function o(d){return`hsla(${d.hsla.h}, ${(d.hsla.s*100).toFixed(2)}%, ${(d.hsla.l*100).toFixed(2)}%, ${d.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(d){const p=d.toString(16);return p.length!==2?"0"+p:p}function c(d){return`#${a(d.rgba.r)}${a(d.rgba.g)}${a(d.rgba.b)}`}t.formatHex=c;function u(d,p=!1){return p&&d.rgba.a===1?i.Format.CSS.formatHex(d):`#${a(d.rgba.r)}${a(d.rgba.g)}${a(d.rgba.b)}${a(Math.round(d.rgba.a*255))}`}t.formatHexA=u;function l(d){return d.isOpaque()?i.Format.CSS.formatHex(d):i.Format.CSS.formatRGBA(d)}t.format=l;function g(d){const p=d.length;if(p===0||d.charCodeAt(0)!==35)return null;if(p===7){const _=16*h(d.charCodeAt(1))+h(d.charCodeAt(2)),b=16*h(d.charCodeAt(3))+h(d.charCodeAt(4)),k=16*h(d.charCodeAt(5))+h(d.charCodeAt(6));return new i(new vt(_,b,k,1))}if(p===9){const _=16*h(d.charCodeAt(1))+h(d.charCodeAt(2)),b=16*h(d.charCodeAt(3))+h(d.charCodeAt(4)),k=16*h(d.charCodeAt(5))+h(d.charCodeAt(6)),y=16*h(d.charCodeAt(7))+h(d.charCodeAt(8));return new i(new vt(_,b,k,y/255))}if(p===4){const _=h(d.charCodeAt(1)),b=h(d.charCodeAt(2)),k=h(d.charCodeAt(3));return new i(new vt(16*_+_,16*b+b,16*k+k))}if(p===5){const _=h(d.charCodeAt(1)),b=h(d.charCodeAt(2)),k=h(d.charCodeAt(3)),y=h(d.charCodeAt(4));return new i(new vt(16*_+_,16*b+b,16*k+k,(16*y+y)/255))}return null}t.parseHex=g;function h(d){switch(d){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(i.Format||(i.Format={}))})(Re||(Re={}));var Qp,Xp;el.prototype.text==null?el.prototype.text=function(i){return this.parse(i).toString()}:console.warn("Useless polyfill: SnippetParser");function un(i,e){Object.defineProperties(i,Object.getOwnPropertyDescriptors(e))}function Kv(i,e,t,n){for(const r of Object.getOwnPropertyNames(e))Object.hasOwnProperty.call(i,r)||(i[r]=function(...s){return t(e[r].call(this,...s.map(n)))})}un(lv.prototype,Qb.prototype);un(S1.prototype,vC.prototype);un(hv.prototype,Ib.prototype);un(cv.prototype,_o.prototype);un(D1.prototype,xb.prototype);un(E1.prototype,Kr.prototype);un(za.prototype,Og.prototype);un(fv.prototype,qr.prototype);un(m1.prototype,Xb.prototype);un(T1.prototype,vo.prototype);un(av.prototype,kb.prototype);un(k1.prototype,qb.prototype);un(P1.prototype,eu.prototype);const Gr=gi.as(Wb.JSONContribution);Gr.getSchemaContributions??(Gr.getSchemaContributions=()=>({schemas:Gr.schemasById}));Gr.onDidChangeSchema??(Gr.onDidChangeSchema=Gr._onDidChangeSchema.event);const vd=gi.as(Hb.ThemingContribution);vd.onThemingParticipantAdded??(vd.onThemingParticipantAdded=vd.onThemingParticipantAddedEmitter.event);const si=gi.as(Tg.Configuration);si.onDidUpdateConfiguration??(si.onDidUpdateConfiguration=si._onDidUpdateConfiguration.event);si.onDidSchemaChange??(si.onDidSchemaChange=si._onDidSchemaChange.event);si.notifyConfigurationSchemaUpdated??(si.notifyConfigurationSchemaUpdated=()=>{si._onDidSchemaChange.fire()});(Qp=av.prototype).onDidClose??(Qp.onDidClose=N.None);function Gv(i){return function(){const e=i.call(this);return e.onDidTriggerButton??(e.onDidTriggerButton=e.onDidTriggerButtonEmitter.event),e}}Ua.prototype.createQuickPick=Gv(Ua.prototype.createQuickPick);Ua.prototype.createInputBox=Gv(Ua.prototype.createInputBox);const _C=v1().find(([i])=>i===_1)[1].ctor;(Xp=_C.prototype).onDidChangeFormatters??(Xp.onDidChangeFormatters=N.None);function Jv(i){return i instanceof rt?Ht.wrap(i.buffer):i}function Qv(i){return i instanceof Ht?rt.wrap(i.buffer):i}for(const i of Object.getOwnPropertyNames(Ht))if(!Object.hasOwnProperty.call(rt,i)){const e=Ht[i];Ht[i]=rt[i]=function(...t){return Qv(e.call(rt,...t.map(Jv)))}}Kv(rt.prototype,Ht.prototype,Qv,Jv);function yC(i){if(i instanceof Re){const e=i.rgba;return new Mt(new O1(e.r,e.g,e.g,e.a))}return i}function wC(i){if(i instanceof Mt){const e=i.rgba;return new Re(new vt(e.r,e.g,e.g,e.a))}return i}Kv(Mt.prototype,Re.prototype,yC,wC);const Ds=Qe("environmentService");const tu=V1,ra=Qe("fileService");var fl;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(fl||(fl={}));var gl;(function(i){i[i.Readonly=1]="Readonly"})(gl||(gl={}));var Xn;(function(i){i.FileExists="EntryExists",i.FileNotFound="EntryNotFound",i.FileNotADirectory="EntryNotADirectory",i.FileIsADirectory="EntryIsADirectory",i.FileExceedsMemoryLimit="EntryExceedsMemoryLimit",i.FileTooLarge="EntryTooLarge",i.FileWriteLocked="EntryWriteLocked",i.NoPermissions="NoPermissions",i.Unavailable="Unavailable",i.Unknown="Unknown"})(Xn||(Xn={}));function bC(i,e){return i.name=e?`${e} (FileSystemError)`:"FileSystemError",i}const Es=Qe("IUriIdentityService");function CC(i){const e=i;return!!(e&&typeof e=="object"&&typeof e.id=="string"&&typeof e.isDefault=="boolean"&&typeof e.name=="string"&&x.isUri(e.location)&&x.isUri(e.globalStorageHome)&&x.isUri(e.settingsResource)&&x.isUri(e.keybindingsResource)&&x.isUri(e.tasksResource)&&x.isUri(e.snippetsHome)&&(il(e.extensionsResource)||x.isUri(e.extensionsResource)))}const Or="workbench.experimental.settingsProfiles.enabled",$g=Qe("IUserDataProfilesService"),SC="extensions.json";function ya(i,e,t){return{id:yv(e.path).toString(16),name:i,location:e,isDefault:!1,globalStorageHome:Yn(e,"globalStorage"),settingsResource:Yn(e,"settings.json"),keybindingsResource:Yn(e,"keybindings.json"),tasksResource:Yn(e,"tasks.json"),snippetsHome:Yn(e,"snippets"),extensionsResource:Yn(e,SC),useDefaultFlags:t}}let Ga=class extends Jt{constructor(e,t,n,r){super(),this.environmentService=e,this.fileService=t,this.uriIdentityService=n,this.logService=r,this.enabled=!1,this.defaultProfileShouldIncludeExtensionsResourceAlways=!1,this._onDidChangeProfiles=this._register(new ce),this.onDidChangeProfiles=this._onDidChangeProfiles.event,this._onWillCreateProfile=this._register(new ce),this.onWillCreateProfile=this._onWillCreateProfile.event,this._onWillRemoveProfile=this._register(new ce),this.onWillRemoveProfile=this._onWillRemoveProfile.event,this.profilesHome=Yn(this.environmentService.userRoamingDataHome,"profiles")}get defaultProfile(){return this.profiles[0]}get profiles(){return this.profilesObject.profiles}setEnablement(e){this.enabled!==e&&(this._profilesObject=void 0,this.enabled=e)}get profilesObject(){if(!this._profilesObject){const e=this.enabled?this.getStoredProfiles().map(s=>ya(s.name,s.location,s.useDefaultFlags)):[];let t;const n=new In;if(e.length){const s=this.getStoredProfileAssociations();if(s.workspaces)for(const[o,a]of Object.entries(s.workspaces)){const c=x.parse(o),u=x.parse(a),l=e.find(g=>this.uriIdentityService.extUri.isEqual(g.location,u));l&&n.set(c,l)}if(s.emptyWindow){const o=x.parse(s.emptyWindow);t=e.find(a=>this.uriIdentityService.extUri.isEqual(a.location,o))}}const r=ya(z("defaultProfile","Default"),this.environmentService.userRoamingDataHome);e.unshift({...r,isDefault:!0,extensionsResource:this.defaultProfileShouldIncludeExtensionsResourceAlways||e.length>0?r.extensionsResource:void 0}),this._profilesObject={profiles:e,workspaces:n,emptyWindow:t}}return this._profilesObject}getProfile(e){const t=this.getWorkspace(e);return(x.isUri(t)?this.profilesObject.workspaces.get(t):this.profilesObject.emptyWindow)??this.defaultProfile}getWorkspace(e){return j1(e)?e.uri:Rb(e)?e.configPath:"empty-window"}async createProfile(e,t,n){if(!this.enabled)throw new Error(`Settings Profiles are disabled. Enable them via the '${Or}' setting.`);if(this.getStoredProfiles().some(o=>o.name===e))throw new Error(`Profile with name ${e} already exists`);const r=ya(e,Yn(this.profilesHome,yv(Yo()).toString(16)),t);await this.fileService.createFolder(r.location);const s=[];return this._onWillCreateProfile.fire({profile:r,join(o){s.push(o)}}),await fo.settled(s),this.updateProfiles([r],[],[]),n&&await this.setProfileForWorkspace(r,n),r}async updateProfile(e,t,n){if(!this.enabled)throw new Error(`Settings Profiles are disabled. Enable them via the '${Or}' setting.`);let r=this.profiles.find(s=>s.id===e.id);if(!r)throw new Error(`Profile '${e.name}' does not exist`);return r=ya(t,r.location,n),this.updateProfiles([],[],[r]),r}async setProfileForWorkspace(e,t){if(!this.enabled)throw new Error(`Settings Profiles are disabled. Enable them via the '${Or}' setting.`);const n=this.profiles.find(r=>r.id===e.id);if(!n)throw new Error(`Profile '${e.name}' does not exist`);this.updateWorkspaceAssociation(t,n)}async unsetWorkspace(e){if(!this.enabled)throw new Error(`Settings Profiles are disabled. Enable them via the '${Or}' setting.`);this.updateWorkspaceAssociation(e)}async removeProfile(e){if(!this.enabled)throw new Error(`Settings Profiles are disabled. Enable them via the '${Or}' setting.`);if(e.isDefault)throw new Error("Cannot remove default profile");const t=this.profiles.find(r=>r.id===e.id);if(!t)throw new Error(`Profile '${e.name}' does not exist`);const n=[];this._onWillRemoveProfile.fire({profile:t,join(r){n.push(r)}}),await fo.settled(n),t.id===this.profilesObject.emptyWindow?.id&&(this.profilesObject.emptyWindow=void 0);for(const r of[...this.profilesObject.workspaces.keys()])t.id===this.profilesObject.workspaces.get(r)?.id&&this.profilesObject.workspaces.delete(r);this.updateStoredProfileAssociations(),this.updateProfiles([],[t],[]);try{this.profiles.length===1?await this.fileService.del(this.profilesHome,{recursive:!0}):await this.fileService.del(t.location,{recursive:!0})}catch(r){this.logService.error(r)}}updateProfiles(e,t,n){const r=[];for(let s of[...this.profilesObject.profiles,...e])s.isDefault||t.some(o=>s.id===o.id)||(s=n.find(o=>s.id===o.id)??s,r.push({location:s.location,name:s.name,useDefaultFlags:s.useDefaultFlags}));this.saveStoredProfiles(r),this._profilesObject=void 0,this.triggerProfilesChanges(e,t,n)}triggerProfilesChanges(e,t,n){this._onDidChangeProfiles.fire({added:e,removed:t,updated:n,all:this.profiles})}updateWorkspaceAssociation(e,t){const n=this.getWorkspace(e);x.isUri(n)?(this.profilesObject.workspaces.delete(n),t&&!t.isDefault&&this.profilesObject.workspaces.set(n,t)):this.profilesObject.emptyWindow=t?.isDefault?void 0:t,this.updateStoredProfileAssociations()}updateStoredProfileAssociations(){const e={};for(const[n,r]of this.profilesObject.workspaces.entries())e[n.toString()]=r.location.toString();const t=this.profilesObject.emptyWindow?.location.toString();this.saveStoredProfileAssociations({workspaces:e,emptyWindow:t}),this._profilesObject=void 0}getStoredProfiles(){return[]}saveStoredProfiles(e){throw new Error("not implemented")}getStoredProfileAssociations(){return{}}saveStoredProfileAssociations(e){throw new Error("not implemented")}};Ga.PROFILES_KEY="userDataProfiles";Ga.PROFILE_ASSOCIATIONS_KEY="profileAssociations";Ga=B([G(0,Ds),G(1,ra),G(2,Es),G(3,pi)],Ga);const DC="__$__isNewStorageMarker",wa="__$__targetStorageMarker";var jr;(function(i){i[i.NONE=0]="NONE",i[i.SHUTDOWN=1]="SHUTDOWN"})(jr||(jr={}));var Yp;(function(i){i[i.APPLICATION=-1]="APPLICATION",i[i.PROFILE=0]="PROFILE",i[i.WORKSPACE=1]="WORKSPACE"})(Yp||(Yp={}));var Zp;(function(i){i[i.USER=0]="USER",i[i.MACHINE=1]="MACHINE"})(Zp||(Zp={}));class Ng extends Jt{constructor(e={flushInterval:Ng.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new yp),this.onDidChangeValue=this._onDidChangeValue.event,this._onDidChangeTarget=this._register(new yp),this.onDidChangeTarget=this._onDidChangeTarget.event,this._onWillSaveState=this._register(new ce),this.onWillSaveState=this._onWillSaveState.event,this.flushWhenIdleScheduler=this._register(new ja(()=>this.doFlushWhenIdle(),this.options.flushInterval)),this.runFlushWhenIdle=this._register(new z1),this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}doFlushWhenIdle(){this.runFlushWhenIdle.value=B1(()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()})}shouldFlushWhenIdle(){return!0}stopFlushWhenIdle(){Gt([this.runFlushWhenIdle,this.flushWhenIdleScheduler])}initialize(){return this.initializationPromise||(this.initializationPromise=(async()=>{try{await this.doInitialize()}finally{}this.flushWhenIdleScheduler.schedule()})()),this.initializationPromise}emitDidChangeValue(e,t){if(t===wa){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}emitWillSaveState(e){this._onWillSaveState.fire({reason:e})}get(e,t,n){return this.getStorage(t)?.get(e,n)}getBoolean(e,t,n){return this.getStorage(t)?.getBoolean(e,n)}getNumber(e,t,n){return this.getStorage(t)?.getNumber(e,n)}store(e,t,n,r){if(Ma(t)){this.remove(e,n);return}this.withPausedEmitters(()=>{this.updateKeyTarget(e,n,r),this.getStorage(n)?.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{this.updateKeyTarget(e,t,void 0),this.getStorage(t)?.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}keys(e,t){const n=[],r=this.getKeyTargets(e);for(const s of Object.keys(r))r[s]===t&&n.push(s);return n}updateKeyTarget(e,t,n){const r=this.getKeyTargets(t);typeof n=="number"?r[e]!==n&&(r[e]=n,this.getStorage(t)?.set(wa,JSON.stringify(r))):typeof r[e]=="number"&&(delete r[e],this.getStorage(t)?.set(wa,JSON.stringify(r)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.get(wa,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}isNew(e){return this.getBoolean(DC,e)===!0}async flush(e=jr.NONE){this._onWillSaveState.fire({reason:e});const t=this.getStorage(-1),n=this.getStorage(0),r=this.getStorage(1);switch(e){case jr.NONE:await fo.settled([t?.whenFlushed()??Promise.resolve(),n?.whenFlushed()??Promise.resolve(),r?.whenFlushed()??Promise.resolve()]);break;case jr.SHUTDOWN:await fo.settled([t?.flush(0)??Promise.resolve(),n?.flush(0)??Promise.resolve(),r?.flush(0)??Promise.resolve()]);break}}async log(){const e=this.getStorage(-1)?.items??new Map,t=this.getStorage(0)?.items??new Map,n=this.getStorage(1)?.items??new Map;return EC(e,t,n,this.getLogDetails(-1)??"",this.getLogDetails(0)??"",this.getLogDetails(1)??"")}async switch(e,t){return this.emitWillSaveState(jr.NONE),CC(e)?this.switchToProfile(e,t):this.switchToWorkspace(e,t)}canSwitchProfile(e,t){return!(e.id===t.id||em(t)&&em(e))}switchData(e,t,n,r){this.withPausedEmitters(()=>{if(r)for(const[s,o]of e)t.set(s,o);else{const s=new Set;for(const[o,a]of e)s.add(o),t.get(o)!==a&&this.emitDidChangeValue(n,o);for(const[o]of t.items)s.has(o)||this.emitDidChangeValue(n,o)}})}}Ng.DEFAULT_FLUSH_INTERVAL=60*1e3;function em(i){return i.isDefault||!!i.useDefaultFlags?.uiState}async function EC(i,e,t,n,r,s){const o=_=>{try{return JSON.parse(_)}catch{return _}},a=new Map,c=new Map;i.forEach((_,b)=>{a.set(b,_),c.set(b,o(_))});const u=new Map,l=new Map;e.forEach((_,b)=>{u.set(b,_),l.set(b,o(_))});const g=new Map,h=new Map;t.forEach((_,b)=>{g.set(b,_),h.set(b,o(_))}),console.group(n!==r?`Storage: Application (path: ${n})`:`Storage: Application & Profile (path: ${n}, default profile)`);const d=[];if(a.forEach((_,b)=>{d.push({key:b,value:_})}),console.table(d),console.groupEnd(),console.log(c),n!==r){console.group(`Storage: Profile (path: ${r}, profile specific)`);const _=[];u.forEach((b,k)=>{_.push({key:k,value:b})}),console.table(_),console.groupEnd(),console.log(l)}console.group(`Storage: Workspace (path: ${s})`);const p=[];g.forEach((_,b)=>{p.push({key:b,value:_})}),console.table(p),console.groupEnd(),console.log(h)}const nu=Qe("editorGroupsService"),sa=Qe("editorService"),pl=-1,Oa=-2,iu=Qe("textFileService"),ru=Ds,su=Qe("workingCopyFileService"),ou=Qe("pathService"),au=Qe("paneCompositePartService"),Hg=Qe("productService"),TC="vscode://schemas/vscode-product",qg=Qe("ILanguageStatusService"),Wg=Qe("hostService"),kC=Qe("snippetService");let As;var ue;(function(i){i.get=()=>As??{};function e(t){return As!=null&&console.warn("Services have been overridden"),As=t,{dispose:()=>{As===t&&(As=void 0)}}}i.install=e})(ue||(ue={}));function PC(i){return typeof i=="string"}function RC(i){return Array.isArray(i)&&i.every(e=>PC(e))}function Ls(i){return typeof i>"u"?null:i}var Xv;class di{constructor(e){this.confusableDictionary=e}static getInstance(e){return di.cache.get(Array.from(e))}static getLocales(){return di._locales.getValue()}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}Xv=di;di.ambiguousCharacterData=new Ig(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));di.cache=new K1(i=>{function e(u){const l=new Map;for(let g=0;g<u.length;g+=2)l.set(u[g],u[g+1]);return l}function t(u,l){const g=new Map(u);for(const[h,d]of l)g.set(h,d);return g}function n(u,l){if(!u)return l;const g=new Map;for(const[h,d]of u)l.has(h)&&g.set(h,d);return g}const r=Xv.ambiguousCharacterData.getValue();let s=i.filter(u=>!u.startsWith("_")&&u in r);s.length===0&&(s=["_default"]);let o;for(const u of s){const l=e(r[u]);o=n(o,l)}const a=e(r._common),c=t(a,o);return new di(c)});di._locales=new Ig(()=>Object.keys(di.ambiguousCharacterData.getValue()).filter(i=>!i.startsWith("_")));function IC(i,e){return new Promise((t,n)=>{const r=e.onCancellationRequested(()=>{r.dispose(),n(new Jc)});i.then(t,n).finally(()=>r.dispose())})}class xC{constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}const FC=Qe("policy"),MC=["Azure","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"],tm="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",Ug=Qe("extensionService");function _r(i,e){return i.enabledApiProposals?i.enabledApiProposals.includes(e):!1}function AC(i,e){if(!_r(i,e))throw new Error(`Extension '${i.identifier.value}' CANNOT use API proposal: ${e}.
Its package.json#enabledApiProposals-property declares: ${i.enabledApiProposals?.join(", ")??"[]"} but NOT ${e}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${i.identifier.value}`)}class LC{constructor(){this.onDidRegisterExtensions=N.None,this.onDidChangeExtensionsStatus=N.None,this.onDidChangeExtensions=N.None,this.onWillActivateByEvent=N.None,this.onDidChangeResponsiveChange=N.None}activateByEvent(e){return Promise.resolve(void 0)}activationEventIsDone(e){return!1}whenInstalledExtensionsRegistered(){return Promise.resolve(!0)}getExtensions(){return Promise.resolve([])}getExtension(){return Promise.resolve(void 0)}readExtensionPointContributions(e){return Promise.resolve(Object.create(null))}getExtensionsStatus(){return Object.create(null)}getInspectPort(e,t){return Promise.resolve(0)}getInspectPorts(e,t){return Promise.resolve([])}stopExtensionHosts(){}async restartExtensionHost(){}async startExtensionHosts(){}async setRemoteEnvironment(e){}canAddExtension(){return!1}canRemoveExtension(){return!1}_activateById(e,t){return Promise.resolve()}}const OC=Qe("lifecycleService"),$C=Qe("ILanguageDetectionService"),NC=Qe("keyboardLayoutService");class HC{constructor(e){this._OS=e}dumpDebugInfo(){return"FallbackKeyboardMapper dispatching on keyCode"}resolveKeybinding(e){return[new sd(e,this._OS)]}resolveKeyboardEvent(e){const t=new tw(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new sd(t.toChord(),this._OS)}resolveUserBinding(e){return sd.resolveUserBinding(e,this._OS)}}const qC=Ds,Ja=Object.freeze({authSession:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts",badges:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.badges.d.ts",commentsResolvedState:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsResolvedState.d.ts",contribEditSessions:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts",contribLabelFormatterWorkspaceTooltip:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts",contribMenuBarHome:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts",contribMergeEditorToolbar:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorToolbar.d.ts",contribRemoteHelp:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts",contribShareMenu:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts",contribViewSize:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewSize.d.ts",contribViewsRemote:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts",contribViewsWelcome:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts",contribWebviewContext:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribWebviewContext.d.ts",customEditorMove:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts",diffCommand:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts",documentFiltersExclusive:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts",documentPaste:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentPaste.d.ts",editorInsets:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts",extensionRuntime:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts",extensionsAny:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts",externalUriOpener:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts",fileSearchProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts",findTextInFiles:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts",fsChunks:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts",idToken:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts",inlineCompletionsAdditions:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts",inlineCompletionsNew:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsNew.d.ts",interactiveWindow:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts",ipc:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts",notebookCellExecutionState:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts",notebookContentProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookContentProvider.d.ts",notebookControllerKind:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerKind.d.ts",notebookDebugOptions:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDebugOptions.d.ts",notebookDeprecated:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts",notebookEditor:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookEditor.d.ts",notebookEditorEdit:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookEditorEdit.d.ts",notebookKernelSource:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts",notebookLiveShare:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts",notebookMessaging:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts",notebookMime:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts",notebookWorkspaceEdit:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookWorkspaceEdit.d.ts",portsAttributes:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts",quickPickSortByLabel:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts",resolvers:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts",scmActionButton:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts",scmSelectedProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts",scmValidation:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts",snippetWorkspaceEdit:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.snippetWorkspaceEdit.d.ts",tabInputTextMerge:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts",taskPresentationGroup:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts",telemetry:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts",terminalDataWriteEvent:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts",terminalDimensions:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts",terminalExitReason:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExitReason.d.ts",testCoverage:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testCoverage.d.ts",testObserver:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts",textSearchProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts",timeline:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts",tokenInformation:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts",treeViewReveal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts",workspaceTrust:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}),jg=gi.as(wv.JSONContribution);class ao{constructor(e,t){this.added=e,this.removed=t}static _toSet(e){const t=new Set;for(let n=0,r=e.length;n<r;n++)t.add(Aa.toKey(e[n].description.identifier));return t}static compute(e,t){if(!e||!e.length)return new ao(t,[]);if(!t||!t.length)return new ao([],e);const n=this._toSet(e),r=this._toSet(t),s=t.filter(a=>!n.has(Aa.toKey(a.description.identifier))),o=e.filter(a=>!r.has(Aa.toKey(a.description.identifier)));return new ao(s,o)}}class WC{constructor(e,t){this.name=e,this.defaultExtensionKind=t,this._handler=null,this._users=null,this._delta=null}setHandler(e){if(this._handler!==null)throw new Error("Handler already set!");this._handler=e,this._handle()}acceptUsers(e){this._delta=ao.compute(this._users,e),this._users=e,this._handle()}_handle(){if(!(this._handler===null||this._users===null||this._delta===null))try{this._handler(this._users,this._delta)}catch(e){Xo(e)}}}const UC={type:"string",enum:["ui","workspace"],enumDescriptions:[z("ui","UI extension kind. In a remote window, such extensions are enabled only when available on the local machine."),z("workspace","Workspace extension kind. In a remote window, such extensions are enabled only when available on the remote.")]},Yv="vscode://schemas/vscode-extensions",ml={properties:{engines:{type:"object",description:z("vscode.extension.engines","Engine compatibility."),properties:{vscode:{type:"string",description:z("vscode.extension.engines.vscode","For VS Code extensions, specifies the VS Code version that the extension is compatible with. Cannot be *. For example: ^0.10.5 indicates compatibility with a minimum VS Code version of 0.10.5."),default:"^1.22.0"}}},publisher:{description:z("vscode.extension.publisher","The publisher of the VS Code extension."),type:"string"},displayName:{description:z("vscode.extension.displayName","The display name for the extension used in the VS Code gallery."),type:"string"},categories:{description:z("vscode.extension.categories","The categories used by the VS Code gallery to categorize the extension."),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:MC},{type:"string",const:"Languages",deprecationMessage:z("vscode.extension.category.languages.deprecated","Use 'Programming  Languages' instead")}]}},galleryBanner:{type:"object",description:z("vscode.extension.galleryBanner","Banner used in the VS Code marketplace."),properties:{color:{description:z("vscode.extension.galleryBanner.color","The banner color on the VS Code marketplace page header."),type:"string"},theme:{description:z("vscode.extension.galleryBanner.theme","The color theme for the font used in the banner."),type:"string",enum:["dark","light"]}}},contributes:{description:z("vscode.extension.contributes","All contributions of the VS Code extension represented by this package."),type:"object",properties:{},default:{}},preview:{type:"boolean",description:z("vscode.extension.preview","Sets the extension to be flagged as a Preview in the Marketplace.")},enableProposedApi:{type:"boolean",deprecationMessage:z("vscode.extension.enableProposedApi.deprecated","Use `enabledApiProposals` instead.")},enabledApiProposals:{markdownDescription:z("vscode.extension.enabledApiProposals","Enable API proposals to try them out. Only valid **during development**. Extensions **cannot be published** with this property. For more details visit: https://code.visualstudio.com/api/advanced-topics/using-proposed-api"),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Ja),markdownEnumDescriptions:Object.values(Ja)}},activationEvents:{description:z("vscode.extension.activationEvents","Activation events for the VS Code extension."),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:z("vscode.extension.activationEvents.onWebviewPanel","An activation event emmited when a webview is loaded of a certain viewType"),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:z("vscode.extension.activationEvents.onLanguage","An activation event emitted whenever a file that resolves to the specified language gets opened."),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:z("vscode.extension.activationEvents.onCommand","An activation event emitted whenever the specified command gets invoked."),body:"onCommand:${2:commandId}"},{label:"onDebug",description:z("vscode.extension.activationEvents.onDebug","An activation event emitted whenever a user is about to start debugging or about to setup debug configurations."),body:"onDebug"},{label:"onDebugInitialConfigurations",description:z("vscode.extension.activationEvents.onDebugInitialConfigurations",'An activation event emitted whenever a "launch.json" needs to be created (and all provideDebugConfigurations methods need to be called).'),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:z("vscode.extension.activationEvents.onDebugDynamicConfigurations",'An activation event emitted whenever a list of all debug configurations needs to be created (and all provideDebugConfigurations methods for the "dynamic" scope need to be called).'),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:z("vscode.extension.activationEvents.onDebugResolve","An activation event emitted whenever a debug session with the specific type is about to be launched (and a corresponding resolveDebugConfiguration method needs to be called)."),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:z("vscode.extension.activationEvents.onDebugAdapterProtocolTracker","An activation event emitted whenever a debug session with the specific type is about to be launched and a debug protocol tracker might be needed."),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:z("vscode.extension.activationEvents.workspaceContains","An activation event emitted whenever a folder is opened that contains at least a file matching the specified glob pattern."),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:z("vscode.extension.activationEvents.onStartupFinished","An activation event emitted after the start-up finished (after all `*` activated extensions have finished activating)."),body:"onStartupFinished"},{label:"onTaskType",description:z("vscode.extension.activationEvents.onTaskType","An activation event emitted whenever tasks of a certain type need to be listed or resolved."),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:z("vscode.extension.activationEvents.onFileSystem","An activation event emitted whenever a file or folder is accessed with the given scheme."),body:"onFileSystem:${1:scheme}"},{label:"onSearch",description:z("vscode.extension.activationEvents.onSearch","An activation event emitted whenever a search is started in the folder with the given scheme."),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:z("vscode.extension.activationEvents.onView","An activation event emitted whenever the specified view is expanded.")},{label:"onIdentity",body:"onIdentity:${8:identity}",description:z("vscode.extension.activationEvents.onIdentity","An activation event emitted whenever the specified user identity.")},{label:"onUri",body:"onUri",description:z("vscode.extension.activationEvents.onUri","An activation event emitted whenever a system-wide Uri directed towards this extension is open.")},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:z("vscode.extension.activationEvents.onOpenExternalUri","An activation event emitted whenever a external uri (such as an http or https link) is being opened.")},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:z("vscode.extension.activationEvents.onCustomEditor","An activation event emitted whenever the specified custom editor becomes visible.")},{label:"onNotebook",body:"onNotebook:${1:type}",description:z("vscode.extension.activationEvents.onNotebook","An activation event emitted whenever the specified notebook document is opened.")},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:z("vscode.extension.activationEvents.onAuthenticationRequest","An activation event emitted whenever sessions are requested from the specified authentication provider.")},{label:"onRenderer",description:z("vscode.extension.activationEvents.onRenderer","An activation event emitted whenever a notebook output renderer is used."),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:z("vscode.extension.activationEvents.onTerminalProfile","An activation event emitted when a specific terminal profile is launched.")},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:z("vscode.extension.activationEvents.onWalkthrough","An activation event emitted when a specified walkthrough is opened.")},{label:"*",description:z("vscode.extension.activationEvents.star","An activation event emitted on VS Code startup. To ensure a great end user experience, please use this activation event in your extension only when no other activation events combination works in your use-case."),body:"*"}]}},badges:{type:"array",description:z("vscode.extension.badges","Array of badges to display in the sidebar of the Marketplace's extension page."),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:z("vscode.extension.badges.url","Badge image URL.")},href:{type:"string",description:z("vscode.extension.badges.href","Badge link.")},description:{type:"string",description:z("vscode.extension.badges.description","Badge description.")}}}},markdown:{type:"string",description:z("vscode.extension.markdown","Controls the Markdown rendering engine used in the Marketplace. Either github (default) or standard."),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:z("vscode.extension.qna","Controls the Q&A link in the Marketplace. Set to marketplace to enable the default Marketplace Q & A site. Set to a string to provide the URL of a custom Q & A site. Set to false to disable Q & A altogether."),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:z("vscode.extension.extensionDependencies","Dependencies to other extensions. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:tm}},extensionPack:{description:z("vscode.extension.contributes.extensionPack","A set of extensions that can be installed together. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:tm}},extensionKind:{description:z("extensionKind","Define the kind of an extension. `ui` extensions are installed and run on the local machine while `workspace` extensions run on the remote."),type:"array",items:UC,default:["workspace"],defaultSnippets:[{body:["ui"],description:z("extensionKind.ui","Define an extension which can run only on the local machine when connected to remote window.")},{body:["workspace"],description:z("extensionKind.workspace","Define an extension which can run only on the remote machine when connected remote window.")},{body:["ui","workspace"],description:z("extensionKind.ui-workspace","Define an extension which can run on either side, with a preference towards running on the local machine.")},{body:["workspace","ui"],description:z("extensionKind.workspace-ui","Define an extension which can run on either side, with a preference towards running on the remote machine.")},{body:[],description:z("extensionKind.empty","Define an extension which cannot run in a remote context, neither on the local, nor on the remote machine.")}]},capabilities:{description:z("vscode.extension.capabilities","Declare the set of supported capabilities by the extension."),type:"object",properties:{virtualWorkspaces:{description:z("vscode.extension.capabilities.virtualWorkspaces","Declares whether the extension should be enabled in virtual workspaces. A virtual workspace is a workspace which is not backed by any on-disk resources. When false, this extension will be automatically disabled in virtual workspaces. Default is true."),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:z("vscode.extension.capabilities.virtualWorkspaces.supported","Declares the level of support for virtual workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[z("vscode.extension.capabilities.virtualWorkspaces.supported.limited","The extension will be enabled in virtual workspaces with some functionality disabled."),z("vscode.extension.capabilities.virtualWorkspaces.supported.true","The extension will be enabled in virtual workspaces with all functionality enabled."),z("vscode.extension.capabilities.virtualWorkspaces.supported.false","The extension will not be enabled in virtual workspaces.")]},description:{type:"string",markdownDescription:z("vscode.extension.capabilities.virtualWorkspaces.description","A description of how virtual workspaces affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}},untrustedWorkspaces:{description:z("vscode.extension.capabilities.untrustedWorkspaces","Declares how the extension should be handled in untrusted workspaces."),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:z("vscode.extension.capabilities.untrustedWorkspaces.supported","Declares the level of support for untrusted workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[z("vscode.extension.capabilities.untrustedWorkspaces.supported.limited","The extension will be enabled in untrusted workspaces with some functionality disabled."),z("vscode.extension.capabilities.untrustedWorkspaces.supported.true","The extension will be enabled in untrusted workspaces with all functionality enabled."),z("vscode.extension.capabilities.untrustedWorkspaces.supported.false","The extension will not be enabled in untrusted workspaces.")]},restrictedConfigurations:{description:z("vscode.extension.capabilities.untrustedWorkspaces.restrictedConfigurations","A list of configuration keys contributed by the extension that should not use workspace values in untrusted workspaces."),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:z("vscode.extension.capabilities.untrustedWorkspaces.description","A description of how workspace trust affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}}}},sponsor:{description:z("vscode.extension.contributes.sponsor","Specify the location from where users can sponsor your extension."),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:z("vscode.extension.contributes.sponsor.url","URL from where users can sponsor your extension. It must be a valid URL with a HTTP or HTTPS protocol. Example value: https://github.com/sponsors/nvaccess"),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:z("vscode.extension.scripts.prepublish","Script executed before the package is published as a VS Code extension."),type:"string"},"vscode:uninstall":{description:z("vscode.extension.scripts.uninstall","Uninstall hook for VS Code extension. Script that gets executed when the extension is completely uninstalled from VS Code which is when VS Code is restarted (shutdown and start) after the extension is uninstalled. Only Node scripts are supported."),type:"string"}}},icon:{type:"string",description:z("vscode.extension.icon","The path to a 128x128 pixel icon.")}}};class jC{constructor(){this._extensionPoints=new Map}registerExtensionPoint(e){if(this._extensionPoints.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new WC(e.extensionPoint,e.defaultExtensionKind);return this._extensionPoints.set(e.extensionPoint,t),ml.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,jg.registerSchema(Yv,ml),t}getExtensionPoints(){return Array.from(this._extensionPoints.values())}}const Zv={ExtensionsRegistry:"ExtensionsRegistry"};gi.add(Zv.ExtensionsRegistry,new jC);gi.as(Zv.ExtensionsRegistry);jg.registerSchema(Yv,ml);jg.registerSchema(TC,{properties:{extensionEnabledApiProposals:{description:z("product.extensionEnabledApiProposals","API proposals that the respective extensions can freely use."),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Ja),markdownEnumDescriptions:Object.values(Ja)}}]}}}});G1("settings-sync-view-icon",J1.sync,z("syncViewIcon","View icon of the Settings Sync view."));const zC=Qe("IUserDataInitializationService"),BC=Qe("hostColorSchemeService");class VC extends Jt{constructor(){super(),this._onDidSchemeChangeEvent=this._register(new ce),this.registerListeners()}registerListeners(){wp("(prefers-color-scheme: dark)",()=>{this._onDidSchemeChangeEvent.fire()}),wp("(forced-colors: active)",()=>{this._onDidSchemeChangeEvent.fire()})}get onDidChangeColorScheme(){return this._onDidSchemeChangeEvent.event}get dark(){return window.matchMedia("(prefers-color-scheme: light)").matches?!1:!!window.matchMedia("(prefers-color-scheme: dark)").matches}get highContrast(){return!!window.matchMedia("(forced-colors: active)").matches}}const KC=Qe("preferencesService"),GC=Qe("textMateService"),JC=Qe("IUserDataProfileService");Q1.and(X1.notEqualsTo("stable"),Y1.create(`config.${Or}`));let vl=class extends Jt{constructor(e,t){super(),this._onDidChangeCurrentProfile=this._register(new ce),this.onDidChangeCurrentProfile=this._onDidChangeCurrentProfile.event,this._onDidUpdateCurrentProfile=this._register(new ce),this.onDidUpdateCurrentProfile=this._onDidUpdateCurrentProfile.event,this._currentProfile=e,this._register(t.onDidChangeProfiles(n=>{if(this._currentProfile.isDefault){this._currentProfile=t.defaultProfile;return}const r=n.updated.find(s=>this._currentProfile.id===s.id);r&&(this._currentProfile=r,this._onDidUpdateCurrentProfile.fire())}))}get currentProfile(){return this._currentProfile}async updateCurrentProfile(e,t){if(this._currentProfile.id===e.id)return;const n=this._currentProfile;this._currentProfile=e;const r=[];this._onDidChangeCurrentProfile.fire({preserveData:t,previous:n,profile:e,join(s){r.push(s)}}),await fo.settled(r)}};vl=B([G(1,$g)],vl);function T(){throw new Error("unsupported")}nt(sa,class{constructor(){this._serviceBrand=void 0,this.onDidActiveEditorChange=N.None,this.onDidVisibleEditorsChange=N.None,this.onDidEditorsChange=N.None,this.onDidCloseEditor=N.None,this.activeEditorPane=void 0,this.activeEditor=void 0,this.activeTextEditorLanguageId=void 0,this.visibleEditorPanes=[],this.visibleEditors=[],this.visibleTextEditorControls=[],this.editors=[],this.count=0,this.getEditors=()=>[],this.openEditor=T,this.openEditors=T,this.replaceEditors=async()=>{},this.isOpened=()=>!1,this.isVisible=()=>!1,this.closeEditor=async()=>{},this.closeEditors=async()=>{},this.findEditors=()=>[],this.save=async()=>!1,this.saveAll=async()=>!1,this.revert=async()=>!1,this.revertAll=async()=>!1}get activeTextEditorControl(){return Fe.get(Zo).getFocusedCodeEditor()??void 0}});nt(au,class{constructor(){this._serviceBrand=void 0,this.onDidPaneCompositeOpen=N.None,this.onDidPaneCompositeClose=N.None,this.openPaneComposite=T,this.getActivePaneComposite=()=>{},this.getPaneComposite=()=>{},this.getPaneComposites=()=>[],this.getPinnedPaneCompositeIds=()=>[],this.getVisiblePaneCompositeIds=()=>[],this.getProgressIndicator=()=>{},this.hideActivePaneComposite=()=>{},this.getLastActivePaneCompositeId=T,this.showActivity=T}});nt(Es,class{constructor(){this._serviceBrand=void 0,this.extUri=new xg(()=>!1)}asCanonicalUri(e){return e}});const QC=new ce;class XC{constructor(){this.onDidCreate=N.None,this.onDidResolve=N.None,this.onDidChangeDirty=N.None,this.onDidChangeReadonly=N.None,this.onDidRemove=N.None,this.onDidChangeOrphaned=N.None,this.onDidChangeEncoding=N.None,this.onDidSaveError=N.None,this.onDidSave=QC.event,this.onDidRevert=N.None,this.models=[],this.saveErrorHandler={onSaveError:T},this.get=()=>{},this.resolve=T,this.addSaveParticipant=T,this.runSaveParticipants=T}canDispose(){return!0}}nt(iu,class{constructor(){this._serviceBrand=void 0,this.files=new XC,this.isDirty=()=>!1,this.save=T,this.saveAs=T,this.revert=T,this.read=T,this.readStream=T,this.write=T,this.create=T,this.getEncodedReadable=T,this.getDecodedStream=T}get untitled(){return T()}get encoding(){return T()}dispose(){}});nt(ra,class{constructor(){this._serviceBrand=void 0,this.onDidChangeFileSystemProviderRegistrations=N.None,this.onDidChangeFileSystemProviderCapabilities=N.None,this.onWillActivateFileSystemProvider=N.None,this.registerProvider=T,this.getProvider=function(){},this.activateProvider=async()=>{},this.canHandleResource=async()=>!1,this.hasProvider=()=>!1,this.hasCapability=()=>!1,this.listCapabilities=()=>[],this.onDidFilesChange=N.None,this.onDidRunOperation=N.None,this.resolve=T,this.resolveAll=T,this.stat=T,this.exists=async()=>!1,this.readFile=T,this.readFileStream=T,this.writeFile=T,this.move=T,this.canMove=T,this.copy=T,this.canCopy=T,this.cloneFile=T,this.createFile=T,this.canCreateFile=T,this.createFolder=T,this.del=T,this.canDelete=T,this.onDidWatchError=N.None,this.watch=T}dispose(){}});class YC{constructor(){this.onDidModelChange=N.None,this.onWillDispose=N.None,this.onDidActiveEditorChange=N.None,this.onWillCloseEditor=N.None,this.onDidCloseEditor=N.None,this.onWillMoveEditor=N.None,this.onWillOpenEditor=N.None,this.id=0,this.index=0,this.label="main",this.ariaLabel="main",this.activeEditorPane=void 0,this.activeEditor=null,this.previewEditor=null,this.count=0,this.isEmpty=!1,this.isLocked=!1,this.stickyCount=0,this.editors=[],this.getEditors=T,this.findEditors=T,this.getEditorByIndex=T,this.getIndexOfEditor=T,this.openEditor=T,this.openEditors=T,this.isPinned=T,this.isSticky=T,this.isActive=T,this.contains=T,this.moveEditor=T,this.moveEditors=T,this.copyEditor=T,this.copyEditors=T,this.closeEditor=T,this.closeEditors=T,this.closeAllEditors=T,this.replaceEditors=T,this.pinEditor=T,this.stickEditor=T,this.unstickEditor=T,this.lock=T,this.isFirst=()=>!0,this.isLast=()=>!0}get scopedContextKeyService(){return Fe.get(nw)}focus(){}}nt(nu,class{constructor(){this._serviceBrand=void 0,this.onDidChangeActiveGroup=N.None,this.onDidAddGroup=N.None,this.onDidRemoveGroup=N.None,this.onDidMoveGroup=N.None,this.onDidActivateGroup=N.None,this.onDidLayout=N.None,this.onDidScroll=N.None,this.onDidChangeGroupIndex=N.None,this.onDidChangeGroupLocked=N.None,this.activeGroup=new YC,this.groups=[],this.count=0,this.orientation=0,this.isReady=!1,this.whenReady=Promise.resolve(),this.whenRestored=Promise.resolve(),this.hasRestorableState=!1,this.getGroups=()=>[],this.getGroup=()=>{},this.activateGroup=T,this.getSize=T,this.setSize=T,this.arrangeGroups=T,this.applyLayout=T,this.centerLayout=T,this.isLayoutCentered=()=>!1,this.setGroupOrientation=T,this.findGroup=()=>{},this.addGroup=T,this.removeGroup=T,this.moveGroup=T,this.mergeGroup=T,this.mergeAllGroups=T,this.copyGroup=T,this.onDidChangeEditorPartOptions=N.None,this.enforcePartOptions=T}get contentDimension(){return T()}get sideGroup(){return T()}get partOptions(){return T()}});class zg{constructor(){this._serviceBrand=void 0,this.skipReleaseNotes=!0,this.skipWelcome=!0,this.disableWorkspaceTrust=!0,this.debugRenderer=!1,this.sync=void 0,this.isExtensionDevelopment=!1,this.disableExtensions=!1,this.logsPath="",this.verbose=!1,this.isBuilt=!0,this.disableTelemetry=!1}get logFile(){return T()}get extHostLogsPath(){return T()}get webviewExternalEndpoint(){return T()}get userRoamingDataHome(){return T()}get keyboardLayoutResource(){return T()}get argvResource(){return T()}get snippetsHome(){return x.from({scheme:"user",path:"/snippets"})}get untitledWorkspacesHome(){return T()}get globalStorageHome(){return T()}get workspaceStorageHome(){return T()}get localHistoryHome(){return T()}get cacheHome(){return T()}get userDataSyncHome(){return T()}get userDataSyncLogResource(){return T()}get debugExtensionHost(){return T()}get telemetryLogResource(){return T()}get serviceMachineIdResource(){return T()}get stateResource(){return T()}get editSessionsLogResource(){return T()}}nt(ru,zg);nt(Ds,zg);nt(qC,zg);nt(su,class{constructor(){this._serviceBrand=void 0,this.onWillRunWorkingCopyFileOperation=N.None,this.onDidFailWorkingCopyFileOperation=N.None,this.onDidRunWorkingCopyFileOperation=N.None,this.addFileOperationParticipant=T,this.hasSaveParticipants=!1,this.addSaveParticipant=T,this.runSaveParticipants=T,this.create=T,this.createFolder=T,this.move=T,this.copy=T,this.delete=T,this.registerWorkingCopyProvider=T,this.getDirty=T}});nt(ou,class{constructor(){this._serviceBrand=void 0,this.defaultUriScheme=Rt.file,this.userHome=T,this.hasValidBasename=T,this.resolvedUserHome=void 0}get path(){return T()}async fileURI(e){return x.file(e)}});nt(Fg,class{constructor(){this._serviceBrand=void 0}withProgress(e,t,n){const{window:r}=ue.get();return r?.withProgress!=null?r.withProgress(e,t,n):t({report:()=>{}})}});nt(Hg,class{constructor(){this._serviceBrand=void 0,this.version="1.69.0",this.nameShort="Code - OSS Dev",this.nameLong="Code - OSS Dev",this.applicationName="code-oss",this.dataFolderName=".vscode-oss",this.urlProtocol="code-oss",this.reportIssueUrl="https://github.com/microsoft/vscode/issues/new",this.licenseName="MIT",this.licenseUrl="https://github.com/microsoft/vscode/blob/main/LICENSE.txt",this.serverApplicationName="code-server-oss"}});nt(qg,class{constructor(){this._provider=new Mg,this.onDidChange=this._provider.onDidChange}addStatus(e){return this._provider.register(e.selector,e)}getLanguageStatus(e){return this._provider.ordered(e).sort((t,n)=>{let r=n.severity-t.severity;return r===0&&(r=Li(t.source,n.source)),r===0&&(r=Li(t.id,n.id)),r})}});const nm=Z1(window),ZC=new kn(window.document,"visibilitychange"),e0=N.latch(N.any(N.map(nm.onDidFocus,()=>document.hasFocus()),N.map(nm.onDidBlur,()=>document.hasFocus()),N.map(ZC.event,()=>document.hasFocus())));nt(Wg,class{constructor(){this.onDidChangeFocus=e0,this.openWindow=T,this.restart=T,this.reload=T,this.close=T}get hasFocus(){return document.hasFocus()}async hadLastFocus(){return!0}async focus(){window.focus()}async toggleFullScreen(){document.fullscreenEnabled?await document.body.requestFullscreen():await document.exitFullscreen()}});nt(OC,class{constructor(){this.startupKind=1,this.phase=2,this.onBeforeShutdown=N.None,this.onShutdownVeto=N.None,this.onBeforeShutdownError=N.None,this.onWillShutdown=N.None,this.onDidShutdown=N.None,this.shutdown=T}async when(){}});nt($C,class{isEnabledForLanguage(){return!1}async detectLanguage(){}});nt(Ug,LC);nt(NC,class{constructor(){this.onDidChangeKeyboardLayout=N.None,this.getRawKeyboardMapping=()=>null,this.getCurrentKeyboardLayout=()=>null,this.getAllKeyboardLayouts=()=>[],this.getKeyboardMapper=()=>new HC(ew),this.validateCurrentKeyboardMapping=()=>{}}});nt(zC,class{async requiresInitialization(){return!1}async whenInitializationFinished(){}async initializeRequiredResources(){}async initializeInstalledExtensions(){}async initializeOtherResources(){}});nt(BC,VC);nt(KC,class{constructor(){this.workspaceSettingsResource=null,this.getFolderSettingsResource=T,this.createPreferencesEditorModel=T,this.resolveModel=T,this.createSettings2EditorModel=T,this.openRawDefaultSettings=T,this.openSettings=T,this.openUserSettings=T,this.openRemoteSettings=T,this.openWorkspaceSettings=T,this.openFolderSettings=T,this.openGlobalKeybindingSettings=T,this.openDefaultKeybindingsFile=T,this.getEditableSettingsURI=T,this.createSplitJsonEditorInput=T,this.openApplicationSettings=T,this.openLanguageSpecificSettings=T}get userSettingsResource(){return T()}});nt(GC,class{constructor(){this.onDidEncounterLanguage=N.None,this.createGrammar=T,this.startDebugMode=T}});const $a={id:"default",isDefault:!0,name:"default",location:x.from({scheme:"user",path:"/profile.json"}),get globalStorageHome(){return T()},settingsResource:x.from({scheme:"user",path:"/settings.json"}),keybindingsResource:x.from({scheme:"user",path:"/keybindings.json"}),get tasksResource(){return T()},get snippetsHome(){return x.from({scheme:"user",path:"/snippets"})},extensionsResource:void 0};nt($g,class{constructor(){this.defaultProfile=$a,this.onDidChangeProfiles=N.None,this.profiles=[$a],this.createProfile=T,this.updateProfile=T,this.setProfileForWorkspace=T,this.getProfile=()=>$a,this.removeProfile=T}get profilesHome(){return T()}});let _l=class extends vl{constructor(e){super($a,e)}};_l=B([G(0,$g)],_l);nt(JC,_l);nt(FC,class{constructor(){this.onDidChange=N.None,this.registerPolicyDefinitions=T,this.getPolicyValue=()=>{},this.serialize=()=>{}}});nt(kC,class{constructor(){this.getSnippetFiles=T,this.isEnabled=T,this.updateEnablement=T,this.updateUsageTimestamp=T,this.getSnippets=async()=>[],this.getSnippetsSync=T}});function Jn(i){return Fw(i,!0)}class t0{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:Li(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===Rt.file)return Cp(Jn(e),Jn(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(im(e.authority,t.authority))return Cp(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return x.joinPath(e,...t)}basenameOrAuthority(e){return n0(e)||e.authority}basename(e){return Ti.basename(e.path)}extname(e){return Ti.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Rt.file?t=x.file(uw(Jn(e))).path:(t=Ti.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Rt.file?t=x.file(dw(Jn(e))).path:t=Ti.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!im(e.authority,t.authority))return;if(e.scheme===Rt.file){const s=lw(Jn(e),Jn(t));return Eg?hw(s):s}let n=e.path||"/";const r=t.path||"/";if(this._ignorePathCasing(e)){let s=0;for(const o=Math.min(n.length,r.length);s<o&&!(n.charCodeAt(s)!==r.charCodeAt(s)&&n.charAt(s).toLowerCase()!==r.charAt(s).toLowerCase());s++);n=r.substr(0,s)+n.substr(s)}return Ti.relative(n,r)}resolvePath(e,t){if(e.scheme===Rt.file){const n=x.file(fw(Jn(e),t));return e.with({authority:n.authority,path:n.path})}return t=gw(t),e.with({path:Ti.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&pw(e,t)}hasTrailingPathSeparator(e,t=od){if(e.scheme===Rt.file){const n=Jn(e);return n.length>Sp(n).length&&n[n.length-1]===t}else{const n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=od){return rm(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=od){let n=!1;if(e.scheme===Rt.file){const r=Jn(e);n=r!==void 0&&r.length===Sp(r).length&&r[r.length-1]===t}else{t="/";const r=e.path;n=r.length===1&&r.charCodeAt(r.length-1)===47}return!n&&!rm(e,t)?e.with({path:e.path+"/"}):e}}const qe=new t0(()=>!1);qe.isEqual.bind(qe);qe.isEqualOrParent.bind(qe);qe.getComparisonKey.bind(qe);qe.basenameOrAuthority.bind(qe);const n0=qe.basename.bind(qe);qe.extname.bind(qe);qe.dirname.bind(qe);qe.joinPath.bind(qe);qe.normalizePath.bind(qe);qe.relativePath.bind(qe);qe.resolvePath.bind(qe);qe.isAbsolutePath.bind(qe);const im=qe.isEqualAuthority.bind(qe),rm=qe.hasTrailingPathSeparator.bind(qe);qe.removeTrailingPathSeparator.bind(qe);qe.addTrailingPathSeparator.bind(qe);function i0(i,e,t){if(e){let n=i.path;return n&&n[0]!==Ti.sep&&(n=Ti.sep+n),i.with({scheme:t,authority:e,path:n})}return i.with({scheme:t})}const $i=na,_d=at.FoldingRangeKind;var sm;(function(i){i[i.APPLICATION=1]="APPLICATION",i[i.MACHINE=2]="MACHINE",i[i.WINDOW=3]="WINDOW",i[i.RESOURCE=4]="RESOURCE",i[i.LANGUAGE_OVERRIDABLE=5]="LANGUAGE_OVERRIDABLE",i[i.MACHINE_OVERRIDABLE=6]="MACHINE_OVERRIDABLE"})(sm||(sm={}));const Rr="vscode://schemas/settings/resourceLanguage",ba=gi.as(wv.JSONContribution);class r0{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new ce,this.onDidSchemaChange=this._onDidSchemaChange.event,this._onDidUpdateConfiguration=new ce,this.onDidUpdateConfiguration=this._onDidUpdateConfiguration.event,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:z("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},ba.registerSchema(Rr,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=this.doRegisterConfigurations(e,t);ba.registerSchema(Rr,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}deregisterConfigurations(e){const t=this.doDeregisterConfigurations(e);ba.registerSchema(Rr,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t})}updateConfigurations({add:e,remove:t}){const n=[];n.push(...this.doDeregisterConfigurations(t)),n.push(...this.doRegisterConfigurations(e,!1)),ba.registerSchema(Rr,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:Zi(n)})}registerDefaultConfigurations(e){const t=[],n=[];for(const{overrides:r,source:s}of e)for(const o in r)if(t.push(o),co.test(o)){const a=this.configurationDefaultsOverrides.get(o),c=a?.valuesSources??new Map;if(s)for(const h of Object.keys(r[o]))c.set(h,s);const u={...a?.value||{},...r[o]};this.configurationDefaultsOverrides.set(o,{source:s,value:u,valuesSources:c});const l=rw(o),g={type:"object",default:u,description:z("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",l),$ref:Rr,defaultDefaultValue:u,source:mn(s)?void 0:s,defaultValueSource:s};n.push(...o0(o)),this.configurationProperties[o]=g,this.defaultLanguageConfigurationOverridesNode.properties[o]=g}else{this.configurationDefaultsOverrides.set(o,{value:r[o],source:s});const a=this.configurationProperties[o];a&&(this.updatePropertyDefaultValue(o,a),this.updateSchema(o,a))}this.registerOverrideIdentifiers(n),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}deregisterDefaultConfigurations(e){const t=[];for(const{overrides:n,source:r}of e)for(const s in n){const o=this.configurationDefaultsOverrides.get(s),a=mn(r)?r:r?.id,c=mn(o?.source)?o?.source:o?.source?.id;if(a===c)if(t.push(s),this.configurationDefaultsOverrides.delete(s),co.test(s))delete this.configurationProperties[s],delete this.defaultLanguageConfigurationOverridesNode.properties[s];else{const u=this.configurationProperties[s];u&&(this.updatePropertyDefaultValue(s,u),this.updateSchema(s,u))}}this.updateOverridePropertyPatternKey(),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){const n=[];return e.forEach(r=>{n.push(...this.validateAndRegisterProperties(r,t,r.extensionInfo,r.restrictedProperties)),this.configurationContributors.push(r),this.registerJSONConfiguration(r)}),n}doDeregisterConfigurations(e){const t=[],n=r=>{if(r.properties)for(const s in r.properties){t.push(s);const o=this.configurationProperties[s];o?.policy?.name&&this.policyConfigurations.delete(o.policy.name),delete this.configurationProperties[s],this.removeFromSchema(s,r.properties[s])}r.allOf?.forEach(s=>n(s))};for(const r of e){n(r);const s=this.configurationContributors.indexOf(r);s!==-1&&this.configurationContributors.splice(s,1)}return t}validateAndRegisterProperties(e,t=!0,n,r,s=3){s=Ma(e.scope)?s:e.scope;const o=[],a=e.properties;if(a)for(const u in a){const l=a[u];if(t&&c0(u,l)){delete a[u];continue}if(l.source=n,l.defaultDefaultValue=a[u].default,this.updatePropertyDefaultValue(u,l),co.test(u)?l.scope=void 0:(l.scope=Ma(l.scope)?s:l.scope,l.restricted=Ma(l.restricted)?!!r?.includes(u):l.restricted),a[u].hasOwnProperty("included")&&!a[u].included){this.excludedConfigurationProperties[u]=a[u],delete a[u];continue}else this.configurationProperties[u]=a[u],a[u].policy?.name&&this.policyConfigurations.set(a[u].policy.name,u);!a[u].deprecationMessage&&a[u].markdownDeprecationMessage&&(a[u].deprecationMessage=a[u].markdownDeprecationMessage),o.push(u)}const c=e.allOf;if(c)for(const u of c)o.push(...this.validateAndRegisterProperties(u,t,n,r,s));return o}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}getConfigurationDefaultsOverrides(){return this.configurationDefaultsOverrides}registerJSONConfiguration(e){const t=n=>{const r=n.properties;if(r)for(const o in r)this.updateSchema(o,r[o]);n.allOf?.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}removeFromSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:case 5:delete this.resourceLanguageSettingsSchema.properties[e];break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:z("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:z("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Rr};this.updatePropertyDefaultValue(t,n)}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const n=this.configurationDefaultsOverrides.get(e);let r=n?.value,s=n?.source;il(r)&&(r=t.defaultDefaultValue,s=void 0),il(r)&&(r=a0(t.type)),t.default=r,t.defaultValueSource=s}}const e_="\\[([^\\]]+)\\]",om=new RegExp(e_,"g"),s0=`^(${e_})+$`,co=new RegExp(s0);function o0(i){const e=[];if(co.test(i)){let t=om.exec(i);for(;t?.length;){const n=t[1].trim();n&&e.push(n),t=om.exec(i)}}return Zi(e)}function a0(i){switch(Array.isArray(i)?i[0]:i){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const Na=new r0;function c0(i,e){return i.trim()?co.test(i)?z("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",i):Na.getConfigurationProperties()[i]!==void 0?z("config.property.duplicate","Cannot register '{0}'. This property is already registered.",i):e.policy?.name&&Na.getPolicyConfigurations().get(e.policy?.name)!==void 0?z("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",i,e.policy?.name,Na.getPolicyConfigurations().get(e.policy?.name)):null:z("config.property.empty","Cannot register an empty property")}function u0(){const i=[],e=Na.getConfigurationProperties();for(const t of Object.keys(e))i.push([t,e[t].scope]);return i.push(["launch",4]),i.push(["task",4]),i}const d0=Mw,l0=/^(.+)\/(.+?)(;.+)?$/;function t_(i,e){const t=l0.exec(i);return t?`${t[1].toLowerCase()}/${t[2].toLowerCase()}${t[3]??""}`:e?void 0:i}const am=iw.marked;function h0(i,e){const t=[],n=[];for(const r of i)e.has(r)||t.push(r);for(const r of e)i.has(r)||n.push(r);return{removed:t,added:n}}function f0(i,e){const t=[],n=[];for(const[r,s]of i)e.has(r)||t.push(s);for(const[r,s]of e)i.has(r)||n.push(s);return{removed:t,added:n}}class g0{constructor(){this._next=0}getNext(){return this._next++}}var $r,zt,bi,n_,i_,yl,Ki,Qn,wl,Gi,Di,Ji,bl,Cl,Ha,to,Sl,zn,Wn,Dl,Kt,El;function ae(i){function e(){return Reflect.construct(i,arguments,this.constructor)}return Object.defineProperty(e,"name",Object.getOwnPropertyDescriptor(i,"name")),Object.setPrototypeOf(e,i),Object.setPrototypeOf(e.prototype,i.prototype),e}let vn=yl=class{constructor(e){$r.set(this,void 0),Ii(this,$r,e,"f")}static from(...e){let t=e;return new yl(function(){if(t){for(const n of t)n&&typeof n.dispose=="function"&&n.dispose();t=void 0}})}dispose(){typeof he(this,$r,"f")=="function"&&(he(this,$r,"f").call(this),Ii(this,$r,void 0,"f"))}};$r=new WeakMap;vn=yl=B([ae],vn);let ke=Ki=class{constructor(e,t){if(e<0)throw Ie("line must be non-negative");if(t<0)throw Ie("character must be non-negative");this._line=e,this._character=t}static Min(...e){if(e.length===0)throw new TypeError;let t=e[0];for(let n=1;n<e.length;n++){const r=e[n];r.isBefore(t)&&(t=r)}return t}static Max(...e){if(e.length===0)throw new TypeError;let t=e[0];for(let n=1;n<e.length;n++){const r=e[n];r.isAfter(t)&&(t=r)}return t}static isPosition(e){if(!e)return!1;if(e instanceof Ki)return!0;const{line:t,character:n}=e;return typeof t=="number"&&typeof n=="number"}static of(e){if(e instanceof Ki)return e;if(this.isPosition(e))return new Ki(e.line,e.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this._line}get character(){return this._character}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,t=0){if(e===null||t===null)throw Ie();let n;return typeof e>"u"?n=0:typeof e=="number"?n=e:(n=typeof e.lineDelta=="number"?e.lineDelta:0,t=typeof e.characterDelta=="number"?e.characterDelta:0),n===0&&t===0?this:new Ki(this.line+n,this.character+t)}with(e,t=this.character){if(e===null||t===null)throw Ie();let n;return typeof e>"u"?n=this.line:typeof e=="number"?n=e:(n=typeof e.line=="number"?e.line:this.line,t=typeof e.character=="number"?e.character:this.character),n===this.line&&t===this.character?this:new Ki(n,t)}toJSON(){return{line:this.line,character:this.character}}};ke=Ki=B([ae],ke);let Ee=Qn=class{constructor(e,t,n,r){let s,o;if(typeof e=="number"&&typeof t=="number"&&typeof n=="number"&&typeof r=="number"?(s=new ke(e,t),o=new ke(n,r)):ke.isPosition(e)&&ke.isPosition(t)&&(s=ke.of(e),o=ke.of(t)),!s||!o)throw new Error("Invalid arguments");s.isBefore(o)?(this._start=s,this._end=o):(this._start=o,this._end=s)}static isRange(e){return e instanceof Qn?!0:e?ke.isPosition(e.start)&&ke.isPosition(e.end):!1}static of(e){if(e instanceof Qn)return e;if(this.isRange(e))return new Qn(e.start,e.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this._start}get end(){return this._end}contains(e){return Qn.isRange(e)?this.contains(e.start)&&this.contains(e.end):ke.isPosition(e)?!(ke.of(e).isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){const t=ke.Max(e.start,this._start),n=ke.Min(e.end,this._end);if(!t.isAfter(n))return new Qn(t,n)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;const t=ke.Min(e.start,this._start),n=ke.Max(e.end,this.end);return new Qn(t,n)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,t=this.end){if(e===null||t===null)throw Ie();let n;return e?ke.isPosition(e)?n=e:(n=e.start||this.start,t=e.end||this.end):n=this.start,n.isEqual(this._start)&&t.isEqual(this.end)?this:new Qn(n,t)}toJSON(){return[this.start,this.end]}};Ee=Qn=B([ae],Ee);let ds=wl=class extends Ee{constructor(e,t,n,r){let s,o;if(typeof e=="number"&&typeof t=="number"&&typeof n=="number"&&typeof r=="number"?(s=new ke(e,t),o=new ke(n,r)):ke.isPosition(e)&&ke.isPosition(t)&&(s=ke.of(e),o=ke.of(t)),!s||!o)throw new Error("Invalid arguments");super(s,o),this._anchor=s,this._active=o}static isSelection(e){return e instanceof wl?!0:e?Ee.isRange(e)&&ke.isPosition(e.anchor)&&ke.isPosition(e.active)&&typeof e.isReversed=="boolean":!1}get anchor(){return this._anchor}get active(){return this._active}get isReversed(){return this._anchor===this._end}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}};ds=wl=B([ae],ds);var Fn;(function(i){i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(Fn||(Fn={}));var Tl;(function(i){i[i.Replace=1]="Replace",i[i.Append=2]="Append",i[i.Prepend=3]="Prepend"})(Tl||(Tl={}));let wo=Gi=class{constructor(e,t){this._range=e,this._newText=t}static isTextEdit(e){return e instanceof Gi?!0:e?Ee.isRange(e)&&typeof e.newText=="string":!1}static replace(e,t){return new Gi(e,t)}static insert(e,t){return Gi.replace(new Ee(e,e),t)}static delete(e){return Gi.replace(e,"")}static setEndOfLine(e){const t=new Gi(new Ee(new ke(0,0),new ke(0,0)),"");return t.newEol=e,t}get range(){return this._range}set range(e){if(e&&!Ee.isRange(e))throw Ie("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw Ie("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw Ie("newEol");this._newEol=e}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};wo=Gi=B([ae],wo);let kl=Di=class{constructor(e,t){this.range=e,this.newCells=t}static isNotebookCellEdit(e){return e instanceof Di?!0:e?Mn.isNotebookRange(e)&&Array.isArray(e.newCells):!1}static replaceCells(e,t){return new Di(e,t)}static insertCells(e,t){return new Di(new Mn(e,e),t)}static deleteCells(e){return new Di(e,[])}static updateCellMetadata(e,t){const n=new Di(new Mn(e,e),[]);return n.newCellMetadata=t,n}static updateNotebookMetadata(e){const t=new Di(new Mn(0,0),[]);return t.newNotebookMetadata=e,t}};kl=Di=B([ae],kl);let bo=class{constructor(){this._edits=[]}_allEntries(){return this._edits}renameFile(e,t,n,r){this._edits.push({_type:1,from:e,to:t,options:n,metadata:r})}createFile(e,t,n){this._edits.push({_type:1,from:void 0,to:e,options:t,metadata:n})}deleteFile(e,t,n){this._edits.push({_type:1,from:e,to:void 0,options:t,metadata:n})}replaceNotebookMetadata(e,t,n){this._edits.push({_type:3,metadata:n,uri:e,edit:{editType:5,metadata:t},notebookMetadata:t})}replaceNotebookCells(e,t,n,r,s){let o,a,c=[],u;if(Mn.isNotebookRange(t)&&Fi.isNotebookCellDataArray(n)&&!Fi.isNotebookCellDataArray(r)?(o=t.start,a=t.end,c=n,u=r):typeof t=="number"&&typeof n=="number"&&Fi.isNotebookCellDataArray(r)&&(o=t,a=n,c=r,u=s),o===void 0||a===void 0)throw new Error("Invalid arguments");(o!==a||c.length>0)&&this._edits.push({_type:5,uri:e,index:o,count:a-o,cells:c,metadata:u})}replaceNotebookCellMetadata(e,t,n,r){this._edits.push({_type:3,metadata:r,uri:e,edit:{editType:8,index:t,metadata:n}})}replace(e,t,n,r){typeof n=="string"?this._edits.push({_type:2,uri:e,edit:new wo(t,n),metadata:r}):this._edits.push({_type:6,uri:e,range:t,edit:n,metadata:r})}insert(e,t,n,r){this.replace(e,new Ee(t,t),n,r)}delete(e,t,n){this.replace(e,t,"",n)}has(e){return this._edits.some(t=>t._type===2&&t.uri.toString()===e.toString())}set(e,t){if(t)for(const n of t)n&&(kl.isNotebookCellEdit(n)?n.newCellMetadata?this.replaceNotebookCellMetadata(e,n.range.start,n.newCellMetadata):n.newNotebookMetadata?this.replaceNotebookMetadata(e,n.newNotebookMetadata):this.replaceNotebookCells(e,n.range,n.newCells):this._edits.push({_type:2,uri:e,edit:n}));else{for(let n=0;n<this._edits.length;n++){const r=this._edits[n];r._type===2&&r.uri.toString()===e.toString()&&(this._edits[n]=void 0)}Tb(this._edits)}}get(e){const t=[];for(const n of this._edits)n._type===2&&n.uri.toString()===e.toString()&&t.push(n.edit);return t}entries(){const e=new In;for(const t of this._edits)if(t._type===2){let n=e.get(t.uri);n||(n=[t.uri,[]],e.set(t.uri,n)),n[1].push(t.edit)}return[...e.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};bo=B([ae],bo);let Qa=Ji=class{constructor(e){this._tabstop=1,this.value=e||""}static isSnippetString(e){return e instanceof Ji?!0:e?typeof e.value=="string":!1}static _escape(e){return e.replace(/\$|}|\\/g,"\\$&")}appendText(e){return this.value+=Ji._escape(e),this}appendTabstop(e=this._tabstop++){return this.value+="$",this.value+=e,this}appendPlaceholder(e,t=this._tabstop++){if(typeof e=="function"){const n=new Ji;n._tabstop=this._tabstop,e(n),this._tabstop=n._tabstop,e=n.value}else e=Ji._escape(e);return this.value+="${",this.value+=t,this.value+=":",this.value+=e,this.value+="}",this}appendChoice(e,t=this._tabstop++){const n=e.map(r=>r.replace(/\$|}|\\|,/g,"\\$&")).join(",");return this.value+="${",this.value+=t,this.value+="|",this.value+=n,this.value+="|}",this}appendVariable(e,t){if(typeof t=="function"){const n=new Ji;n._tabstop=this._tabstop,t(n),this._tabstop=n._tabstop,t=n.value}else typeof t=="string"&&(t=t.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=e,t&&(this.value+=":",this.value+=t),this.value+="}",this}};Qa=Ji=B([ae],Qa);var tr;(function(i){i[i.Unnecessary=1]="Unnecessary",i[i.Deprecated=2]="Deprecated"})(tr||(tr={}));var At;(function(i){i[i.Hint=3]="Hint",i[i.Information=2]="Information",i[i.Warning=1]="Warning",i[i.Error=0]="Error"})(At||(At={}));let li=bl=class{constructor(e,t){if(this.uri=e,t)if(Ee.isRange(t))this.range=Ee.of(t);else if(ke.isPosition(t))this.range=new Ee(t,t);else throw new Error("Illegal argument")}static isLocation(e){return e instanceof bl?!0:e?Ee.isRange(e.range)&&x.isUri(e.uri):!1}toJSON(){return{uri:this.uri,range:this.range}}};li=bl=B([ae],li);let Co=class{constructor(e,t){this.location=e,this.message=t}static is(e){return e?typeof e.message=="string"&&e.location&&Ee.isRange(e.location.range)&&x.isUri(e.location.uri):!1}static isEqual(e,t){return e===t?!0:!e||!t?!1:e.message===t.message&&e.location.range.isEqual(t.location.range)&&e.location.uri.toString()===t.location.uri.toString()}};Co=B([ae],Co);let Xa=class{constructor(e,t,n=At.Error){if(!Ee.isRange(e))throw new TypeError("range must be set");if(!t)throw new TypeError("message must be set");this.range=e,this.message=t,this.severity=n}toJSON(){return{severity:At[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(e,t){return e===t?!0:!e||!t?!1:e.message===t.message&&e.severity===t.severity&&e.code===t.code&&e.severity===t.severity&&e.source===t.source&&e.range.isEqual(t.range)&&mr(e.tags,t.tags)&&mr(e.relatedInformation,t.relatedInformation,Co.isEqual)}};Xa=B([ae],Xa);let Ya=class{constructor(e,t){if(!e)throw new Error("Illegal argument, contents must be defined");Array.isArray(e)?this.contents=e:this.contents=[e],this.range=t}};Ya=B([ae],Ya);var So;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(So||(So={}));let Za=class{constructor(e,t=So.Text){this.range=e,this.kind=t}toJSON(){return{range:this.range,kind:So[this.kind]}}};Za=B([ae],Za);var Be;(function(i){i[i.File=0]="File",i[i.Module=1]="Module",i[i.Namespace=2]="Namespace",i[i.Package=3]="Package",i[i.Class=4]="Class",i[i.Method=5]="Method",i[i.Property=6]="Property",i[i.Field=7]="Field",i[i.Constructor=8]="Constructor",i[i.Enum=9]="Enum",i[i.Interface=10]="Interface",i[i.Function=11]="Function",i[i.Variable=12]="Variable",i[i.Constant=13]="Constant",i[i.String=14]="String",i[i.Number=15]="Number",i[i.Boolean=16]="Boolean",i[i.Array=17]="Array",i[i.Object=18]="Object",i[i.Key=19]="Key",i[i.Null=20]="Null",i[i.EnumMember=21]="EnumMember",i[i.Struct=22]="Struct",i[i.Event=23]="Event",i[i.Operator=24]="Operator",i[i.TypeParameter=25]="TypeParameter"})(Be||(Be={}));var Do;(function(i){i[i.Deprecated=1]="Deprecated"})(Do||(Do={}));let ec=Cl=class{constructor(e,t,n,r,s){this.name=e,this.kind=t,this.containerName=s,typeof n=="string"&&(this.containerName=n),r instanceof li?this.location=r:n instanceof Ee&&(this.location=new li(r,n)),Cl.validate(this)}static validate(e){if(!e.name)throw new Error("name must not be falsy")}toJSON(){return{name:this.name,kind:Be[this.kind],location:this.location,containerName:this.containerName}}};ec=Cl=B([ae],ec);let Eo=Ha=class{constructor(e,t,n,r,s){this.name=e,this.detail=t,this.kind=n,this.range=r,this.selectionRange=s,this.children=[],Ha.validate(this)}static validate(e){if(!e.name)throw new Error("name must not be falsy");if(!e.range.contains(e.selectionRange))throw new Error("selectionRange must be contained in fullRange");e.children?.forEach(Ha.validate)}};Eo=Ha=B([ae],Eo);var To;(function(i){i[i.Invoke=1]="Invoke",i[i.Automatic=2]="Automatic"})(To||(To={}));let Pl=class{constructor(e,t){this.title=e,this.kind=t}};Pl=B([ae],Pl);let ht=to=class{constructor(e){this.value=e}append(e){return new to(this.value?this.value+to.sep+e:e)}intersects(e){return this.contains(e)||e.contains(this)}contains(e){return this.value===e.value||e.value.startsWith(this.value+to.sep)}};ht.sep=".";ht=to=B([ae],ht);ht.Empty=new ht("");ht.QuickFix=ht.Empty.append("quickfix");ht.Refactor=ht.Empty.append("refactor");ht.RefactorExtract=ht.Refactor.append("extract");ht.RefactorInline=ht.Refactor.append("inline");ht.RefactorRewrite=ht.Refactor.append("rewrite");ht.Source=ht.Empty.append("source");ht.SourceOrganizeImports=ht.Source.append("organizeImports");ht.SourceFixAll=ht.Source.append("fixAll");let tc=class{constructor(e,t){if(this.range=e,this.parent=t,t&&!t.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};tc=B([ae],tc);class r_{constructor(e,t,n,r,s,o){this.kind=e,this.name=t,this.detail=n,this.uri=r,this.range=s,this.selectionRange=o}}class p0{constructor(e,t){this.fromRanges=t,this.from=e}}class m0{constructor(e,t){this.fromRanges=t,this.to=e}}var Jr;(function(i){i[i.Information=0]="Information",i[i.Warning=1]="Warning",i[i.Error=2]="Error"})(Jr||(Jr={}));let Rl=class{constructor(e,t){this.range=e,this.command=t}get isResolved(){return!!this.command}};Rl=B([ae],Rl);let ls=Sl=class{constructor(e,t=!1){zt.set(this,void 0),Ii(this,zt,new mw(e,{supportThemeIcons:t}),"f")}static isMarkdownString(e){return e instanceof Sl?!0:e&&e.appendCodeblock&&e.appendMarkdown&&e.appendText&&e.value!==void 0}get value(){return he(this,zt,"f").value}set value(e){he(this,zt,"f").value=e}get isTrusted(){return he(this,zt,"f").isTrusted}set isTrusted(e){he(this,zt,"f").isTrusted=e}get supportThemeIcons(){return he(this,zt,"f").supportThemeIcons}set supportThemeIcons(e){he(this,zt,"f").supportThemeIcons=e}get supportHtml(){return he(this,zt,"f").supportHtml}set supportHtml(e){he(this,zt,"f").supportHtml=e}get baseUri(){return he(this,zt,"f").baseUri}set baseUri(e){he(this,zt,"f").baseUri=e}appendText(e){return he(this,zt,"f").appendText(e),this}appendMarkdown(e){return he(this,zt,"f").appendMarkdown(e),this}appendCodeblock(e,t){return he(this,zt,"f").appendCodeblock(t??"",e),this}};zt=new WeakMap;ls=Sl=B([ae],ls);let Il=class{constructor(e,t){this.label=e,this.documentation=t}};Il=B([ae],Il);let xl=class{constructor(e,t){this.label=e,this.documentation=t,this.parameters=[]}};xl=B([ae],xl);let Fl=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};Fl=B([ae],Fl);var Ml;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(Ml||(Ml={}));var Al;(function(i){i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(Al||(Al={}));let Ll=class{constructor(e){this.value=e}};Ll=B([ae],Ll);let Ol=class{constructor(e,t,n){this.position=e,this.label=t,this.kind=n}};Ol=B([ae],Ol);var Qr;(function(i){i[i.Invoke=0]="Invoke",i[i.TriggerCharacter=1]="TriggerCharacter",i[i.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Qr||(Qr={}));var de;(function(i){i[i.Text=0]="Text",i[i.Method=1]="Method",i[i.Function=2]="Function",i[i.Constructor=3]="Constructor",i[i.Field=4]="Field",i[i.Variable=5]="Variable",i[i.Class=6]="Class",i[i.Interface=7]="Interface",i[i.Module=8]="Module",i[i.Property=9]="Property",i[i.Unit=10]="Unit",i[i.Value=11]="Value",i[i.Enum=12]="Enum",i[i.Keyword=13]="Keyword",i[i.Snippet=14]="Snippet",i[i.Color=15]="Color",i[i.File=16]="File",i[i.Reference=17]="Reference",i[i.Folder=18]="Folder",i[i.EnumMember=19]="EnumMember",i[i.Constant=20]="Constant",i[i.Struct=21]="Struct",i[i.Event=22]="Event",i[i.Operator=23]="Operator",i[i.TypeParameter=24]="TypeParameter",i[i.User=25]="User",i[i.Issue=26]="Issue"})(de||(de={}));var ko;(function(i){i[i.Deprecated=1]="Deprecated"})(ko||(ko={}));let $l=class{constructor(e,t){this.label=e,this.kind=t}toJSON(){return{label:this.label,kind:this.kind&&de[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};$l=B([ae],$l);let nc=class{constructor(e=[],t=!1){this.items=e,this.isIncomplete=t}};nc=B([ae],nc);let Nl=class{constructor(e,t,n){this.insertText=e,this.range=t,this.command=n}};Nl=B([ae],Nl);let Hl=class{constructor(e){this.commands=void 0,this.items=e}};Hl=B([ae],Hl);var hs;(function(i){i[i.Active=-1]="Active",i[i.Beside=-2]="Beside",i[i.One=1]="One",i[i.Two=2]="Two",i[i.Three=3]="Three",i[i.Four=4]="Four",i[i.Five=5]="Five",i[i.Six=6]="Six",i[i.Seven=7]="Seven",i[i.Eight=8]="Eight",i[i.Nine=9]="Nine"})(hs||(hs={}));var ql;(function(i){i[i.Left=1]="Left",i[i.Right=2]="Right"})(ql||(ql={}));var ei;(function(i){i[i.Off=0]="Off",i[i.On=1]="On",i[i.Relative=2]="Relative"})(ei||(ei={}));var Wl;(function(i){i[i.Manual=1]="Manual",i[i.AfterDelay=2]="AfterDelay",i[i.FocusOut=3]="FocusOut"})(Wl||(Wl={}));var ic;(function(i){i[i.Default=0]="Default",i[i.InCenter=1]="InCenter",i[i.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",i[i.AtTop=3]="AtTop"})(ic||(ic={}));var fs;(function(i){i[i.Keyboard=1]="Keyboard",i[i.Mouse=2]="Mouse",i[i.Command=3]="Command"})(fs||(fs={}));var Po;(function(i){i[i.Undo=1]="Undo",i[i.Redo=2]="Redo"})(Po||(Po={}));var nr;(function(i){i[i.OpenOpen=0]="OpenOpen",i[i.ClosedClosed=1]="ClosedClosed",i[i.OpenClosed=2]="OpenClosed",i[i.ClosedOpen=3]="ClosedOpen"})(nr||(nr={}));(function(i){function e(t){switch(t){case"keyboard":return i.Keyboard;case"mouse":return i.Mouse;case"api":return i.Command}}i.fromValue=e})(fs||(fs={}));let rc=class{constructor(e,t){if(t&&!x.isUri(t))throw Ie("target");if(!Ee.isRange(e)||e.isEmpty)throw Ie("range");this.range=e,this.target=t}};rc=B([ae],rc);let Ro=class{constructor(e,t,n,r){this.red=e,this.green=t,this.blue=n,this.alpha=r}};Ro=B([ae],Ro);let Ul=class{constructor(e,t){if(t&&!(t instanceof Ro))throw Ie("color");if(!Ee.isRange(e)||e.isEmpty)throw Ie("range");this.range=e,this.color=t}};Ul=B([ae],Ul);let sc=class{constructor(e){if(!e||typeof e!="string")throw Ie("label");this.label=e}};sc=B([ae],sc);class v0{constructor(e,t,n){if(this.startIndex=e,this.length=t,this.tooltip=n,typeof e!="number"||e<0)throw Ie("startIndex");if(typeof t!="number"||t<1)throw Ie("length");if(n!==void 0&&typeof n!="string")throw Ie("tooltip")}}var jl;(function(i){i[i.Panel=1]="Panel",i[i.Editor=2]="Editor"})(jl||(jl={}));class _0{constructor(e){if(this.options=e,typeof e!="object")throw Ie("options")}}var zl;(function(i){i[i.Always=1]="Always",i[i.Silent=2]="Silent",i[i.Never=3]="Never"})(zl||(zl={}));var Bl;(function(i){i[i.Shared=1]="Shared",i[i.Dedicated=2]="Dedicated",i[i.New=3]="New"})(Bl||(Bl={}));let yr=zn=class{constructor(e,t){if(this.label=t,typeof e!="string")throw Ie("name");if(typeof t!="string")throw Ie("name");this._id=e}static from(e){switch(e){case"clean":return zn.Clean;case"build":return zn.Build;case"rebuild":return zn.Rebuild;case"test":return zn.Test;default:return}}get id(){return this._id}};yr.Clean=new zn("clean","Clean");yr.Build=new zn("build","Build");yr.Rebuild=new zn("rebuild","Rebuild");yr.Test=new zn("test","Test");yr=zn=B([ae],yr);function s_(i){let e="";for(let t=0;t<i.length;t++)e+=i[t].replace(/,/g,",,")+",";return e}let oc=class{constructor(e,t,n){if(typeof e!="string")throw Ie("process");this._args=[],this._process=e,t!==void 0&&(Array.isArray(t)?(this._args=t,this._options=n):this._options=t)}get process(){return this._process}set process(e){if(typeof e!="string")throw Ie("process");this._process=e}get args(){return this._args}set args(e){Array.isArray(e)||(e=[]),this._args=e}get options(){return this._options}set options(e){this._options=e}computeId(){const e=[];if(e.push("process"),this._process!==void 0&&e.push(this._process),this._args&&this._args.length>0)for(const t of this._args)e.push(t);return s_(e)}};oc=B([ae],oc);let ac=class{constructor(e,t,n){if(this._args=[],Array.isArray(t)){if(!e)throw Ie("command can't be undefined or null");if(typeof e!="string"&&typeof e.value!="string")throw Ie("command");this._command=e,this._args=t,this._options=n}else{if(typeof e!="string")throw Ie("commandLine");this._commandLine=e,this._options=t}}get commandLine(){return this._commandLine}set commandLine(e){if(typeof e!="string")throw Ie("commandLine");this._commandLine=e}get command(){return this._command?this._command:""}set command(e){if(typeof e!="string"&&typeof e.value!="string")throw Ie("command");this._command=e}get args(){return this._args}set args(e){this._args=e||[]}get options(){return this._options}set options(e){this._options=e}computeId(){const e=[];if(e.push("shell"),this._commandLine!==void 0&&e.push(this._commandLine),this._command!==void 0&&e.push(typeof this._command=="string"?this._command:this._command.value),this._args&&this._args.length>0)for(const t of this._args)e.push(typeof t=="string"?t:t.value);return s_(e)}};ac=B([ae],ac);var Vl;(function(i){i[i.Escape=1]="Escape",i[i.Strong=2]="Strong",i[i.Weak=3]="Weak"})(Vl||(Vl={}));var Io;(function(i){i[i.Global=1]="Global",i[i.Workspace=2]="Workspace"})(Io||(Io={}));class o_{constructor(e){this._callback=e}computeId(){return"customExecution"+Yo()}set callback(e){this._callback=e}get callback(){return this._callback}}let wr=Wn=class{constructor(e,t,n,r,s,o){this.__deprecated=!1,this._definition=this.definition=e;let a;typeof t=="string"?(this._name=this.name=t,this._source=this.source=n,this.execution=r,a=s,this.__deprecated=!0):t===Io.Global||t===Io.Workspace?(this.target=t,this._name=this.name=n,this._source=this.source=r,this.execution=s,a=o):(this.target=t,this._name=this.name=n,this._source=this.source=r,this.execution=s,a=o),typeof a=="string"?(this._problemMatchers=[a],this._hasDefinedMatchers=!0):Array.isArray(a)?(this._problemMatchers=a,this._hasDefinedMatchers=!0):(this._problemMatchers=[],this._hasDefinedMatchers=!1),this._isBackground=!1,this._presentationOptions=Object.create(null),this._runOptions=Object.create(null)}get _id(){return this.__id}set _id(e){this.__id=e}get _deprecated(){return this.__deprecated}clear(){this.__id!==void 0&&(this.__id=void 0,this._scope=void 0,this.computeDefinitionBasedOnExecution())}computeDefinitionBasedOnExecution(){this._execution instanceof oc?this._definition={type:Wn.ProcessType,id:this._execution.computeId()}:this._execution instanceof ac?this._definition={type:Wn.ShellType,id:this._execution.computeId()}:this._execution instanceof o_?this._definition={type:Wn.ExtensionCallbackType,id:this._execution.computeId()}:this._definition={type:Wn.EmptyType,id:Yo()}}get definition(){return this._definition}set definition(e){if(e==null)throw Ie("Kind can't be undefined or null");this.clear(),this._definition=e}get scope(){return this._scope}set target(e){this.clear(),this._scope=e}get name(){return this._name}set name(e){if(typeof e!="string")throw Ie("name");this.clear(),this._name=e}get execution(){return this._execution}set execution(e){e===null&&(e=void 0),this.clear(),this._execution=e;const t=this._definition.type;(Wn.EmptyType===t||Wn.ProcessType===t||Wn.ShellType===t||Wn.ExtensionCallbackType===t)&&this.computeDefinitionBasedOnExecution()}get problemMatchers(){return this._problemMatchers}set problemMatchers(e){if(Array.isArray(e))this.clear(),this._problemMatchers=e,this._hasDefinedMatchers=!0;else{this.clear(),this._problemMatchers=[],this._hasDefinedMatchers=!1;return}}get hasDefinedMatchers(){return this._hasDefinedMatchers}get isBackground(){return this._isBackground}set isBackground(e){e!==!0&&e!==!1&&(e=!1),this.clear(),this._isBackground=e}get source(){return this._source}set source(e){if(typeof e!="string"||e.length===0)throw Ie("source must be a string of length > 0");this.clear(),this._source=e}get group(){return this._group}set group(e){e===null&&(e=void 0),this.clear(),this._group=e}get detail(){return this._detail}set detail(e){e===null&&(e=void 0),this._detail=e}get presentationOptions(){return this._presentationOptions}set presentationOptions(e){e==null&&(e=Object.create(null)),this.clear(),this._presentationOptions=e}get runOptions(){return this._runOptions}set runOptions(e){e==null&&(e=Object.create(null)),this.clear(),this._runOptions=e}};wr.ExtensionCallbackType="customExecution";wr.ProcessType="process";wr.ShellType="shell";wr.EmptyType="$empty";wr=Wn=B([ae],wr);var lr;(function(i){i[i.SourceControl=1]="SourceControl",i[i.Window=10]="Window",i[i.Notification=15]="Notification"})(lr||(lr={}));let Kl=Dl=class{constructor(e,t=Xr.None){this.collapsibleState=t,x.isUri(e)?this.resourceUri=e:this.label=e}static isTreeItem(e){if(e instanceof Dl)return!0;const t=e;return t.label!==void 0&&!mn(t.label)&&!t.label.label?(console.log("INVALID tree item, invalid label",t.label),!1):t.id!==void 0&&!mn(t.id)?(console.log("INVALID tree item, invalid id",t.id),!1):t.iconPath!==void 0&&!mn(t.iconPath)&&!x.isUri(t.iconPath)&&!mn(t.iconPath.id)?(console.log("INVALID tree item, invalid iconPath",t.iconPath),!1):t.description!==void 0&&!mn(t.description)&&typeof t.description!="boolean"?(console.log("INVALID tree item, invalid description",t.description),!1):t.resourceUri!==void 0&&!x.isUri(t.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",t.resourceUri),!1):t.tooltip!==void 0&&!mn(t.tooltip)&&!(t.tooltip instanceof ls)?(console.log("INVALID tree item, invalid tooltip",t.tooltip),!1):t.command!==void 0&&!t.command.command?(console.log("INVALID tree item, invalid command",t.command),!1):t.collapsibleState!==void 0&&t.collapsibleState<Xr.None&&t.collapsibleState>Xr.Expanded?(console.log("INVALID tree item, invalid collapsibleState",t.collapsibleState),!1):t.contextValue!==void 0&&!mn(t.contextValue)?(console.log("INVALID tree item, invalid contextValue",t.contextValue),!1):t.accessibilityInformation!==void 0&&!t.accessibilityInformation.label?(console.log("INVALID tree item, invalid accessibilityInformation",t.accessibilityInformation),!1):!0}};Kl=Dl=B([ae],Kl);var Xr;(function(i){i[i.None=0]="None",i[i.Collapsed=1]="Collapsed",i[i.Expanded=2]="Expanded"})(Xr||(Xr={}));let cc=class{constructor(e){this.value=e}async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}};cc=B([ae],cc);let Gl=class{constructor(e){bi.set(this,new Map);for(const[t,n]of e??[]){const r=he(this,bi,"f").get(t);r?r.push(n):he(this,bi,"f").set(t,[n])}}get(e){return he(this,bi,"f").get(e)?.[0]}set(e,t){he(this,bi,"f").set(e,[t])}forEach(e,t){for(const[n,r]of he(this,bi,"f"))for(const s of r)e.call(t,s,n,this)}*[(bi=new WeakMap,Symbol.iterator)](){for(const[e,t]of he(this,bi,"f"))for(const n of t)yield[e,n]}};Gl=B([ae],Gl);let Jl=class{constructor(e){this.insertText=e}};Jl=B([ae],Jl);let hi=class{constructor(e,t){this.id=e,this.color=t}};hi=B([ae],hi);hi.File=new hi("file");hi.Folder=new hi("folder");let Ql=class{constructor(e){this.id=e}};Ql=B([ae],Ql);var Yr;(function(i){i[i.Global=1]="Global",i[i.Workspace=2]="Workspace",i[i.WorkspaceFolder=3]="WorkspaceFolder"})(Yr||(Yr={}));let Zr=class{constructor(e,t){if(typeof e!="string"&&(!e||!x.isUri(e)&&!x.isUri(e.uri)))throw Ie("base");if(typeof t!="string")throw Ie("pattern");typeof e=="string"?this.baseUri=x.file(e):x.isUri(e)?this.baseUri=e:this.baseUri=e.uri,this.pattern=t}get base(){return this._base}set base(e){this._base=e,this._baseUri=x.file(e)}get baseUri(){return this._baseUri}set baseUri(e){this._baseUri=e,this._base=e.fsPath}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};Zr=B([ae],Zr);let xo=class{constructor(e,t,n,r){this.enabled=typeof e=="boolean"?e:!0,typeof t=="string"&&(this.condition=t),typeof n=="string"&&(this.hitCondition=n),typeof r=="string"&&(this.logMessage=r)}get id(){return this._id||(this._id=Yo()),this._id}};xo=B([ae],xo);let Xl=class extends xo{constructor(e,t,n,r,s){if(super(t,n,r,s),e===null)throw Ie("location");this.location=e}};Xl=B([ae],Xl);let Yl=class extends xo{constructor(e,t,n,r,s){super(t,n,r,s),this.functionName=e}};Yl=B([ae],Yl);let Zl=class{constructor(e,t,n){this.command=e,this.args=t||[],this.options=n}};Zl=B([ae],Zl);let eh=class{constructor(e,t){this.port=e,this.host=t}};eh=B([ae],eh);let th=class{constructor(e){this.path=e}};th=B([ae],th);let nh=class{constructor(e){this.implementation=e}};nh=B([ae],nh);let uc=class{constructor(e,t){this.range=e,this.expression=t}};uc=B([ae],uc);var Fo;(function(i){i[i.Invoke=0]="Invoke",i[i.Automatic=1]="Automatic"})(Fo||(Fo={}));var dc;(function(i){i[i.Invoke=0]="Invoke",i[i.Automatic=1]="Automatic"})(dc||(dc={}));let lc=class{constructor(e,t){this.range=e,this.text=t}};lc=B([ae],lc);let hc=class{constructor(e,t,n=!0){this.range=e,this.variableName=t,this.caseSensitiveLookup=n}};hc=B([ae],hc);let fc=class{constructor(e,t){this.range=e,this.expression=t}};fc=B([ae],fc);let ih=class{constructor(e,t){this.frameId=e,this.stoppedLocation=t}};ih=B([ae],ih);var rh;(function(i){i[i.Changed=1]="Changed",i[i.Created=2]="Created",i[i.Deleted=3]="Deleted"})(rh||(rh={}));let sh=Kt=class extends Error{constructor(e,t=Xn.Unknown,n){super(x.isUri(e)?e.toString(!0):e),this.code=n?.name??"Unknown",bC(this,t),typeof Object.setPrototypeOf=="function"&&Object.setPrototypeOf(this,Kt.prototype),typeof Error.captureStackTrace=="function"&&typeof n=="function"&&Error.captureStackTrace(this,n)}static FileExists(e){return new Kt(e,Xn.FileExists,Kt.FileExists)}static FileNotFound(e){return new Kt(e,Xn.FileNotFound,Kt.FileNotFound)}static FileNotADirectory(e){return new Kt(e,Xn.FileNotADirectory,Kt.FileNotADirectory)}static FileIsADirectory(e){return new Kt(e,Xn.FileIsADirectory,Kt.FileIsADirectory)}static NoPermissions(e){return new Kt(e,Xn.NoPermissions,Kt.NoPermissions)}static Unavailable(e){return new Kt(e,Xn.Unavailable,Kt.Unavailable)}};sh=Kt=B([ae],sh);let oh=class{constructor(e,t,n){this.start=e,this.end=t,this.kind=n}};oh=B([ae],oh);var es;(function(i){i[i.Comment=1]="Comment",i[i.Imports=2]="Imports",i[i.Region=3]="Region"})(es||(es={}));var ah;(function(i){i[i.Collapsed=0]="Collapsed",i[i.Expanded=1]="Expanded"})(ah||(ah={}));var ch;(function(i){i[i.Editing=0]="Editing",i[i.Preview=1]="Preview"})(ch||(ch={}));class y0{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}}function w0(i){return typeof i>"u"||RC(i)}class Bg{constructor(e){if(this._prevLine=0,this._prevChar=0,this._dataIsSortedAndDeltaEncoded=!0,this._data=[],this._dataLen=0,this._tokenTypeStrToInt=new Map,this._tokenModifierStrToInt=new Map,this._hasLegend=!1,e){this._hasLegend=!0;for(let t=0,n=e.tokenTypes.length;t<n;t++)this._tokenTypeStrToInt.set(e.tokenTypes[t],t);for(let t=0,n=e.tokenModifiers.length;t<n;t++)this._tokenModifierStrToInt.set(e.tokenModifiers[t],t)}}push(e,t,n,r,s){if(typeof e=="number"&&typeof t=="number"&&typeof n=="number"&&typeof r=="number"&&(typeof s=="number"||typeof s>"u"))return typeof s>"u"&&(s=0),this._pushEncoded(e,t,n,r,s);if(Ee.isRange(e)&&typeof t=="string"&&w0(n))return this._push(e,t,n);throw Ie()}_push(e,t,n){if(!this._hasLegend)throw new Error("Legend must be provided in constructor");if(e.start.line!==e.end.line)throw new Error("`range` cannot span multiple lines");if(!this._tokenTypeStrToInt.has(t))throw new Error("`tokenType` is not in the provided legend");const r=e.start.line,s=e.start.character,o=e.end.character-e.start.character,a=this._tokenTypeStrToInt.get(t);let c=0;if(n)for(const u of n){if(!this._tokenModifierStrToInt.has(u))throw new Error("`tokenModifier` is not in the provided legend");const l=this._tokenModifierStrToInt.get(u);c|=1<<l>>>0}this._pushEncoded(r,s,o,a,c)}_pushEncoded(e,t,n,r,s){if(this._dataIsSortedAndDeltaEncoded&&(e<this._prevLine||e===this._prevLine&&t<this._prevChar)){this._dataIsSortedAndDeltaEncoded=!1;const c=this._data.length/5|0;let u=0,l=0;for(let g=0;g<c;g++){let h=this._data[5*g],d=this._data[5*g+1];h===0?(h=u,d+=l):h+=u,this._data[5*g]=h,this._data[5*g+1]=d,u=h,l=d}}let o=e,a=t;this._dataIsSortedAndDeltaEncoded&&this._dataLen>0&&(o-=this._prevLine,o===0&&(a-=this._prevChar)),this._data[this._dataLen++]=o,this._data[this._dataLen++]=a,this._data[this._dataLen++]=n,this._data[this._dataLen++]=r,this._data[this._dataLen++]=s,this._prevLine=e,this._prevChar=t}static _sortAndDeltaEncode(e){const t=[],n=e.length/5|0;for(let a=0;a<n;a++)t[a]=a;t.sort((a,c)=>{const u=e[5*a],l=e[5*c];if(u===l){const g=e[5*a+1],h=e[5*c+1];return g-h}return u-l});const r=new Uint32Array(e.length);let s=0,o=0;for(let a=0;a<n;a++){const c=5*t[a],u=e[c+0],l=e[c+1],g=e[c+2],h=e[c+3],d=e[c+4],p=u-s,_=p===0?l-o:l,b=5*a;r[b+0]=p,r[b+1]=_,r[b+2]=g,r[b+3]=h,r[b+4]=d,s=u,o=l}return r}build(e){return this._dataIsSortedAndDeltaEncoded?new gc(new Uint32Array(this._data),e):new gc(Bg._sortAndDeltaEncode(this._data),e)}}class gc{constructor(e,t){this.resultId=t,this.data=e}}class a_{constructor(e,t,n){this.start=e,this.deleteCount=t,this.data=n}}class qa{constructor(e,t){this.resultId=t,this.edits=e}}var uh;(function(i){i[i.Separate=0]="Separate",i[i.MergeWithParent=1]="MergeWithParent"})(uh||(uh={}));let gs=class{constructor(){}};gs.Back={iconPath:new hi("arrow-left")};gs=B([ae],gs);var Mo;(function(i){i[i.Separator=-1]="Separator",i[i.Default=0]="Default"})(Mo||(Mo={}));var ts;(function(i){i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error"})(ts||(ts={}));var dh;(function(i){i[i.UI=1]="UI",i[i.Workspace=2]="Workspace"})(dh||(dh={}));class b0{constructor(e,t,n){this.badge=e,this.tooltip=t,this.color=n}static validate(e){if(e.badge){let t=Pp(e.badge,0);if(t<e.badge.length&&(t+=Pp(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}}class Mn{constructor(e,t){if(e<0)throw Ie("start must be positive");if(t<0)throw Ie("end must be positive");e<=t?(this._start=e,this._end=t):(this._start=t,this._end=e)}static isNotebookRange(e){return e instanceof Mn?!0:e?typeof e.start=="number"&&typeof e.end=="number":!1}get start(){return this._start}get end(){return this._end}get isEmpty(){return this._start===this._end}with(e){let t=this._start,n=this._end;return e.start!==void 0&&(t=e.start),e.end!==void 0&&(n=e.end),t===this._start&&n===this._end?this:new Mn(t,n)}}class Fi{constructor(e,t,n,r,s,o,a){this.kind=e,this.value=t,this.languageId=n,this.mime=r,this.outputs=s??[],this.metadata=o,this.executionSummary=a,Fi.validate(this)}static validate(e){if(typeof e.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof e.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof e.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(e){return Array.isArray(e)&&e.every(t=>Fi.isNotebookCellData(t))}static isNotebookCellData(e){return!0}}class C0{constructor(e){this.cells=e}}class pn{constructor(e,t){this.data=e,this.mime=t;const n=t_(t,!0);if(!n)throw new Error(`INVALID mime type: ${t}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=n}static isNotebookCellOutputItem(e){return e instanceof pn?!0:e?typeof e.mime=="string"&&e.data instanceof Uint8Array:!1}static error(e){const t={name:e.name,message:e.message,stack:e.stack};return pn.json(t,"application/vnd.code.notebook.error")}static stdout(e){return pn.text(e,"application/vnd.code.notebook.stdout")}static stderr(e){return pn.text(e,"application/vnd.code.notebook.stderr")}static bytes(e,t="application/octet-stream"){return new pn(e,t)}static text(e,t=vw.text){const n=he(pn,n_,"f",i_).encode(String(e));return new pn(n,t)}static json(e,t="text/x-json"){const n=JSON.stringify(e,void 0,"	");return pn.text(n,t)}}n_=pn;i_={value:new TextEncoder};class Ao{constructor(e,t,n){this.items=Ao.ensureUniqueMimeTypes(e,!0),typeof t=="string"?(this.id=t,this.metadata=n):(this.id=Yo(),this.metadata=t??n)}static isNotebookCellOutput(e){return e instanceof Ao?!0:!e||typeof e!="object"?!1:typeof e.id=="string"&&go(e.items)}static ensureUniqueMimeTypes(e,t=!1){const n=new Set,r=new Set;for(let s=0;s<e.length;s++){const o=e[s],a=t_(o.mime);if(!n.has(a)){n.add(a);continue}r.add(s),t&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)}return r.size===0?e:e.filter((s,o)=>!r.has(o))}}var ir;(function(i){i[i.Markup=1]="Markup",i[i.Code=2]="Code"})(ir||(ir={}));var lh;(function(i){i[i.Left=1]="Left",i[i.Right=2]="Right"})(lh||(lh={}));var hh;(function(i){i[i.Default=0]="Default",i[i.InCenter=1]="InCenter",i[i.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",i[i.AtTop=3]="AtTop"})(hh||(hh={}));class S0{constructor(e,t){this.text=e,this.alignment=t}}var fh;(function(i){i[i.Default=1]="Default",i[i.Preferred=2]="Preferred"})(fh||(fh={}));var gh;(function(i){i[i.Production=1]="Production",i[i.Development=2]="Development",i[i.Test=3]="Test"})(gh||(gh={}));var rr;(function(i){i[i.Other=0]="Other",i[i.Comment=1]="Comment",i[i.String=2]="String",i[i.RegEx=3]="RegEx"})(rr||(rr={}));class D0{constructor(e,t){this.ranges=e,this.wordPattern=t}}var ph;(function(i){i[i.Run=1]="Run",i[i.Debug=2]="Debug",i[i.Coverage=3]="Coverage"})(ph||(ph={}));let mh=class{constructor(e=void 0,t=void 0,n=void 0){this.include=e,this.exclude=t,this.profile=n}};mh=B([ae],mh);let vh=El=class{constructor(e){this.message=e}static diff(e,t,n){const r=new El(e);return r.expectedOutput=t,r.actualOutput=n,r}};vh=El=B([ae],vh);let _h=class{constructor(e){this.id=e}};_h=B([ae],_h);class c_{constructor(e,t,n,r,s,o){this.kind=e,this.name=t,this.detail=n,this.uri=r,this.range=s,this.selectionRange=o}}class E0{constructor(e,t){this.original=e,this.modified=t}}class T0{constructor(e,t){this.uri=e,this.viewType=t}}class k0{constructor(e){this.viewType=e}}class P0{constructor(e,t){this.uri=e,this.notebookType=t}}class R0{constructor(e,t,n){this.original=e,this.modified=t,this.notebookType=n}}class I0{constructor(){}}var Lo;(function(i){i[i.Desktop=1]="Desktop",i[i.Web=2]="Web"})(Lo||(Lo={}));var ki;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(ki||(ki={}));function x0(i){switch(i){case ki.Line:return"line";case ki.Block:return"block";case ki.Underline:return"underline";case ki.LineThin:return"line-thin";case ki.BlockOutline:return"block-outline";case ki.UnderlineThin:return"underline-thin"}}var yh;(function(i){i[i.ACTIVATE=1]="ACTIVATE",i[i.RESTORE=2]="RESTORE",i[i.PRESERVE=3]="PRESERVE"})(yh||(yh={}));var wh;(function(i){i[i.PICK=0]="PICK",i[i.DISABLED=1]="DISABLED",i[i.EXCLUSIVE_ONLY=2]="EXCLUSIVE_ONLY"})(wh||(wh={}));var zr;(function(i){i[i.Markup=1]="Markup",i[i.Code=2]="Code"})(zr||(zr={}));var br;(function(i){function e(n){const{selectionStartLineNumber:r,selectionStartColumn:s,positionLineNumber:o,positionColumn:a}=n,c=new ke(r-1,s-1),u=new ke(o-1,a-1);return new ds(c,u)}i.to=e;function t(n){const{anchor:r,active:s}=n;return{selectionStartLineNumber:r.line+1,selectionStartColumn:r.character+1,positionLineNumber:s.line+1,positionColumn:s.character+1}}i.from=t})(br||(br={}));var K;(function(i){function e(n){if(!n)return;const{start:r,end:s}=n;return{startLineNumber:r.line+1,startColumn:r.character+1,endLineNumber:s.line+1,endColumn:s.character+1}}i.from=e;function t(n){if(!n)return;const{startLineNumber:r,startColumn:s,endLineNumber:o,endColumn:a}=n;return new Ee(r-1,s-1,o-1,a-1)}i.to=t})(K||(K={}));var bh;(function(i){function e(t){switch(t){case 1:return rr.Comment;case 0:return rr.Other;case 3:return rr.RegEx;case 2:return rr.String}}i.to=e})(bh||(bh={}));var Je;(function(i){function e(n){return new ke(n.lineNumber-1,n.column-1)}i.to=e;function t(n){return{lineNumber:n.line+1,column:n.character+1}}i.from=t})(Je||(Je={}));var pc;(function(i){function e(r,s){return Oi(sw(r).map(o=>t(o,s)))}i.from=e;function t(r,s){if(typeof r=="string")return{$serialized:!0,language:r};if(r)return{$serialized:!0,language:r.language,scheme:n(r.scheme,s),pattern:vs.from(r.pattern)??void 0,exclusive:r.exclusive,notebookType:r.notebookType}}function n(r,s){return s&&typeof r=="string"?s.transformOutgoingScheme(r):r}})(pc||(pc={}));var mc;(function(i){function e(n){switch(n){case tr.Unnecessary:return 1;case tr.Deprecated:return 2}}i.from=e;function t(n){switch(n){case 1:return tr.Unnecessary;case 2:return tr.Deprecated;default:return}}i.to=t})(mc||(mc={}));var ps;(function(i){function e(n){let r;return n.code&&(mn(n.code)||kg(n.code)?r=String(n.code):r={value:String(n.code.value),target:n.code.target}),{...K.from(n.range),message:n.message,source:n.source,code:r,severity:_c.from(n.severity),relatedInformation:n.relatedInformation&&n.relatedInformation.map(vc.from),tags:Array.isArray(n.tags)?Oi(n.tags.map(mc.from)):void 0}}i.from=e;function t(n){const r=new Xa(K.to(n),n.message,_c.to(n.severity));return r.source=n.source,r.code=mn(n.code)?n.code:n.code?.value,r.relatedInformation=n.relatedInformation&&n.relatedInformation.map(vc.to),r.tags=n.tags&&Oi(n.tags.map(mc.to)),r}i.to=t})(ps||(ps={}));var vc;(function(i){function e(n){return{...K.from(n.location.range),message:n.message,resource:n.location.uri}}i.from=e;function t(n){return new Co(new li(n.resource,K.to(n)),n.message)}i.to=t})(vc||(vc={}));var _c;(function(i){function e(n){switch(n){case At.Error:return qn.Error;case At.Warning:return qn.Warning;case At.Information:return qn.Info;case At.Hint:return qn.Hint}return qn.Error}i.from=e;function t(n){switch(n){case qn.Info:return At.Information;case qn.Warning:return At.Warning;case qn.Error:return At.Error;case qn.Hint:return At.Hint;default:return At.Error}}i.to=t})(_c||(_c={}));var hr;(function(i){function e(n){return typeof n=="number"&&n>=hs.One?n-1:n===hs.Beside?Oa:pl}i.from=e;function t(n){if(typeof n=="number"&&n>=0)return n+1;throw new Error("invalid 'EditorGroupColumn'")}i.to=t})(hr||(hr={}));function F0(i){return typeof i.range<"u"}function u_(i){return i.length===0?!0:!!F0(i[0])}var cn;(function(i){function e(a){return a.map(i.from)}i.fromMany=e;function t(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function n(a){let c;if(t(a)){const{language:h,value:d}=a;c={value:"```"+h+`
`+d+"\n```\n"}}else ls.isMarkdownString(a)?c={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,baseUri:a.baseUri}:typeof a=="string"?c={value:a}:c={value:""};const u=Object.create(null);c.uris=u;const l=h=>{try{let d=x.parse(h,!0);d=d.with({query:r(d.query,u)}),u[h]=d}catch{}return""},g=new am.Renderer;return g.link=l,g.image=h=>typeof h=="string"?l(ow(h).href):"",am(c.value,{renderer:g}),c}i.from=n;function r(a,c){if(!a)return a;let u;try{u=_w(a)}catch{}if(!u)return a;let l=!1;return u=rl(u,g=>{if(x.isUri(g)){const h=`__uri_${Math.random().toString(16).slice(2,8)}`;return c[h]=g,l=!0,h}else return}),l?JSON.stringify(u):a}function s(a){const c=new ls(a.value,a.supportThemeIcons);return c.isTrusted=a.isTrusted,c.supportHtml=a.supportHtml,c.baseUri=a.baseUri?x.from(a.baseUri):void 0,c}i.to=s;function o(a){if(!!a)return typeof a=="string"?a:i.from(a)}i.fromStrict=o})(cn||(cn={}));function M0(i){return u_(i)?i.map(e=>({range:K.from(e.range),hoverMessage:Array.isArray(e.hoverMessage)?cn.fromMany(e.hoverMessage):e.hoverMessage?cn.from(e.hoverMessage):void 0,renderOptions:e.renderOptions})):i.map(e=>({range:K.from(e)}))}function Vg(i){return typeof i>"u"?i:typeof i=="string"?x.file(i):i}var ms;(function(i){function e(t){return typeof t>"u"?t:{contentText:t.contentText,contentIconPath:t.contentIconPath?Vg(t.contentIconPath):void 0,border:t.border,borderColor:t.borderColor,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textDecoration:t.textDecoration,color:t.color,backgroundColor:t.backgroundColor,margin:t.margin,width:t.width,height:t.height}}i.from=e})(ms||(ms={}));var yc;(function(i){function e(t){return typeof t>"u"?t:{backgroundColor:t.backgroundColor,outline:t.outline,outlineColor:t.outlineColor,outlineStyle:t.outlineStyle,outlineWidth:t.outlineWidth,border:t.border,borderColor:t.borderColor,borderRadius:t.borderRadius,borderSpacing:t.borderSpacing,borderStyle:t.borderStyle,borderWidth:t.borderWidth,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textDecoration:t.textDecoration,cursor:t.cursor,color:t.color,opacity:t.opacity,letterSpacing:t.letterSpacing,gutterIconPath:t.gutterIconPath?Vg(t.gutterIconPath):void 0,gutterIconSize:t.gutterIconSize,overviewRulerColor:t.overviewRulerColor,before:t.before?ms.from(t.before):void 0,after:t.after?ms.from(t.after):void 0}}i.from=e})(yc||(yc={}));var Ch;(function(i){function e(t){if(typeof t>"u")return t;switch(t){case nr.OpenOpen:return 0;case nr.ClosedClosed:return 1;case nr.OpenClosed:return 2;case nr.ClosedOpen:return 3}}i.from=e})(Ch||(Ch={}));var Sh;(function(i){function e(t){return{isWholeLine:t.isWholeLine,rangeBehavior:t.rangeBehavior?Ch.from(t.rangeBehavior):void 0,overviewRulerLane:t.overviewRulerLane,light:t.light?yc.from(t.light):void 0,dark:t.dark?yc.from(t.dark):void 0,backgroundColor:t.backgroundColor,outline:t.outline,outlineColor:t.outlineColor,outlineStyle:t.outlineStyle,outlineWidth:t.outlineWidth,border:t.border,borderColor:t.borderColor,borderRadius:t.borderRadius,borderSpacing:t.borderSpacing,borderStyle:t.borderStyle,borderWidth:t.borderWidth,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textDecoration:t.textDecoration,cursor:t.cursor,color:t.color,opacity:t.opacity,letterSpacing:t.letterSpacing,gutterIconPath:t.gutterIconPath?Vg(t.gutterIconPath):void 0,gutterIconSize:t.gutterIconSize,overviewRulerColor:t.overviewRulerColor,before:t.before?ms.from(t.before):void 0,after:t.after?ms.from(t.after):void 0}}i.from=e})(Sh||(Sh={}));var wn;(function(i){function e(n){return{text:n.newText,eol:n.newEol&&Oo.from(n.newEol),range:K.from(n.range)}}i.from=e;function t(n){const r=new wo(K.to(n.range),n.text);return r.newEol=typeof n.eol>"u"?void 0:Oo.to(n.eol),r}i.to=t})(wn||(wn={}));var Ni;(function(i){function e(n,r,s){const o={edits:[]};if(n instanceof bo){const a=new Kb;for(const c of n._allEntries())c._type===1&&x.isUri(c.to)&&c.from===void 0&&a.add(c.to);for(const c of n._allEntries())if(c._type===1)o.edits.push({oldResource:c.from,newResource:c.to,options:c.options,metadata:c.metadata});else if(c._type===2)o.edits.push({resource:c.uri,textEdit:wn.from(c.edit),versionId:a.has(c.uri)?void 0:r?.getTextDocumentVersion(c.uri),metadata:c.metadata});else if(c._type===6){if(!s){console.warn("DROPPING snippet text edit because proposal IS NOT ENABLED",c);continue}o.edits.push({resource:c.uri,textEdit:{range:K.from(c.range),text:c.edit.value,insertAsSnippet:!0},versionId:a.has(c.uri)?void 0:r?.getTextDocumentVersion(c.uri),metadata:c.metadata})}else c._type===3?o.edits.push({metadata:c.metadata,resource:c.uri,cellEdit:c.edit,notebookMetadata:c.notebookMetadata,notebookVersionId:r?.getNotebookDocumentVersion(c.uri)}):c._type===5&&o.edits.push({metadata:c.metadata,resource:c.uri,notebookVersionId:r?.getNotebookDocumentVersion(c.uri),cellEdit:{editType:1,index:c.index,count:c.count,cells:c.cells.map(jh.from)}})}return o}i.from=e;function t(n){const r=new bo;for(const s of n.edits)s.textEdit?r.replace(x.revive(s.resource),K.to(s.textEdit.range),s.textEdit.text):r.renameFile(x.revive(s.oldResource),x.revive(s.newResource),s.options);return r}i.to=t})(Ni||(Ni={}));var On;(function(i){const e=Object.create(null);e[Be.File]=0,e[Be.Module]=1,e[Be.Namespace]=2,e[Be.Package]=3,e[Be.Class]=4,e[Be.Method]=5,e[Be.Property]=6,e[Be.Field]=7,e[Be.Constructor]=8,e[Be.Enum]=9,e[Be.Interface]=10,e[Be.Function]=11,e[Be.Variable]=12,e[Be.Constant]=13,e[Be.String]=14,e[Be.Number]=15,e[Be.Boolean]=16,e[Be.Array]=17,e[Be.Object]=18,e[Be.Key]=19,e[Be.Null]=20,e[Be.EnumMember]=21,e[Be.Struct]=22,e[Be.Event]=23,e[Be.Operator]=24,e[Be.TypeParameter]=25;function t(r){return typeof e[r]=="number"?e[r]:6}i.from=t;function n(r){for(const s in e)if(e[s]===r)return Number(s);return Be.Property}i.to=n})(On||(On={}));var fi;(function(i){function e(n){switch(n){case Do.Deprecated:return 1}}i.from=e;function t(n){switch(n){case 1:return Do.Deprecated}}i.to=t})(fi||(fi={}));var wc;(function(i){function e(n){return{name:n.name,kind:On.from(n.kind),tags:n.tags&&n.tags.map(fi.from),containerName:n.containerName,location:Hi.from(n.location)}}i.from=e;function t(n){const r=new ec(n.name,On.to(n.kind),n.containerName,Hi.to(n.location));return r.tags=n.tags&&n.tags.map(fi.to),r}i.to=t})(wc||(wc={}));var Dh;(function(i){function e(n){const r={name:n.name||"!!MISSING: name!!",detail:n.detail,range:K.from(n.range),selectionRange:K.from(n.selectionRange),kind:On.from(n.kind),tags:n.tags?.map(fi.from)??[]};return n.children&&(r.children=n.children.map(e)),r}i.from=e;function t(n){const r=new Eo(n.name,n.detail,On.to(n.kind),K.to(n.range),K.to(n.selectionRange));return ea(n.tags)&&(r.tags=n.tags.map(fi.to)),n.children&&(r.children=n.children.map(t)),r}i.to=t})(Dh||(Dh={}));var Eh;(function(i){function e(n){const r=new r_(On.to(n.kind),n.name,n.detail||"",x.revive(n.uri),K.to(n.range),K.to(n.selectionRange));return r._sessionId=n._sessionId,r._itemId=n._itemId,r}i.to=e;function t(n,r,s){if(r=r??n._sessionId,s=s??n._itemId,r===void 0||s===void 0)throw new Error("invalid item");return{_sessionId:r,_itemId:s,name:n.name,detail:n.detail,kind:On.from(n.kind),uri:n.uri,range:K.from(n.range),selectionRange:K.from(n.selectionRange),tags:n.tags?.map(fi.from)}}i.from=t})(Eh||(Eh={}));var Hi;(function(i){function e(n){return{range:n.range&&K.from(n.range),uri:n.uri}}i.from=e;function t(n){return new li(x.revive(n.uri),K.to(n.range))}i.to=t})(Hi||(Hi={}));var bc;(function(i){function e(n){const r=n,s=n;return{originSelectionRange:r.originSelectionRange?K.from(r.originSelectionRange):void 0,uri:r.targetUri?r.targetUri:s.uri,range:K.from(r.targetRange?r.targetRange:s.range),targetSelectionRange:r.targetSelectionRange?K.from(r.targetSelectionRange):void 0}}i.from=e;function t(n){return{targetUri:x.revive(n.uri),targetRange:K.to(n.range),targetSelectionRange:n.targetSelectionRange?K.to(n.targetSelectionRange):void 0,originSelectionRange:n.originSelectionRange?K.to(n.originSelectionRange):void 0}}i.to=t})(bc||(bc={}));var Th;(function(i){function e(n){return{range:K.from(n.range),contents:cn.fromMany(n.contents)}}i.from=e;function t(n){return new Ya(n.contents.map(cn.to),K.to(n.range))}i.to=t})(Th||(Th={}));var kh;(function(i){function e(n){return{range:K.from(n.range),expression:n.expression}}i.from=e;function t(n){return new uc(K.to(n.range),n.expression)}i.to=t})(kh||(kh={}));var Ph;(function(i){function e(n){if(n instanceof lc)return{type:"text",range:K.from(n.range),text:n.text};if(n instanceof hc)return{type:"variable",range:K.from(n.range),variableName:n.variableName,caseSensitiveLookup:n.caseSensitiveLookup};if(n instanceof fc)return{type:"expression",range:K.from(n.range),expression:n.expression};throw new Error("Unknown 'InlineValue' type")}i.from=e;function t(n){switch(n.type){case"text":return{range:K.to(n.range),text:n.text};case"variable":return{range:K.to(n.range),variableName:n.variableName,caseSensitiveLookup:n.caseSensitiveLookup};case"expression":return{range:K.to(n.range),expression:n.expression}}}i.to=t})(Ph||(Ph={}));var Rh;(function(i){function e(n){return{frameId:n.frameId,stoppedLocation:K.from(n.stoppedLocation)}}i.from=e;function t(n){return new ih(n.frameId,K.to(n.stoppedLocation))}i.to=t})(Rh||(Rh={}));var Ih;(function(i){function e(n){return{range:K.from(n.range),kind:n.kind}}i.from=e;function t(n){return new Za(K.to(n.range),n.kind)}i.to=t})(Ih||(Ih={}));var xh;(function(i){function e(t){switch(t){case 1:return Qr.TriggerCharacter;case 2:return Qr.TriggerForIncompleteCompletions;case 0:default:return Qr.Invoke}}i.to=e})(xh||(xh={}));var Fh;(function(i){function e(t){return{triggerKind:xh.to(t.triggerKind),triggerCharacter:t.triggerCharacter}}i.to=e})(Fh||(Fh={}));var Mh;(function(i){function e(n){switch(n){case ko.Deprecated:return 1}}i.from=e;function t(n){switch(n){case 1:return ko.Deprecated}}i.to=t})(Mh||(Mh={}));var Ah;(function(i){const e=new Map([[de.Method,0],[de.Function,1],[de.Constructor,2],[de.Field,3],[de.Variable,4],[de.Class,5],[de.Interface,7],[de.Struct,6],[de.Module,8],[de.Property,9],[de.Unit,12],[de.Value,13],[de.Constant,14],[de.Enum,15],[de.EnumMember,16],[de.Keyword,17],[de.Snippet,27],[de.Text,18],[de.Color,19],[de.File,20],[de.Reference,21],[de.Folder,23],[de.Event,10],[de.Operator,11],[de.TypeParameter,24],[de.Issue,26],[de.User,25]]);function t(s){return e.get(s)??9}i.from=t;const n=new Map([[0,de.Method],[1,de.Function],[2,de.Constructor],[3,de.Field],[4,de.Variable],[5,de.Class],[7,de.Interface],[6,de.Struct],[8,de.Module],[9,de.Property],[12,de.Unit],[13,de.Value],[14,de.Constant],[15,de.Enum],[16,de.EnumMember],[17,de.Keyword],[27,de.Snippet],[18,de.Text],[19,de.Color],[20,de.File],[21,de.Reference],[23,de.Folder],[10,de.Event],[11,de.Operator],[24,de.TypeParameter],[25,de.User],[26,de.Issue]]);function r(s){return n.get(s)??de.Property}i.to=r})(Ah||(Ah={}));var Cc;(function(i){function e(n){return{label:n.label,documentation:cn.fromStrict(n.documentation)}}i.from=e;function t(n){return{label:n.label,documentation:bv(n.documentation)?cn.to(n.documentation):n.documentation}}i.to=t})(Cc||(Cc={}));var Sc;(function(i){function e(n){return{label:n.label,documentation:cn.fromStrict(n.documentation),parameters:Array.isArray(n.parameters)?n.parameters.map(Cc.from):[],activeParameter:n.activeParameter}}i.from=e;function t(n){return{label:n.label,documentation:bv(n.documentation)?cn.to(n.documentation):n.documentation,parameters:Array.isArray(n.parameters)?n.parameters.map(Cc.to):[],activeParameter:n.activeParameter}}i.to=t})(Sc||(Sc={}));var Dc;(function(i){function e(n){return{activeSignature:n.activeSignature,activeParameter:n.activeParameter,signatures:Array.isArray(n.signatures)?n.signatures.map(Sc.from):[]}}i.from=e;function t(n){return{activeSignature:n.activeSignature,activeParameter:n.activeParameter,signatures:Array.isArray(n.signatures)?n.signatures.map(Sc.to):[]}}i.to=t})(Dc||(Dc={}));var Lh;(function(i){function e(n){return n}i.from=e;function t(n){return n}i.to=t})(Lh||(Lh={}));var uo;(function(i){function e(n){return{range:K.from(n.range),url:n.target,tooltip:n.tooltip}}i.from=e;function t(n){let r;if(n.url)try{r=typeof n.url=="string"?x.parse(n.url,!0):x.revive(n.url)}catch{}return new rc(K.to(n.range),r)}i.to=t})(uo||(uo={}));var Oh;(function(i){function e(n){const r=new sc(n.label);return n.textEdit&&(r.textEdit=wn.to(n.textEdit)),n.additionalTextEdits&&(r.additionalTextEdits=n.additionalTextEdits.map(s=>wn.to(s))),r}i.to=e;function t(n){return{label:n.label,textEdit:n.textEdit?wn.from(n.textEdit):void 0,additionalTextEdits:n.additionalTextEdits?n.additionalTextEdits.map(r=>wn.from(r)):void 0}}i.from=t})(Oh||(Oh={}));var Ec;(function(i){function e(n){return new Ro(n[0],n[1],n[2],n[3])}i.to=e;function t(n){return[n.red,n.green,n.blue,n.alpha]}i.from=t})(Ec||(Ec={}));var $h;(function(i){function e(n){return{range:K.from(n.range)}}i.from=e;function t(n){return new tc(K.to(n.range))}i.to=t})($h||($h={}));var ns;(function(i){function e(n){switch(n){case ei.Off:return 0;case ei.Relative:return 2;case ei.On:default:return 1}}i.from=e;function t(n){switch(n){case 0:return ei.Off;case 2:return ei.Relative;case 1:default:return ei.On}}i.to=t})(ns||(ns={}));var Oo;(function(i){function e(n){if(n===Fn.CRLF)return 1;if(n===Fn.LF)return 0}i.from=e;function t(n){if(n===1)return Fn.CRLF;if(n===0)return Fn.LF}i.to=t})(Oo||(Oo={}));var Nh;(function(i){function e(t){if(typeof t=="object")return t.viewId;switch(t){case lr.SourceControl:return 3;case lr.Window:return 10;case lr.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}i.from=e})(Nh||(Nh={}));var Hh;(function(i){function e(t){const n={start:t.start+1,end:t.end+1};return t.kind&&(n.kind=qh.from(t.kind)),n}i.from=e})(Hh||(Hh={}));var qh;(function(i){function e(t){if(t)switch(t){case es.Comment:return _d.Comment;case es.Imports:return _d.Imports;case es.Region:return _d.Region}}i.from=e})(qh||(qh={}));var vs;(function(i){function e(s){return s instanceof Zr?s.toJSON():typeof s=="string"?s:t(s)||n(s)?new Zr(s.baseUri??s.base,s.pattern).toJSON():s}i.from=e;function t(s){const o=s;return o?x.isUri(o.baseUri)&&typeof o.pattern=="string":!1}function n(s){const o=s;return o?typeof o.base=="string"&&typeof o.pattern=="string":!1}function r(s){return typeof s=="string"?s:new Zr(x.revive(s.baseUri),s.pattern)}i.to=r})(vs||(vs={}));var Wh;(function(i){function e(t){if(t){if(Array.isArray(t))return t.map(e);if(typeof t=="string")return t;{const n=t;return{language:n.language,scheme:n.scheme,pattern:vs.from(n.pattern),exclusive:n.exclusive,notebookType:n.notebookType}}}else return}i.from=e})(Wh||(Wh={}));var Uh;(function(i){function e(n){return{start:n.start,end:n.end}}i.from=e;function t(n){return new Mn(n.start,n.end)}i.to=t})(Uh||(Uh={}));var Tc;(function(i){function e(n){return{timing:typeof n.runStartTime=="number"&&typeof n.runEndTime=="number"?{startTime:n.runStartTime,endTime:n.runEndTime}:void 0,executionOrder:n.executionOrder,success:n.lastRunSuccess}}i.to=e;function t(n){return{lastRunSuccess:n.success,runStartTime:n.timing?.startTime,runEndTime:n.timing?.endTime,executionOrder:n.executionOrder}}i.from=t})(Tc||(Tc={}));var kc;(function(i){function e(n){switch(n){case ir.Markup:return zr.Markup;case ir.Code:default:return zr.Code}}i.from=e;function t(n){switch(n){case zr.Markup:return ir.Markup;case zr.Code:default:return ir.Code}}i.to=t})(kc||(kc={}));var jh;(function(i){function e(n){return{cellKind:kc.from(n.kind),language:n.languageId,mime:n.mime,source:n.value,metadata:n.metadata,internalMetadata:Tc.from(n.executionSummary??{}),outputs:n.outputs?n.outputs.map(Rc.from):[]}}i.from=e;function t(n){return new Fi(kc.to(n.cellKind),n.source,n.language,n.mime,n.outputs?n.outputs.map(Rc.to):void 0,n.metadata,n.internalMetadata?Tc.to(n.internalMetadata):void 0)}i.to=t})(jh||(jh={}));var Pc;(function(i){function e(n){return{mime:n.mime,valueBytes:rt.wrap(n.data)}}i.from=e;function t(n){return new pn(n.valueBytes.buffer,n.mime)}i.to=t})(Pc||(Pc={}));var Rc;(function(i){function e(n){return{outputId:n.id,items:n.items.map(Pc.from),metadata:n.metadata}}i.from=e;function t(n){const r=n.items.map(Pc.to);return new Ao(r,n.outputId,n.metadata)}i.to=t})(Rc||(Rc={}));var zh;(function(i){function e(t){switch(t){case 1:return To.Invoke;case 2:return To.Automatic}}i.to=e})(zh||(zh={}));var Bh;(function(i){function e(n){const r=new c_(On.to(n.kind),n.name,n.detail||"",x.revive(n.uri),K.to(n.range),K.to(n.selectionRange));return r._sessionId=n._sessionId,r._itemId=n._itemId,r}i.to=e;function t(n,r,s){if(r=r??n._sessionId,s=s??n._itemId,r===void 0||s===void 0)throw new Error("invalid item");return{_sessionId:r,_itemId:s,kind:On.from(n.kind),name:n.name,detail:n.detail??"",uri:n.uri,range:K.from(n.range),selectionRange:K.from(n.selectionRange),tags:n.tags?.map(fi.from)}}i.from=t})(Bh||(Bh={}));var Vh;(function(i){function e(t,n){const r=t.fileData;return r?new class extends cc{asFile(){return{name:r.name,uri:x.revive(r.uri),data:aw(()=>n())}}}(""):new cc(t.asString)}i.toDataTransferItem=e})(Vh||(Vh={}));var oi;(function(i){function e(n,r){const s=n.items.map(([o,a],c)=>[o,Vh.toDataTransferItem(a,()=>r(c))]);return new Gl(s)}i.toDataTransfer=e;async function t(n){const r={items:[]},s=[];return n.forEach((o,a)=>{s.push((async()=>{const c=await o.asString(),u=o.asFile();r.items.push([a,{asString:c,fileData:u?{name:u.name,uri:u.uri}:void 0}])})())}),await Promise.all(s),r}i.toDataTransferDTO=t})(oi||(oi={}));class oa{constructor(e){this._proxyIdentifierBrand=void 0,this.sid=e,this.nid=++oa.count}}oa.count=0;const d_=[];function H(i){const e=new oa(i);return d_[e.nid]=e,e}function Ca(i){return d_[i].sid}class sr{constructor(e){this.value=e}}var Br;(function(i){i[i.Default=0]="Default",i[i.InCenter=1]="InCenter",i[i.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",i[i.AtTop=3]="AtTop"})(Br||(Br={}));function is(i){return i&&i.edits&&vr(i),i}const _e={MainThreadAuthentication:H("MainThreadAuthentication"),MainThreadBulkEdits:H("MainThreadBulkEdits"),MainThreadClipboard:H("MainThreadClipboard"),MainThreadCommands:H("MainThreadCommands"),MainThreadComments:H("MainThreadComments"),MainThreadConfiguration:H("MainThreadConfiguration"),MainThreadConsole:H("MainThreadConsole"),MainThreadDebugService:H("MainThreadDebugService"),MainThreadDecorations:H("MainThreadDecorations"),MainThreadDiagnostics:H("MainThreadDiagnostics"),MainThreadDialogs:H("MainThreadDiaglogs"),MainThreadDocuments:H("MainThreadDocuments"),MainThreadDocumentContentProviders:H("MainThreadDocumentContentProviders"),MainThreadTextEditors:H("MainThreadTextEditors"),MainThreadEditorInsets:H("MainThreadEditorInsets"),MainThreadEditorTabs:H("MainThreadEditorTabs"),MainThreadErrors:H("MainThreadErrors"),MainThreadTreeViews:H("MainThreadTreeViews"),MainThreadDownloadService:H("MainThreadDownloadService"),MainThreadKeytar:H("MainThreadKeytar"),MainThreadLanguageFeatures:H("MainThreadLanguageFeatures"),MainThreadLanguages:H("MainThreadLanguages"),MainThreadLogger:H("MainThreadLogger"),MainThreadMessageService:H("MainThreadMessageService"),MainThreadOutputService:H("MainThreadOutputService"),MainThreadProgress:H("MainThreadProgress"),MainThreadQuickOpen:H("MainThreadQuickOpen"),MainThreadStatusBar:H("MainThreadStatusBar"),MainThreadSecretState:H("MainThreadSecretState"),MainThreadStorage:H("MainThreadStorage"),MainThreadTelemetry:H("MainThreadTelemetry"),MainThreadTerminalService:H("MainThreadTerminalService"),MainThreadWebviews:H("MainThreadWebviews"),MainThreadWebviewPanels:H("MainThreadWebviewPanels"),MainThreadWebviewViews:H("MainThreadWebviewViews"),MainThreadCustomEditors:H("MainThreadCustomEditors"),MainThreadUrls:H("MainThreadUrls"),MainThreadUriOpeners:H("MainThreadUriOpeners"),MainThreadWorkspace:H("MainThreadWorkspace"),MainThreadFileSystem:H("MainThreadFileSystem"),MainThreadExtensionService:H("MainThreadExtensionService"),MainThreadSCM:H("MainThreadSCM"),MainThreadSearch:H("MainThreadSearch"),MainThreadTask:H("MainThreadTask"),MainThreadWindow:H("MainThreadWindow"),MainThreadLabelService:H("MainThreadLabelService"),MainThreadNotebook:H("MainThreadNotebook"),MainThreadNotebookDocuments:H("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:H("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:H("MainThreadNotebookKernels"),MainThreadNotebookRenderers:H("MainThreadNotebookRenderers"),MainThreadInteractive:H("MainThreadInteractive"),MainThreadTheming:H("MainThreadTheming"),MainThreadTunnelService:H("MainThreadTunnelService"),MainThreadTimeline:H("MainThreadTimeline"),MainThreadTesting:H("MainThreadTesting")},tt={ExtHostCommands:H("ExtHostCommands"),ExtHostConfiguration:H("ExtHostConfiguration"),ExtHostDiagnostics:H("ExtHostDiagnostics"),ExtHostDebugService:H("ExtHostDebugService"),ExtHostDecorations:H("ExtHostDecorations"),ExtHostDocumentsAndEditors:H("ExtHostDocumentsAndEditors"),ExtHostDocuments:H("ExtHostDocuments"),ExtHostDocumentContentProviders:H("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:H("ExtHostDocumentSaveParticipant"),ExtHostEditors:H("ExtHostEditors"),ExtHostTreeViews:H("ExtHostTreeViews"),ExtHostFileSystem:H("ExtHostFileSystem"),ExtHostFileSystemInfo:H("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:H("ExtHostFileSystemEventService"),ExtHostLanguages:H("ExtHostLanguages"),ExtHostLanguageFeatures:H("ExtHostLanguageFeatures"),ExtHostQuickOpen:H("ExtHostQuickOpen"),ExtHostExtensionService:H("ExtHostExtensionService"),ExtHostLogLevelServiceShape:H("ExtHostLogLevelServiceShape"),ExtHostTerminalService:H("ExtHostTerminalService"),ExtHostSCM:H("ExtHostSCM"),ExtHostSearch:H("ExtHostSearch"),ExtHostTask:H("ExtHostTask"),ExtHostWorkspace:H("ExtHostWorkspace"),ExtHostWindow:H("ExtHostWindow"),ExtHostWebviews:H("ExtHostWebviews"),ExtHostWebviewPanels:H("ExtHostWebviewPanels"),ExtHostCustomEditors:H("ExtHostCustomEditors"),ExtHostWebviewViews:H("ExtHostWebviewViews"),ExtHostEditorInsets:H("ExtHostEditorInsets"),ExtHostEditorTabs:H("ExtHostEditorTabs"),ExtHostProgress:H("ExtHostProgress"),ExtHostComments:H("ExtHostComments"),ExtHostSecretState:H("ExtHostSecretState"),ExtHostStorage:H("ExtHostStorage"),ExtHostUrls:H("ExtHostUrls"),ExtHostUriOpeners:H("ExtHostUriOpeners"),ExtHostOutputService:H("ExtHostOutputService"),ExtHosLabelService:H("ExtHostLabelService"),ExtHostNotebook:H("ExtHostNotebook"),ExtHostNotebookDocuments:H("ExtHostNotebookDocuments"),ExtHostNotebookEditors:H("ExtHostNotebookEditors"),ExtHostNotebookKernels:H("ExtHostNotebookKernels"),ExtHostNotebookRenderers:H("ExtHostNotebookRenderers"),ExtHostInteractive:H("ExtHostInteractive"),ExtHostTheming:H("ExtHostTheming"),ExtHostTunnelService:H("ExtHostTunnelService"),ExtHostAuthentication:H("ExtHostAuthentication"),ExtHostTimeline:H("ExtHostTimeline"),ExtHostTesting:H("ExtHostTesting"),ExtHostTelemetry:H("ExtHostTelemetry")},Sr=Qe("IExtHostRpcService");var Ei,Wa;let Kh=class{constructor(e,t){Ei.set(this,void 0),this._commands=new Map,this._apiCommands=new Map,Wa.set(this,void 0),Ii(this,Ei,e.getProxy(_e.MainThreadCommands),"f"),this._logService=t,Ii(this,Wa,e.getProxy(_e.MainThreadTelemetry),"f"),this.converter=new A0(this,n=>{const r=this._apiCommands.get(n);return r?.result===Gh.Void?r:void 0},t),this._argumentProcessors=[{processArgument(n){return vr(n)}},{processArgument(n){return rl(n,function(r){if($i.isIRange(r))return K.to(r);if(d0.isIPosition(r))return Je.to(r);if($i.isIRange(r.range)&&x.isUri(r.uri))return Hi.to(r);if(r instanceof rt)return r.buffer.buffer;if(!Array.isArray(r))return r})}}]}registerArgumentProcessor(e){this._argumentProcessors.push(e)}registerApiCommand(e){const t=this.registerCommand(!1,e.id,async(...n)=>{const r=e.args.map((o,a)=>{if(!o.validate(n[a]))throw new Error(`Invalid argument '${o.name}' when running '${e.id}', received: ${n[a]}`);return o.convert(n[a])}),s=await this.executeCommand(e.internalId,...r);return e.result.convert(s,n,this.converter)},void 0,{description:e.description,args:e.args,returns:e.result.description});return this._apiCommands.set(e.id,e),new vn(()=>{t.dispose(),this._apiCommands.delete(e.id)})}registerCommand(e,t,n,r,s,o){if(this._logService.trace("ExtHostCommands#registerCommand",t),!t.trim().length)throw new Error("invalid id");if(this._commands.has(t))throw new Error(`command '${t}' already exists`);return this._commands.set(t,{callback:n,thisArg:r,description:s,extension:o}),e&&he(this,Ei,"f").$registerCommand(t),new vn(()=>{this._commands.delete(t)&&e&&he(this,Ei,"f").$unregisterCommand(t)})}executeCommand(e,...t){return this._logService.trace("ExtHostCommands#executeCommand",e),this._doExecuteCommand(e,t,!0)}async _doExecuteCommand(e,t,n){if(this._commands.has(e))return he(this,Ei,"f").$fireCommandActivationEvent(e),this._executeContributedCommand(e,t,!1);{let r=!1;const s=rl(t,function(o){if(o instanceof ke)return Je.from(o);if(o instanceof Ee)return K.from(o);if(o instanceof li)return Hi.from(o);if(Mn.isNotebookRange(o))return Uh.from(o);if(o instanceof ArrayBuffer)return r=!0,rt.wrap(new Uint8Array(o));if(o instanceof Uint8Array)return r=!0,rt.wrap(o);if(o instanceof rt)return r=!0,o;if(!Array.isArray(o))return o});try{const o=await he(this,Ei,"f").$executeCommand(e,r?new sr(s):s,n);return vr(o)}catch(o){if(o instanceof Error&&o.message==="$executeCommand:retry")return this._doExecuteCommand(e,t,!1);throw o}}}async _executeContributedCommand(e,t,n){const r=this._commands.get(e);if(!r)throw new Error("Unknown command");this._reportTelemetry(r,e);const{callback:s,thisArg:o,description:a}=r;if(a)for(let c=0;c<a.args.length;c++)try{yw(t[c],a.args[c].constraint)}catch{throw new Error(`Running the contributed command: '${e}' failed. Illegal argument '${a.args[c].name}' - ${a.args[c].description}`)}try{return await s.apply(o,t)}catch(c){if(e===this.converter.delegatingCommandId){const u=this.converter.getActualCommand(...t);u&&(e=u.command)}throw this._logService.error(c,e,r.extension?.identifier),n?new class extends Error{constructor(){super(Cv(c)),this.id=e,this.source=r.extension?.displayName??r.extension?.name}}:c}}_reportTelemetry(e,t){!e.extension||e.extension.isBuiltin||he(this,Wa,"f").$publicLog2("Extension:ActionExecuted",{extensionId:e.extension.identifier.value,id:t})}$executeContributedCommand(e,...t){return this._logService.trace("ExtHostCommands#$executeContributedCommand",e),this._commands.has(e)?(t=t.map(n=>this._argumentProcessors.reduce((r,s)=>s.processArgument(r),n)),this._executeContributedCommand(e,t,!0)):Promise.reject(new Error(`Contributed command '${e}' does not exist.`))}getCommands(e=!1){return this._logService.trace("ExtHostCommands#getCommands",e),he(this,Ei,"f").$getCommands().then(t=>(e&&(t=t.filter(n=>n[0]!=="_")),t))}$getContributedCommandHandlerDescriptions(){const e=Object.create(null);for(const[t,n]of this._commands){const{description:r}=n;r&&(e[t]=r)}return Promise.resolve(e)}};Ei=new WeakMap,Wa=new WeakMap;Kh=B([G(0,Sr),G(1,pi)],Kh);class A0{constructor(e,t,n){this._commands=e,this._lookupApiCommand=t,this._logService=n,this.delegatingCommandId=`_vscode_delegate_cmd_${Date.now().toString(36)}`,this._cache=new Map,this._cachIdPool=0,this._commands.registerCommand(!0,this.delegatingCommandId,this._executeConvertedCommand,this)}toInternal(e,t){if(!e)return;const n={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return n;const r=this._lookupApiCommand(e.command);if(r)n.id=r.internalId,n.arguments=r.args.map((s,o)=>s.convert(e.arguments&&e.arguments[o]));else if(ea(e.arguments)){const s=++this._cachIdPool;this._cache.set(s,e),t.add(sl(()=>{this._cache.delete(s),this._logService.trace("CommandsConverter#DISPOSE",s)})),n.$ident=s,n.id=this.delegatingCommandId,n.arguments=[s],this._logService.trace("CommandsConverter#CREATE",e.command,s)}return n}fromInternal(e){return typeof e.$ident=="number"?this._cache.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this._cache.get(e[0])}_executeConvertedCommand(...e){const t=this.getActualCommand(...e);return this._logService.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this._commands.executeCommand(t.command,...t.arguments||[]):Promise.reject("actual command NOT FOUND")}}class Gh{constructor(e,t){this.description=e,this.convert=t}}Gh.Void=new Gh("no result",i=>i);function dn(i){return function(e){Ic.INSTANCE.registerNamedCustomer(i,e)}}function L0(i){Ic.INSTANCE.registerCustomer(i)}class Ic{constructor(){this._namedCustomers=[],this._customers=[]}registerNamedCustomer(e,t){const n=[e,t];this._namedCustomers.push(n)}getNamedCustomers(){return this._namedCustomers}registerCustomer(e){this._customers.push(e)}getCustomers(){return this._customers}}Ic.INSTANCE=new Ic;let Jh=class{constructor(e,t,n){this._commandService=t,this._extensionService=n,this._commandRegistrations=new Map,this._proxy=e.getProxy(tt.ExtHostCommands),this._generateCommandsDocumentationRegistration=Fs.registerCommand("_generateCommandsDocumentation",()=>this._generateCommandsDocumentation())}dispose(){Gt(this._commandRegistrations.values()),this._commandRegistrations.clear(),this._generateCommandsDocumentationRegistration.dispose()}async _generateCommandsDocumentation(){const e=await this._proxy.$getContributedCommandHandlerDescriptions(),t=Fs.getCommands();for(const[r,s]of t)s.description&&(e[r]=s.description);const n=[];for(const r in e)n.push("`"+r+"` - "+O0(e[r]));console.log(n.join(`
`))}$registerCommand(e){this._commandRegistrations.set(e,Fs.registerCommand(e,(t,...n)=>this._proxy.$executeContributedCommand(e,...n).then(r=>vr(r))))}$unregisterCommand(e){const t=this._commandRegistrations.get(e);t&&(t.dispose(),this._commandRegistrations.delete(e))}$fireCommandActivationEvent(e){const t=`onCommand:${e}`;this._extensionService.activationEventIsDone(t)||this._extensionService.activateByEvent(t)}async $executeCommand(e,t,n){t instanceof sr&&(t=t.value);for(let r=0;r<t.length;r++)t[r]=vr(t[r]);if(n&&t.length>0&&!Fs.getCommand(e))throw await this._extensionService.activateByEvent(`onCommand:${e}`),new Error("$executeCommand:retry");return this._commandService.executeCommand(e,...t)}$getCommands(){return Promise.resolve([...Fs.getCommands().keys()])}};Jh=B([dn(_e.MainThreadCommands),G(1,Qc),G(2,Ug)],Jh);function O0(i){if(typeof i=="string")return i;{const e=[i.description];if(e.push(`

`),i.args)for(const t of i.args)e.push(`* _${t.name}_ - ${t.description||""}
`);return i.returns&&e.push(`* _(returns)_ - ${i.returns}`),e.push(`

`),e.join("")}}let Qh=class{constructor(e,t){this._extHostLogService=t,this._reportedUsages=new Set,this._telemetryShape=e.getProxy(_e.MainThreadTelemetry)}report(e,t,n){const r=this.getUsageKey(e,t);this._reportedUsages.has(r)||(this._reportedUsages.add(r),t.isUnderDevelopment&&this._extHostLogService.warn(`[Deprecation Warning] '${e}' is deprecated. ${n}`),this._telemetryShape.$publicLog2("extHostDeprecatedApiUsage",{extensionId:t.identifier.value,apiId:e}))}getUsageKey(e,t){return`${e}-${t.identifier.value}`}};Qh=B([G(0,Sr),G(1,pi)],Qh);class $0{constructor(){this._systemSchemes=new Set(Object.keys(Rt)),this._providerInfo=new Map,this.extUri=new xg(e=>{const t=this._providerInfo.get(e.scheme);return!(t===void 0||t&1024)})}$acceptProviderInfos(e,t){t===null?this._providerInfo.delete(e.scheme):this._providerInfo.set(e.scheme,t)}isFreeScheme(e){return!this._providerInfo.has(e)&&!this._systemSchemes.has(e)}getCapabilities(e){return this._providerInfo.get(e)}}const l_=Qe("IExtHostFileSystemInfo");var Ci,zi,Ft;class xc{constructor(e,t,n,r,s,o){this._name=e,this._owner=t,this._maxDiagnosticsPerFile=n,Ci.set(this,void 0),zi.set(this,void 0),Ft.set(this,void 0),this._isDisposed=!1,Ii(this,Ft,new In(a=>r.getComparisonKey(a)),"f"),Ii(this,Ci,s,"f"),Ii(this,zi,o,"f")}dispose(){this._isDisposed||(he(this,zi,"f").fire([...he(this,Ft,"f").keys()]),he(this,Ci,"f")?.$clear(this._owner),he(this,Ft,"f").clear(),this._isDisposed=!0)}get name(){return this._checkDisposed(),this._name}set(e,t){if(!e){this.clear();return}this._checkDisposed();let n=[];if(x.isUri(e)){if(!t){this.delete(e);return}he(this,Ft,"f").set(e,t.slice()),n=[e]}else if(Array.isArray(e)){n=[];let s;e=[...e].sort(xc._compareIndexedTuplesByUri);for(const o of e){const[a,c]=o;if((!s||a.toString()!==s.toString())&&(s&&he(this,Ft,"f").get(s).length===0&&he(this,Ft,"f").delete(s),s=a,n.push(a),he(this,Ft,"f").set(a,[])),c)he(this,Ft,"f").get(a)?.push(...c);else{const u=he(this,Ft,"f").get(a);u&&(u.length=0)}}}if(he(this,zi,"f").fire(n),!he(this,Ci,"f"))return;const r=[];for(const s of n){let o=[];const a=he(this,Ft,"f").get(s);if(a)if(a.length>this._maxDiagnosticsPerFile){o=[];const c=[At.Error,At.Warning,At.Information,At.Hint];e:for(let u=0;u<4;u++)for(const l of a)if(l.severity===c[u]&&o.push(ps.from(l))===this._maxDiagnosticsPerFile)break e;o.push({severity:qn.Info,message:z({key:"limitHit",comment:["amount of errors/warning skipped due to limits"]},"Not showing {0} further errors and warnings.",a.length-this._maxDiagnosticsPerFile),startLineNumber:o[o.length-1].startLineNumber,startColumn:o[o.length-1].startColumn,endLineNumber:o[o.length-1].endLineNumber,endColumn:o[o.length-1].endColumn})}else o=a.map(c=>ps.from(c));r.push([s,o])}he(this,Ci,"f").$changeMany(this._owner,r)}delete(e){this._checkDisposed(),he(this,zi,"f").fire([e]),he(this,Ft,"f").delete(e),he(this,Ci,"f")?.$changeMany(this._owner,[[e,void 0]])}clear(){this._checkDisposed(),he(this,zi,"f").fire([...he(this,Ft,"f").keys()]),he(this,Ft,"f").clear(),he(this,Ci,"f")?.$clear(this._owner)}forEach(e,t){this._checkDisposed();for(const[n,r]of this)e.call(t,n,r,this)}*[(Ci=new WeakMap,zi=new WeakMap,Ft=new WeakMap,Symbol.iterator)](){this._checkDisposed();for(const e of he(this,Ft,"f").keys())yield[e,this.get(e)]}get(e){this._checkDisposed();const t=he(this,Ft,"f").get(e);return Array.isArray(t)?Object.freeze(t.slice(0)):[]}has(e){return this._checkDisposed(),Array.isArray(he(this,Ft,"f").get(e))}_checkDisposed(){if(this._isDisposed)throw new Error("illegal state - object is disposed")}static _compareIndexedTuplesByUri(e,t){return e[0].toString()<t[0].toString()?-1:e[0].toString()>t[0].toString()?1:0}}let $o=class Nr{constructor(e,t,n){this._logService=t,this._fileSystemInfoService=n,this._collections=new Map,this._onDidChangeDiagnostics=new ww({merge:r=>r.flat(),delay:50}),this.onDidChangeDiagnostics=N.map(this._onDidChangeDiagnostics.event,Nr._mapper),this._proxy=e.getProxy(_e.MainThreadDiagnostics)}static _mapper(e){const t=new In;for(const n of e)t.set(n,n);return{uris:Object.freeze(Array.from(t.values()))}}createDiagnosticCollection(e,t){const{_collections:n,_proxy:r,_onDidChangeDiagnostics:s,_logService:o,_fileSystemInfoService:a}=this,c=new class{$changeMany(g,h){r.$changeMany(g,h),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",e.value,g,h.length===0?"CLEARING":h)}$clear(g){r.$clear(g),o.trace("[DiagnosticCollection] remove all (extension, owner)",e.value,g)}dispose(){r.dispose()}};let u;if(!t)t="_generated_diagnostic_collection_name_#"+Nr._idPool++,u=t;else if(!n.has(t))u=t;else{this._logService.warn(`DiagnosticCollection with name '${t}' does already exist.`);do u=t+Nr._idPool++;while(n.has(u))}return new class extends xc{constructor(){super(t,u,Nr._maxDiagnosticsPerFile,a.extUri,c,s),n.set(u,this)}dispose(){super.dispose(),n.delete(u)}}}getDiagnostics(e){if(e)return this._getDiagnostics(e);{const t=new Map,n=[];for(const r of this._collections.values())r.forEach((s,o)=>{let a=t.get(s.toString());typeof a>"u"&&(a=n.length,t.set(s.toString(),a),n.push([s,[]])),n[a][1]=n[a][1].concat(...o)});return n}}_getDiagnostics(e){let t=[];for(const n of this._collections.values())n.has(e)&&(t=t.concat(n.get(e)));return t}$acceptMarkersChange(e){if(!this._mirrorCollection){const t="_generated_mirror",n=new xc(t,t,Nr._maxDiagnosticsPerFile,this._fileSystemInfoService.extUri,void 0,this._onDidChangeDiagnostics);this._collections.set(t,n),this._mirrorCollection=n}for(const[t,n]of e)this._mirrorCollection.set(x.revive(t),n.map(ps.to))}};$o._idPool=0;$o._maxDiagnosticsPerFile=1e3;$o=B([G(1,pi),G(2,l_)],$o);function h_(i,e,t,n){if(!i||n>200)return null;if(typeof i=="object"){if(i.$mid===1)return t?x.revive(e.transformIncoming(i)):e.transformIncoming(i);for(const r in i)if(Object.hasOwnProperty.call(i,r)){const s=h_(i[r],e,t,n+1);s!==null&&(i[r]=s)}}return null}function Os(i,e){const t=h_(i,e,!1,0);return t===null?i:t}class f_{constructor(){this._actual=null,this._actualOk=null,this._actualErr=null,this._hasValue=!1,this._value=null,this._hasErr=!1,this._err=null}get[Symbol.toStringTag](){return this.toString()}_ensureActual(){return this._actual||(this._actual=new Promise((e,t)=>{this._actualOk=e,this._actualErr=t,this._hasValue&&this._actualOk(this._value),this._hasErr&&this._actualErr(this._err)})),this._actual}resolveOk(e){this._hasValue||this._hasErr||(this._hasValue=!0,this._value=e,this._actual&&this._actualOk(e))}resolveErr(e){this._hasValue||this._hasErr||(this._hasErr=!0,this._err=e,this._actual?this._actualErr(e):Xo(e))}then(e,t){return this._ensureActual().then(e,t)}catch(e){return this._ensureActual().then(void 0,e)}finally(e){return this._ensureActual().finally(e)}}class N0 extends f_{constructor(){super(),this._hasErr=!0,this._err=new Jc}}var g_;function Xh(i,e){try{return JSON.stringify(i,e)}catch{return"null"}}const Kg="$$ref$$",H0={[Kg]:-1};function cm(i,e=null,t=!1){const n=[];return{jsonString:(t?Xh:JSON.stringify)(i,(s,o)=>{if(typeof o>"u")return H0;if(typeof o=="object"){if(o instanceof rt){const a=n.push(o)-1;return{[Kg]:a}}if(e)return e(s,o)}return o}),referencedBuffers:n}}function p_(i,e,t){return JSON.parse(i,(n,r)=>{if(r){const s=r[Kg];if(typeof s=="number")return e[s];if(t&&r.$mid===1)return t.transformIncoming(r)}return r})}function um(i,e){return JSON.stringify(i,e)}function q0(i){return i?(e,t)=>t&&t.$mid===1?i.transformOutgoing(t):t:null}const W0=()=>{},U0=Symbol.for("rpcProtocol"),j0=Symbol.for("rpcProxy");class No extends Jt{constructor(e,t=null,n=null){super(),this[g_]=!0,this._onDidChangeResponsiveState=this._register(new ce),this.onDidChangeResponsiveState=this._onDidChangeResponsiveState.event,this._protocol=e,this._logger=t,this._uriTransformer=n,this._uriReplacer=q0(this._uriTransformer),this._isDisposed=!1,this._locals=[],this._proxies=[];for(let r=0,s=oa.count;r<s;r++)this._locals[r]=null,this._proxies[r]=null;this._lastMessageId=0,this._cancelInvokedHandlers=Object.create(null),this._pendingRPCReplies={},this._responsiveState=0,this._unacknowledgedCount=0,this._unresponsiveTime=0,this._asyncCheckUresponsive=this._register(new ja(()=>this._checkUnresponsive(),1e3)),this._protocol.onMessage(r=>this._receiveOneMessage(r))}dispose(){this._isDisposed=!0,Object.keys(this._pendingRPCReplies).forEach(e=>{this._pendingRPCReplies[e].resolveErr(bp())})}drain(){return typeof this._protocol.drain=="function"?this._protocol.drain():Promise.resolve()}_onWillSendRequest(e){this._unacknowledgedCount===0&&(this._unresponsiveTime=Date.now()+No.UNRESPONSIVE_TIME),this._unacknowledgedCount++,this._asyncCheckUresponsive.isScheduled()||this._asyncCheckUresponsive.schedule()}_onDidReceiveAcknowledge(e){this._unresponsiveTime=Date.now()+No.UNRESPONSIVE_TIME,this._unacknowledgedCount--,this._unacknowledgedCount===0&&this._asyncCheckUresponsive.cancel(),this._setResponsiveState(0)}_checkUnresponsive(){this._unacknowledgedCount!==0&&(Date.now()>this._unresponsiveTime?this._setResponsiveState(1):this._asyncCheckUresponsive.schedule())}_setResponsiveState(e){this._responsiveState!==e&&(this._responsiveState=e,this._onDidChangeResponsiveState.fire(this._responsiveState))}get responsiveState(){return this._responsiveState}transformIncomingURIs(e){return this._uriTransformer?Os(e,this._uriTransformer):e}getProxy(e){const{nid:t,sid:n}=e;return this._proxies[t]||(this._proxies[t]=this._createProxy(t,n)),this._proxies[t]}_createProxy(e,t){const n={get:(r,s)=>(typeof s=="string"&&!r[s]&&s.charCodeAt(0)===36&&(r[s]=(...o)=>this._remoteCall(e,s,o)),s===j0?t:r[s])};return new Proxy(Object.create(null),n)}set(e,t){return this._locals[e.nid]=t,t}assertRegistered(e){for(let t=0,n=e.length;t<n;t++){const r=e[t];if(!this._locals[r.nid])throw new Error(`Missing proxy instance ${r.sid}`)}}_receiveOneMessage(e){if(this._isDisposed)return;const t=e.byteLength,n=et.read(e,0),r=n.readUInt8(),s=n.readUInt32();switch(r){case 1:case 2:{let{rpcId:o,method:a,args:c}=sn.deserializeRequestJSONArgs(n);this._uriTransformer&&(c=Os(c,this._uriTransformer)),this._receiveRequest(t,s,o,a,c,r===2);break}case 3:case 4:{let{rpcId:o,method:a,args:c}=sn.deserializeRequestMixedArgs(n);this._uriTransformer&&(c=Os(c,this._uriTransformer)),this._receiveRequest(t,s,o,a,c,r===4);break}case 5:{this._logger?.logIncoming(t,s,0,"ack"),this._onDidReceiveAcknowledge(s);break}case 6:{this._receiveCancel(t,s);break}case 7:{this._receiveReply(t,s,void 0);break}case 9:{let o=sn.deserializeReplyOKJSON(n);this._uriTransformer&&(o=Os(o,this._uriTransformer)),this._receiveReply(t,s,o);break}case 10:{const o=sn.deserializeReplyOKJSONWithBuffers(n,this._uriTransformer);this._receiveReply(t,s,o);break}case 8:{const o=sn.deserializeReplyOKVSBuffer(n);this._receiveReply(t,s,o);break}case 11:{let o=sn.deserializeReplyErrError(n);this._uriTransformer&&(o=Os(o,this._uriTransformer)),this._receiveReplyErr(t,s,o);break}case 12:{this._receiveReplyErr(t,s,void 0);break}default:console.error("received unexpected message"),console.error(e)}}_receiveRequest(e,t,n,r,s,o){this._logger?.logIncoming(e,t,1,`receiveRequest ${Ca(n)}.${r}(`,s);const a=String(t);let c,u;if(o){const g=new tu;s.push(g.token),c=this._invokeHandler(n,r,s),u=()=>g.cancel()}else c=this._invokeHandler(n,r,s),u=W0;this._cancelInvokedHandlers[a]=u;const l=sn.serializeAcknowledged(t);this._logger?.logOutgoing(l.byteLength,t,1,"ack"),this._protocol.send(l),c.then(g=>{delete this._cancelInvokedHandlers[a];const h=sn.serializeReplyOK(t,g,this._uriReplacer);this._logger?.logOutgoing(h.byteLength,t,1,"reply:",g),this._protocol.send(h)},g=>{delete this._cancelInvokedHandlers[a];const h=sn.serializeReplyErr(t,g);this._logger?.logOutgoing(h.byteLength,t,1,"replyErr:",g),this._protocol.send(h)})}_receiveCancel(e,t){this._logger?.logIncoming(e,t,1,"receiveCancel");const n=String(t);this._cancelInvokedHandlers[n]?.()}_receiveReply(e,t,n){this._logger?.logIncoming(e,t,0,"receiveReply:",n);const r=String(t);if(!this._pendingRPCReplies.hasOwnProperty(r))return;const s=this._pendingRPCReplies[r];delete this._pendingRPCReplies[r],s.resolveOk(n)}_receiveReplyErr(e,t,n){this._logger?.logIncoming(e,t,0,"receiveReplyErr:",n);const r=String(t);if(!this._pendingRPCReplies.hasOwnProperty(r))return;const s=this._pendingRPCReplies[r];delete this._pendingRPCReplies[r];let o;n&&(n.$isError?(o=new Error,o.name=n.name,o.message=n.message,o.stack=n.stack):o=n),s.resolveErr(o)}_invokeHandler(e,t,n){try{return Promise.resolve(this._doInvokeHandler(e,t,n))}catch(r){return Promise.reject(r)}}_doInvokeHandler(e,t,n){const r=this._locals[e];if(!r)throw new Error("Unknown actor "+Ca(e));const s=r[t];if(typeof s!="function")throw new Error("Unknown method "+t+" on actor "+Ca(e));return s.apply(r,n)}_remoteCall(e,t,n){if(this._isDisposed)return new N0;let r=null;if(n.length>0&&ri.isCancellationToken(n[n.length-1])&&(r=n.pop()),r&&r.isCancellationRequested)return Promise.reject(bp());const s=sn.serializeRequestArguments(n,this._uriReplacer),o=++this._lastMessageId,a=String(o),c=new f_;r&&r.onCancellationRequested(()=>{const l=sn.serializeCancel(o);this._logger?.logOutgoing(l.byteLength,o,0,"cancel"),this._protocol.send(sn.serializeCancel(o))}),this._pendingRPCReplies[a]=c,this._onWillSendRequest(o);const u=sn.serializeRequest(o,e,t,s,!!r);return this._logger?.logOutgoing(u.byteLength,o,0,`request: ${Ca(e)}.${t}(`,n),this._protocol.send(u),c}}g_=U0;No.UNRESPONSIVE_TIME=3*1e3;class et{constructor(e,t){this._buff=e,this._offset=t}static alloc(e,t,n){const r=new et(rt.alloc(n+1+4),0);return r.writeUInt8(e),r.writeUInt32(t),r}static read(e,t){return new et(e,t)}get buffer(){return this._buff}static sizeUInt8(){return 1}writeUInt8(e){this._buff.writeUInt8(e,this._offset),this._offset+=1}readUInt8(){const e=this._buff.readUInt8(this._offset);return this._offset+=1,e}writeUInt32(e){this._buff.writeUInt32BE(e,this._offset),this._offset+=4}readUInt32(){const e=this._buff.readUInt32BE(this._offset);return this._offset+=4,e}static sizeShortString(e){return 1+e.byteLength}writeShortString(e){this._buff.writeUInt8(e.byteLength,this._offset),this._offset+=1,this._buff.set(e,this._offset),this._offset+=e.byteLength}readShortString(){const e=this._buff.readUInt8(this._offset);this._offset+=1;const n=this._buff.slice(this._offset,this._offset+e).toString();return this._offset+=e,n}static sizeLongString(e){return 4+e.byteLength}writeLongString(e){this._buff.writeUInt32BE(e.byteLength,this._offset),this._offset+=4,this._buff.set(e,this._offset),this._offset+=e.byteLength}readLongString(){const e=this._buff.readUInt32BE(this._offset);this._offset+=4;const n=this._buff.slice(this._offset,this._offset+e).toString();return this._offset+=e,n}writeBuffer(e){this._buff.writeUInt32BE(e.byteLength,this._offset),this._offset+=4,this._buff.set(e,this._offset),this._offset+=e.byteLength}static sizeVSBuffer(e){return 4+e.byteLength}writeVSBuffer(e){this._buff.writeUInt32BE(e.byteLength,this._offset),this._offset+=4,this._buff.set(e,this._offset),this._offset+=e.byteLength}readVSBuffer(){const e=this._buff.readUInt32BE(this._offset);this._offset+=4;const t=this._buff.slice(this._offset,this._offset+e);return this._offset+=e,t}static sizeMixedArray(e){let t=0;t+=1;for(let n=0,r=e.length;n<r;n++){const s=e[n];switch(t+=1,s.type){case 1:t+=this.sizeLongString(s.value);break;case 2:t+=this.sizeVSBuffer(s.value);break;case 3:t+=this.sizeUInt32,t+=this.sizeLongString(s.value);for(let o=0;o<s.buffers.length;++o)t+=this.sizeVSBuffer(s.buffers[o]);break}}return t}writeMixedArray(e){this._buff.writeUInt8(e.length,this._offset),this._offset+=1;for(let t=0,n=e.length;t<n;t++){const r=e[t];switch(r.type){case 1:this.writeUInt8(1),this.writeLongString(r.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(r.value);break;case 3:this.writeUInt8(3),this.writeUInt32(r.buffers.length),this.writeLongString(r.value);for(let s=0;s<r.buffers.length;++s)this.writeBuffer(r.buffers[s]);break;case 4:this.writeUInt8(4);break}}}readMixedArray(){const e=this._buff.readUInt8(this._offset);this._offset+=1;const t=new Array(e);for(let n=0;n<e;n++)switch(this.readUInt8()){case 1:t[n]=this.readLongString();break;case 2:t[n]=this.readVSBuffer();break;case 3:{const s=this.readUInt32(),o=this.readLongString(),a=[];for(let c=0;c<s;++c)a.push(this.readVSBuffer());t[n]=new sr(p_(o,a,null));break}case 4:t[n]=void 0;break}return t}}et.sizeUInt32=4;class sn{static _useMixedArgSerialization(e){for(let t=0,n=e.length;t<n;t++)if(e[t]instanceof rt||e[t]instanceof sr||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this._useMixedArgSerialization(e)){const n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];if(o instanceof rt)n[r]={type:2,value:o};else if(typeof o>"u")n[r]={type:4};else if(o instanceof sr){const{jsonString:a,referencedBuffers:c}=cm(o.value,t);n[r]={type:3,value:rt.fromString(a),buffers:c}}else n[r]={type:1,value:rt.fromString(um(o,t))}}return{type:1,args:n}}return{type:0,args:um(e,t)}}static serializeRequest(e,t,n,r,s){switch(r.type){case 0:return this._requestJSONArgs(e,t,n,r.args,s);case 1:return this._requestMixedArgs(e,t,n,r.args,s)}}static _requestJSONArgs(e,t,n,r,s){const o=rt.fromString(n),a=rt.fromString(r);let c=0;c+=et.sizeUInt8(),c+=et.sizeShortString(o),c+=et.sizeLongString(a);const u=et.alloc(s?2:1,e,c);return u.writeUInt8(t),u.writeShortString(o),u.writeLongString(a),u.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),n=e.readShortString(),r=e.readLongString();return{rpcId:t,method:n,args:JSON.parse(r)}}static _requestMixedArgs(e,t,n,r,s){const o=rt.fromString(n);let a=0;a+=et.sizeUInt8(),a+=et.sizeShortString(o),a+=et.sizeMixedArray(r);const c=et.alloc(s?4:3,e,a);return c.writeUInt8(t),c.writeShortString(o),c.writeMixedArray(r),c.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),n=e.readShortString(),r=e.readMixedArray(),s=new Array(r.length);for(let o=0,a=r.length;o<a;o++){const c=r[o];typeof c=="string"?s[o]=JSON.parse(c):s[o]=c}return{rpcId:t,method:n,args:s}}static serializeAcknowledged(e){return et.alloc(5,e,0).buffer}static serializeCancel(e){return et.alloc(6,e,0).buffer}static serializeReplyOK(e,t,n){if(typeof t>"u")return this._serializeReplyOKEmpty(e);if(t instanceof rt)return this._serializeReplyOKVSBuffer(e,t);if(t instanceof sr){const{jsonString:r,referencedBuffers:s}=cm(t.value,n,!0);return this._serializeReplyOKJSONWithBuffers(e,r,s)}else return this._serializeReplyOKJSON(e,Xh(t,n))}static _serializeReplyOKEmpty(e){return et.alloc(7,e,0).buffer}static _serializeReplyOKVSBuffer(e,t){let n=0;n+=et.sizeVSBuffer(t);const r=et.alloc(8,e,n);return r.writeVSBuffer(t),r.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static _serializeReplyOKJSON(e,t){const n=rt.fromString(t);let r=0;r+=et.sizeLongString(n);const s=et.alloc(9,e,r);return s.writeLongString(n),s.buffer}static _serializeReplyOKJSONWithBuffers(e,t,n){const r=rt.fromString(t);let s=0;s+=et.sizeUInt32,s+=et.sizeLongString(r);for(const a of n)s+=et.sizeVSBuffer(a);const o=et.alloc(10,e,s);o.writeUInt32(n.length),o.writeLongString(r);for(const a of n)o.writeBuffer(a);return o.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const n=e.readUInt32(),r=e.readLongString(),s=[];for(let o=0;o<n;++o)s.push(e.readVSBuffer());return new sr(p_(r,s,t))}static serializeReplyErr(e,t){const n=t?Xh(cw(t),null):void 0;if(typeof n!="string")return this._serializeReplyErrEmpty(e);const r=rt.fromString(n);let s=0;s+=et.sizeLongString(r);const o=et.alloc(11,e,s);return o.writeLongString(r),o.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static _serializeReplyErrEmpty(e){return et.alloc(12,e,0).buffer}}var Pi;(function(i){i[i.Undefined=0]="Undefined",i[i.String=1]="String",i[i.Buffer=2]="Buffer",i[i.VSBuffer=3]="VSBuffer",i[i.Array=4]="Array",i[i.Object=5]="Object"})(Pi||(Pi={}));function Ir(i){const e=rt.alloc(1);return e.writeUInt8(i,0),e}Ir(Pi.Undefined),Ir(Pi.String),Ir(Pi.Buffer),Ir(Pi.VSBuffer),Ir(Pi.Array),Ir(Pi.Object);class z0{constructor(){this._hasListeners=!1,this._isDeliveringMessages=!1,this._bufferedMessages=[],this._emitter=new ce({onFirstListenerAdd:()=>{this._hasListeners=!0,queueMicrotask(()=>this._deliverMessages())},onLastListenerRemove:()=>{this._hasListeners=!1}}),this.event=this._emitter.event}_deliverMessages(){if(!this._isDeliveringMessages){for(this._isDeliveringMessages=!0;this._hasListeners&&this._bufferedMessages.length>0;)this._emitter.fire(this._bufferedMessages.shift());this._isDeliveringMessages=!1}}fire(e){this._hasListeners?this._bufferedMessages.length>0?this._bufferedMessages.push(e):this._emitter.fire(e):this._bufferedMessages.push(e)}flushBuffer(){this._bufferedMessages=[]}}const Yh=new Map;function B0(i,e){e?Yh.set(i,e):Yh.delete(i)}function V0(i){return Yh.get(i)}class K0 extends Aw{constructor(e,t,n,r,s,o,a,c){super(t,n,r,s),this._proxy=e,this._languageId=o,this._isDirty=a,this.notebook=c,this._isDisposed=!1}dispose(){xn(!this._isDisposed),this._isDisposed=!0,this._isDirty=!1}equalLines(e){return mr(this._lines,e)}get document(){if(!this._document){const e=this;this._document={get uri(){return e._uri},get fileName(){return e._uri.fsPath},get isUntitled(){return e._uri.scheme===Rt.untitled},get languageId(){return e._languageId},get version(){return e._versionId},get isClosed(){return e._isDisposed},get isDirty(){return e._isDirty},save(){return e._save()},getText(t){return t?e._getTextInRange(t):e.getText()},get eol(){return e._eol===`
`?Fn.LF:Fn.CRLF},get lineCount(){return e._lines.length},lineAt(t){return e._lineAt(t)},offsetAt(t){return e._offsetAt(t)},positionAt(t){return e._positionAt(t)},validateRange(t){return e._validateRange(t)},validatePosition(t){return e._validatePosition(t)},getWordRangeAtPosition(t,n){return e._getWordRangeAtPosition(t,n)}}}return Object.freeze(this._document)}_acceptLanguageId(e){xn(!this._isDisposed),this._languageId=e}_acceptIsDirty(e){xn(!this._isDisposed),this._isDirty=e}_save(){return this._isDisposed?Promise.reject(new Error("Document has been closed")):this._proxy.$trySaveDocument(this._uri)}_getTextInRange(e){const t=this._validateRange(e);if(t.isEmpty)return"";if(t.isSingleLine)return this._lines[t.start.line].substring(t.start.character,t.end.character);const n=this._eol,r=t.start.line,s=t.end.line,o=[];o.push(this._lines[r].substring(t.start.character));for(let a=r+1;a<s;a++)o.push(this._lines[a]);return o.push(this._lines[s].substring(0,t.end.character)),o.join(n)}_lineAt(e){let t;if(e instanceof ke?t=e.line:typeof e=="number"&&(t=e),typeof t!="number"||t<0||t>=this._lines.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new G0(t,this._lines[t],t===this._lines.length-1)}_offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}_positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return new ke(t.index,Math.min(t.remainder,n))}_validateRange(e){if(!(e instanceof Ee))throw new Error("Invalid argument");const t=this._validatePosition(e.start),n=this._validatePosition(e.end);return t===e.start&&n===e.end?e:new Ee(t.line,t.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof ke))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:t,character:n}=e,r=!1;if(t<0)t=0,n=0,r=!0;else if(t>=this._lines.length)t=this._lines.length-1,n=this._lines[t].length,r=!0;else{const s=this._lines[t].length;n<0?(n=0,r=!0):n>s&&(n=s,r=!0)}return r?new ke(t,n):e}_getWordRangeAtPosition(e,t){const n=this._validatePosition(e);if(!t)t=V0(this._languageId);else if(Pg(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);const r=Lw(n.character+1,Ow(t),this._lines[n.line],0);if(r)return new Ee(n.line,r.startColumn-1,n.line,r.endColumn-1)}}class G0{constructor(e,t,n){this._line=e,this._text=t,this._isLastLine=n}get lineNumber(){return this._line}get text(){return this._text}get range(){return new Ee(this._line,0,this._line,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new Ee(this._line,0,this._line+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this._text)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this._text.length}}class J0{constructor(e,t){this._onDidAddDocument=new ce,this._onDidRemoveDocument=new ce,this._onDidChangeDocument=new ce,this._onDidSaveDocument=new ce,this.onDidAddDocument=this._onDidAddDocument.event,this.onDidRemoveDocument=this._onDidRemoveDocument.event,this.onDidChangeDocument=this._onDidChangeDocument.event,this.onDidSaveDocument=this._onDidSaveDocument.event,this._toDispose=new st,this._documentLoader=new Map,this._proxy=e.getProxy(_e.MainThreadDocuments),this._documentsAndEditors=t,this._documentsAndEditors.onDidRemoveDocuments(n=>{for(const r of n)this._onDidRemoveDocument.fire(r.document)},void 0,this._toDispose),this._documentsAndEditors.onDidAddDocuments(n=>{for(const r of n)this._onDidAddDocument.fire(r.document)},void 0,this._toDispose)}dispose(){this._toDispose.dispose()}getAllDocumentData(){return[...this._documentsAndEditors.allDocuments()]}getDocumentData(e){if(!e)return;const t=this._documentsAndEditors.getDocument(e);if(t)return t}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e){const t=this._documentsAndEditors.getDocument(e);if(t)return Promise.resolve(t);let n=this._documentLoader.get(e.toString());return n||(n=this._proxy.$tryOpenDocument(e).then(r=>{this._documentLoader.delete(e.toString());const s=x.revive(r);return $w(this._documentsAndEditors.getDocument(s))},r=>(this._documentLoader.delete(e.toString()),Promise.reject(r))),this._documentLoader.set(e.toString(),n)),n}createDocumentData(e){return this._proxy.$tryCreateDocument(e).then(t=>x.revive(t))}$acceptModelLanguageChanged(e,t){const n=x.revive(e),r=this._documentsAndEditors.getDocument(n);if(!r)throw new Error("unknown document");this._onDidRemoveDocument.fire(r.document),r._acceptLanguageId(t),this._onDidAddDocument.fire(r.document)}$acceptModelSaved(e){const t=x.revive(e),n=this._documentsAndEditors.getDocument(t);if(!n)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this._onDidSaveDocument.fire(n.document)}$acceptDirtyStateChanged(e,t){const n=x.revive(e),r=this._documentsAndEditors.getDocument(n);if(!r)throw new Error("unknown document");r._acceptIsDirty(t),this._onDidChangeDocument.fire({document:r.document,contentChanges:[],reason:void 0})}$acceptModelChanged(e,t,n){const r=x.revive(e),s=this._documentsAndEditors.getDocument(r);if(!s)throw new Error("unknown document");s._acceptIsDirty(n),s.onEvents(t);let o;t.isUndoing?o=Po.Undo:t.isRedoing&&(o=Po.Redo),this._onDidChangeDocument.fire(vv({document:s.document,contentChanges:t.changes.map(a=>({range:K.to(a.range),rangeOffset:a.rangeOffset,rangeLength:a.rangeLength,text:a.text})),reason:o}))}setWordDefinitionFor(e,t){B0(e,t)}}function Q0(i,e,t){const n=i.getProxy(_e.MainThreadQuickOpen);class r{constructor(d,p){this._sessions=new Map,this._instances=0,this._workspace=d,this._commands=p}showQuickPick(d,p,_=ri.None){this._onDidSelectItem=void 0;const b=Promise.resolve(d),k=++this._instances,y=n.$show(k,{title:p?.title,placeHolder:p?.placeHolder,matchOnDescription:p?.matchOnDescription,matchOnDetail:p?.matchOnDetail,ignoreFocusLost:p?.ignoreFocusOut,canPickMany:p?.canPickMany},_),E={},M=y.then(()=>E);return Promise.race([M,b]).then(q=>{if(q!==E)return b.then(J=>{const Q=[];for(let I=0;I<J.length;I++){const j=J[I];typeof j=="string"?Q.push({label:j,handle:I}):j.kind===Mo.Separator?Q.push({type:"separator",label:j.label}):Q.push({label:j.label,description:j.description,detail:j.detail,picked:j.picked,alwaysShow:j.alwaysShow,handle:I})}return p&&typeof p.onDidSelectItem=="function"&&(this._onDidSelectItem=I=>{p.onDidSelectItem(J[I])}),n.$setItems(k,Q),y.then(I=>{if(typeof I=="number")return J[I];if(Array.isArray(I))return I.map(j=>J[j])})})}).then(void 0,q=>{if(!cl(q))return n.$setError(k,q),Promise.reject(q)})}$onItemSelected(d){this._onDidSelectItem?.(d)}showInput(d,p=ri.None){return this._validateInput=d?.validateInput,n.$input(d,typeof this._validateInput=="function",p).then(void 0,_=>{if(!cl(_))return Promise.reject(_)})}async $validateInput(d){if(!this._validateInput)return;const p=await this._validateInput(d);if(!p||typeof p=="string")return p;let _;switch(p.severity){case ts.Info:_=Lt.Info;break;case ts.Warning:_=Lt.Warning;break;case ts.Error:_=Lt.Error;break;default:_=p.message?Lt.Error:Lt.Ignore;break}return{content:p.message,severity:_}}async showWorkspaceFolderPick(d,p=ri.None){const _=await this._commands.executeCommand("_workbench.pickWorkspaceFolder",[d]);if(!_)return;const b=await this._workspace.getWorkspaceFolders2();if(!!b)return b.find(k=>k.uri.toString()===_.uri.toString())}createQuickPick(d){const p=new l(d,()=>this._sessions.delete(p._id));return this._sessions.set(p._id,p),p}createInputBox(d){const p=new g(d,()=>this._sessions.delete(p._id));return this._sessions.set(p._id,p),p}$onDidChangeValue(d,p){this._sessions.get(d)?._fireDidChangeValue(p)}$onDidAccept(d){const p=this._sessions.get(d);p&&p._fireDidAccept()}$onDidChangeActive(d,p){const _=this._sessions.get(d);_ instanceof l&&_._fireDidChangeActive(p)}$onDidChangeSelection(d,p){const _=this._sessions.get(d);_ instanceof l&&_._fireDidChangeSelection(p)}$onDidTriggerButton(d,p){this._sessions.get(d)?._fireDidTriggerButton(p)}$onDidTriggerItemButton(d,p,_){const b=this._sessions.get(d);b instanceof l&&b._fireDidTriggerItemButton(p,_)}$onDidHide(d){const p=this._sessions.get(d);p&&p._fireDidHide()}}class s{constructor(d,p){this._extensionId=d,this._onDidDispose=p,this._id=l._nextId++,this._visible=!1,this._expectingHide=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!0,this._value="",this._buttons=[],this._handlesToButtons=new Map,this._onDidAcceptEmitter=new ce,this._onDidChangeValueEmitter=new ce,this._onDidTriggerButtonEmitter=new ce,this._onDidHideEmitter=new ce,this._pendingUpdate={id:this._id},this._disposed=!1,this._disposables=[this._onDidTriggerButtonEmitter,this._onDidHideEmitter,this._onDidAcceptEmitter,this._onDidChangeValueEmitter],this.onDidChangeValue=this._onDidChangeValueEmitter.event,this.onDidAccept=this._onDidAcceptEmitter.event,this.onDidTriggerButton=this._onDidTriggerButtonEmitter.event,this.onDidHide=this._onDidHideEmitter.event}get title(){return this._title}set title(d){this._title=d,this.update({title:d})}get step(){return this._steps}set step(d){this._steps=d,this.update({step:d})}get totalSteps(){return this._totalSteps}set totalSteps(d){this._totalSteps=d,this.update({totalSteps:d})}get enabled(){return this._enabled}set enabled(d){this._enabled=d,this.update({enabled:d})}get busy(){return this._busy}set busy(d){this._busy=d,this.update({busy:d})}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(d){this._ignoreFocusOut=d,this.update({ignoreFocusOut:d})}get value(){return this._value}set value(d){this._value=d,this.update({value:d})}get placeholder(){return this._placeholder}set placeholder(d){this._placeholder=d,this.update({placeholder:d})}get buttons(){return this._buttons}set buttons(d){this._buttons=d.slice(),this._handlesToButtons.clear(),d.forEach((p,_)=>{const b=p===gs.Back?-1:_;this._handlesToButtons.set(b,p)}),this.update({buttons:d.map((p,_)=>({...u(p),tooltip:p.tooltip,handle:p===gs.Back?-1:_}))})}show(){this._visible=!0,this._expectingHide=!0,this.update({visible:!0})}hide(){this._visible=!1,this.update({visible:!1})}_fireDidAccept(){this._onDidAcceptEmitter.fire()}_fireDidChangeValue(d){this._value=d,this._onDidChangeValueEmitter.fire(d)}_fireDidTriggerButton(d){const p=this._handlesToButtons.get(d);p&&this._onDidTriggerButtonEmitter.fire(p)}_fireDidHide(){this._expectingHide&&(this._expectingHide=this._visible,this._onDidHideEmitter.fire())}dispose(){this._disposed||(this._disposed=!0,this._fireDidHide(),this._disposables=Gt(this._disposables),this._updateTimeout&&(clearTimeout(this._updateTimeout),this._updateTimeout=void 0),this._onDidDispose(),n.$dispose(this._id))}update(d){if(!this._disposed){for(const p of Object.keys(d)){const _=d[p];this._pendingUpdate[p]=_===void 0?null:_}"visible"in this._pendingUpdate?(this._updateTimeout&&(clearTimeout(this._updateTimeout),this._updateTimeout=void 0),this.dispatchUpdate()):this._visible&&!this._updateTimeout&&(this._updateTimeout=setTimeout(()=>{this._updateTimeout=void 0,this.dispatchUpdate()},0))}}dispatchUpdate(){n.$createOrUpdate(this._pendingUpdate),this._pendingUpdate={id:this._id}}}s._nextId=1;function o(h){if(h instanceof hi)return{id:h.id};const d=c(h),p=a(h);return{dark:typeof d=="string"?x.file(d):d,light:typeof p=="string"?x.file(p):p}}function a(h){return typeof h=="object"&&"light"in h?h.light:h}function c(h){return typeof h=="object"&&"dark"in h?h.dark:h}function u(h){const d=o(h.iconPath);let p,_;return"id"in d?_=Yw.asClassName(d):p=d,{iconPath:p,iconClass:_}}class l extends s{constructor(d,p){super(d.identifier,p),this._items=[],this._handlesToItems=new Map,this._itemsToHandles=new Map,this._canSelectMany=!1,this._matchOnDescription=!0,this._matchOnDetail=!0,this._sortByLabel=!0,this._keepScrollPosition=!1,this._activeItems=[],this._onDidChangeActiveEmitter=new ce,this._selectedItems=[],this._onDidChangeSelectionEmitter=new ce,this._onDidTriggerItemButtonEmitter=new ce,this.onDidChangeActive=this._onDidChangeActiveEmitter.event,this.onDidChangeSelection=this._onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this._onDidTriggerItemButtonEmitter.event,this._disposables.push(this._onDidChangeActiveEmitter,this._onDidChangeSelectionEmitter,this._onDidTriggerItemButtonEmitter),this.update({type:"quickPick"})}get items(){return this._items}set items(d){this._items=d.slice(),this._handlesToItems.clear(),this._itemsToHandles.clear(),d.forEach((_,b)=>{this._handlesToItems.set(b,_),this._itemsToHandles.set(_,b)});const p=[];for(let _=0;_<d.length;_++){const b=d[_];b.kind===Mo.Separator?p.push({type:"separator",label:b.label}):p.push({handle:_,label:b.label,description:b.description,detail:b.detail,picked:b.picked,alwaysShow:b.alwaysShow,buttons:b.buttons?.map((k,y)=>({...u(k),tooltip:k.tooltip,handle:y}))})}this.update({items:p})}get canSelectMany(){return this._canSelectMany}set canSelectMany(d){this._canSelectMany=d,this.update({canSelectMany:d})}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(d){this._matchOnDescription=d,this.update({matchOnDescription:d})}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(d){this._matchOnDetail=d,this.update({matchOnDetail:d})}get sortByLabel(){return this._sortByLabel}set sortByLabel(d){this._sortByLabel=d,this.update({sortByLabel:d})}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(d){this._keepScrollPosition=d,this.update({keepScrollPosition:d})}get activeItems(){return this._activeItems}set activeItems(d){this._activeItems=d.filter(p=>this._itemsToHandles.has(p)),this.update({activeItems:this._activeItems.map(p=>this._itemsToHandles.get(p))})}get selectedItems(){return this._selectedItems}set selectedItems(d){this._selectedItems=d.filter(p=>this._itemsToHandles.has(p)),this.update({selectedItems:this._selectedItems.map(p=>this._itemsToHandles.get(p))})}_fireDidChangeActive(d){const p=Oi(d.map(_=>this._handlesToItems.get(_)));this._activeItems=p,this._onDidChangeActiveEmitter.fire(p)}_fireDidChangeSelection(d){const p=Oi(d.map(_=>this._handlesToItems.get(_)));this._selectedItems=p,this._onDidChangeSelectionEmitter.fire(p)}_fireDidTriggerItemButton(d,p){const _=this._handlesToItems.get(d);if(!_||!_.buttons||!_.buttons.length)return;const b=_.buttons[p];b&&this._onDidTriggerItemButtonEmitter.fire({button:b,item:_})}}class g extends s{constructor(d,p){super(d.identifier,p),this._password=!1,this.update({type:"inputBox"})}get password(){return this._password}set password(d){this._password=d,this.update({password:d})}get prompt(){return this._prompt}set prompt(d){this._prompt=d,this.update({prompt:d})}get validationMessage(){return this._validationMessage}set validationMessage(d){this._validationMessage=d,d?typeof d=="string"?this.update({validationMessage:d,severity:Lt.Error}):this.update({validationMessage:d.message,severity:d.severity??Lt.Error}):this.update({validationMessage:void 0,severity:Lt.Ignore})}}return new r(e,t)}const X0=Qe("IExtHostInitDataService");function Y0(i){return!!i.preview}function Ho(i,e,t){return new xg(n=>Gg(n,t)).isEqual(i,e)}function Z0(i,e,t){return Ho(i.uri,e.uri,t)?0:Li(i.uri.toString(),e.uri.toString())}function eS(i,e,t){return i.index!==e.index?i.index<e.index?-1:1:Ho(i.uri,e.uri,t)?Li(i.name,e.name):Li(i.uri.toString(),e.uri.toString())}function m_(i,e,t,n){const r=i.slice(0).sort((o,a)=>t(o,a,n)),s=e.slice(0).sort((o,a)=>t(o,a,n));return Eb(r,s,(o,a)=>t(o,a,n))}function Gg(i,e){const t=e.getCapabilities(i.scheme);return!(t&&t&1024)}class rs extends Nw{constructor(e,t,n,r,s,o,a){super(e,n.map(c=>new hv(c)),r,s,a),this._name=t,this._isUntitled=o,this._workspaceFolders=[],this._structure=fv.forUris(a),n.forEach(c=>{this._workspaceFolders.push(c),this._structure.set(c.uri,c)})}static toExtHostWorkspace(e,t,n,r){if(!e)return{workspace:null,added:[],removed:[]};const{id:s,name:o,folders:a,configuration:c,transient:u,isUntitled:l}=e,g=[],h=t;t?a.forEach((b,k)=>{const y=x.revive(b.uri),E=rs._findFolder(n||t,y,r);E?(E.name=b.name,E.index=b.index,g.push(E)):g.push({uri:y,name:b.name,index:k})}):g.push(...a.map(({uri:b,name:k,index:y})=>({uri:x.revive(b),name:k,index:y}))),g.sort((b,k)=>b.index<k.index?-1:1);const d=new rs(s,o,g,!!u,c?x.revive(c):null,!!l,b=>Gg(b,r)),{added:p,removed:_}=m_(h?h.workspaceFolders:[],d.workspaceFolders,Z0,r);return{workspace:d,added:p,removed:_}}static _findFolder(e,t,n){for(let r=0;r<e.folders.length;r++){const s=e.workspaceFolders[r];if(Ho(s.uri,t,n))return s}}get name(){return this._name}get isUntitled(){return this._isUntitled}get workspaceFolders(){return this._workspaceFolders.slice(0)}getWorkspaceFolder(e,t){return t&&this._structure.get(e)&&(e=Sv(e)),this._structure.findSubstr(e)}resolveWorkspaceFolder(e){return this._structure.get(e)}}let Zh=class{constructor(e,t,n,r){this._onDidChangeWorkspace=new ce,this.onDidChangeWorkspace=this._onDidChangeWorkspace.event,this._onDidGrantWorkspaceTrust=new ce,this.onDidGrantWorkspaceTrust=this._onDidGrantWorkspaceTrust.event,this._activeSearchCallbacks=[],this._trusted=!1,this._logService=r,this._extHostFileSystemInfo=n,this._requestIdProvider=new g0,this._barrier=new xC,this._proxy=e.getProxy(_e.MainThreadWorkspace),this._messageService=e.getProxy(_e.MainThreadMessageService);const s=t.workspace;this._confirmedWorkspace=s?new rs(s.id,s.name,[],!!s.transient,s.configuration?x.revive(s.configuration):null,!!s.isUntitled,o=>Gg(o,n)):void 0}$initializeWorkspace(e,t){this._trusted=t,this.$acceptWorkspaceData(e),this._barrier.open()}waitForInitializeCall(){return this._barrier.wait()}get workspace(){return this._actualWorkspace}get name(){return this._actualWorkspace?this._actualWorkspace.name:void 0}get workspaceFile(){if(this._actualWorkspace&&this._actualWorkspace.configuration)return this._actualWorkspace.isUntitled?x.from({scheme:Rt.untitled,path:bw(Sv(this._actualWorkspace.configuration))}):this._actualWorkspace.configuration}get _actualWorkspace(){return this._unconfirmedWorkspace||this._confirmedWorkspace}getWorkspaceFolders(){if(!!this._actualWorkspace)return this._actualWorkspace.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this._barrier.wait(),!!this._actualWorkspace)return this._actualWorkspace.workspaceFolders.slice(0)}updateWorkspaceFolders(e,t,n,...r){const s=[];if(Array.isArray(r)&&r.forEach(l=>{x.isUri(l.uri)&&!s.some(g=>Ho(g.uri,l.uri,this._extHostFileSystemInfo))&&s.push({uri:l.uri,name:l.name||Dp(l.uri)})}),this._unconfirmedWorkspace||[t,n].some(l=>typeof l!="number"||l<0)||n===0&&s.length===0)return!1;const o=this._actualWorkspace?this._actualWorkspace.workspaceFolders:[];if(t+n>o.length)return!1;const a=o.slice(0);a.splice(t,n,...s.map(l=>({uri:l.uri,name:l.name||Dp(l.uri),index:void 0})));for(let l=0;l<a.length;l++){const g=a[l];if(a.some((h,d)=>d!==l&&Ho(g.uri,h.uri,this._extHostFileSystemInfo)))return!1}a.forEach((l,g)=>l.index=g);const{added:c,removed:u}=m_(o,a,eS,this._extHostFileSystemInfo);if(c.length===0&&u.length===0)return!1;if(this._proxy){const l=e.displayName||e.name;this._proxy.$updateWorkspaceFolders(l,t,n,s).then(void 0,g=>{this._unconfirmedWorkspace=void 0;const h={source:{identifier:e.identifier,label:e.displayName||e.name}};this._messageService.$showMessage(Cw.Error,z("updateerror","Extension '{0}' failed to update workspace folders: {1}",l,g.toString()),h,[])})}return this.trySetWorkspaceFolders(a),!0}getWorkspaceFolder(e,t){if(!!this._actualWorkspace)return this._actualWorkspace.getWorkspaceFolder(e,t)}async getWorkspaceFolder2(e,t){if(await this._barrier.wait(),!!this._actualWorkspace)return this._actualWorkspace.getWorkspaceFolder(e,t)}async resolveWorkspaceFolder(e){if(await this._barrier.wait(),!!this._actualWorkspace)return this._actualWorkspace.resolveWorkspaceFolder(e)}getPath(){if(!this._actualWorkspace)return;const{folders:e}=this._actualWorkspace;if(e.length!==0)return e[0].uri.fsPath}getRelativePath(e,t){let n,r="";if(typeof e=="string"?(n=x.file(e),r=e):typeof e<"u"&&(n=e,r=e.fsPath),!n)return r;const s=this.getWorkspaceFolder(n,!0);if(!s)return r;typeof t>"u"&&this._actualWorkspace&&(t=this._actualWorkspace.folders.length>1);let o=Sw(s.uri,n);return t&&s.name&&(o=`${s.name}/${o}`),o}trySetWorkspaceFolders(e){this._actualWorkspace&&(this._unconfirmedWorkspace=rs.toExtHostWorkspace({id:this._actualWorkspace.id,name:this._actualWorkspace.name,configuration:this._actualWorkspace.configuration,folders:e,isUntitled:this._actualWorkspace.isUntitled},this._actualWorkspace,void 0,this._extHostFileSystemInfo).workspace||void 0)}$acceptWorkspaceData(e){const{workspace:t,added:n,removed:r}=rs.toExtHostWorkspace(e,this._confirmedWorkspace,this._unconfirmedWorkspace,this._extHostFileSystemInfo);this._confirmedWorkspace=t||void 0,this._unconfirmedWorkspace=void 0,this._onDidChangeWorkspace.fire(Object.freeze({added:n,removed:r}))}findFiles(e,t,n,r,s=ri.None){this._logService.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${r.value}, entryPoint: findFiles`);let o;if(t===null?o=!1:t&&(typeof t=="string"?o=t:o=t.pattern),s&&s.isCancellationRequested)return Promise.resolve([]);const{includePattern:a,folder:c}=dm(vs.from(e));return this._proxy.$startFileSearch(Ls(a),Ls(c),Ls(o),Ls(n),s).then(u=>Array.isArray(u)?u.map(l=>x.revive(l)):[])}async findTextInFiles(e,t,n,r,s=ri.None){this._logService.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${r.value}, entryPoint: findTextInFiles`);const o=this._requestIdProvider.getNext(),a=typeof t.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:t.previewOptions,{includePattern:c,folder:u}=dm(vs.from(t.include)),l=typeof t.exclude=="string"?t.exclude:t.exclude?t.exclude.pattern:void 0,g={ignoreSymlinks:typeof t.followSymlinks=="boolean"?!t.followSymlinks:void 0,disregardIgnoreFiles:typeof t.useIgnoreFiles=="boolean"?!t.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof t.useGlobalIgnoreFiles=="boolean"?!t.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof t.useParentIgnoreFiles=="boolean"?!t.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof t.useDefaultExcludes=="boolean"?!t.useDefaultExcludes:!0,fileEncoding:t.encoding,maxResults:t.maxResults,previewOptions:a,afterContext:t.afterContext,beforeContext:t.beforeContext,includePattern:c,excludePattern:l};if(this._activeSearchCallbacks[o]=h=>{const d=x.revive(h.resource);h.results.forEach(p=>{Y0(p)?n({uri:d,preview:{text:p.preview.text,matches:Np(p.preview.matches,_=>new Ee(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn))},ranges:Np(p.ranges,_=>new Ee(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn))}):n({uri:d,text:p.text,lineNumber:p.lineNumber})})},s.isCancellationRequested)return{};try{const h=await this._proxy.$startTextSearch(e,Ls(u),g,o,s);return delete this._activeSearchCallbacks[o],h||{}}catch(h){throw delete this._activeSearchCallbacks[o],h}}$handleTextSearchResult(e,t){this._activeSearchCallbacks[t]?.(e)}saveAll(e){return this._proxy.$saveAll(e)}resolveProxy(e){return this._proxy.$resolveProxy(e)}get trusted(){return this._trusted}requestWorkspaceTrust(e){return this._proxy.$requestWorkspaceTrust(e)}$onDidGrantWorkspaceTrust(){this._trusted||(this._trusted=!0,this._onDidGrantWorkspaceTrust.fire())}};Zh=B([G(0,Sr),G(1,X0),G(2,l_),G(3,pi)],Zh);const tS=Qe("IExtHostWorkspace");function dm(i){let e,t;return i&&(typeof i=="string"?e=i:(e=i.pattern,t=x.revive(i.baseUri))),{includePattern:e,folder:t}}function lm(i){i.dark=x.revive(i.dark),i.light&&(i.light=x.revive(i.light))}let ef=class{constructor(e,t){this._items={},this.sessions=new Map,this._proxy=e.getProxy(tt.ExtHostQuickOpen),this._quickInputService=t}dispose(){}$show(e,t,n){const r=new Promise((s,o)=>{this._items[e]={resolve:s,reject:o}});return t={...t,onDidFocus:s=>{s&&this._proxy.$onItemSelected(s.handle)}},t.canPickMany?this._quickInputService.pick(r,t,n).then(s=>{if(s)return s.map(o=>o.handle)}):this._quickInputService.pick(r,t,n).then(s=>{if(s)return s.handle})}$setItems(e,t){return this._items[e]&&(this._items[e].resolve(t),delete this._items[e]),Promise.resolve()}$setError(e,t){return this._items[e]&&(this._items[e].reject(t),delete this._items[e]),Promise.resolve()}$input(e,t,n){const r=Object.create(null);return e&&(r.title=e.title,r.password=e.password,r.placeHolder=e.placeHolder,r.valueSelection=e.valueSelection,r.prompt=e.prompt,r.value=e.value,r.ignoreFocusLost=e.ignoreFocusOut),t&&(r.validateInput=s=>this._proxy.$validateInput(s)),this._quickInputService.input(r,n)}$createOrUpdate(e){const t=e.id;let n=this.sessions.get(t);if(!n){const o=e.type==="quickPick"?this._quickInputService.createQuickPick():this._quickInputService.createInputBox();if(o.onDidAccept(()=>{this._proxy.$onDidAccept(t)}),o.onDidTriggerButton(a=>{this._proxy.$onDidTriggerButton(t,a.handle)}),o.onDidChangeValue(a=>{this._proxy.$onDidChangeValue(t,a)}),o.onDidHide(()=>{this._proxy.$onDidHide(t)}),e.type==="quickPick"){const a=o;a.onDidChangeActive(c=>{this._proxy.$onDidChangeActive(t,c.map(u=>u.handle))}),a.onDidChangeSelection(c=>{this._proxy.$onDidChangeSelection(t,c.map(u=>u.handle))}),a.onDidTriggerItemButton(c=>{this._proxy.$onDidTriggerItemButton(t,c.item.handle,c.button.handle)})}n={input:o,handlesToItems:new Map},this.sessions.set(t,n)}const{input:r,handlesToItems:s}=n;for(const o in e)o==="id"||o==="type"||(o==="visible"?e.visible?r.show():r.hide():o==="items"?(s.clear(),e[o].forEach(a=>{a.type!=="separator"&&(a.buttons&&(a.buttons=a.buttons.map(c=>(c.iconPath&&lm(c.iconPath),c))),s.set(a.handle,a))}),r[o]=e[o]):o==="activeItems"||o==="selectedItems"?r[o]=e[o].filter(a=>s.has(a)).map(a=>s.get(a)):o==="buttons"?r[o]=e.buttons.map(a=>a.handle===-1?this._quickInputService.backButton:(a.iconPath&&lm(a.iconPath),a)):r[o]=e[o]);return Promise.resolve(void 0)}$dispose(e){const t=this.sessions.get(e);return t&&(t.input.dispose(),this.sessions.delete(e)),Promise.resolve(void 0)}};ef=B([dn(_e.MainThreadQuickOpen),G(1,Dv)],ef);function nS(i){return i&&i.title}let tf=class{constructor(e,t){this._logService=t,this._proxy=e.getProxy(_e.MainThreadMessageService)}showMessage(e,t,n,r,s){const o={source:{identifier:e.identifier,label:e.displayName||e.name}};let a;typeof r=="string"||nS(r)?a=[r,...s]:(o.modal=r?.modal,o.useCustom=r?.useCustom,o.detail=r?.detail,a=s),o.useCustom&&AC(e,"resolvers");const c=[];for(let u=0;u<a.length;u++){const l=a[u];if(typeof l=="string")c.push({title:l,handle:u,isCloseAffordance:!1});else if(typeof l=="object"){const{title:g,isCloseAffordance:h}=l;c.push({title:g,isCloseAffordance:!!h,handle:u})}else this._logService.warn("Invalid message item:",l)}return this._proxy.$showMessage(t,n,o,c).then(u=>{if(typeof u=="number")return a[u]})}};tf=B([G(1,pi)],tf);let nf=class{constructor(e,t,n,r){this._notificationService=t,this._commandService=n,this._dialogService=r}dispose(){}$showMessage(e,t,n,r){return n.modal?this._showModalMessage(e,t,n.detail,r,n.useCustom):this._showMessage(e,t,r,n)}_showMessage(e,t,n,r){return new Promise(s=>{const o=[];class a extends al{constructor(d,p,_){super(d,p,void 0,!0,()=>(s(_),Promise.resolve()))}}class c extends al{constructor(d,p,_){super(d.value,p,void 0,!0,()=>_.executeCommand("_extensions.manage",d.value))}}n.forEach(h=>{o.push(new a("_extension_message_handle_"+h.handle,h.title,h.handle))});let u;r.source&&(u={label:z("extensionSource","{0} (Extension)",r.source.label),id:r.source.identifier.value}),u||(u=z("defaultSource","Extension"));const l=[];r.source&&l.push(new c(r.source.identifier,z("manageExtension","Manage Extension"),this._commandService));const g=this._notificationService.notify({severity:e,message:t,actions:{primary:o,secondary:l},source:u});N.once(g.onDidClose)(()=>{Gt(o),Gt(l),s(void 0)})})}async _showModalMessage(e,t,n,r,s){let o;const a=r.map((u,l)=>(u.isCloseAffordance===!0&&(o=l),u.title));o===void 0&&(a.length>0?a.push(z("cancel","Cancel")):a.push(z("ok","OK")),o=a.length-1);const{choice:c}=await this._dialogService.show(e,t,a,{cancelId:o,custom:s,detail:n});return c===r.length?void 0:r[c].handle}};nf=B([dn(_e.MainThreadMessageService),G(1,Ev),G(2,Qc),G(3,Tv)],nf);class iS{constructor(e){this._handles=0,this._mapHandleToCancellationSource=new Map,this._proxy=e}async withProgress(e,t,n){const r=this._handles++,{title:s,location:o,cancellable:a}=t,c={label:z("extensionSource","{0} (Extension)",e.displayName||e.name),id:e.identifier.value};return this._proxy.$startProgress(r,{location:Nh.from(o),title:s,source:c,cancellable:a},e.isUnderDevelopment?void 0:e.identifier.value).catch(Hw),this._withProgress(r,n,!!a)}_withProgress(e,t,n){let r;n&&(r=new tu,this._mapHandleToCancellationSource.set(e,r));const s=a=>{this._proxy.$progressEnd(a),this._mapHandleToCancellationSource.delete(a),r&&r.dispose()};let o;try{o=t(new rS(this._proxy,e),n&&r?r.token:ri.None)}catch(a){throw s(e),a}return o.then(a=>s(e),a=>s(e)),o}$acceptProgressCanceled(e){const t=this._mapHandleToCancellationSource.get(e);t&&(t.cancel(),this._mapHandleToCancellationSource.delete(e))}}class rS extends qw{constructor(e,t){super(n=>this.throttledReport(n)),this._proxy=e,this._handle=t}throttledReport(e){this._proxy.$progressReport(this._handle,e)}}class sS extends al{constructor(e,t,n){super(e,t,void 0,!0,()=>n.executeCommand("_extensions.manage",e))}}let rf=class{constructor(e,t,n){this._commandService=n,this._progress=new Map,this._proxy=e.getProxy(tt.ExtHostProgress),this._progressService=t}dispose(){this._progress.forEach(e=>e.resolve()),this._progress.clear()}async $startProgress(e,t,n){const r=this._createTask(e);t.location===15&&n&&(t={...t,location:15,secondaryActions:[new sS(n,z("manageExtension","Manage Extension"),this._commandService)]}),this._progressService.withProgress(t,r,()=>this._proxy.$acceptProgressCanceled(e))}$progressReport(e,t){this._progress.get(e)?.progress.report(t)}$progressEnd(e){const t=this._progress.get(e);t&&(t.resolve(),this._progress.delete(e))}_createTask(e){return t=>new Promise(n=>{this._progress.set(e,{resolve:n,progress:t})})}};rf=B([dn(_e.MainThreadProgress),G(1,Fg),G(2,Qc)],rf);let sf=class{constructor(e,t,n,r,s){this._textModelResolverService=t,this._languageService=n,this._modelService=r,this._editorWorkerService=s,this._resourceContentProvider=new Map,this._pendingUpdate=new Map,this._proxy=e.getProxy(tt.ExtHostDocumentContentProviders)}dispose(){Gt(this._resourceContentProvider.values()),Gt(this._pendingUpdate.values())}$registerTextContentProvider(e,t){const n=this._textModelResolverService.registerTextModelContentProvider(t,{provideTextContent:r=>this._proxy.$provideTextDocumentContent(e,r).then(s=>{if(typeof s=="string"){const o=s.substr(0,1+s.search(/\r?\n/)),a=this._languageService.createByFilepathOrFirstLine(r,o);return this._modelService.createModel(s,a,r)}return null})});this._resourceContentProvider.set(e,n)}$unregisterTextContentProvider(e){const t=this._resourceContentProvider.get(e);t&&(t.dispose(),this._resourceContentProvider.delete(e))}$onVirtualDocumentChange(e,t){const n=this._modelService.getModel(x.revive(e));if(!n)return;const r=this._pendingUpdate.get(n.id);r&&r.cancel();const s=new tu;this._pendingUpdate.set(n.id,s),this._editorWorkerService.computeMoreMinimalEdits(n.uri,[{text:t,range:n.getFullModelRange()}]).then(o=>{this._pendingUpdate.delete(n.id),!s.token.isCancellationRequested&&o&&o.length>0&&n.applyEdits(o.map(a=>Dw.replace($i.lift(a.range),a.text)))}).catch(Xo)}};sf=B([dn(_e.MainThreadDocumentContentProviders),G(1,ta),G(2,Xc),G(3,qi),G(4,kv)],sf);class cu{constructor(e,t,n){this._documentsAndEditors=t,this._logService=n,this._documentContentProviders=new Map,this._proxy=e.getProxy(_e.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(e,t){if(Object.keys(Rt).indexOf(e)>=0)throw new Error(`scheme '${e}' already registered`);const n=cu._handlePool++;this._documentContentProviders.set(n,t),this._proxy.$registerTextContentProvider(n,e);let r;return typeof t.onDidChange=="function"&&(r=t.onDidChange(s=>{if(s.scheme!==e){this._logService.warn(`Provider for scheme '${e}' is firing event for schema '${s.scheme}' which will be IGNORED`);return}this._documentsAndEditors.getDocument(s)&&this.$provideTextDocumentContent(n,s).then(o=>{if(!o&&typeof o!="string")return;const a=this._documentsAndEditors.getDocument(s);if(!a)return;const c=Ww(o);if(!a.equalLines(c))return this._proxy.$onVirtualDocumentChange(s,o)},Xo)})),new vn(()=>{this._documentContentProviders.delete(n)&&this._proxy.$unregisterTextContentProvider(n),r&&(r.dispose(),r=void 0)})}$provideTextDocumentContent(e,t){const n=this._documentContentProviders.get(e);return n?Promise.resolve(n.provideTextDocumentContent(x.revive(t),ri.None)):Promise.reject(new Error(`unsupported uri-scheme: ${t.scheme}`))}}cu._handlePool=0;class uu{constructor(e,t,n){const r=uu._Keys.nextId();e.$registerTextEditorDecorationType(t.identifier,r,Sh.from(n)),this.value=Object.freeze({key:r,dispose(){e.$removeTextEditorDecorationType(r)}})}}uu._Keys=new Ag("TextEditorDecorationType");class oS{constructor(e,t){this._collectedEdits=[],this._setEndOfLine=void 0,this._finalized=!1,this._document=e,this._documentVersionId=e.version,this._undoStopBefore=t.undoStopBefore,this._undoStopAfter=t.undoStopAfter}finalize(){return this._finalized=!0,{documentVersionId:this._documentVersionId,edits:this._collectedEdits,setEndOfLine:this._setEndOfLine,undoStopBefore:this._undoStopBefore,undoStopAfter:this._undoStopAfter}}_throwIfFinalized(){if(this._finalized)throw new Error("Edit is only valid while callback runs")}replace(e,t){this._throwIfFinalized();let n=null;if(e instanceof ke)n=new Ee(e,e);else if(e instanceof Ee)n=e;else throw new Error("Unrecognized location");this._pushEdit(n,t,!1)}insert(e,t){this._throwIfFinalized(),this._pushEdit(new Ee(e,e),t,!0)}delete(e){this._throwIfFinalized();let t=null;if(e instanceof Ee)t=e;else throw new Error("Unrecognized location");this._pushEdit(t,null,!0)}_pushEdit(e,t,n){const r=this._document.validateRange(e);this._collectedEdits.push({range:r,text:t,forceMoveMarkers:n})}setEndOfLine(e){if(this._throwIfFinalized(),e!==Fn.LF&&e!==Fn.CRLF)throw Ie("endOfLine");this._setEndOfLine=e}}class aS{constructor(e,t,n,r){this._proxy=e,this._id=t,this._accept(n),this._logService=r;const s=this;this.value={get tabSize(){return s._tabSize},set tabSize(o){s._setTabSize(o)},get insertSpaces(){return s._insertSpaces},set insertSpaces(o){s._setInsertSpaces(o)},get cursorStyle(){return s._cursorStyle},set cursorStyle(o){s._setCursorStyle(o)},get lineNumbers(){return s._lineNumbers},set lineNumbers(o){s._setLineNumbers(o)}}}_accept(e){this._tabSize=e.tabSize,this._insertSpaces=e.insertSpaces,this._cursorStyle=e.cursorStyle,this._lineNumbers=ns.to(e.lineNumbers)}_validateTabSize(e){if(e==="auto")return"auto";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}_setTabSize(e){const t=this._validateTabSize(e);if(t!==null){if(typeof t=="number"){if(this._tabSize===t)return;this._tabSize=t}this._warnOnError("setTabSize",this._proxy.$trySetOptions(this._id,{tabSize:t}))}}_validateInsertSpaces(e){return e==="auto"?"auto":e==="false"?!1:Boolean(e)}_setInsertSpaces(e){const t=this._validateInsertSpaces(e);if(typeof t=="boolean"){if(this._insertSpaces===t)return;this._insertSpaces=t}this._warnOnError("setInsertSpaces",this._proxy.$trySetOptions(this._id,{insertSpaces:t}))}_setCursorStyle(e){this._cursorStyle!==e&&(this._cursorStyle=e,this._warnOnError("setCursorStyle",this._proxy.$trySetOptions(this._id,{cursorStyle:e})))}_setLineNumbers(e){this._lineNumbers!==e&&(this._lineNumbers=e,this._warnOnError("setLineNumbers",this._proxy.$trySetOptions(this._id,{lineNumbers:ns.from(e)})))}assign(e){const t={};let n=!1;if(typeof e.tabSize<"u"){const r=this._validateTabSize(e.tabSize);r==="auto"?(n=!0,t.tabSize=r):typeof r=="number"&&this._tabSize!==r&&(this._tabSize=r,n=!0,t.tabSize=r)}if(typeof e.insertSpaces<"u"){const r=this._validateInsertSpaces(e.insertSpaces);r==="auto"?(n=!0,t.insertSpaces=r):this._insertSpaces!==r&&(this._insertSpaces=r,n=!0,t.insertSpaces=r)}typeof e.cursorStyle<"u"&&this._cursorStyle!==e.cursorStyle&&(this._cursorStyle=e.cursorStyle,n=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this._lineNumbers!==e.lineNumbers&&(this._lineNumbers=e.lineNumbers,n=!0,t.lineNumbers=ns.from(e.lineNumbers)),n&&this._warnOnError("setOptions",this._proxy.$trySetOptions(this._id,t))}_warnOnError(e,t){t.catch(n=>{this._logService.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this._logService.warn(n)})}}class cS{constructor(e,t,n,r,s,o,a,c){this.id=e,this._proxy=t,this._logService=n,this._disposed=!1,this._hasDecorationsForKey=new Set,this._selections=s,this._options=new aS(this._proxy,this.id,o,n),this._visibleRanges=a,this._viewColumn=c;const u=this;this.value=Object.freeze({get document(){return r.getValue()},set document(l){throw ud("document")},get selection(){return u._selections&&u._selections[0]},set selection(l){if(!(l instanceof ds))throw Ie("selection");u._selections=[l],u._trySetSelection()},get selections(){return u._selections},set selections(l){if(!Array.isArray(l)||l.some(g=>!(g instanceof ds)))throw Ie("selections");u._selections=l,u._trySetSelection()},get visibleRanges(){return u._visibleRanges},set visibleRanges(l){throw ud("visibleRanges")},get options(){return u._options.value},set options(l){u._disposed||u._options.assign(l)},get viewColumn(){return u._viewColumn},set viewColumn(l){throw ud("viewColumn")},edit(l,g={undoStopBefore:!0,undoStopAfter:!0}){if(u._disposed)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const h=new oS(r.getValue(),g);return l(h),u._applyEdit(h)},insertSnippet(l,g,h={undoStopBefore:!0,undoStopAfter:!0}){if(u._disposed)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let d;if(!g||Array.isArray(g)&&g.length===0)d=u._selections.map(p=>K.from(p));else if(g instanceof ke){const{lineNumber:p,column:_}=Je.from(g);d=[{startLineNumber:p,startColumn:_,endLineNumber:p,endColumn:_}]}else if(g instanceof Ee)d=[K.from(g)];else{d=[];for(const p of g)if(p instanceof Ee)d.push(K.from(p));else{const{lineNumber:_,column:b}=Je.from(p);d.push({startLineNumber:_,startColumn:b,endLineNumber:_,endColumn:b})}}return t.$tryInsertSnippet(e,r.getValue().version,l.value,d,h)},setDecorations(l,g){const h=g.length===0;h&&!u._hasDecorationsForKey.has(l.key)||(h?u._hasDecorationsForKey.delete(l.key):u._hasDecorationsForKey.add(l.key),u._runOnProxy(()=>{if(u_(g))return t.$trySetDecorations(e,l.key,M0(g));{const d=new Array(4*g.length);for(let p=0,_=g.length;p<_;p++){const b=g[p];d[4*p]=b.start.line+1,d[4*p+1]=b.start.character+1,d[4*p+2]=b.end.line+1,d[4*p+3]=b.end.character+1}return t.$trySetDecorationsFast(e,l.key,d)}}))},revealRange(l,g){u._runOnProxy(()=>t.$tryRevealRange(e,K.from(l),g||ic.Default))},show(l){t.$tryShowEditor(e,hr.from(l))},hide(){t.$tryHideEditor(e)}})}dispose(){xn(!this._disposed),this._disposed=!0}_acceptOptions(e){xn(!this._disposed),this._options._accept(e)}_acceptVisibleRanges(e){xn(!this._disposed),this._visibleRanges=e}_acceptViewColumn(e){xn(!this._disposed),this._viewColumn=e}_acceptSelections(e){xn(!this._disposed),this._selections=e}async _trySetSelection(){const e=this._selections.map(br.from);return await this._runOnProxy(()=>this._proxy.$trySetSelections(this.id,e)),this.value}_applyEdit(e){const t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);const n=t.edits.map(s=>s.range);n.sort((s,o)=>s.end.line===o.end.line?s.end.character===o.end.character?s.start.line===o.start.line?s.start.character-o.start.character:s.start.line-o.start.line:s.end.character-o.end.character:s.end.line-o.end.line);for(let s=0,o=n.length-1;s<o;s++){const a=n[s].end;if(n[s+1].start.isBefore(a))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const r=t.edits.map(s=>({range:K.from(s.range),text:s.text,forceMoveMarkers:s.forceMoveMarkers}));return this._proxy.$tryApplyEdits(this.id,t.documentVersionId,r,{setEndOfLine:typeof t.setEndOfLine=="number"?Oo.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}_runOnProxy(e){return this._disposed?(this._logService.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this._logService.warn(t),null))}}class uS{constructor(e){this.value=e,this._count=0}ref(){this._count++}unref(){return--this._count===0}}let of=class{constructor(e,t){this._extHostRpc=e,this._logService=t,this._activeEditorId=null,this._editors=new Map,this._documents=new In,this._onDidAddDocuments=new ce,this._onDidRemoveDocuments=new ce,this._onDidChangeVisibleTextEditors=new ce,this._onDidChangeActiveTextEditor=new ce,this.onDidAddDocuments=this._onDidAddDocuments.event,this.onDidRemoveDocuments=this._onDidRemoveDocuments.event,this.onDidChangeVisibleTextEditors=this._onDidChangeVisibleTextEditors.event,this.onDidChangeActiveTextEditor=this._onDidChangeActiveTextEditor.event}$acceptDocumentsAndEditorsDelta(e){this.acceptDocumentsAndEditorsDelta(e)}acceptDocumentsAndEditorsDelta(e){const t=[],n=[],r=[];if(e.removedDocuments)for(const s of e.removedDocuments){const o=x.revive(s),a=this._documents.get(o);a?.unref()&&(this._documents.delete(o),t.push(a.value))}if(e.addedDocuments)for(const s of e.addedDocuments){const o=x.revive(s.uri);let a=this._documents.get(o);if(a&&o.scheme!==Rt.vscodeNotebookCell&&o.scheme!==Rt.vscodeInteractiveInput)throw new Error(`document '${o} already exists!'`);a||(a=new uS(new K0(this._extHostRpc.getProxy(_e.MainThreadDocuments),o,s.lines,s.EOL,s.versionId,s.languageId,s.isDirty,s.notebook)),this._documents.set(o,a),n.push(a.value)),a.ref()}if(e.removedEditors)for(const s of e.removedEditors){const o=this._editors.get(s);this._editors.delete(s),o&&r.push(o)}if(e.addedEditors)for(const s of e.addedEditors){const o=x.revive(s.documentUri);xn(this._documents.has(o),`document '${o}' does not exist`),xn(!this._editors.has(s.id),`editor '${s.id}' already exists!`);const a=this._documents.get(o).value,c=new cS(s.id,this._extHostRpc.getProxy(_e.MainThreadTextEditors),this._logService,new Ig(()=>a.document),s.selections.map(br.to),s.options,s.visibleRanges.map(u=>K.to(u)),typeof s.editorPosition=="number"?hr.to(s.editorPosition):void 0);this._editors.set(s.id,c)}e.newActiveEditor!==void 0&&(xn(e.newActiveEditor===null||this._editors.has(e.newActiveEditor),`active editor '${e.newActiveEditor}' does not exist`),this._activeEditorId=e.newActiveEditor),Gt(t),Gt(r),e.removedDocuments&&this._onDidRemoveDocuments.fire(t),e.addedDocuments&&this._onDidAddDocuments.fire(n),(e.removedEditors||e.addedEditors)&&this._onDidChangeVisibleTextEditors.fire(this.allEditors().map(s=>s.value)),e.newActiveEditor!==void 0&&this._onDidChangeActiveTextEditor.fire(this.activeEditor())}getDocument(e){return this._documents.get(e)?.value}allDocuments(){return Ew.map(this._documents.values(),e=>e.value)}getEditor(e){return this._editors.get(e)}activeEditor(e){if(!this._activeEditorId)return;const t=this._editors.get(this._activeEditorId);return e?t:t?.value}allEditors(){return[...this._editors.values()]}};of=B([G(0,Sr),G(1,pi)],of);class dS{constructor(e,t){this._extHostDocumentsAndEditors=t,this._onDidChangeTextEditorSelection=new ce,this._onDidChangeTextEditorOptions=new ce,this._onDidChangeTextEditorVisibleRanges=new ce,this._onDidChangeTextEditorViewColumn=new ce,this._onDidChangeActiveTextEditor=new ce,this._onDidChangeVisibleTextEditors=new ce,this.onDidChangeTextEditorSelection=this._onDidChangeTextEditorSelection.event,this.onDidChangeTextEditorOptions=this._onDidChangeTextEditorOptions.event,this.onDidChangeTextEditorVisibleRanges=this._onDidChangeTextEditorVisibleRanges.event,this.onDidChangeTextEditorViewColumn=this._onDidChangeTextEditorViewColumn.event,this.onDidChangeActiveTextEditor=this._onDidChangeActiveTextEditor.event,this.onDidChangeVisibleTextEditors=this._onDidChangeVisibleTextEditors.event,this._proxy=e.getProxy(_e.MainThreadTextEditors),this._extHostDocumentsAndEditors.onDidChangeVisibleTextEditors(n=>this._onDidChangeVisibleTextEditors.fire(n)),this._extHostDocumentsAndEditors.onDidChangeActiveTextEditor(n=>this._onDidChangeActiveTextEditor.fire(n))}getActiveTextEditor(){return this._extHostDocumentsAndEditors.activeEditor()}getVisibleTextEditors(e){const t=this._extHostDocumentsAndEditors.allEditors();return e?t:t.map(n=>n.value)}async showTextDocument(e,t,n){let r;typeof t=="number"?r={position:hr.from(t),preserveFocus:n}:typeof t=="object"?r={position:hr.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?K.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:r={preserveFocus:!1};const s=await this._proxy.$tryShowTextDocument(e.uri,r),o=s&&this._extHostDocumentsAndEditors.getEditor(s);if(o)return o.value;throw s?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new uu(this._proxy,e,t).value}$acceptEditorPropertiesChanged(e,t){const n=this._extHostDocumentsAndEditors.getEditor(e);if(!n)throw new Error("unknown text editor");if(t.options&&n._acceptOptions(t.options),t.selections){const r=t.selections.selections.map(br.to);n._acceptSelections(r)}if(t.visibleRanges){const r=Oi(t.visibleRanges.map(K.to));n._acceptVisibleRanges(r)}if(t.options&&this._onDidChangeTextEditorOptions.fire({textEditor:n.value,options:{...t.options,lineNumbers:ns.to(t.options.lineNumbers)}}),t.selections){const r=fs.fromValue(t.selections.source),s=t.selections.selections.map(br.to);this._onDidChangeTextEditorSelection.fire({textEditor:n.value,selections:s,kind:r})}if(t.visibleRanges){const r=Oi(t.visibleRanges.map(K.to));this._onDidChangeTextEditorVisibleRanges.fire({textEditor:n.value,visibleRanges:r})}}$acceptEditorPositionData(e){for(const t in e){const n=this._extHostDocumentsAndEditors.getEditor(t);if(!n)throw new Error("Unknown text editor");const r=hr.to(e[t]);n.value.viewColumn!==r&&(n._acceptViewColumn(r),this._onDidChangeTextEditorViewColumn.fire({textEditor:n.value,viewColumn:r}))}}getDiffInformation(e){return Promise.resolve(this._proxy.$getDiffInformation(e))}}class lS{constructor(e,t=1e3*60*3,n=1024*1024*80,r=50){this._extUri=e,this._maxAge=t,this._maxLength=n,this._maxSize=r,this._data=new Array,this._length=0}dispose(){this._data=Gt(this._data)}remove(e){for(const t of[...this._data])this._extUri.isEqualOrParent(t.uri,e)&&t.dispose()}add(e,t,n=0){const r=()=>{const a=this._data.indexOf(o);a>=0&&(this._length-=n,t.dispose(),clearTimeout(s),this._data.splice(a,1))},s=setTimeout(r,this._maxAge),o={uri:e,length:n,dispose:r};this._data.push(o),this._length+=n,this._cleanup()}_cleanup(){for(;this._length>this._maxLength;)this._data[0].dispose();const e=Math.ceil(this._maxSize*1.2);this._data.length>=e&&Gt(this._data.slice(0,e-this._maxSize))}}class hS extends Jt{constructor(e,t,n,r){super(),this._model=e,this._onIsCaughtUpWithContentChanges=t,this._proxy=n,this._textFileService=r,this._knownVersionId=this._model.getVersionId(),this._store.add(this._model.onDidChangeContent(s=>{this._knownVersionId=s.versionId,this._proxy.$acceptModelChanged(this._model.uri,s,this._textFileService.isDirty(this._model.uri)),this.isCaughtUpWithContentChanges()&&this._onIsCaughtUpWithContentChanges.fire(this._model.uri)}))}isCaughtUpWithContentChanges(){return this._model.getVersionId()===this._knownVersionId}}let af=class extends Jt{constructor(e,t,n,r,s,o,a,c,u){super(),this._modelService=t,this._textFileService=n,this._fileService=r,this._textModelResolverService=s,this._environmentService=o,this._uriIdentityService=a,this._pathService=u,this._onIsCaughtUpWithContentChanges=this._store.add(new ce),this.onIsCaughtUpWithContentChanges=this._onIsCaughtUpWithContentChanges.event,this._modelTrackers=new In,this._modelReferenceCollection=this._store.add(new lS(a.extUri)),this._proxy=e.getProxy(tt.ExtHostDocuments),this._store.add(t.onModelLanguageChanged(this._onModelModeChanged,this)),this._store.add(n.files.onDidSave(l=>{this._shouldHandleFileEvent(l.model.resource)&&this._proxy.$acceptModelSaved(l.model.resource)})),this._store.add(n.files.onDidChangeDirty(l=>{this._shouldHandleFileEvent(l.resource)&&this._proxy.$acceptDirtyStateChanged(l.resource,l.isDirty())})),this._store.add(c.onDidRunWorkingCopyFileOperation(l=>{const g=l.operation===2;if(g||l.operation===1)for(const h of l.files){const d=g?h.source:h.target;d&&this._modelReferenceCollection.remove(d)}}))}dispose(){Gt(this._modelTrackers.values()),this._modelTrackers.clear(),super.dispose()}isCaughtUpWithContentChanges(e){const t=this._modelTrackers.get(e);return t?t.isCaughtUpWithContentChanges():!0}_shouldHandleFileEvent(e){const t=this._modelService.getModel(e);return!!t&&ro(t)}handleModelAdded(e){!ro(e)||this._modelTrackers.set(e.uri,new hS(e,this._onIsCaughtUpWithContentChanges,this._proxy,this._textFileService))}_onModelModeChanged(e){const{model:t}=e;!this._modelTrackers.has(t.uri)||this._proxy.$acceptModelLanguageChanged(t.uri,t.getLanguageId())}handleModelRemoved(e){!this._modelTrackers.has(e)||(this._modelTrackers.get(e).dispose(),this._modelTrackers.delete(e))}async $trySaveDocument(e){const t=await this._textFileService.save(x.revive(e));return Boolean(t)}async $tryOpenDocument(e){const t=x.revive(e);if(!t.scheme||!(t.fsPath||t.authority))throw new Error("Invalid uri. Scheme and authority or path must be set.");const n=this._uriIdentityService.asCanonicalUri(t);let r;switch(n.scheme){case Rt.untitled:r=this._handleUntitledScheme(n);break;case Rt.file:default:r=this._handleAsResourceInput(n);break}let s;try{s=await r}catch(o){throw new Error(`cannot open ${n.toString()}. Detail: ${Cv(o)}`)}if(s)if(Tw.isEqual(s,n)){if(this._modelTrackers.has(n))return n;throw new Error(`cannot open ${n.toString()}. Detail: Files above 50MB cannot be synchronized with extensions.`)}else throw new Error(`cannot open ${n.toString()}. Detail: Actual document opened as ${s.toString()}`);else throw new Error(`cannot open ${n.toString()}`)}$tryCreateDocument(e){return this._doCreateUntitled(void 0,e?e.language:void 0,e?e.content:void 0)}async _handleAsResourceInput(e){const t=await this._textModelResolverService.createModelReference(e);return this._modelReferenceCollection.add(e,t,t.object.textEditorModel.getValueLength()),t.object.textEditorModel.uri}async _handleUntitledScheme(e){const t=i0(e,this._environmentService.remoteAuthority,this._pathService.defaultUriScheme);return await this._fileService.exists(t)?Promise.reject(new Error("file already exists")):await this._doCreateUntitled(Boolean(e.path)?e:void 0)}async _doCreateUntitled(e,t,n){const s=(await this._textFileService.untitled.resolve({associatedResource:e,languageId:t,initialValue:n})).resource;if(!this._modelTrackers.has(s))throw new Error(`expected URI ${s.toString()} to have come to LIFE`);return this._proxy.$acceptDirtyStateChanged(s,!0),s}};af=B([G(1,qi),G(2,iu),G(3,ra),G(4,ta),G(5,ru),G(6,Es),G(7,su),G(8,ou)],af);const Fc=Vw;class jn{constructor(e,t,n){this.selections=e,this.options=t,this.visibleRanges=n}static readFromEditor(e,t,n){const r=jn._readSelectionsFromCodeEditor(e,n),s=jn._readOptionsFromCodeEditor(e,t,n),o=jn._readVisibleRangesFromCodeEditor(e,n);return new jn(r,s,o)}static _readSelectionsFromCodeEditor(e,t){let n=null;return t&&(n=t.getSelections()),!n&&e&&(n=e.selections),n||(n=[new Fc(1,1,1,1)]),n}static _readOptionsFromCodeEditor(e,t,n){if(t.isDisposed()){if(e)return e.options;throw new Error("No valid properties")}let r,s;if(n){const a=n.getOptions(),c=a.get(62);r=a.get(24),s=c.renderType}else e?(r=e.options.cursorStyle,s=e.options.lineNumbers):(r=$v.Line,s=1);const o=t.getOptions();return{insertSpaces:o.insertSpaces,tabSize:o.tabSize,cursorStyle:r,lineNumbers:s}}static _readVisibleRangesFromCodeEditor(e,t){return t?t.getVisibleRanges():[]}generateDelta(e,t){const n={options:null,selections:null,visibleRanges:null};return(!e||!jn._selectionsEqual(e.selections,this.selections))&&(n.selections={selections:this.selections,source:Kw(t)}),(!e||!jn._optionsEqual(e.options,this.options))&&(n.options=this.options),(!e||!jn._rangesEqual(e.visibleRanges,this.visibleRanges))&&(n.visibleRanges=this.visibleRanges),n.selections||n.options||n.visibleRanges?n:null}static _selectionsEqual(e,t){return mr(e,t,(n,r)=>n.equalsSelection(r))}static _rangesEqual(e,t){return mr(e,t,(n,r)=>n.equalsRange(r))}static _optionsEqual(e,t){return e&&!t||!e&&t?!1:!e&&!t?!0:e.tabSize===t.tabSize&&e.insertSpaces===t.insertSpaces&&e.cursorStyle===t.cursorStyle&&e.lineNumbers===t.lineNumbers}}class fS{constructor(e,t,n,r,s,o,a){this._modelListeners=new st,this._codeEditorListeners=new st,this._id=e,this._model=t,this._codeEditor=null,this._properties=null,this._focusTracker=r,this._mainThreadDocuments=s,this._modelService=o,this._clipboardService=a,this._onPropertiesChanged=new ce,this._modelListeners.add(this._model.onDidChangeOptions(c=>{this._updatePropertiesNow(null)})),this.setCodeEditor(n),this._updatePropertiesNow(null)}dispose(){this._modelListeners.dispose(),this._codeEditor=null,this._codeEditorListeners.dispose()}_updatePropertiesNow(e){this._setProperties(jn.readFromEditor(this._properties,this._model,this._codeEditor),e)}_setProperties(e,t){const n=e.generateDelta(this._properties,t);this._properties=e,n&&this._onPropertiesChanged.fire(n)}getId(){return this._id}getModel(){return this._model}getCodeEditor(){window.ce=this._codeEditor;return this._codeEditor}hasCodeEditor(e){return this._codeEditor===e}setCodeEditor(e){if(!this.hasCodeEditor(e)&&(this._codeEditorListeners.clear(),this._codeEditor=e,this._codeEditor)){this._codeEditorListeners.add(this._codeEditor.onDidChangeModel(()=>{this.setCodeEditor(null)})),this._codeEditorListeners.add(this._codeEditor.onDidFocusEditorWidget(()=>{this._focusTracker.onGainedFocus()})),this._codeEditorListeners.add(this._codeEditor.onDidBlurEditorWidget(()=>{this._focusTracker.onLostFocus()}));let t=null;this._codeEditorListeners.add(this._mainThreadDocuments.onIsCaughtUpWithContentChanges(s=>{if(s.toString()===this._model.uri.toString()){const o=t;t=null,this._updatePropertiesNow(o)}}));const n=()=>this._codeEditor&&this._codeEditor.getModel()===this._model,r=s=>{this._mainThreadDocuments.isCaughtUpWithContentChanges(this._model.uri)?(t=null,this._updatePropertiesNow(s)):t=s};this._codeEditorListeners.add(this._codeEditor.onDidChangeCursorSelection(s=>{!n()||r(s.source)})),this._codeEditorListeners.add(this._codeEditor.onDidChangeConfiguration(s=>{!n()||r(null)})),this._codeEditorListeners.add(this._codeEditor.onDidLayoutChange(()=>{!n()||r(null)})),this._codeEditorListeners.add(this._codeEditor.onDidScrollChange(()=>{!n()||r(null)})),this._updatePropertiesNow(null)}}isVisible(){return!!this._codeEditor}getProperties(){return this._properties}get onPropertiesChanged(){return this._onPropertiesChanged.event}setSelections(e){if(this._codeEditor){this._codeEditor.setSelections(e);return}const t=e.map(Fc.liftSelection);this._setProperties(new jn(t,this._properties.options,this._properties.visibleRanges),null)}_setIndentConfiguration(e){const t=this._modelService.getCreationOptions(this._model.getLanguageId(),this._model.uri,this._model.isForSimpleWidget);if(e.tabSize==="auto"||e.insertSpaces==="auto"){let r=t.insertSpaces,s=t.tabSize;e.insertSpaces!=="auto"&&typeof e.insertSpaces<"u"&&(r=e.insertSpaces),e.tabSize!=="auto"&&typeof e.tabSize<"u"&&(s=e.tabSize),this._model.detectIndentation(r,s);return}const n={};typeof e.insertSpaces<"u"&&(n.insertSpaces=e.insertSpaces),typeof e.tabSize<"u"&&(n.tabSize=e.tabSize),this._model.updateOptions(n)}setConfiguration(e){if(this._setIndentConfiguration(e),!!this._codeEditor){if(e.cursorStyle){const t=x0(e.cursorStyle);this._codeEditor.updateOptions({cursorStyle:t})}if(typeof e.lineNumbers<"u"){let t;switch(e.lineNumbers){case 1:t="on";break;case 2:t="relative";break;default:t="off"}this._codeEditor.updateOptions({lineNumbers:t})}}}setDecorations(e,t){!this._codeEditor||this._codeEditor.setDecorationsByType("exthost-api",e,t)}setDecorationsFast(e,t){if(!this._codeEditor)return;const n=[];for(let r=0,s=Math.floor(t.length/4);r<s;r++)n[r]=new $i(t[4*r],t[4*r+1],t[4*r+2],t[4*r+3]);this._codeEditor.setDecorationsByTypeFast(e,n)}revealRange(e,t){if(!!this._codeEditor)switch(t){case Br.Default:this._codeEditor.revealRange(e,0);break;case Br.InCenter:this._codeEditor.revealRangeInCenter(e,0);break;case Br.InCenterIfOutsideViewport:this._codeEditor.revealRangeInCenterIfOutsideViewport(e,0);break;case Br.AtTop:this._codeEditor.revealRangeAtTop(e,0);break;default:console.warn(`Unknown revealType: ${t}`);break}}isFocused(){return this._codeEditor?this._codeEditor.hasTextFocus():!1}matches(e){return e?e.getControl()===this._codeEditor:!1}applyEdits(e,t,n){if(this._model.getVersionId()!==e||!this._codeEditor)return!1;typeof n.setEndOfLine<"u"&&this._model.pushEOL(n.setEndOfLine);const r=t.map(s=>({range:$i.lift(s.range),text:s.text,forceMoveMarkers:s.forceMoveMarkers}));return n.undoStopBefore&&this._codeEditor.pushUndoStop(),this._codeEditor.executeEdits("MainThreadTextEditor",r),n.undoStopAfter&&this._codeEditor.pushUndoStop(),!0}async insertSnippet(e,t,n,r){if(!this._codeEditor||!this._codeEditor.hasModel())return!1;let s;if(el.guessNeedsClipboard(t)){const u=new Uw(this._codeEditor,5);if(s=await this._clipboardService.readText(),!u.validate(this._codeEditor))return!1}this._codeEditor.getModel().getVersionId();const a=jw.get(this._codeEditor);if(!a)return!1;const c=n.map(u=>new Fc(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn));return this._codeEditor.setSelections(c),this._codeEditor.focus(),a.insert(t,{overwriteBefore:0,overwriteAfter:0,undoStopBefore:r.undoStopBefore,undoStopAfter:r.undoStopAfter,clipboardText:s}),!0}}function hm(i,e){if(typeof e!="number"||e===pl||i.count===1&&i.activeGroup.isEmpty)return pl;if(e===Oa)return Oa;const t=i.getGroups(2)[e];return t?t.id:Oa}function v_(i,e){const t=typeof e=="number"?i.getGroup(e):e;return i.getGroups(2).indexOf(t??i.activeGroup)}let Mc=class __{constructor(e,t,n,r,s){this._editorLocator=e,this._codeEditorService=n,this._editorService=r,this._editorGroupService=s,this._toDispose=new st,this._instanceId=String(++__.INSTANCE_COUNT),this._proxy=t.getProxy(tt.ExtHostEditors),this._textEditorsListenersMap=Object.create(null),this._editorPositionData=null,this._toDispose.add(this._editorService.onDidVisibleEditorsChange(()=>this._updateActiveAndVisibleTextEditors())),this._toDispose.add(this._editorGroupService.onDidRemoveGroup(()=>this._updateActiveAndVisibleTextEditors())),this._toDispose.add(this._editorGroupService.onDidMoveGroup(()=>this._updateActiveAndVisibleTextEditors())),this._registeredDecorationTypes=Object.create(null)}dispose(){Object.keys(this._textEditorsListenersMap).forEach(e=>{Gt(this._textEditorsListenersMap[e])}),this._textEditorsListenersMap=Object.create(null),this._toDispose.dispose();for(const e in this._registeredDecorationTypes)this._codeEditorService.removeDecorationType(e);this._registeredDecorationTypes=Object.create(null)}handleTextEditorAdded(e){const t=e.getId(),n=[];n.push(e.onPropertiesChanged(r=>{this._proxy.$acceptEditorPropertiesChanged(t,r)})),this._textEditorsListenersMap[t]=n}handleTextEditorRemoved(e){Gt(this._textEditorsListenersMap[e]),delete this._textEditorsListenersMap[e]}_updateActiveAndVisibleTextEditors(){const e=this._getTextEditorPositionData();Rg(this._editorPositionData,e)||(this._editorPositionData=e,this._proxy.$acceptEditorPositionData(this._editorPositionData))}_getTextEditorPositionData(){const e=Object.create(null);for(const t of this._editorService.visibleEditorPanes){const n=this._editorLocator.findTextEditorIdFor(t);n&&(e[n]=v_(this._editorGroupService,t.group))}return e}async $tryShowTextDocument(e,t){const n=x.revive(e),r={preserveFocus:t.preserveFocus,pinned:t.pinned,selection:t.selection,activation:t.preserveFocus?yh.RESTORE:void 0,override:wh.DISABLED},s={resource:n,options:r},o=await this._editorService.openEditor(s,hm(this._editorGroupService,t.position));if(!!o)return this._editorLocator.findTextEditorIdFor(o)}async $tryShowEditor(e,t){const n=this._editorLocator.getEditor(e);if(n){const r=n.getModel();await this._editorService.openEditor({resource:r.uri,options:{preserveFocus:!1}},hm(this._editorGroupService,t));return}}async $tryHideEditor(e){const t=this._editorLocator.getEditor(e);if(t){const n=this._editorService.visibleEditorPanes;for(const r of n)if(t.matches(r)){await r.group.closeEditor(r.input);return}}}$trySetSelections(e,t){const n=this._editorLocator.getEditor(e);return n?(n.setSelections(t),Promise.resolve(void 0)):Promise.reject(ji(`TextEditor(${e})`))}$trySetDecorations(e,t,n){t=`${this._instanceId}-${t}`;const r=this._editorLocator.getEditor(e);return r?(r.setDecorations(t,n),Promise.resolve(void 0)):Promise.reject(ji(`TextEditor(${e})`))}$trySetDecorationsFast(e,t,n){t=`${this._instanceId}-${t}`;const r=this._editorLocator.getEditor(e);return r?(r.setDecorationsFast(t,n),Promise.resolve(void 0)):Promise.reject(ji(`TextEditor(${e})`))}$tryRevealRange(e,t,n){const r=this._editorLocator.getEditor(e);return r?(r.revealRange(t,n),Promise.resolve()):Promise.reject(ji(`TextEditor(${e})`))}$trySetOptions(e,t){const n=this._editorLocator.getEditor(e);return n?(n.setConfiguration(t),Promise.resolve(void 0)):Promise.reject(ji(`TextEditor(${e})`))}$tryApplyEdits(e,t,n,r){const s=this._editorLocator.getEditor(e);return s?Promise.resolve(s.applyEdits(t,n,r)):Promise.reject(ji(`TextEditor(${e})`))}$tryInsertSnippet(e,t,n,r,s){const o=this._editorLocator.getEditor(e);return o?Promise.resolve(o.insertSnippet(t,n,r,s)):Promise.reject(ji(`TextEditor(${e})`))}$registerTextEditorDecorationType(e,t,n){t=`${this._instanceId}-${t}`,this._registeredDecorationTypes[t]=!0,this._codeEditorService.registerDecorationType(`exthost-api-${e}`,t,n)}$removeTextEditorDecorationType(e){e=`${this._instanceId}-${e}`,delete this._registeredDecorationTypes[e],this._codeEditorService.removeDecorationType(e)}$getDiffInformation(e){const t=this._editorLocator.getEditor(e);if(!t)return Promise.reject(new Error("No such TextEditor"));const n=t.getCodeEditor();if(!n)return Promise.reject(new Error("No such CodeEditor"));const r=n.getId(),s=this._codeEditorService.listDiffEditors(),[o]=s.filter(c=>c.getOriginalEditor().getId()===r||c.getModifiedEditor().getId()===r);if(o)return Promise.resolve(o.getLineChanges()||[]);const a=n.getContribution("editor.contrib.dirtydiff");return a?Promise.resolve(a.getChanges()):Promise.resolve([])}};Mc.INSTANCE_COUNT=0;Mc=B([G(2,Zo),G(3,sa),G(4,nu)],Mc);class gS{}class pS{constructor(e){this.editor=e,this.id=`${e.getId()},${e.getModel().id}`}}class cf{constructor(e,t,n,r,s,o){this.removedDocuments=e,this.addedDocuments=t,this.removedEditors=n,this.addedEditors=r,this.oldActiveEditor=s,this.newActiveEditor=o,this.isEmpty=this.removedDocuments.length===0&&this.addedDocuments.length===0&&this.removedEditors.length===0&&this.addedEditors.length===0&&s===o}toString(){let e=`DocumentAndEditorStateDelta
`;return e+=`	Removed Documents: [${this.removedDocuments.map(t=>t.uri.toString(!0)).join(", ")}]
`,e+=`	Added Documents: [${this.addedDocuments.map(t=>t.uri.toString(!0)).join(", ")}]
`,e+=`	Removed Editors: [${this.removedEditors.map(t=>t.id).join(", ")}]
`,e+=`	Added Editors: [${this.addedEditors.map(t=>t.id).join(", ")}]
`,e+=`	New Active Editor: ${this.newActiveEditor}
`,e}}class yd{constructor(e,t,n){this.documents=e,this.textEditors=t,this.activeEditor=n}static compute(e,t){if(!e)return new cf([],[...t.documents.values()],[],[...t.textEditors.values()],void 0,t.activeEditor);const n=h0(e.documents,t.documents),r=f0(e.textEditors,t.textEditors),s=e.activeEditor!==t.activeEditor?e.activeEditor:void 0,o=e.activeEditor!==t.activeEditor?t.activeEditor:void 0;return new cf(n.removed,n.added,r.removed,r.added,s,o)}}let uf=class{constructor(e,t,n,r,s){this._onDidChangeState=e,this._modelService=t,this._codeEditorService=n,this._editorService=r,this._paneCompositeService=s,this._toDispose=new st,this._toDisposeOnEditorRemove=new Map,this._activeEditorOrder=0,this._modelService.onModelAdded(this._updateStateOnModelAdd,this,this._toDispose),this._modelService.onModelRemoved(o=>this._updateState(),this,this._toDispose),this._editorService.onDidActiveEditorChange(o=>this._updateState(),this,this._toDispose),this._codeEditorService.onCodeEditorAdd(this._onDidAddEditor,this,this._toDispose),this._codeEditorService.onCodeEditorRemove(this._onDidRemoveEditor,this,this._toDispose),this._codeEditorService.listCodeEditors().forEach(this._onDidAddEditor,this),N.filter(this._paneCompositeService.onDidPaneCompositeOpen,o=>o.viewContainerLocation===1)(o=>this._activeEditorOrder=1,void 0,this._toDispose),N.filter(this._paneCompositeService.onDidPaneCompositeClose,o=>o.viewContainerLocation===1)(o=>this._activeEditorOrder=0,void 0,this._toDispose),this._editorService.onDidVisibleEditorsChange(o=>this._activeEditorOrder=0,void 0,this._toDispose),this._updateState()}dispose(){this._toDispose.dispose()}_onDidAddEditor(e){this._toDisposeOnEditorRemove.set(e.getId(),ol(e.onDidChangeModel(()=>this._updateState()),e.onDidFocusEditorText(()=>this._updateState()),e.onDidFocusEditorWidget(()=>this._updateState(e)))),this._updateState()}_onDidRemoveEditor(e){const t=this._toDisposeOnEditorRemove.get(e.getId());t&&(this._toDisposeOnEditorRemove.delete(e.getId()),t.dispose(),this._updateState())}_updateStateOnModelAdd(e){if(!!ro(e)){if(!this._currentState){this._updateState();return}this._currentState=new yd(this._currentState.documents.add(e),this._currentState.textEditors,this._currentState.activeEditor),this._onDidChangeState(new cf([],[e],[],[],void 0,void 0))}}_updateState(e){const t=new Set;for(const a of this._modelService.getModels())ro(a)&&t.add(a);const n=new Map;let r=null;for(const a of this._codeEditorService.listCodeEditors()){if(a.isSimpleWidget)continue;const c=a.getModel();if(a.hasModel()&&c&&ro(c)&&!c.isDisposed()&&Boolean(this._modelService.getModel(c.uri))){const u=new pS(a);n.set(u.id,u),(a.hasTextFocus()||e===a&&a.hasWidgetFocus())&&(r=u.id)}}if(!r){let a;if(this._activeEditorOrder===0?a=this._getActiveEditorFromEditorPart()||this._getActiveEditorFromPanel():a=this._getActiveEditorFromPanel()||this._getActiveEditorFromEditorPart(),a)for(const c of n.values())a===c.editor&&(r=c.id)}const s=new yd(t,n,r),o=yd.compute(this._currentState,s);o.isEmpty||(this._currentState=s,this._onDidChangeState(o))}_getActiveEditorFromPanel(){const e=this._paneCompositeService.getActivePaneComposite(1);if(e instanceof gS){const t=e.getControl();if(kw(t))return t}}_getActiveEditorFromEditorPart(){let e=this._editorService.activeTextEditorControl;return Pw(e)&&(e=e.getModifiedEditor()),e}};uf=B([G(1,qi),G(2,Zo),G(3,sa),G(4,au)],uf);let df=class{constructor(e,t,n,r,s,o,a,c,u,l,g,h,d,p,_){this._modelService=t,this._textFileService=n,this._editorService=r,this._editorGroupService=c,this._clipboardService=d,this._toDispose=new st,this._textEditors=new Map,this._proxy=e.getProxy(tt.ExtHostDocumentsAndEditors),this._mainThreadDocuments=this._toDispose.add(new af(e,this._modelService,this._textFileService,o,a,l,h,g,p)),e.set(_e.MainThreadDocuments,this._mainThreadDocuments),this._mainThreadEditors=this._toDispose.add(new Mc(this,e,s,this._editorService,this._editorGroupService)),e.set(_e.MainThreadTextEditors,this._mainThreadEditors),this._toDispose.add(new uf(b=>this._onDelta(b),t,s,this._editorService,u))}dispose(){this._toDispose.dispose()}_onDelta(e){const t=[],n=[],r=e.removedDocuments.map(a=>a.uri);for(const a of e.addedEditors){const c=new fS(a.id,a.editor.getModel(),a.editor,{onGainedFocus(){},onLostFocus(){}},this._mainThreadDocuments,this._modelService,this._clipboardService);this._textEditors.set(a.id,c),n.push(c)}for(const{id:a}of e.removedEditors){const c=this._textEditors.get(a);c&&(c.dispose(),this._textEditors.delete(a),t.push(a))}const s=Object.create(null);let o=!0;e.newActiveEditor!==void 0&&(o=!1,s.newActiveEditor=e.newActiveEditor),r.length>0&&(o=!1,s.removedDocuments=r),t.length>0&&(o=!1,s.removedEditors=t),e.addedDocuments.length>0&&(o=!1,s.addedDocuments=e.addedDocuments.map(a=>this._toModelAddData(a))),e.addedEditors.length>0&&(o=!1,s.addedEditors=n.map(a=>this._toTextEditorAddData(a))),o||(this._proxy.$acceptDocumentsAndEditorsDelta(s),r.forEach(this._mainThreadDocuments.handleModelRemoved,this._mainThreadDocuments),e.addedDocuments.forEach(this._mainThreadDocuments.handleModelAdded,this._mainThreadDocuments),t.forEach(this._mainThreadEditors.handleTextEditorRemoved,this._mainThreadEditors),n.forEach(this._mainThreadEditors.handleTextEditorAdded,this._mainThreadEditors))}_toModelAddData(e){return{uri:e.uri,versionId:e.getVersionId(),lines:e.getLinesContent(),EOL:e.getEOL(),languageId:e.getLanguageId(),isDirty:this._textFileService.isDirty(e.uri)}}_toTextEditorAddData(e){const t=e.getProperties();return{id:e.getId(),documentUri:e.getModel().uri,options:t.options,selections:t.selections,visibleRanges:t.visibleRanges,editorPosition:this._findEditorPosition(e)}}_findEditorPosition(e){for(const t of this._editorService.visibleEditorPanes)if(e.matches(t))return v_(this._editorGroupService,t.group)}findTextEditorIdFor(e){for(const[t,n]of this._textEditors)if(n.matches(e))return t}getIdOfCodeEditor(e){for(const[t,n]of this._textEditors)if(n.getCodeEditor()===e)return t}getEditor(e){return this._textEditors.get(e)}};df=B([L0,G(1,qi),G(2,iu),G(3,sa),G(4,Zo),G(5,ra),G(6,ta),G(7,nu),G(8,au),G(9,ru),G(10,su),G(11,Es),G(12,Lg),G(13,ou),G(14,Pv)],df);let lf=class{constructor(e,t,n){this._markerService=t,this._uriIdentService=n,this._activeOwners=new Set,this._proxy=e.getProxy(tt.ExtHostDiagnostics),this._markerListener=this._markerService.onMarkerChanged(this._forwardMarkers,this)}dispose(){this._markerListener.dispose(),this._activeOwners.forEach(e=>this._markerService.changeAll(e,[])),this._activeOwners.clear()}_forwardMarkers(e){const t=[];for(const n of e){const r=this._markerService.read({resource:n});if(r.length===0)t.push([n,[]]);else{const s=r.filter(o=>!this._activeOwners.has(o.owner));s.length>0&&t.push([n,s])}}t.length>0&&this._proxy.$acceptMarkersChange(t)}$changeMany(e,t){for(const n of t){const[r,s]=n;if(s)for(const o of s){if(o.relatedInformation)for(const a of o.relatedInformation)a.resource=x.revive(a.resource);o.code&&typeof o.code!="string"&&(o.code.target=x.revive(o.code.target))}this._markerService.changeOne(e,this._uriIdentService.asCanonicalUri(x.revive(r)),s)}this._activeOwners.add(e)}$clear(e){this._markerService.changeAll(e,[]),this._activeOwners.delete(e)}};lf=B([dn(_e.MainThreadDiagnostics),G(1,Rv),G(2,Es)],lf);function fm(i,e){return!(e.disableTelemetry||!i.enableTelemetry||e.extensionTestsLocationURI)}var hf;let Ac=hf=class extends Jt{constructor(e,t,n,r){super(),this._telemetryService=t,this._environmentService=n,this._productService=r,this._proxy=e.getProxy(tt.ExtHostTelemetry),fm(this._productService,this._environmentService)&&this._register(t.telemetryLevel.onDidChange(s=>{this._proxy.$onDidChangeTelemetryLevel(s)})),this._proxy.$initializeTelemetryLevel(this.telemetryLevel,this._productService.enabledTelemetryLevels)}get telemetryLevel(){return fm(this._productService,this._environmentService)?this._telemetryService.telemetryLevel.value:0}$publicLog(e,t=Object.create(null)){t[hf._name]=!0,this._telemetryService.publicLog(e,t)}$publicLog2(e,t){this.$publicLog(e,t)}};Ac._name="pluginHostTelemetry";Ac=hf=B([dn(_e.MainThreadTelemetry),G(1,Iv),G(2,Ds),G(3,Hg)],Ac);let ff=class{constructor(e,t){this._proxy=e.getProxy(_e.MainThreadBulkEdits),this._versionInformationProvider={getTextDocumentVersion:n=>t.getDocument(n)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(e,t){const n=_r(t,"snippetWorkspaceEdit"),r=Ni.from(e,this._versionInformationProvider,n);return this._proxy.$tryApplyWorkspaceEdit(r)}};ff=B([G(0,Sr)],ff);class ss extends Gw{constructor(e,t,n=void 0,r){super(r),this.resource=e,this.cellEdit=t,this.notebookVersionId=n}static is(e){return e instanceof ss?!0:x.isUri(e.resource)&&us(e.cellEdit)}static lift(e){return e instanceof ss?e:new ss(e.resource,e.cellEdit,e.notebookVersionId,e.metadata)}}function mS(i){const e=is(i)?.edits;return e?e.map(t=>{if(Tp.is(t))return Tp.lift(t);if(kp.is(t))return kp.lift(t);if(ss.is(t))return ss.lift(t);throw new Error("Unsupported edit")}):[]}let gf=class{constructor(e,t,n){this._bulkEditService=t,this._logService=n}dispose(){}$tryApplyWorkspaceEdit(e,t){const n=mS(e);return this._bulkEditService.apply(n,{undoRedoGroupId:t}).then(()=>!0,r=>(this._logService.warn("IGNORING workspace edit",r),!1))}};gf=B([dn(_e.MainThreadBulkEdits),G(1,xv),G(2,pi)],gf);class vS{constructor(e,t,n,r){this._documents=t,this._commands=n,this._uriTransformer=r,this._languageIds=[],this._handlePool=0,this._ids=new Set,this._proxy=e.getProxy(_e.MainThreadLanguages)}$acceptLanguageIds(e){this._languageIds=e}async getLanguages(){return this._languageIds.slice(0)}async changeLanguage(e,t){await this._proxy.$changeLanguage(e,t);const n=this._documents.getDocumentData(e);if(!n)throw new Error(`document '${e.toString()}' NOT found`);return n.document}async tokenAtPosition(e,t){const n=e.version,r=Je.from(t),s=await this._proxy.$tokensAtPosition(e.uri,r),o={type:rr.Other,range:e.getWordRangeAtPosition(t)??new Ee(t.line,t.character,t.line,t.character)};if(!s)return o;const a={range:K.to(s.range),type:bh.to(s.type)};return!a.range.contains(t)||n!==e.version?o:a}createLanguageStatusItem(e,t,n){const r=this._handlePool++,s=this._proxy,o=this._ids,a=`${e.identifier.value}/${t}`;if(o.has(a))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);o.add(a);const c={selector:n,id:t,name:e.displayName??e.name,severity:Jr.Information,command:void 0,text:"",detail:"",busy:!1};let u;const l=new st,g=()=>{u?.dispose(),u=Jw(()=>{l.clear(),this._proxy.$setLanguageStatus(r,{id:a,name:c.name??e.displayName??e.name,source:e.displayName??e.name,selector:pc.from(c.selector,this._uriTransformer),label:c.text,detail:c.detail??"",severity:c.severity===Jr.Error?Lt.Error:c.severity===Jr.Warning?Lt.Warning:Lt.Info,command:c.command&&this._commands.toInternal(c.command,l),accessibilityInfo:c.accessibilityInformation,busy:c.busy})},0)},h={dispose(){l.dispose(),u?.dispose(),s.$removeLanguageStatus(r),o.delete(a)},get id(){return c.id},get name(){return c.name},set name(d){c.name=d,g()},get selector(){return c.selector},set selector(d){c.selector=d,g()},get text(){return c.text},set text(d){c.text=d,g()},get detail(){return c.detail},set detail(d){c.detail=d,g()},get severity(){return c.severity},set severity(d){c.severity=d,g()},get accessibilityInformation(){return c.accessibilityInformation},set accessibilityInformation(d){c.accessibilityInformation=d,g()},get command(){return c.command},set command(d){c.command=d,g()},get busy(){return c.busy},set busy(d){c.busy=d,g()}};return g(),h}}let pf=class{constructor(e,t,n,r,s){this._languageService=t,this._modelService=n,this._resolverService=r,this._languageStatusService=s,this._disposables=new st,this._status=new Map,this._proxy=e.getProxy(tt.ExtHostLanguages),this._proxy.$acceptLanguageIds(t.getRegisteredLanguageIds()),this._disposables.add(t.onDidChange(o=>{this._proxy.$acceptLanguageIds(t.getRegisteredLanguageIds())}))}dispose(){this._disposables.dispose();for(const e of this._status.values())e.dispose();this._status.clear()}async $changeLanguage(e,t){if(!this._languageService.isRegisteredLanguageId(t))return Promise.reject(new Error(`Unknown language id: ${t}`));const n=x.revive(e),r=await this._resolverService.createModelReference(n);try{this._modelService.setMode(r.object.textEditorModel,this._languageService.createById(t))}finally{r.dispose()}}async $tokensAtPosition(e,t){const n=x.revive(e),r=this._modelService.getModel(n);if(!r)return;r.tokenization.tokenizeIfCheap(t.lineNumber);const s=r.tokenization.getLineTokens(t.lineNumber),o=s.findTokenIndexAtOffset(t.column-1);return{type:s.getStandardTokenType(o),range:new $i(t.lineNumber,1+s.getStartOffset(o),t.lineNumber,1+s.getEndOffset(o))}}$setLanguageStatus(e,t){this._status.get(e)?.dispose(),this._status.set(e,this._languageStatusService.addStatus(t))}$removeLanguageStatus(e){this._status.get(e)?.dispose()}};pf=B([dn(_e.MainThreadLanguages),G(1,Xc),G(2,qi),G(3,ta),G(4,qg)],pf);class _S{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}}let Lc=class y_{constructor(e){this._onDidChangeWindowState=new ce,this.onDidChangeWindowState=this._onDidChangeWindowState.event,this._state=y_.InitialState,this._proxy=e.getProxy(_e.MainThreadWindow),this._proxy.$getWindowVisibility().then(t=>this.$onDidChangeWindowFocus(t))}get state(){return this._state}$onDidChangeWindowFocus(e){e!==this._state.focused&&(this._state={...this._state,focused:e},this._onDidChangeWindowState.fire(this._state))}openUri(e,t){let n;if(typeof e=="string"){n=e;try{e=x.parse(e)}catch{return Promise.reject(`Invalid uri - '${e}'`)}}return Ep(e.scheme)?Promise.reject("Invalid scheme - cannot be empty"):e.scheme===Rt.command?Promise.reject(`Invalid scheme '${e.scheme}'`):this._proxy.$openUri(e,n,t)}async asExternalUri(e,t){if(Ep(e.scheme))return Promise.reject("Invalid scheme - cannot be empty");const n=await this._proxy.$asExternalUri(e,t);return x.from(n)}};Lc.InitialState={focused:!0};Lc=B([G(0,Sr)],Lc);let mf=class{constructor(e,t,n){this.hostService=t,this.openerService=n,this.disposables=new st,this.resolved=new Map,this.proxy=e.getProxy(tt.ExtHostWindow),N.latch(t.onDidChangeFocus)(this.proxy.$onDidChangeWindowFocus,this.proxy,this.disposables)}dispose(){this.disposables.dispose();for(const e of this.resolved.values())e.dispose();this.resolved.clear()}$getWindowVisibility(){return Promise.resolve(this.hostService.hasFocus)}async $openUri(e,t,n){const r=x.from(e);let s;return t&&x.parse(t).toString()===r.toString()?s=t:s=r,this.openerService.open(s,{openExternal:!0,allowTunneling:n.allowTunneling,allowContributedOpeners:n.allowContributedOpeners})}async $asExternalUri(e,t){return(await this.openerService.resolveExternalUri(x.revive(e),t)).resolved}};mf=B([dn(_e.MainThreadWindow),G(1,Wg),G(2,Fv)],mf);let vf=class{constructor(e,t){this._clipboardService=t}dispose(){}$readText(){return this._clipboardService.readText()}$writeText(e){return this._clipboardService.writeText(e)}};vf=B([dn(_e.MainThreadClipboard),G(1,Lg)],vf);class yS{constructor(e){const t=e.getProxy(_e.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(n){return t.$writeText(n)}})}}class wS{constructor(){this._onDidChangeTelemetryEnabled=new ce,this.onDidChangeTelemetryEnabled=this._onDidChangeTelemetryEnabled.event,this._onDidChangeTelemetryConfiguration=new ce,this.onDidChangeTelemetryConfiguration=this._onDidChangeTelemetryConfiguration.event,this._productConfig={usage:!0,error:!0},this._level=0}getTelemetryConfiguration(){return this._level===3}getTelemetryDetails(){return{isCrashEnabled:this._level>=1,isErrorsEnabled:this._productConfig.error?this._level>=2:!1,isUsageEnabled:this._productConfig.usage?this._level>=3:!1}}$initializeTelemetryLevel(e,t){this._level=e,this._productConfig=t||{usage:!0,error:!0}}$onDidChangeTelemetryLevel(e){this._oldTelemetryEnablement=this.getTelemetryConfiguration(),this._level=e,this._oldTelemetryEnablement!==this.getTelemetryConfiguration()&&this._onDidChangeTelemetryEnabled.fire(this.getTelemetryConfiguration()),this._onDidChangeTelemetryConfiguration.fire(this.getTelemetryDetails())}}function bS(i){for(let e=0,t=i.length;e<t;e+=4){const n=i[e+0],r=i[e+1],s=i[e+2],o=i[e+3];i[e+0]=o,i[e+1]=s,i[e+2]=r,i[e+3]=n}}function CS(i){const e=i.buffer;if(Qw()||bS(e),e.byteOffset%4===0)return new Uint32Array(e.buffer,e.byteOffset,e.length/4);{const t=new Uint8Array(e.byteLength);return t.set(e),new Uint32Array(t.buffer,t.byteOffset,t.length/4)}}function w_(i){const e=CS(i);let t=0;const n=e[t++];if(e[t++]===1){const a=e[t++],c=e.subarray(t,t+a);return t+=a,{id:n,type:"full",data:c}}const s=e[t++],o=[];for(let a=0;a<s;a++){const c=e[t++],u=e[t++],l=e[t++];let g;l>0&&(g=e.subarray(t,t+l),t+=l),o[a]={start:c,deleteCount:u,data:g}}return{id:n,type:"delta",deltas:o}}class Kn{constructor(e){this.id=e,this._data=new Map,this._idPool=1}add(e){const t=this._idPool++;return this._data.set(t,e),this.logDebugInfo(),t}get(e,t){return this._data.has(e)?this._data.get(e)[t]:void 0}delete(e){this._data.delete(e),this.logDebugInfo()}logDebugInfo(){!Kn.enableDebugLogging||console.log(`${this.id} cache size - ${this._data.size}`)}}Kn.enableDebugLogging=!1;class Oc{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentSymbols(e,t){const n=this._documents.getDocument(e),r=await this._provider.provideDocumentSymbols(n,t);if(!Nv(r))return r[0]instanceof Eo?r.map(Dh.from):Oc._asDocumentSymbolTree(r)}static _asDocumentSymbolTree(e){e=e.slice(0).sort((r,s)=>{let o=r.location.range.start.compareTo(s.location.range.start);return o===0&&(o=s.location.range.end.compareTo(r.location.range.end)),o});const t=[],n=[];for(const r of e){const s={name:r.name||"!!MISSING: name!!",kind:On.from(r.kind),tags:r.tags?.map(fi.from)||[],detail:"",containerName:r.containerName,range:K.from(r.location.range),selectionRange:K.from(r.location.range),children:[]};for(;;){if(n.length===0){n.push(s),t.push(s);break}const o=n[n.length-1];if($i.containsRange(o.range,s.range)&&!$i.equalsRange(o.range,s.range)){o.children?.push(s),n.push(s);break}n.pop()}}return t}}class or{constructor(e,t,n){this._documents=e,this._commands=t,this._provider=n,this._cache=new Kn("CodeLens"),this._disposables=new Map}async provideCodeLenses(e,t){const n=this._documents.getDocument(e),r=await this._provider.provideCodeLenses(n,t);if(!r||t.isCancellationRequested)return;const s=this._cache.add(r),o=new st;this._disposables.set(s,o);const a={cacheId:s,lenses:[]};for(let c=0;c<r.length;c++)a.lenses.push({cacheId:[s,c],range:K.from(r[c].range),command:this._commands.toInternal(r[c].command,o)});return a}async resolveCodeLens(e,t){const n=e.cacheId&&this._cache.get(...e.cacheId);if(!n)return;let r;if(typeof this._provider.resolveCodeLens!="function"||n.isResolved?r=n:r=await this._provider.resolveCodeLens(n,t),r||(r=n),t.isCancellationRequested)return;const s=e.cacheId&&this._disposables.get(e.cacheId[0]);if(!!s)return e.command=this._commands.toInternal(r.command??or._badCmd,s),e}releaseCodeLenses(e){this._disposables.get(e)?.dispose(),this._disposables.delete(e),this._cache.delete(e)}}or._badCmd={command:"missing",title:"!!MISSING: command!!"};function du(i){return Array.isArray(i)?i.map(bc.from):i?[bc.from(i)]:[]}class gm{constructor(e,t){this._documents=e,this._provider=t}async provideDefinition(e,t,n){const r=this._documents.getDocument(e),s=Je.to(t),o=await this._provider.provideDefinition(r,s,n);return du(o)}}class pm{constructor(e,t){this._documents=e,this._provider=t}async provideDeclaration(e,t,n){const r=this._documents.getDocument(e),s=Je.to(t),o=await this._provider.provideDeclaration(r,s,n);return du(o)}}class mm{constructor(e,t){this._documents=e,this._provider=t}async provideImplementation(e,t,n){const r=this._documents.getDocument(e),s=Je.to(t),o=await this._provider.provideImplementation(r,s,n);return du(o)}}class vm{constructor(e,t){this._documents=e,this._provider=t}async provideTypeDefinition(e,t,n){const r=this._documents.getDocument(e),s=Je.to(t),o=await this._provider.provideTypeDefinition(r,s,n);return du(o)}}class _m{constructor(e,t){this._documents=e,this._provider=t}async provideHover(e,t,n){const r=this._documents.getDocument(e),s=Je.to(t),o=await this._provider.provideHover(r,s,n);if(!(!o||Nv(o.contents)))return o.range||(o.range=r.getWordRangeAtPosition(s)),o.range||(o.range=new Ee(s,s)),Th.from(o)}}class ym{constructor(e,t){this._documents=e,this._provider=t}async provideEvaluatableExpression(e,t,n){const r=this._documents.getDocument(e),s=Je.to(t),o=await this._provider.provideEvaluatableExpression(r,s,n);if(o)return kh.from(o)}}class wm{constructor(e,t){this._documents=e,this._provider=t}async provideInlineValues(e,t,n,r){const s=this._documents.getDocument(e),o=await this._provider.provideInlineValues(s,K.to(t),Rh.to(n),r);if(Array.isArray(o))return o.map(a=>Ph.from(a))}}class bm{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentHighlights(e,t,n){const r=this._documents.getDocument(e),s=Je.to(t),o=await this._provider.provideDocumentHighlights(r,s,n);if(Array.isArray(o))return o.map(Ih.from)}}class Cm{constructor(e,t){this._documents=e,this._provider=t}async provideLinkedEditingRanges(e,t,n){const r=this._documents.getDocument(e),s=Je.to(t),o=await this._provider.provideLinkedEditingRanges(r,s,n);if(o&&Array.isArray(o.ranges))return{ranges:Oi(o.ranges.map(K.from)),wordPattern:o.wordPattern}}}class Sm{constructor(e,t){this._documents=e,this._provider=t}async provideReferences(e,t,n,r){const s=this._documents.getDocument(e),o=Je.to(t),a=await this._provider.provideReferences(s,o,n,r);if(Array.isArray(a))return a.map(Hi.from)}}class ni{constructor(e,t,n,r,s,o,a){this._documents=e,this._commands=t,this._diagnostics=n,this._provider=r,this._logService=s,this._extension=o,this._apiDeprecation=a,this._cache=new Kn("CodeAction"),this._disposables=new Map}async provideCodeActions(e,t,n,r){const s=this._documents.getDocument(e),o=Fc.isISelection(t)?br.to(t):K.to(t),a=[];for(const d of this._diagnostics.getDiagnostics(e))if(o.intersection(d.range)&&a.push(d)>ni._maxCodeActionsPerFile)break;const c={diagnostics:a,only:n.only?new ht(n.only):void 0,triggerKind:zh.to(n.trigger)},u=await this._provider.provideCodeActions(s,o,c,r);if(!ea(u)||r.isCancellationRequested)return;const l=this._cache.add(u),g=new st;this._disposables.set(l,g);const h=[];for(let d=0;d<u.length;d++){const p=u[d];!p||(ni._isCommand(p)?(this._apiDeprecation.report("CodeActionProvider.provideCodeActions - return commands",this._extension,"Return 'CodeAction' instances instead."),h.push({_isSynthetic:!0,title:p.title,command:this._commands.toInternal(p,g)})):(c.only&&(p.kind?c.only.contains(p.kind)||this._logService.warn(`${this._extension.identifier.value} - Code actions of kind '${c.only.value} 'requested but returned code action is of kind '${p.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this._logService.warn(`${this._extension.identifier.value} - Code actions of kind '${c.only.value} 'requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`)),h.push({cacheId:[l,d],title:p.title,command:p.command&&this._commands.toInternal(p.command,g),diagnostics:p.diagnostics&&p.diagnostics.map(ps.from),edit:p.edit&&Ni.from(p.edit,void 0,_r(this._extension,"snippetWorkspaceEdit")),kind:p.kind&&p.kind.value,isPreferred:p.isPreferred,disabled:p.disabled?.reason})))}return{cacheId:l,actions:h}}async resolveCodeAction(e,t){const[n,r]=e,s=this._cache.get(n,r);if(!s||ni._isCommand(s)||!this._provider.resolveCodeAction)return;const o=await this._provider.resolveCodeAction(s,t)??s;return o?.edit?Ni.from(o.edit,void 0,_r(this._extension,"snippetWorkspaceEdit")):void 0}releaseCodeActions(e){this._disposables.get(e)?.dispose(),this._disposables.delete(e),this._cache.delete(e)}static _isCommand(e){return typeof e.command=="string"&&typeof e.title=="string"}}ni._maxCodeActionsPerFile=1e3;class wd{constructor(e,t,n,r){this._proxy=e,this._documents=t,this._provider=n,this._handle=r}async prepareDocumentPaste(e,t,n,r){if(!this._provider.prepareDocumentPaste)return;const s=this._documents.getDocument(e),o=t.map(c=>K.to(c)),a=oi.toDataTransfer(n,()=>{throw new Fb});return await this._provider.prepareDocumentPaste(s,o,a,r),oi.toDataTransferDTO(a)}async providePasteEdits(e,t,n,r,s){const o=this._documents.getDocument(t),a=n.map(l=>K.to(l)),c=oi.toDataTransfer(r,async l=>(await this._proxy.$resolvePasteFileData(this._handle,e,l)).buffer),u=await this._provider.provideDocumentPasteEdits(o,a,c,s);if(!!u)return{insertText:typeof u.insertText=="string"?u.insertText:{snippet:u.insertText.value},additionalEdit:u.additionalEdit?Ni.from(u.additionalEdit,void 0,!0):void 0}}}class Dm{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentFormattingEdits(e,t,n){const r=this._documents.getDocument(e),s=await this._provider.provideDocumentFormattingEdits(r,t,n);if(Array.isArray(s))return s.map(wn.from)}}class Em{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentRangeFormattingEdits(e,t,n,r){const s=this._documents.getDocument(e),o=K.to(t),a=await this._provider.provideDocumentRangeFormattingEdits(s,o,n,r);if(Array.isArray(a))return a.map(wn.from)}}class Tm{constructor(e,t){this._documents=e,this._provider=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,n,r,s){const o=this._documents.getDocument(e),a=Je.to(t),c=await this._provider.provideOnTypeFormattingEdits(o,a,n,r,s);if(Array.isArray(c))return c.map(wn.from)}}class Sa{constructor(e,t){this._provider=e,this._logService=t,this._cache=new Kn("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const n=await this._provider.provideWorkspaceSymbols(e,t);if(!ea(n))return{symbols:[]};const r=this._cache.add(n),s={cacheId:r,symbols:[]};for(let o=0;o<n.length;o++){const a=n[o];if(!a||!a.name){this._logService.warn("INVALID SymbolInformation",a);continue}s.symbols.push({...wc.from(a),cacheId:[r,o]})}return s}async resolveWorkspaceSymbol(e,t){if(typeof this._provider.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;const n=this._cache.get(...e.cacheId);if(n){const r=await this._provider.resolveWorkspaceSymbol(n,t);return r&&Qo(e,wc.from(r),!0)}}releaseWorkspaceSymbols(e){this._cache.delete(e)}}class ar{constructor(e,t,n){this._documents=e,this._provider=t,this._logService=n}static supportsResolving(e){return typeof e.prepareRename=="function"}async provideRenameEdits(e,t,n,r){const s=this._documents.getDocument(e),o=Je.to(t);try{const a=await this._provider.provideRenameEdits(s,o,n,r);return a?Ni.from(a):void 0}catch(a){const c=ar._asMessage(a);return c?{rejectReason:c,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(e,t,n){if(typeof this._provider.prepareRename!="function")return Promise.resolve(void 0);const r=this._documents.getDocument(e),s=Je.to(t);try{const o=await this._provider.prepareRename(r,s,n);let a,c;if(Ee.isRange(o)?(a=o,c=r.getText(o)):us(o)&&(a=o.range,c=o.placeholder),!a||!c)return;if(a.start.line>s.line||a.end.line<s.line){this._logService.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:K.from(a),text:c}}catch(o){const a=ar._asMessage(o);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(o)}}static _asMessage(e){return typeof e=="string"?e:e instanceof Error&&typeof e.message=="string"?e.message:void 0}}class bd{constructor(e,t){this.resultId=e,this.tokens=t}}class Zt{constructor(e,t){this._documents=e,this._provider=t,this._nextResultId=1,this._previousResults=new Map}async provideDocumentSemanticTokens(e,t,n){const r=this._documents.getDocument(e),s=t!==0?this._previousResults.get(t):null;let o=typeof s?.resultId=="string"&&typeof this._provider.provideDocumentSemanticTokensEdits=="function"?await this._provider.provideDocumentSemanticTokensEdits(r,s.resultId,n):await this._provider.provideDocumentSemanticTokens(r,n);return s&&this._previousResults.delete(t),o?(o=Zt._fixProvidedSemanticTokens(o),this._send(Zt._convertToEdits(s,o),o)):null}async releaseDocumentSemanticColoring(e){this._previousResults.delete(e)}static _fixProvidedSemanticTokens(e){return Zt._isSemanticTokens(e)?Zt._isCorrectSemanticTokens(e)?e:new gc(new Uint32Array(e.data),e.resultId):Zt._isSemanticTokensEdits(e)?Zt._isCorrectSemanticTokensEdits(e)?e:new qa(e.edits.map(t=>new a_(t.start,t.deleteCount,t.data?new Uint32Array(t.data):t.data)),e.resultId):e}static _isSemanticTokens(e){return e&&!!e.data}static _isCorrectSemanticTokens(e){return e.data instanceof Uint32Array}static _isSemanticTokensEdits(e){return e&&Array.isArray(e.edits)}static _isCorrectSemanticTokensEdits(e){for(const t of e.edits)if(!(t.data instanceof Uint32Array))return!1;return!0}static _convertToEdits(e,t){if(!Zt._isSemanticTokens(t)||!e||!e.tokens)return t;const n=e.tokens,r=n.length,s=t.data,o=s.length;let a=0;const c=Math.min(r,o);for(;a<c&&n[a]===s[a];)a++;if(a===r&&a===o)return new qa([],t.resultId);let u=0;const l=c-a;for(;u<l&&n[r-u-1]===s[o-u-1];)u++;return new qa([{start:a,deleteCount:r-a-u,data:s.subarray(a,o-u)}],t.resultId)}_send(e,t){if(Zt._isSemanticTokens(e)){const n=this._nextResultId++;return this._previousResults.set(n,new bd(e.resultId,e.data)),ul({id:n,type:"full",data:e.data})}if(Zt._isSemanticTokensEdits(e)){const n=this._nextResultId++;return Zt._isSemanticTokens(t)?this._previousResults.set(n,new bd(t.resultId,t.data)):this._previousResults.set(n,new bd(e.resultId)),ul({id:n,type:"delta",deltas:(e.edits||[]).map(r=>({start:r.start,deleteCount:r.deleteCount,data:r.data}))})}return null}}class km{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentRangeSemanticTokens(e,t,n){const r=this._documents.getDocument(e),s=await this._provider.provideDocumentRangeSemanticTokens(r,K.to(t),n);return s?this._send(s):null}_send(e){return ul({id:0,type:"full",data:e.data})}}class Yi{constructor(e,t,n,r,s){this._documents=e,this._commands=t,this._provider=n,this._apiDeprecation=r,this._extension=s,this._cache=new Kn("CompletionItem"),this._disposables=new Map}static supportsResolving(e){return typeof e.resolveCompletionItem=="function"}async provideCompletionItems(e,t,n,r){const s=this._documents.getDocument(e),o=Je.to(t),a=s.getWordRangeAtPosition(o)||new Ee(o,o),c=a.with({end:o}),u=new Xw(!0),l=await this._provider.provideCompletionItems(s,o,r,Fh.to(n));if(!l||r.isCancellationRequested)return;const g=Array.isArray(l)?new nc(l):l,h=Yi.supportsResolving(this._provider)?this._cache.add(g.items):this._cache.add([]),d=new st;this._disposables.set(h,d);const p=[],_={x:h,b:p,a:{replace:K.from(a),insert:K.from(c)},c:g.isIncomplete||void 0,d:u.elapsed()};for(let b=0;b<g.items.length;b++){const k=g.items[b],y=this._convertCompletionItem(k,[h,b],c,a);p.push(y)}return _}async resolveCompletionItem(e,t){if(typeof this._provider.resolveCompletionItem!="function")return;const n=this._cache.get(...e);if(!n)return;const r=await this._provider.resolveCompletionItem(n,t);if(!!r)return this._convertCompletionItem(r,e)}releaseCompletionItems(e){this._disposables.get(e)?.dispose(),this._disposables.delete(e),this._cache.delete(e)}_convertCompletionItem(e,t,n,r){const s=this._disposables.get(t[0]);if(!s)throw Error("DisposableStore is missing...");const o={x:t,a:e.label,b:e.kind!==void 0?Ah.from(e.kind):void 0,n:e.tags&&e.tags.map(Mh.from),c:e.detail,d:typeof e.documentation>"u"?void 0:cn.fromStrict(e.documentation),e:e.sortText!==e.label?e.sortText:void 0,f:e.filterText!==e.label?e.filterText:void 0,g:e.preselect||void 0,i:e.keepWhitespace?1:0,k:e.commitCharacters,l:e.additionalTextEdits&&e.additionalTextEdits.map(wn.from),m:this._commands.toInternal(e.command,s)};e.textEdit?(this._apiDeprecation.report("CompletionItem.textEdit",this._extension,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),o.h=e.textEdit.newText):typeof e.insertText=="string"?o.h=e.insertText:e.insertText instanceof Qa&&(o.h=e.insertText.value,o.i|=4);let a;return e.textEdit?a=e.textEdit.range:e.range&&(a=e.range),Ee.isRange(a)?o.j=K.from(a):a&&(!n?.isEqual(a.inserting)||!r?.isEqual(a.replacing))&&(o.j={insert:K.from(a.inserting),replace:K.from(a.replacing)}),o}}class lo{async provideInlineCompletions(e,t,n,r){}disposeCompletions(e){}handleDidShowCompletionItem(e,t){}}class SS extends lo{constructor(e,t,n,r){super(),this._extension=e,this._documents=t,this._provider=n,this._commands=r,this._references=new b_,this._isAdditionsProposedApiEnabled=_r(this._extension,"inlineCompletionsAdditions"),this.languageTriggerKindToVSCodeTriggerKind={[Va.Automatic]:Fo.Automatic,[Va.Explicit]:Fo.Invoke}}get supportsHandleDidShowCompletionItem(){return _r(this._extension,"inlineCompletionsAdditions")&&typeof this._provider.handleDidShowCompletionItem=="function"}async provideInlineCompletions(e,t,n,r){const s=this._documents.getDocument(e),o=Je.to(t),a=await this._provider.provideInlineCompletionItems(s,o,{selectedCompletionInfo:n.selectedSuggestionInfo?{range:K.to(n.selectedSuggestionInfo.range),text:n.selectedSuggestionInfo.text}:void 0,triggerKind:this.languageTriggerKindToVSCodeTriggerKind[n.triggerKind]},r);if(!a||r.isCancellationRequested)return;const c=go(a)?a:a.items,u=this._isAdditionsProposedApiEnabled?go(a)?[]:a.commands||[]:[];let l;return{pid:this._references.createReferenceId({dispose(){l&&l.dispose()},items:c}),items:c.map((h,d)=>{let p;h.command&&(l||(l=new st),p=this._commands.toInternal(h.command,l));const _=h.insertText;return{insertText:typeof _=="string"?_:{snippet:_.value},filterText:h.filterText,range:h.range?K.from(h.range):void 0,command:p,idx:d,completeBracketPairs:this._isAdditionsProposedApiEnabled?h.completeBracketPairs:!1}}),commands:u.map(h=>(l||(l=new st),this._commands.toInternal(h,l)))}}disposeCompletions(e){this._references.disposeReferenceId(e)?.dispose()}handleDidShowCompletionItem(e,t){const n=this._references.get(e)?.items[t];n&&this._provider.handleDidShowCompletionItem&&this._isAdditionsProposedApiEnabled&&this._provider.handleDidShowCompletionItem(n)}}class DS extends lo{constructor(e,t,n,r){super(),this.extension=e,this._documents=t,this._provider=n,this._commands=r,this._references=new b_,this.isAdditionProposedApiEnabled=_r(this.extension,"inlineCompletionsAdditions"),this.languageTriggerKindToVSCodeTriggerKind={[Va.Automatic]:dc.Automatic,[Va.Explicit]:dc.Invoke}}async provideInlineCompletions(e,t,n,r){const s=this._documents.getDocument(e),o=Je.to(t),a=await this._provider.provideInlineCompletionItems(s,o,{selectedCompletionInfo:n.selectedSuggestionInfo?{range:K.to(n.selectedSuggestionInfo.range),text:n.selectedSuggestionInfo.text}:void 0,triggerKind:this.languageTriggerKindToVSCodeTriggerKind[n.triggerKind]},r);if(!a||r.isCancellationRequested)return;const c=go(a)?a:a.items,u=go(a)?[]:a.commands||[];let l;return{pid:this._references.createReferenceId({dispose(){l&&l.dispose()},items:c}),items:c.map((h,d)=>{let p;h.command&&(l||(l=new st),p=this._commands.toInternal(h.command,l));const _=h.insertText;return{insertText:typeof _=="string"?_:{snippet:_.value},filterText:h.filterText,range:h.range?K.from(h.range):void 0,command:p,idx:d,completeBracketPairs:this.isAdditionProposedApiEnabled?h.completeBracketPairs:!1}}),commands:u.map(h=>(l||(l=new st),this._commands.toInternal(h,l)))}}disposeCompletions(e){this._references.disposeReferenceId(e)?.dispose()}handleDidShowCompletionItem(e,t){const n=this._references.get(e)?.items[t];n&&this._provider.handleDidShowCompletionItem&&this.isAdditionProposedApiEnabled&&this._provider.handleDidShowCompletionItem(n)}}class b_{constructor(){this._references=new Map,this._idPool=1}createReferenceId(e){const t=this._idPool++;return this._references.set(t,e),t}disposeReferenceId(e){const t=this._references.get(e);return this._references.delete(e),t}get(e){return this._references.get(e)}}class Cd{constructor(e,t){this._documents=e,this._provider=t,this._cache=new Kn("SignatureHelp")}async provideSignatureHelp(e,t,n,r){const s=this._documents.getDocument(e),o=Je.to(t),a=this.reviveContext(n),c=await this._provider.provideSignatureHelp(s,o,r,a);if(c){const u=this._cache.add([c]);return{...Dc.from(c),id:u}}}reviveContext(e){let t;if(e.activeSignatureHelp){const n=Dc.to(e.activeSignatureHelp),r=this._cache.get(e.activeSignatureHelp.id,0);r?(t=r,t.activeSignature=n.activeSignature,t.activeParameter=n.activeParameter):t=n}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this._cache.delete(e)}}class Da{constructor(e,t,n,r,s){this._documents=e,this._commands=t,this._provider=n,this._logService=r,this._extension=s,this._cache=new Kn("InlayHints"),this._disposables=new Map}async provideInlayHints(e,t,n){const r=this._documents.getDocument(e),s=K.to(t),o=await this._provider.provideInlayHints(r,s,n);if(!Array.isArray(o)||o.length===0){this._logService.trace(`[InlayHints] NO inlay hints from '${this._extension.identifier.value}' for ${t}`);return}if(n.isCancellationRequested)return;const a=this._cache.add(o);this._disposables.set(a,new st);const c={hints:[],cacheId:a};for(let u=0;u<o.length;u++)this._isValidInlayHint(o[u],s)&&c.hints.push(this._convertInlayHint(o[u],[a,u]));return this._logService.trace(`[InlayHints] ${c.hints.length} inlay hints from '${this._extension.identifier.value}' for ${t}`),c}async resolveInlayHint(e,t){if(typeof this._provider.resolveInlayHint!="function")return;const n=this._cache.get(...e);if(!n)return;const r=await this._provider.resolveInlayHint(n,t);if(!!r&&!!this._isValidInlayHint(r))return this._convertInlayHint(r,e)}releaseHints(e){this._disposables.get(e)?.dispose(),this._disposables.delete(e),this._cache.delete(e)}_isValidInlayHint(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(n=>n.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}_convertInlayHint(e,t){const n=this._disposables.get(t[0]);if(!n)throw Error("DisposableStore is missing...");const r={label:"",cacheId:t,tooltip:cn.fromStrict(e.tooltip),position:Je.from(e.position),textEdits:e.textEdits&&e.textEdits.map(wn.from),kind:e.kind&&Lh.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};return typeof e.label=="string"?r.label=e.label:r.label=e.label.map(s=>{const o={label:s.value};return o.tooltip=cn.fromStrict(s.tooltip),li.isLocation(s.location)&&(o.location=Hi.from(s.location)),s.command&&(o.command=this._commands.toInternal(s.command,n)),o}),r}}class Ri{constructor(e,t){this._documents=e,this._provider=t,this._cache=new Kn("DocumentLink")}async provideLinks(e,t){const n=this._documents.getDocument(e),r=await this._provider.provideDocumentLinks(n,t);if(!(!Array.isArray(r)||r.length===0)&&!t.isCancellationRequested){if(typeof this._provider.resolveDocumentLink!="function")return{links:r.filter(Ri._validateLink).map(uo.from)};{const s=this._cache.add(r),o={links:[],cacheId:s};for(let a=0;a<r.length;a++){if(!Ri._validateLink(r[a]))continue;const c=uo.from(r[a]);c.cacheId=[s,a],o.links.push(c)}return o}}}static _validateLink(e){return e.target&&e.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(e,t){if(typeof this._provider.resolveDocumentLink!="function")return;const n=this._cache.get(...e);if(!n)return;const r=await this._provider.resolveDocumentLink(n,t);if(!(!r||!Ri._validateLink(r)))return uo.from(r)}releaseLinks(e){this._cache.delete(e)}}class Sd{constructor(e,t){this._documents=e,this._provider=t}async provideColors(e,t){const n=this._documents.getDocument(e),r=await this._provider.provideDocumentColors(n,t);return Array.isArray(r)?r.map(o=>({color:Ec.from(o.color),range:K.from(o.range)})):[]}async provideColorPresentations(e,t,n){const r=this._documents.getDocument(e),s=K.to(t.range),o=Ec.to(t.color),a=await this._provider.provideColorPresentations(o,{document:r,range:s},n);if(!!Array.isArray(a))return a.map(Oh.from)}}class Pm{constructor(e,t){this._documents=e,this._provider=t}async provideFoldingRanges(e,t,n){const r=this._documents.getDocument(e),s=await this._provider.provideFoldingRanges(r,t,n);if(!!Array.isArray(s))return s.map(Hh.from)}}class Rm{constructor(e,t,n){this._documents=e,this._provider=t,this._logService=n}async provideSelectionRanges(e,t,n){const r=this._documents.getDocument(e),s=t.map(Je.to),o=await this._provider.provideSelectionRanges(r,s,n);if(!ea(o))return[];if(o.length!==s.length)return this._logService.warn("BAD selection ranges, provider must return ranges for each position"),[];const a=[];for(let c=0;c<s.length;c++){const u=[];a.push(u);let l=s[c],g=o[c];for(;;){if(!g.range.contains(l))throw new Error("INVALID selection range, must contain the previous range");if(u.push($h.from(g)),!g.parent)break;l=g.range,g=g.parent}}return a}}class $s{constructor(e,t){this._documents=e,this._provider=t,this._idPool=new Ag(""),this._cache=new Map}async prepareSession(e,t,n){const r=this._documents.getDocument(e),s=Je.to(t),o=await this._provider.prepareCallHierarchy(r,s,n);if(!o)return;const a=this._idPool.nextId();return this._cache.set(a,new Map),Array.isArray(o)?o.map(c=>this._cacheAndConvertItem(a,c)):[this._cacheAndConvertItem(a,o)]}async provideCallsTo(e,t,n){const r=this._itemFromCache(e,t);if(!r)throw new Error("missing call hierarchy item");const s=await this._provider.provideCallHierarchyIncomingCalls(r,n);if(!!s)return s.map(o=>({from:this._cacheAndConvertItem(e,o.from),fromRanges:o.fromRanges.map(a=>K.from(a))}))}async provideCallsFrom(e,t,n){const r=this._itemFromCache(e,t);if(!r)throw new Error("missing call hierarchy item");const s=await this._provider.provideCallHierarchyOutgoingCalls(r,n);if(!!s)return s.map(o=>({to:this._cacheAndConvertItem(e,o.to),fromRanges:o.fromRanges.map(a=>K.from(a))}))}releaseSession(e){this._cache.delete(e)}_cacheAndConvertItem(e,t){const n=this._cache.get(e),r=Eh.from(t,e,n.size.toString(36));return n.set(r._itemId,t),r}_itemFromCache(e,t){return this._cache.get(e)?.get(t)}}class Ns{constructor(e,t){this._documents=e,this._provider=t,this._idPool=new Ag(""),this._cache=new Map}async prepareSession(e,t,n){const r=this._documents.getDocument(e),s=Je.to(t),o=await this._provider.prepareTypeHierarchy(r,s,n);if(!o)return;const a=this._idPool.nextId();return this._cache.set(a,new Map),Array.isArray(o)?o.map(c=>this._cacheAndConvertItem(a,c)):[this._cacheAndConvertItem(a,o)]}async provideSupertypes(e,t,n){const r=this._itemFromCache(e,t);if(!r)throw new Error("missing type hierarchy item");const s=await this._provider.provideTypeHierarchySupertypes(r,n);if(!!s)return s.map(o=>this._cacheAndConvertItem(e,o))}async provideSubtypes(e,t,n){const r=this._itemFromCache(e,t);if(!r)throw new Error("missing type hierarchy item");const s=await this._provider.provideTypeHierarchySubtypes(r,n);if(!!s)return s.map(o=>this._cacheAndConvertItem(e,o))}releaseSession(e){this._cache.delete(e)}_cacheAndConvertItem(e,t){const n=this._cache.get(e),r=Bh.from(t,e,n.size.toString(36));return n.set(r._itemId,t),r}_itemFromCache(e,t){return this._cache.get(e)?.get(t)}}class Im{constructor(e,t,n,r){this._proxy=e,this._documents=t,this._provider=n,this._handle=r}async provideDocumentOnDropEdits(e,t,n,r,s){const o=this._documents.getDocument(t),a=Je.to(n),c=oi.toDataTransfer(r,async l=>(await this._proxy.$resolveDocumentOnDropFileData(this._handle,e,l)).buffer),u=await this._provider.provideDocumentDropEdits(o,a,c,s);if(!!u)return{insertText:typeof u.insertText=="string"?u.insertText:{snippet:u.insertText.value},additionalEdit:u.additionalEdit?Ni.from(u.additionalEdit,void 0,!0):void 0}}}class Hs{constructor(e,t){this.adapter=e,this.extension=t}}class kt{constructor(e,t,n,r,s,o,a){this._adapter=new Map,this._uriTransformer=t,this._proxy=e.getProxy(_e.MainThreadLanguageFeatures),this._documents=n,this._commands=r,this._diagnostics=s,this._logService=o,this._apiDeprecation=a}_transformDocumentSelector(e){return pc.from(e,this._uriTransformer)}_createDisposable(e){return new vn(()=>{this._adapter.delete(e),this._proxy.$unregister(e)})}_nextHandle(){return kt._handlePool++}async _withAdapter(e,t,n,r,s,o=!1){const a=this._adapter.get(e);if(!a||!(a.adapter instanceof t))return r;const c=Date.now();o||this._logService.trace(`[${a.extension.identifier.value}] INVOKE provider '${n.toString().replace(/[\r\n]/g,"")}'`);const u=n(a.adapter,a.extension);return Promise.resolve(u).catch(l=>{cl(l)||(this._logService.error(`[${a.extension.identifier.value}] provider FAILED`),this._logService.error(l))}).finally(()=>{o||this._logService.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)}),ri.isCancellationToken(s)?IC(u,s):u}_addNewAdapter(e,t){const n=this._nextHandle();return this._adapter.set(n,new Hs(e,t)),n}static _extLabel(e){return e.displayName||e.name}registerDocumentSymbolProvider(e,t,n,r){const s=this._addNewAdapter(new Oc(this._documents,n),e),o=r&&r.label||kt._extLabel(e);return this._proxy.$registerDocumentSymbolProvider(s,this._transformDocumentSelector(t),o),this._createDisposable(s)}$provideDocumentSymbols(e,t,n){return this._withAdapter(e,Oc,r=>r.provideDocumentSymbols(x.revive(t),n),void 0,n)}registerCodeLensProvider(e,t,n){const r=this._nextHandle(),s=typeof n.onDidChangeCodeLenses=="function"?this._nextHandle():void 0;this._adapter.set(r,new Hs(new or(this._documents,this._commands.converter,n),e)),this._proxy.$registerCodeLensSupport(r,this._transformDocumentSelector(t),s);let o=this._createDisposable(r);if(s!==void 0){const a=n.onDidChangeCodeLenses(c=>this._proxy.$emitCodeLensEvent(s));o=vn.from(o,a)}return o}$provideCodeLenses(e,t,n){return this._withAdapter(e,or,r=>r.provideCodeLenses(x.revive(t),n),void 0,n)}$resolveCodeLens(e,t,n){return this._withAdapter(e,or,r=>r.resolveCodeLens(t,n),void 0,void 0)}$releaseCodeLenses(e,t){this._withAdapter(e,or,n=>Promise.resolve(n.releaseCodeLenses(t)),void 0,void 0)}registerDefinitionProvider(e,t,n){const r=this._addNewAdapter(new gm(this._documents,n),e);return this._proxy.$registerDefinitionSupport(r,this._transformDocumentSelector(t)),this._createDisposable(r)}$provideDefinition(e,t,n,r){return this._withAdapter(e,gm,s=>s.provideDefinition(x.revive(t),n,r),[],r)}registerDeclarationProvider(e,t,n){const r=this._addNewAdapter(new pm(this._documents,n),e);return this._proxy.$registerDeclarationSupport(r,this._transformDocumentSelector(t)),this._createDisposable(r)}$provideDeclaration(e,t,n,r){return this._withAdapter(e,pm,s=>s.provideDeclaration(x.revive(t),n,r),[],r)}registerImplementationProvider(e,t,n){const r=this._addNewAdapter(new mm(this._documents,n),e);return this._proxy.$registerImplementationSupport(r,this._transformDocumentSelector(t)),this._createDisposable(r)}$provideImplementation(e,t,n,r){return this._withAdapter(e,mm,s=>s.provideImplementation(x.revive(t),n,r),[],r)}registerTypeDefinitionProvider(e,t,n){const r=this._addNewAdapter(new vm(this._documents,n),e);return this._proxy.$registerTypeDefinitionSupport(r,this._transformDocumentSelector(t)),this._createDisposable(r)}$provideTypeDefinition(e,t,n,r){return this._withAdapter(e,vm,s=>s.provideTypeDefinition(x.revive(t),n,r),[],r)}registerHoverProvider(e,t,n,r){const s=this._addNewAdapter(new _m(this._documents,n),e);return this._proxy.$registerHoverProvider(s,this._transformDocumentSelector(t)),this._createDisposable(s)}$provideHover(e,t,n,r){return this._withAdapter(e,_m,s=>s.provideHover(x.revive(t),n,r),void 0,r)}registerEvaluatableExpressionProvider(e,t,n,r){const s=this._addNewAdapter(new ym(this._documents,n),e);return this._proxy.$registerEvaluatableExpressionProvider(s,this._transformDocumentSelector(t)),this._createDisposable(s)}$provideEvaluatableExpression(e,t,n,r){return this._withAdapter(e,ym,s=>s.provideEvaluatableExpression(x.revive(t),n,r),void 0,r)}registerInlineValuesProvider(e,t,n,r){const s=typeof n.onDidChangeInlineValues=="function"?this._nextHandle():void 0,o=this._addNewAdapter(new wm(this._documents,n),e);this._proxy.$registerInlineValuesProvider(o,this._transformDocumentSelector(t),s);let a=this._createDisposable(o);if(s!==void 0){const c=n.onDidChangeInlineValues(u=>this._proxy.$emitInlineValuesEvent(s));a=vn.from(a,c)}return a}$provideInlineValues(e,t,n,r,s){return this._withAdapter(e,wm,o=>o.provideInlineValues(x.revive(t),n,r,s),void 0,s)}registerDocumentHighlightProvider(e,t,n){const r=this._addNewAdapter(new bm(this._documents,n),e);return this._proxy.$registerDocumentHighlightProvider(r,this._transformDocumentSelector(t)),this._createDisposable(r)}$provideDocumentHighlights(e,t,n,r){return this._withAdapter(e,bm,s=>s.provideDocumentHighlights(x.revive(t),n,r),void 0,r)}registerLinkedEditingRangeProvider(e,t,n){const r=this._addNewAdapter(new Cm(this._documents,n),e);return this._proxy.$registerLinkedEditingRangeProvider(r,this._transformDocumentSelector(t)),this._createDisposable(r)}$provideLinkedEditingRanges(e,t,n,r){return this._withAdapter(e,Cm,async s=>{const o=await s.provideLinkedEditingRanges(x.revive(t),n,r);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?kt._serializeRegExp(o.wordPattern):void 0}},void 0,r)}registerReferenceProvider(e,t,n){const r=this._addNewAdapter(new Sm(this._documents,n),e);return this._proxy.$registerReferenceSupport(r,this._transformDocumentSelector(t)),this._createDisposable(r)}$provideReferences(e,t,n,r,s){return this._withAdapter(e,Sm,o=>o.provideReferences(x.revive(t),n,r,s),void 0,s)}registerCodeActionProvider(e,t,n,r){const s=new st,o=this._addNewAdapter(new ni(this._documents,this._commands.converter,this._diagnostics,n,this._logService,e,this._apiDeprecation),e);return this._proxy.$registerQuickFixSupport(o,this._transformDocumentSelector(t),{providedKinds:r?.providedCodeActionKinds?.map(a=>a.value),documentation:r?.documentation?.map(a=>({kind:a.kind.value,command:this._commands.converter.toInternal(a.command,s)}))},kt._extLabel(e),Boolean(n.resolveCodeAction)),s.add(this._createDisposable(o)),s}$provideCodeActions(e,t,n,r,s){return this._withAdapter(e,ni,o=>o.provideCodeActions(x.revive(t),n,r,s),void 0,s)}$resolveCodeAction(e,t,n){return this._withAdapter(e,ni,r=>r.resolveCodeAction(t,n),void 0,void 0)}$releaseCodeActions(e,t){this._withAdapter(e,ni,n=>Promise.resolve(n.releaseCodeActions(t)),void 0,void 0)}registerDocumentFormattingEditProvider(e,t,n){const r=this._addNewAdapter(new Dm(this._documents,n),e);return this._proxy.$registerDocumentFormattingSupport(r,this._transformDocumentSelector(t),e.identifier,e.displayName||e.name),this._createDisposable(r)}$provideDocumentFormattingEdits(e,t,n,r){return this._withAdapter(e,Dm,s=>s.provideDocumentFormattingEdits(x.revive(t),n,r),void 0,r)}registerDocumentRangeFormattingEditProvider(e,t,n){const r=this._addNewAdapter(new Em(this._documents,n),e);return this._proxy.$registerRangeFormattingSupport(r,this._transformDocumentSelector(t),e.identifier,e.displayName||e.name),this._createDisposable(r)}$provideDocumentRangeFormattingEdits(e,t,n,r,s){return this._withAdapter(e,Em,o=>o.provideDocumentRangeFormattingEdits(x.revive(t),n,r,s),void 0,s)}registerOnTypeFormattingEditProvider(e,t,n,r){const s=this._addNewAdapter(new Tm(this._documents,n),e);return this._proxy.$registerOnTypeFormattingSupport(s,this._transformDocumentSelector(t),r,e.identifier),this._createDisposable(s)}$provideOnTypeFormattingEdits(e,t,n,r,s,o){return this._withAdapter(e,Tm,a=>a.provideOnTypeFormattingEdits(x.revive(t),n,r,s,o),void 0,o)}registerWorkspaceSymbolProvider(e,t){const n=this._addNewAdapter(new Sa(t,this._logService),e);return this._proxy.$registerNavigateTypeSupport(n,typeof t.resolveWorkspaceSymbol=="function"),this._createDisposable(n)}$provideWorkspaceSymbols(e,t,n){return this._withAdapter(e,Sa,r=>r.provideWorkspaceSymbols(t,n),{symbols:[]},n)}$resolveWorkspaceSymbol(e,t,n){return this._withAdapter(e,Sa,r=>r.resolveWorkspaceSymbol(t,n),void 0,void 0)}$releaseWorkspaceSymbols(e,t){this._withAdapter(e,Sa,n=>n.releaseWorkspaceSymbols(t),void 0,void 0)}registerRenameProvider(e,t,n){const r=this._addNewAdapter(new ar(this._documents,n,this._logService),e);return this._proxy.$registerRenameSupport(r,this._transformDocumentSelector(t),ar.supportsResolving(n)),this._createDisposable(r)}$provideRenameEdits(e,t,n,r,s){return this._withAdapter(e,ar,o=>o.provideRenameEdits(x.revive(t),n,r,s),void 0,s)}$resolveRenameLocation(e,t,n,r){return this._withAdapter(e,ar,s=>s.resolveRenameLocation(x.revive(t),n,r),void 0,r)}registerDocumentSemanticTokensProvider(e,t,n,r){const s=this._addNewAdapter(new Zt(this._documents,n),e),o=typeof n.onDidChangeSemanticTokens=="function"?this._nextHandle():void 0;this._proxy.$registerDocumentSemanticTokensProvider(s,this._transformDocumentSelector(t),r,o);let a=this._createDisposable(s);if(o){const c=n.onDidChangeSemanticTokens(u=>this._proxy.$emitDocumentSemanticTokensEvent(o));a=vn.from(a,c)}return a}$provideDocumentSemanticTokens(e,t,n,r){return this._withAdapter(e,Zt,s=>s.provideDocumentSemanticTokens(x.revive(t),n,r),null,r)}$releaseDocumentSemanticTokens(e,t){this._withAdapter(e,Zt,n=>n.releaseDocumentSemanticColoring(t),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(e,t,n,r){const s=this._addNewAdapter(new km(this._documents,n),e);return this._proxy.$registerDocumentRangeSemanticTokensProvider(s,this._transformDocumentSelector(t),r),this._createDisposable(s)}$provideDocumentRangeSemanticTokens(e,t,n,r){return this._withAdapter(e,km,s=>s.provideDocumentRangeSemanticTokens(x.revive(t),n,r),null,r)}registerCompletionItemProvider(e,t,n,r){const s=this._addNewAdapter(new Yi(this._documents,this._commands.converter,n,this._apiDeprecation,e),e);return this._proxy.$registerCompletionsProvider(s,this._transformDocumentSelector(t),r,Yi.supportsResolving(n),`${e.identifier.value}(${r.join("")})`),this._createDisposable(s)}$provideCompletionItems(e,t,n,r,s){return this._withAdapter(e,Yi,o=>o.provideCompletionItems(x.revive(t),n,r,s),void 0,s)}$resolveCompletionItem(e,t,n){return this._withAdapter(e,Yi,r=>r.resolveCompletionItem(t,n),void 0,n)}$releaseCompletionItems(e,t){this._withAdapter(e,Yi,n=>n.releaseCompletionItems(t),void 0,void 0)}registerInlineCompletionsProvider(e,t,n){const r=new SS(e,this._documents,n,this._commands.converter),s=this._addNewAdapter(r,e);return this._proxy.$registerInlineCompletionsSupport(s,this._transformDocumentSelector(t),r.supportsHandleDidShowCompletionItem),this._createDisposable(s)}registerInlineCompletionsProviderNew(e,t,n){const r=this._addNewAdapter(new DS(e,this._documents,n,this._commands.converter),e);return this._proxy.$registerInlineCompletionsSupport(r,this._transformDocumentSelector(t),!0),this._createDisposable(r)}$provideInlineCompletions(e,t,n,r,s){return this._withAdapter(e,lo,o=>o.provideInlineCompletions(x.revive(t),n,r,s),void 0,s)}$handleInlineCompletionDidShow(e,t,n){this._withAdapter(e,lo,async r=>{r.handleDidShowCompletionItem(t,n)},void 0,void 0)}$freeInlineCompletionsList(e,t){this._withAdapter(e,lo,async n=>{n.disposeCompletions(t)},void 0,void 0)}registerSignatureHelpProvider(e,t,n,r){const s=Array.isArray(r)?{triggerCharacters:r,retriggerCharacters:[]}:r,o=this._addNewAdapter(new Cd(this._documents,n),e);return this._proxy.$registerSignatureHelpProvider(o,this._transformDocumentSelector(t),s),this._createDisposable(o)}$provideSignatureHelp(e,t,n,r,s){return this._withAdapter(e,Cd,o=>o.provideSignatureHelp(x.revive(t),n,r,s),void 0,s)}$releaseSignatureHelp(e,t){this._withAdapter(e,Cd,n=>n.releaseSignatureHelp(t),void 0,void 0)}registerInlayHintsProvider(e,t,n){const r=typeof n.onDidChangeInlayHints=="function"?this._nextHandle():void 0,s=this._addNewAdapter(new Da(this._documents,this._commands.converter,n,this._logService,e),e);this._proxy.$registerInlayHintsProvider(s,this._transformDocumentSelector(t),typeof n.resolveInlayHint=="function",r,kt._extLabel(e));let o=this._createDisposable(s);if(r!==void 0){const a=n.onDidChangeInlayHints(c=>this._proxy.$emitInlayHintsEvent(r));o=vn.from(o,a)}return o}$provideInlayHints(e,t,n,r){return this._withAdapter(e,Da,s=>s.provideInlayHints(x.revive(t),n,r),void 0,r)}$resolveInlayHint(e,t,n){return this._withAdapter(e,Da,r=>r.resolveInlayHint(t,n),void 0,n)}$releaseInlayHints(e,t){this._withAdapter(e,Da,n=>n.releaseHints(t),void 0,void 0)}registerDocumentLinkProvider(e,t,n){const r=this._addNewAdapter(new Ri(this._documents,n),e);return this._proxy.$registerDocumentLinkProvider(r,this._transformDocumentSelector(t),typeof n.resolveDocumentLink=="function"),this._createDisposable(r)}$provideDocumentLinks(e,t,n){return this._withAdapter(e,Ri,r=>r.provideLinks(x.revive(t),n),void 0,n,t.scheme==="output")}$resolveDocumentLink(e,t,n){return this._withAdapter(e,Ri,r=>r.resolveLink(t,n),void 0,void 0,!0)}$releaseDocumentLinks(e,t){this._withAdapter(e,Ri,n=>n.releaseLinks(t),void 0,void 0,!0)}registerColorProvider(e,t,n){const r=this._addNewAdapter(new Sd(this._documents,n),e);return this._proxy.$registerDocumentColorProvider(r,this._transformDocumentSelector(t)),this._createDisposable(r)}$provideDocumentColors(e,t,n){return this._withAdapter(e,Sd,r=>r.provideColors(x.revive(t),n),[],n)}$provideColorPresentations(e,t,n,r){return this._withAdapter(e,Sd,s=>s.provideColorPresentations(x.revive(t),n,r),void 0,r)}registerFoldingRangeProvider(e,t,n){const r=this._nextHandle(),s=typeof n.onDidChangeFoldingRanges=="function"?this._nextHandle():void 0;this._adapter.set(r,new Hs(new Pm(this._documents,n),e)),this._proxy.$registerFoldingRangeProvider(r,this._transformDocumentSelector(t),s);let o=this._createDisposable(r);if(s!==void 0){const a=n.onDidChangeFoldingRanges(()=>this._proxy.$emitFoldingRangeEvent(s));o=vn.from(o,a)}return o}$provideFoldingRanges(e,t,n,r){return this._withAdapter(e,Pm,s=>s.provideFoldingRanges(x.revive(t),n,r),void 0,r)}registerSelectionRangeProvider(e,t,n){const r=this._addNewAdapter(new Rm(this._documents,n,this._logService),e);return this._proxy.$registerSelectionRangeProvider(r,this._transformDocumentSelector(t)),this._createDisposable(r)}$provideSelectionRanges(e,t,n,r){return this._withAdapter(e,Rm,s=>s.provideSelectionRanges(x.revive(t),n,r),[],r)}registerCallHierarchyProvider(e,t,n){const r=this._addNewAdapter(new $s(this._documents,n),e);return this._proxy.$registerCallHierarchyProvider(r,this._transformDocumentSelector(t)),this._createDisposable(r)}$prepareCallHierarchy(e,t,n,r){return this._withAdapter(e,$s,s=>Promise.resolve(s.prepareSession(x.revive(t),n,r)),void 0,r)}$provideCallHierarchyIncomingCalls(e,t,n,r){return this._withAdapter(e,$s,s=>s.provideCallsTo(t,n,r),void 0,r)}$provideCallHierarchyOutgoingCalls(e,t,n,r){return this._withAdapter(e,$s,s=>s.provideCallsFrom(t,n,r),void 0,r)}$releaseCallHierarchy(e,t){this._withAdapter(e,$s,n=>Promise.resolve(n.releaseSession(t)),void 0,void 0)}registerTypeHierarchyProvider(e,t,n){const r=this._addNewAdapter(new Ns(this._documents,n),e);return this._proxy.$registerTypeHierarchyProvider(r,this._transformDocumentSelector(t)),this._createDisposable(r)}$prepareTypeHierarchy(e,t,n,r){return this._withAdapter(e,Ns,s=>Promise.resolve(s.prepareSession(x.revive(t),n,r)),void 0,r)}$provideTypeHierarchySupertypes(e,t,n,r){return this._withAdapter(e,Ns,s=>s.provideSupertypes(t,n,r),void 0,r)}$provideTypeHierarchySubtypes(e,t,n,r){return this._withAdapter(e,Ns,s=>s.provideSubtypes(t,n,r),void 0,r)}$releaseTypeHierarchy(e,t){this._withAdapter(e,Ns,n=>Promise.resolve(n.releaseSession(t)),void 0,void 0)}registerDocumentOnDropEditProvider(e,t,n){const r=this._nextHandle();return this._adapter.set(r,new Hs(new Im(this._proxy,this._documents,n,r),e)),this._proxy.$registerDocumentOnDropEditProvider(r,this._transformDocumentSelector(t)),this._createDisposable(r)}$provideDocumentOnDropEdits(e,t,n,r,s,o){return this._withAdapter(e,Im,a=>Promise.resolve(a.provideDocumentOnDropEdits(t,x.revive(n),r,s,o)),void 0,void 0)}registerDocumentPasteEditProvider(e,t,n,r){const s=this._nextHandle();return this._adapter.set(s,new Hs(new wd(this._proxy,this._documents,n,s),e)),this._proxy.$registerPasteEditProvider(s,this._transformDocumentSelector(t),!!n.prepareDocumentPaste,r.pasteMimeTypes),this._createDisposable(s)}$prepareDocumentPaste(e,t,n,r,s){return this._withAdapter(e,wd,o=>o.prepareDocumentPaste(x.revive(t),n,r,s),void 0,s)}$providePasteEdits(e,t,n,r,s,o){return this._withAdapter(e,wd,a=>a.providePasteEdits(t,x.revive(n),r,s,o),void 0,o)}static _serializeRegExp(e){return{pattern:e.source,flags:zw(e)}}static _serializeIndentationRule(e){return{decreaseIndentPattern:kt._serializeRegExp(e.decreaseIndentPattern),increaseIndentPattern:kt._serializeRegExp(e.increaseIndentPattern),indentNextLinePattern:e.indentNextLinePattern?kt._serializeRegExp(e.indentNextLinePattern):void 0,unIndentedLinePattern:e.unIndentedLinePattern?kt._serializeRegExp(e.unIndentedLinePattern):void 0}}static _serializeOnEnterRule(e){return{beforeText:kt._serializeRegExp(e.beforeText),afterText:e.afterText?kt._serializeRegExp(e.afterText):void 0,previousLineText:e.previousLineText?kt._serializeRegExp(e.previousLineText):void 0,action:e.action}}static _serializeOnEnterRules(e){return e.map(kt._serializeOnEnterRule)}setLanguageConfiguration(e,t,n){const{wordPattern:r}=n;if(r&&Pg(r))throw new Error(`Invalid language configuration: wordPattern '${r}' is not allowed to match the empty string.`);r?this._documents.setWordDefinitionFor(t,r):this._documents.setWordDefinitionFor(t,void 0),n.__electricCharacterSupport&&this._apiDeprecation.report("LanguageConfiguration.__electricCharacterSupport",e,"Do not use."),n.__characterPairSupport&&this._apiDeprecation.report("LanguageConfiguration.__characterPairSupport",e,"Do not use.");const s=this._nextHandle(),o={comments:n.comments,brackets:n.brackets,wordPattern:n.wordPattern?kt._serializeRegExp(n.wordPattern):void 0,indentationRules:n.indentationRules?kt._serializeIndentationRule(n.indentationRules):void 0,onEnterRules:n.onEnterRules?kt._serializeOnEnterRules(n.onEnterRules):void 0,__electricCharacterSupport:n.__electricCharacterSupport,__characterPairSupport:n.__characterPairSupport};return this._proxy.$setLanguageConfiguration(s,t,o),this._createDisposable(s)}$setWordDefinitions(e){for(const t of e)this._documents.setWordDefinitionFor(t.languageId,new RegExp(t.regexSource,t.regexFlags))}}kt._handlePool=0;class C_{constructor(){this.requestIdPool=0,this.dataTransfers=new Map}add(e){const t=this.requestIdPool++;return this.dataTransfers.set(t,[...e.values()]),{id:t,dispose:()=>{this.dataTransfers.delete(t)}}}async resolveDropFileData(e,t){const n=this.dataTransfers.get(e);if(!n)throw new Error("No data transfer found");const r=n[t]?.asFile();if(!r)throw new Error("No file item found in data transfer");return rt.wrap(await r.data())}dispose(){this.dataTransfers.clear()}}const ES=new Mg;var _f;(function(i){const e=[];function t(r){let s=r;return s&&e.push(s),{dispose(){if(s){const o=e.indexOf(s);o>=0&&(e.splice(o,1),s=void 0)}}}}i.register=t;function n(){return e.slice(0)}i.all=n})(_f||(_f={}));const TS=new Mg;var Oe;let yf=Oe=class extends Jt{constructor(e,t,n,r){if(super(),this._languageService=t,this._languageConfigurationService=n,this._languageFeaturesService=r,this._registrations=new Map,this._pasteEditProviders=new Map,this._documentOnDropEditProviders=new Map,this._proxy=e.getProxy(tt.ExtHostLanguageFeatures),this._languageService){const s=()=>{const o=[];for(const a of t.getRegisteredLanguageIds()){const c=this._languageConfigurationService.getLanguageConfiguration(a).getWordDefinition();o.push({languageId:a,regexSource:c.source,regexFlags:c.flags})}this._proxy.$setWordDefinitions(o)};this._languageConfigurationService.onDidChange(o=>{if(!o.languageId)s();else{const a=this._languageConfigurationService.getLanguageConfiguration(o.languageId).getWordDefinition();this._proxy.$setWordDefinitions([{languageId:o.languageId,regexSource:a.source,regexFlags:a.flags}])}}),s()}}dispose(){for(const e of this._registrations.values())e.dispose();this._registrations.clear(),super.dispose()}$unregister(e){const t=this._registrations.get(e);t&&(t.dispose(),this._registrations.delete(e))}static _reviveLocationDto(e){return e&&(Array.isArray(e)?(e.forEach(t=>Oe._reviveLocationDto(t)),e):(e.uri=x.revive(e.uri),e))}static _reviveLocationLinkDto(e){return e&&(Array.isArray(e)?(e.forEach(t=>Oe._reviveLocationLinkDto(t)),e):(e.uri=x.revive(e.uri),e))}static _reviveWorkspaceSymbolDto(e){return e&&(Array.isArray(e)?(e.forEach(Oe._reviveWorkspaceSymbolDto),e):(e.location=Oe._reviveLocationDto(e.location),e))}static _reviveCodeActionDto(e){return e?.forEach(t=>is(t.edit)),e}static _reviveLinkDTO(e){return e.url&&typeof e.url!="string"&&(e.url=x.revive(e.url)),e}static _reviveCallHierarchyItemDto(e){return e&&(e.uri=x.revive(e.uri)),e}static _reviveTypeHierarchyItemDto(e){return e&&(e.uri=x.revive(e.uri)),e}$registerDocumentSymbolProvider(e,t,n){this._registrations.set(e,this._languageFeaturesService.documentSymbolProvider.register(t,{displayName:n,provideDocumentSymbols:(r,s)=>this._proxy.$provideDocumentSymbols(e,r.uri,s)}))}$registerCodeLensSupport(e,t,n){const r={provideCodeLenses:async(s,o)=>{const a=await this._proxy.$provideCodeLenses(e,s.uri,o);if(!!a)return{lenses:a.lenses,dispose:()=>a.cacheId&&this._proxy.$releaseCodeLenses(e,a.cacheId)}},resolveCodeLens:(s,o,a)=>this._proxy.$resolveCodeLens(e,o,a)};if(typeof n=="number"){const s=new ce;this._registrations.set(n,s),r.onDidChange=s.event}this._registrations.set(e,this._languageFeaturesService.codeLensProvider.register(t,r))}$emitCodeLensEvent(e,t){const n=this._registrations.get(e);n instanceof ce&&n.fire(t)}$registerDefinitionSupport(e,t){this._registrations.set(e,this._languageFeaturesService.definitionProvider.register(t,{provideDefinition:(n,r,s)=>this._proxy.$provideDefinition(e,n.uri,r,s).then(Oe._reviveLocationLinkDto)}))}$registerDeclarationSupport(e,t){this._registrations.set(e,this._languageFeaturesService.declarationProvider.register(t,{provideDeclaration:(n,r,s)=>this._proxy.$provideDeclaration(e,n.uri,r,s).then(Oe._reviveLocationLinkDto)}))}$registerImplementationSupport(e,t){this._registrations.set(e,this._languageFeaturesService.implementationProvider.register(t,{provideImplementation:(n,r,s)=>this._proxy.$provideImplementation(e,n.uri,r,s).then(Oe._reviveLocationLinkDto)}))}$registerTypeDefinitionSupport(e,t){this._registrations.set(e,this._languageFeaturesService.typeDefinitionProvider.register(t,{provideTypeDefinition:(n,r,s)=>this._proxy.$provideTypeDefinition(e,n.uri,r,s).then(Oe._reviveLocationLinkDto)}))}$registerHoverProvider(e,t){this._registrations.set(e,this._languageFeaturesService.hoverProvider.register(t,{provideHover:(n,r,s)=>this._proxy.$provideHover(e,n.uri,r,s)}))}$registerEvaluatableExpressionProvider(e,t){this._registrations.set(e,this._languageFeaturesService.evaluatableExpressionProvider.register(t,{provideEvaluatableExpression:(n,r,s)=>this._proxy.$provideEvaluatableExpression(e,n.uri,r,s)}))}$registerInlineValuesProvider(e,t,n){const r={provideInlineValues:(s,o,a,c)=>this._proxy.$provideInlineValues(e,s.uri,o,a,c)};if(typeof n=="number"){const s=new ce;this._registrations.set(n,s),r.onDidChangeInlineValues=s.event}this._registrations.set(e,this._languageFeaturesService.inlineValuesProvider.register(t,r))}$emitInlineValuesEvent(e,t){const n=this._registrations.get(e);n instanceof ce&&n.fire(t)}$registerDocumentHighlightProvider(e,t){this._registrations.set(e,this._languageFeaturesService.documentHighlightProvider.register(t,{provideDocumentHighlights:(n,r,s)=>this._proxy.$provideDocumentHighlights(e,n.uri,r,s)}))}$registerLinkedEditingRangeProvider(e,t){this._registrations.set(e,this._languageFeaturesService.linkedEditingRangeProvider.register(t,{provideLinkedEditingRanges:async(n,r,s)=>{const o=await this._proxy.$provideLinkedEditingRanges(e,n.uri,r,s);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?Oe._reviveRegExp(o.wordPattern):void 0}}}))}$registerReferenceSupport(e,t){this._registrations.set(e,this._languageFeaturesService.referenceProvider.register(t,{provideReferences:(n,r,s,o)=>this._proxy.$provideReferences(e,n.uri,r,s,o).then(Oe._reviveLocationDto)}))}$registerQuickFixSupport(e,t,n,r,s){const o={provideCodeActions:async(a,c,u,l)=>{const g=await this._proxy.$provideCodeActions(e,a.uri,c,u,l);if(!!g)return{actions:Oe._reviveCodeActionDto(g.actions),dispose:()=>{typeof g.cacheId=="number"&&this._proxy.$releaseCodeActions(e,g.cacheId)}}},providedCodeActionKinds:n.providedKinds,documentation:n.documentation,displayName:r};s&&(o.resolveCodeAction=async(a,c)=>{const u=await this._proxy.$resolveCodeAction(e,a.cacheId,c);return a.edit=is(u),a}),this._registrations.set(e,this._languageFeaturesService.codeActionProvider.register(t,o))}$registerPasteEditProvider(e,t,n,r){const s=new kS(e,this._proxy,n,r);this._pasteEditProviders.set(e,s),this._registrations.set(e,ol(this._languageFeaturesService.documentPasteEditProvider.register(t,s),sl(()=>this._pasteEditProviders.delete(e))))}$resolvePasteFileData(e,t,n){const r=this._pasteEditProviders.get(e);if(!r)throw new Error("Could not find provider");return r.resolveFileData(t,n)}$registerDocumentFormattingSupport(e,t,n,r){this._registrations.set(e,this._languageFeaturesService.documentFormattingEditProvider.register(t,{extensionId:n,displayName:r,provideDocumentFormattingEdits:(s,o,a)=>this._proxy.$provideDocumentFormattingEdits(e,s.uri,o,a)}))}$registerRangeFormattingSupport(e,t,n,r){this._registrations.set(e,this._languageFeaturesService.documentRangeFormattingEditProvider.register(t,{extensionId:n,displayName:r,provideDocumentRangeFormattingEdits:(s,o,a,c)=>this._proxy.$provideDocumentRangeFormattingEdits(e,s.uri,o,a,c)}))}$registerOnTypeFormattingSupport(e,t,n,r){this._registrations.set(e,this._languageFeaturesService.onTypeFormattingEditProvider.register(t,{extensionId:r,autoFormatTriggerCharacters:n,provideOnTypeFormattingEdits:(s,o,a,c,u)=>this._proxy.$provideOnTypeFormattingEdits(e,s.uri,o,a,c,u)}))}$registerNavigateTypeSupport(e,t){let n;const r={provideWorkspaceSymbols:async(s,o)=>{const a=await this._proxy.$provideWorkspaceSymbols(e,s,o);return n!==void 0&&this._proxy.$releaseWorkspaceSymbols(e,n),n=a.cacheId,Oe._reviveWorkspaceSymbolDto(a.symbols)}};t&&(r.resolveWorkspaceSymbol=async(s,o)=>{const a=await this._proxy.$resolveWorkspaceSymbol(e,s,o);return a&&Oe._reviveWorkspaceSymbolDto(a)}),this._registrations.set(e,_f.register(r))}$registerRenameSupport(e,t,n){this._registrations.set(e,this._languageFeaturesService.renameProvider.register(t,{provideRenameEdits:(r,s,o,a)=>this._proxy.$provideRenameEdits(e,r.uri,s,o,a).then(is),resolveRenameLocation:n?(r,s,o)=>this._proxy.$resolveRenameLocation(e,r.uri,s,o):void 0}))}$registerDocumentSemanticTokensProvider(e,t,n,r){let s;if(typeof r=="number"){const o=new ce;this._registrations.set(r,o),s=o.event}this._registrations.set(e,this._languageFeaturesService.documentSemanticTokensProvider.register(t,new RS(this._proxy,e,n,s)))}$emitDocumentSemanticTokensEvent(e){const t=this._registrations.get(e);t instanceof ce&&t.fire(void 0)}$registerDocumentRangeSemanticTokensProvider(e,t,n){this._registrations.set(e,this._languageFeaturesService.documentRangeSemanticTokensProvider.register(t,new IS(this._proxy,e,n)))}static _inflateSuggestDto(e,t){const n=t.a;return{label:n,kind:t.b??9,tags:t.n,detail:t.c,documentation:t.d,sortText:t.e,filterText:t.f,preselect:t.g,insertText:t.h??(typeof n=="string"?n:n.label),range:t.j??e,insertTextRules:t.i,commitCharacters:t.k,additionalTextEdits:t.l,command:t.m,_id:t.x}}$registerCompletionsProvider(e,t,n,r,s){const o={triggerCharacters:n,_debugDisplayName:s,provideCompletionItems:async(a,c,u,l)=>{const g=await this._proxy.$provideCompletionItems(e,a.uri,c,u,l);return g&&{suggestions:g.b.map(h=>Oe._inflateSuggestDto(g.a,h)),incomplete:g.c||!1,duration:g.d,dispose:()=>{typeof g.x=="number"&&this._proxy.$releaseCompletionItems(e,g.x)}}}};r&&(o.resolveCompletionItem=(a,c)=>this._proxy.$resolveCompletionItem(e,a._id,c).then(u=>{if(!u)return a;const l=Oe._inflateSuggestDto(a.range,u);return Qo(a,l,!0)})),this._registrations.set(e,this._languageFeaturesService.completionProvider.register(t,o))}$registerInlineCompletionsSupport(e,t,n){const r={provideInlineCompletions:async(s,o,a,c)=>this._proxy.$provideInlineCompletions(e,s.uri,o,a,c),handleItemDidShow:async(s,o)=>{n&&await this._proxy.$handleInlineCompletionDidShow(e,s.pid,o.idx)},freeInlineCompletions:s=>{this._proxy.$freeInlineCompletionsList(e,s.pid)}};this._registrations.set(e,this._languageFeaturesService.inlineCompletionsProvider.register(t,r))}$registerSignatureHelpProvider(e,t,n){this._registrations.set(e,this._languageFeaturesService.signatureHelpProvider.register(t,{signatureHelpTriggerCharacters:n.triggerCharacters,signatureHelpRetriggerCharacters:n.retriggerCharacters,provideSignatureHelp:async(r,s,o,a)=>{const c=await this._proxy.$provideSignatureHelp(e,r.uri,s,a,o);if(!!c)return{value:c,dispose:()=>{this._proxy.$releaseSignatureHelp(e,c.id)}}}}))}$registerInlayHintsProvider(e,t,n,r,s){const o={displayName:s,provideInlayHints:async(a,c,u)=>{const l=await this._proxy.$provideInlayHints(e,a.uri,c,u);if(!!l)return{hints:vr(l.hints),dispose:()=>{l.cacheId&&this._proxy.$releaseInlayHints(e,l.cacheId)}}}};if(n&&(o.resolveInlayHint=async(a,c)=>{const u=a;if(!u.cacheId)return a;const l=await this._proxy.$resolveInlayHint(e,u.cacheId,c);if(c.isCancellationRequested)throw new Jc;return l?{...a,tooltip:l.tooltip,label:vr(l.label)}:a}),typeof r=="number"){const a=new ce;this._registrations.set(r,a),o.onDidChangeInlayHints=a.event}this._registrations.set(e,this._languageFeaturesService.inlayHintsProvider.register(t,o))}$emitInlayHintsEvent(e){const t=this._registrations.get(e);t instanceof ce&&t.fire(void 0)}$registerDocumentLinkProvider(e,t,n){const r={provideLinks:(s,o)=>this._proxy.$provideDocumentLinks(e,s.uri,o).then(a=>{if(!!a)return{links:a.links.map(Oe._reviveLinkDTO),dispose:()=>{typeof a.cacheId=="number"&&this._proxy.$releaseDocumentLinks(e,a.cacheId)}}})};n&&(r.resolveLink=(s,o)=>{const a=s;return a.cacheId?this._proxy.$resolveDocumentLink(e,a.cacheId,o).then(c=>c&&Oe._reviveLinkDTO(c)):s}),this._registrations.set(e,this._languageFeaturesService.linkProvider.register(t,r))}$registerDocumentColorProvider(e,t){const n=this._proxy;this._registrations.set(e,this._languageFeaturesService.colorProvider.register(t,{provideDocumentColors:(r,s)=>n.$provideDocumentColors(e,r.uri,s).then(o=>o.map(a=>{const[c,u,l,g]=a.color;return{color:{red:c,green:u,blue:l,alpha:g},range:a.range}})),provideColorPresentations:(r,s,o)=>n.$provideColorPresentations(e,r.uri,{color:[s.color.red,s.color.green,s.color.blue,s.color.alpha],range:s.range},o)}))}$registerFoldingRangeProvider(e,t,n){const r={provideFoldingRanges:(s,o,a)=>this._proxy.$provideFoldingRanges(e,s.uri,o,a)};if(typeof n=="number"){const s=new ce;this._registrations.set(n,s),r.onDidChange=s.event}this._registrations.set(e,this._languageFeaturesService.foldingRangeProvider.register(t,r))}$emitFoldingRangeEvent(e,t){const n=this._registrations.get(e);n instanceof ce&&n.fire(t)}$registerSelectionRangeProvider(e,t){this._registrations.set(e,this._languageFeaturesService.selectionRangeProvider.register(t,{provideSelectionRanges:(n,r,s)=>this._proxy.$provideSelectionRanges(e,n.uri,r,s)}))}$registerCallHierarchyProvider(e,t){this._registrations.set(e,ES.register(t,{prepareCallHierarchy:async(n,r,s)=>{const o=await this._proxy.$prepareCallHierarchy(e,n.uri,r,s);if(!(!o||o.length===0))return{dispose:()=>{for(const a of o)this._proxy.$releaseCallHierarchy(e,a._sessionId)},roots:o.map(Oe._reviveCallHierarchyItemDto)}},provideOutgoingCalls:async(n,r)=>{const s=await this._proxy.$provideCallHierarchyOutgoingCalls(e,n._sessionId,n._itemId,r);return s&&(s.forEach(o=>{o.to=Oe._reviveCallHierarchyItemDto(o.to)}),s)},provideIncomingCalls:async(n,r)=>{const s=await this._proxy.$provideCallHierarchyIncomingCalls(e,n._sessionId,n._itemId,r);return s&&(s.forEach(o=>{o.from=Oe._reviveCallHierarchyItemDto(o.from)}),s)}}))}static _reviveRegExp(e){return new RegExp(e.pattern,e.flags)}static _reviveIndentationRule(e){return{decreaseIndentPattern:Oe._reviveRegExp(e.decreaseIndentPattern),increaseIndentPattern:Oe._reviveRegExp(e.increaseIndentPattern),indentNextLinePattern:e.indentNextLinePattern?Oe._reviveRegExp(e.indentNextLinePattern):void 0,unIndentedLinePattern:e.unIndentedLinePattern?Oe._reviveRegExp(e.unIndentedLinePattern):void 0}}static _reviveOnEnterRule(e){return{beforeText:Oe._reviveRegExp(e.beforeText),afterText:e.afterText?Oe._reviveRegExp(e.afterText):void 0,previousLineText:e.previousLineText?Oe._reviveRegExp(e.previousLineText):void 0,action:e.action}}static _reviveOnEnterRules(e){return e.map(Oe._reviveOnEnterRule)}$setLanguageConfiguration(e,t,n){const r={comments:n.comments,brackets:n.brackets,wordPattern:n.wordPattern?Oe._reviveRegExp(n.wordPattern):void 0,indentationRules:n.indentationRules?Oe._reviveIndentationRule(n.indentationRules):void 0,onEnterRules:n.onEnterRules?Oe._reviveOnEnterRules(n.onEnterRules):void 0,autoClosingPairs:void 0,surroundingPairs:void 0,__electricCharacterSupport:void 0};n.__characterPairSupport&&(r.autoClosingPairs=n.__characterPairSupport.autoClosingPairs),n.__electricCharacterSupport&&n.__electricCharacterSupport.docComment&&(r.__electricCharacterSupport={docComment:{open:n.__electricCharacterSupport.docComment.open,close:n.__electricCharacterSupport.docComment.close}}),this._languageService.isRegisteredLanguageId(t)&&this._registrations.set(e,this._languageConfigurationService.register(t,r,100))}$registerTypeHierarchyProvider(e,t){this._registrations.set(e,TS.register(t,{prepareTypeHierarchy:async(n,r,s)=>{const o=await this._proxy.$prepareTypeHierarchy(e,n.uri,r,s);if(!!o)return{dispose:()=>{for(const a of o)this._proxy.$releaseTypeHierarchy(e,a._sessionId)},roots:o.map(Oe._reviveTypeHierarchyItemDto)}},provideSupertypes:async(n,r)=>{const s=await this._proxy.$provideTypeHierarchySupertypes(e,n._sessionId,n._itemId,r);return s&&s.map(Oe._reviveTypeHierarchyItemDto)},provideSubtypes:async(n,r)=>{const s=await this._proxy.$provideTypeHierarchySubtypes(e,n._sessionId,n._itemId,r);return s&&s.map(Oe._reviveTypeHierarchyItemDto)}}))}$registerDocumentOnDropEditProvider(e,t){const n=new PS(e,this._proxy);this._documentOnDropEditProviders.set(e,n),this._registrations.set(e,ol(this._languageFeaturesService.documentOnDropEditProvider.register(t,n),sl(()=>this._documentOnDropEditProviders.delete(e))))}async $resolveDocumentOnDropFileData(e,t,n){const r=this._documentOnDropEditProviders.get(e);if(!r)throw new Error("Could not find provider");return r.resolveDocumentOnDropFileData(t,n)}};yf=Oe=B([dn(_e.MainThreadLanguageFeatures),G(1,Xc),G(2,Mv),G(3,Av)],yf);class kS{constructor(e,t,n,r){this.handle=e,this._proxy=t,this.dataTransfers=new C_,this.pasteMimeTypes=r,n&&(this.prepareDocumentPaste=async(s,o,a,c)=>{const u=await oi.toDataTransferDTO(a);if(c.isCancellationRequested)return;const l=await this._proxy.$prepareDocumentPaste(e,s.uri,o,u,c);if(!l)return;const g=new Rw;return l.items.forEach(([h,d])=>{g.replace(h,Iw(d.asString))}),g})}async provideDocumentPasteEdits(e,t,n,r){const s=this.dataTransfers.add(n);try{const o=await oi.toDataTransferDTO(n),a=await this._proxy.$providePasteEdits(this.handle,s.id,e.uri,t,o,r);return a?{insertText:a.insertText,additionalEdit:a.additionalEdit?is(a.additionalEdit):void 0}:void 0}finally{s.dispose()}}resolveFileData(e,t){return this.dataTransfers.resolveDropFileData(e,t)}}class PS{constructor(e,t){this.handle=e,this._proxy=t,this.dataTransfers=new C_}async provideDocumentOnDropEdits(e,t,n,r){const s=this.dataTransfers.add(n);try{const o=await oi.toDataTransferDTO(n),a=await this._proxy.$provideDocumentOnDropEdits(this.handle,s.id,e.uri,t,o,r);return a?{insertText:a.insertText,additionalEdit:is(a.additionalEdit)}:void 0}finally{s.dispose()}}resolveDocumentOnDropFileData(e,t){return this.dataTransfers.resolveDropFileData(e,t)}}class RS{constructor(e,t,n,r){this._proxy=e,this._handle=t,this._legend=n,this.onDidChange=r}releaseDocumentSemanticTokens(e){e&&this._proxy.$releaseDocumentSemanticTokens(this._handle,parseInt(e,10))}getLegend(){return this._legend}async provideDocumentSemanticTokens(e,t,n){const r=t?parseInt(t,10):0,s=await this._proxy.$provideDocumentSemanticTokens(this._handle,e.uri,r,n);if(!s||n.isCancellationRequested)return null;const o=w_(s);return o.type==="full"?{resultId:String(o.id),data:o.data}:{resultId:String(o.id),edits:o.deltas}}}class IS{constructor(e,t,n){this._proxy=e,this._handle=t,this._legend=n}getLegend(){return this._legend}async provideDocumentRangeSemanticTokens(e,t,n){const r=await this._proxy.$provideDocumentRangeSemanticTokens(this._handle,e.uri,t,n);if(!r||n.isCancellationRequested)return null;const s=w_(r);if(s.type==="full")return{resultId:String(s.id),data:s.data};throw new Error("Unexpected")}}function qs(i,e){if(e){const t=e.split(".");let n=i;for(let r=0;n&&r<t.length;r++)n=n[t[r]];return n}}function xS(i){return i instanceof x}function FS(i){return i&&i.uri instanceof x&&i.languageId&&typeof i.languageId=="string"}function MS(i){return i&&!i.uri&&i.languageId&&typeof i.languageId=="string"}function AS(i){return i&&i.uri instanceof x&&(!i.name||typeof i.name=="string")&&(!i.index||typeof i.index=="number")}function xm(i){if(xS(i))return{resource:i};if(FS(i))return{resource:i.uri,overrideIdentifier:i.languageId};if(MS(i))return{overrideIdentifier:i.languageId};if(AS(i))return{resource:i.uri};if(i===null)return{resource:null}}class LS{constructor(e,t,n,r){this._onDidChangeConfiguration=new ce,this._proxy=e,this._logService=r,this._extHostWorkspace=t,this._configuration=za.parse(n),this._configurationScopes=this._toMap(n.configurationScopes)}get onDidChangeConfiguration(){return this._onDidChangeConfiguration&&this._onDidChangeConfiguration.event}$acceptConfigurationChanged(e,t){const n={data:this._configuration.toData(),workspace:this._extHostWorkspace.workspace};this._configuration=za.parse(e),this._configurationScopes=this._toMap(e.configurationScopes),this._onDidChangeConfiguration.fire(this._toConfigurationChangeEvent(t,n))}getConfiguration(e,t,n){const r=xm(t)||{},s=this._toReadonlyValue(e?qs(this._configuration.getValue(void 0,r,this._extHostWorkspace.workspace),e):this._configuration.getValue(void 0,r,this._extHostWorkspace.workspace));e&&this._validateConfigurationAccess(e,r,n?.identifier);function o(c){if(c==null)return null;if(typeof c=="boolean")return c?2:5;switch(c){case Yr.Global:return 2;case Yr.Workspace:return 5;case Yr.WorkspaceFolder:return 6}}const a={has(c){return typeof qs(s,c)<"u"},get:(c,u)=>{this._validateConfigurationAccess(e?`${e}.${c}`:c,r,n?.identifier);let l=qs(s,c);if(typeof l>"u")l=u;else{let g;const h=(d,p)=>{let _;const b=()=>{g=g||Un(s),_=_||qs(g,p)};return us(d)?new Proxy(d,{get:(k,y)=>{if(typeof y=="string"&&y.toLowerCase()==="tojson")return b(),()=>_;if(g)return _=_||qs(g,p),_[y];const E=k[y];return typeof y=="string"?h(E,`${p}.${y}`):E},set:(k,y,E)=>(b(),_&&(_[y]=E),!0),deleteProperty:(k,y)=>(b(),_&&delete _[y],!0),defineProperty:(k,y,E)=>(b(),_&&Object.defineProperty(_,y,E),!0)}):d};l=h(l,c)}return l},update:(c,u,l,g)=>{c=e?`${e}.${c}`:c;const h=o(l);return u!==void 0?this._proxy.$updateConfigurationOption(h,c,u,r,g):this._proxy.$removeConfigurationOption(h,c,r,g)},inspect:c=>{c=e?`${e}.${c}`:c;const u=Un(this._configuration.inspect(c,r,this._extHostWorkspace.workspace));if(u)return{key:c,defaultValue:u.policy?.value??u.default?.value,globalValue:u.user?.value??u.application?.value,workspaceValue:u.workspace?.value,workspaceFolderValue:u.workspaceFolder?.value,defaultLanguageValue:u.default?.override,globalLanguageValue:u.user?.override??u.application?.override,workspaceLanguageValue:u.workspace?.override,workspaceFolderLanguageValue:u.workspaceFolder?.override,languageIds:u.overrideIdentifiers}}};return typeof s=="object"&&Qo(a,s,!1),Object.freeze(a)}_toReadonlyValue(e){const t=n=>us(n)?new Proxy(n,{get:(r,s)=>t(r[s]),set:(r,s,o)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(s)}' of object`)},deleteProperty:(r,s)=>{throw new Error(`TypeError: Cannot delete read only property '${String(s)}' of object`)},defineProperty:(r,s)=>{throw new Error(`TypeError: Cannot define property '${String(s)}' for a readonly object`)},setPrototypeOf:r=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):n;return t(e)}_validateConfigurationAccess(e,t,n){const r=Bw.test(e)?4:this._configurationScopes.get(e),s=n?`[${n.value}] `:"";if(r===4){typeof t?.resource>"u"&&this._logService.warn(`${s}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(r===3){t?.resource&&this._logService.warn(`${s}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}_toConfigurationChangeEvent(e,t){const n=new gv(e,t,this._configuration,this._extHostWorkspace.workspace);return Object.freeze({affectsConfiguration:(r,s)=>n.affectsConfiguration(r,xm(s))})}_toMap(e){return e.reduce((t,n)=>(t.set(n[0],n[1]),t),new Map)}}let wf=class{constructor(e,t,n,r){this._workspaceContextService=t,this.configurationService=n,this._environmentService=r;const s=e.getProxy(tt.ExtHostConfiguration);s.$initializeConfiguration(this._getConfigurationData()),this._configurationListener=n.onDidChangeConfiguration(o=>{s.$acceptConfigurationChanged(this._getConfigurationData(),o.change)})}_getConfigurationData(){const e={...this.configurationService.getConfigurationData(),configurationScopes:[]};return(!this._environmentService.isBuilt||this._environmentService.isExtensionDevelopment)&&(e.configurationScopes=u0()),e}dispose(){this._configurationListener.dispose()}$updateConfigurationOption(e,t,n,r,s){return r={resource:r?.resource?x.revive(r.resource):void 0,overrideIdentifier:r?.overrideIdentifier},this.writeConfiguration(e,t,n,r,s)}$removeConfigurationOption(e,t,n,r){return n={resource:n?.resource?x.revive(n.resource):void 0,overrideIdentifier:n?.overrideIdentifier},this.writeConfiguration(e,t,void 0,n,r)}writeConfiguration(e,t,n,r,s){e=e??this.deriveConfigurationTarget(t,r);const o=this.configurationService.inspect(t,r);switch(e){case 8:return this._updateValue(t,n,e,o?.memory?.override,r,s);case 6:return this._updateValue(t,n,e,o?.workspaceFolder?.override,r,s);case 5:return this._updateValue(t,n,e,o?.workspace?.override,r,s);case 4:return this._updateValue(t,n,e,o?.userRemote?.override,r,s);default:return this._updateValue(t,n,e,o?.userLocal?.override,r,s)}}_updateValue(e,t,n,r,s,o){return s=o===!0?s:o===!1?{resource:s.resource}:s.overrideIdentifier&&r!==void 0?s:{resource:s.resource},this.configurationService.updateValue(e,t,s,n,!0)}deriveConfigurationTarget(e,t){if(t.resource&&this._workspaceContextService.getWorkbenchState()===3){const n=gi.as(Tg.Configuration).getConfigurationProperties();if(n[e]&&(n[e].scope===4||n[e].scope===5))return 6}return 5}};wf=B([dn(_e.MainThreadConfiguration),G(1,Lv),G(2,Ov),G(3,Ds)],wf);const ye={identifier:new Aa("monaco"),isBuiltin:!0,isUserBuiltin:!0,isUnderDevelopment:!1,extensionLocation:x.from({scheme:"extension",path:"/"}),name:"monaco",publisher:"microsoft",version:"1.0.0",engines:{vscode:"1.69.0"},targetPlatform:"web"};class OS{constructor(){this._onMessage=new z0,this.onMessage=this._onMessage.event}send(e){this._onMessage.fire(e)}}class $S extends nf{constructor(){super(...arguments),this.$showMessage=(e,t,n,r)=>{const s={...n,source:void 0};return super.$showMessage(e,t,s,r)}}}let bf=class{constructor(e,t,n){this._proxy=e.getProxy(_e.MainThreadConfiguration),this._extHostWorkspace=t,this._logService=n,this._actual=null}getConfigProvider(){return this._actual}$initializeConfiguration(e){this._actual=new LS(this._proxy,this._extHostWorkspace,e,this._logService)}$acceptConfigurationChanged(e,t){this.getConfigProvider().$acceptConfigurationChanged(e,t)}};bf=B([G(0,Sr),G(1,tS),G(2,pi)],bf);function NS(){const i=Fe.get(Qc),e=Fe.get(Ev),t=Fe.get(Tv),n=Fe.get(ta),r=Fe.get(qi),s=Fe.get(Xc),o=Fe.get(kv),a=Fe.get(Dv),c=Fe.get(Zo),u=Fe.get(Rv),l=Fe.get(Lg),g=Fe.get(sa),h=Fe.get(Es),d=Fe.get(au),p=Fe.get(iu),_=Fe.get(ra),b=Fe.get(nu),k=Fe.get(ru),y=Fe.get(su),E=Fe.get(ou),M=Fe.get(Fg),q=Fe.get(Iv),J=Fe.get(Hg),Q=Fe.get(xv),I=Fe.get(qg),j=Fe.get(Fv),Y=Fe.get(Wg),Z=Fe.get(Mv),m=Fe.get(Av),W=Fe.get(Ov),fe=Fe.get(Lv),L=Fe.get(Ug),ee=Fe.get(Pv),ge=new OS,ie=new No(ge),ut=new $0,be={_serviceBrand:void 0,remoteAuthority:null,extensionHostKind:1,getProxy:function(D){return ie.getProxy(D)},set:function(D,U){return ie.set(D,U)},assertRegistered:function(D){ie.assertRegistered(D)},drain:function(){return ie.drain()},dispose(){ie.dispose()}},Ut={_serviceBrand:void 0,version:"1.0.0",parentPid:0,get environment(){return T()},allExtensions:[ue.get().extension??ye],myExtensions:[(ue.get().extension??ye).identifier],consoleForward:{includeStack:!1,logNative:!1},get telemetryInfo(){return T()},logLevel:xw.Trace,get logsLocation(){return T()},get logFile(){return T()},autoStart:!1,remote:{isRemote:!1,authority:void 0,connectionData:null},uiKind:Lo.Web},Ue=new lv(new Jb),yt=new Qh(be,Ue),Vt=new tf(be,Ue),Qt=new _S(null);ie.set(_e.MainThreadWindow,new mf(be,Y,j)),ie.set(_e.MainThreadCommands,new Jh(be,i,L));const pt=ie.set(tt.ExtHostCommands,new Kh(be,Ue)),Te=ie.set(tt.ExtHostDocumentsAndEditors,new of(be,Ue)),wt=ie.set(tt.ExtHostDocuments,new J0(be,Te)),je=ie.set(tt.ExtHostLanguages,new vS(be,wt,pt.converter,Qt)),dt=ie.set(tt.ExtHostWindow,new Lc(be)),Xt=ie.set(tt.ExtHostQuickOpen,Q0(be,null,pt)),jt=ie.set(tt.ExtHostDiagnostics,new $o(be,Ue,ut)),ve=ie.set(tt.ExtHostProgress,new iS(ie.getProxy(_e.MainThreadProgress))),Ot=ie.set(tt.ExtHostDocumentContentProviders,new cu(be,Te,Ue)),ln=ie.set(tt.ExtHostEditors,new dS(be,Te)),nn=new yS(be),$t=ie.set(tt.ExtHostLanguageFeatures,new kt(ie,Qt,wt,pt,jt,Ue,yt)),le=ie.set(tt.ExtHostWorkspace,new Zh(be,Ut,ut,Ue)),C=ie.set(tt.ExtHostConfiguration,new bf(be,le,Ue));ie.set(tt.ExtHostTelemetry,new wS),ie.set(_e.MainThreadMessageService,new $S(be,e,i,t)),ie.set(_e.MainThreadDiagnostics,new lf(be,u,h)),ie.set(_e.MainThreadQuickOpen,new ef(be,a)),ie.set(_e.MainThreadTelemetry,new Ac(be,q,k,J)),ie.set(_e.MainThreadProgress,new rf(be,M,i)),ie.set(_e.MainThreadDocumentContentProviders,new sf(be,n,s,r,o)),ie.set(_e.MainThreadBulkEdits,new gf(be,Q,Ue)),ie.set(_e.MainThreadLanguages,new pf(be,s,r,n,I)),ie.set(_e.MainThreadClipboard,new vf(be,l)),ie.set(_e.MainThreadLanguageFeatures,new yf(be,s,Z,m)),ie.set(_e.MainThreadConfiguration,new wf(be,fe,W,k)),new df(be,r,p,g,c,_,n,b,d,k,y,h,l,E,ee);const P=new ff(be,Te);return{extHostLogService:Ue,extHostApiDeprecationService:yt,extHostMessageService:Vt,extHostDocumentsAndEditors:Te,extHostBulkEdits:P,extHostDocuments:wt,extHostDocumentContentProviders:Ot,extHostQuickOpen:Xt,extHostProgress:ve,extHostDiagnostics:jt,extHostEditors:ln,extHostCommands:pt,extHostLanguages:je,extHostWindow:dt,extHostClipboard:nn,extHostLanguageFeatures:$t,extHostWorkspace:le,extHostConfiguration:C}}let Dd;function ne(){return Dd==null&&(Dd=NS()),Dd}var Cf;(function(i){i[i.Initial=1]="Initial",i[i.Dynamic=2]="Dynamic"})(Cf||(Cf={}));const HS={createDiagnosticCollection(i){const{extHostDiagnostics:e}=ne(),t=ue.get().extension??ye;return e.createDiagnosticCollection(t.identifier,i)},get onDidChangeDiagnostics(){const{extHostDiagnostics:i}=ne();return i.onDidChangeDiagnostics},getDiagnostics:i=>{const{extHostDiagnostics:e}=ne();return e.getDiagnostics(i)},getLanguages(){const{extHostLanguages:i}=ne();return i.getLanguages()},setTextDocumentLanguage(i,e){const{extHostLanguages:t}=ne();return t.changeLanguage(i.uri,e)},match(i,e){return tb(Wh.from(i),e.uri,e.languageId,!0,void 0,void 0)},registerCodeActionsProvider(i,e,t){const{extHostLanguageFeatures:n}=ne(),r=ue.get().extension??ye;return n.registerCodeActionProvider(r,i,e,t)},registerCodeLensProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerCodeLensProvider(n,i,e)},registerDefinitionProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerDefinitionProvider(n,i,e)},registerDeclarationProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerDeclarationProvider(n,i,e)},registerImplementationProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerImplementationProvider(n,i,e)},registerTypeDefinitionProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerTypeDefinitionProvider(n,i,e)},registerHoverProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerHoverProvider(n,i,e,n.identifier)},registerEvaluatableExpressionProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerEvaluatableExpressionProvider(n,i,e,n.identifier)},registerInlineValuesProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerInlineValuesProvider(n,i,e,n.identifier)},registerDocumentHighlightProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerDocumentHighlightProvider(n,i,e)},registerLinkedEditingRangeProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerLinkedEditingRangeProvider(n,i,e)},registerReferenceProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerReferenceProvider(n,i,e)},registerRenameProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerRenameProvider(n,i,e)},registerDocumentSymbolProvider(i,e,t){const{extHostLanguageFeatures:n}=ne(),r=ue.get().extension??ye;return n.registerDocumentSymbolProvider(r,i,e,t)},registerWorkspaceSymbolProvider(i){const{extHostLanguageFeatures:e}=ne(),t=ue.get().extension??ye;return e.registerWorkspaceSymbolProvider(t,i)},registerDocumentFormattingEditProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerDocumentFormattingEditProvider(n,i,e)},registerDocumentRangeFormattingEditProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerDocumentRangeFormattingEditProvider(n,i,e)},registerOnTypeFormattingEditProvider(i,e,t,...n){const{extHostLanguageFeatures:r}=ne(),s=ue.get().extension??ye;return r.registerOnTypeFormattingEditProvider(s,i,e,[t].concat(n))},registerDocumentSemanticTokensProvider(i,e,t){const{extHostLanguageFeatures:n}=ne(),r=ue.get().extension??ye;return n.registerDocumentSemanticTokensProvider(r,i,e,t)},registerDocumentRangeSemanticTokensProvider(i,e,t){const{extHostLanguageFeatures:n}=ne(),r=ue.get().extension??ye;return n.registerDocumentRangeSemanticTokensProvider(r,i,e,t)},registerSignatureHelpProvider(i,e,t,...n){const{extHostLanguageFeatures:r}=ne(),s=ue.get().extension??ye;return typeof t=="object"?r.registerSignatureHelpProvider(s,i,e,t):r.registerSignatureHelpProvider(s,i,e,typeof t>"u"?[]:[t,...n])},registerCompletionItemProvider(i,e,...t){const{extHostLanguageFeatures:n}=ne(),r=ue.get().extension??ye;return n.registerCompletionItemProvider(r,i,e,t)},registerDocumentLinkProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerDocumentLinkProvider(n,i,e)},registerColorProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerColorProvider(n,i,e)},registerFoldingRangeProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerFoldingRangeProvider(n,i,e)},registerSelectionRangeProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerSelectionRangeProvider(n,i,e)},registerCallHierarchyProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerCallHierarchyProvider(n,i,e)},registerTypeHierarchyProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerTypeHierarchyProvider(n,i,e)},setLanguageConfiguration:(i,e)=>{const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.setLanguageConfiguration(n,i,e)},registerInlayHintsProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerInlayHintsProvider(n,i,e)},createLanguageStatusItem(i,e){const{extHostLanguages:t}=ne(),n=ue.get().extension??ye;return t.createLanguageStatusItem(n,i,e)},registerInlineCompletionItemProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerInlineCompletionsProvider(n,i,e)},registerDocumentDropEditProvider(i,e){const{extHostLanguageFeatures:t}=ne(),n=ue.get().extension??ye;return t.registerDocumentOnDropEditProvider(n,i,e)}},qS={registerCommand(i,e,t){const{extHostCommands:n}=ne();return n.registerCommand(!0,i,e,t,void 0,ue.get().extension??ye)},registerTextEditorCommand(i,e,t){const{extHostCommands:n,extHostEditors:r,extHostLogService:s}=ne();return n.registerCommand(!0,i,(...o)=>{const a=r.getActiveTextEditor();if(a==null){s.warn("Cannot execute "+i+" because there is no active text editor.");return}return a.edit(c=>{e.apply(t,[a,c,...o])}).then(c=>{c||s.warn("Edits from command "+i+" were not applied.")},c=>{s.warn("An error occurred while running command "+i,c)})},void 0,void 0,ue.get().extension??ye)},executeCommand(i,...e){const{extHostCommands:t}=ne();return t.executeCommand(i,...e)},getCommands(i=!1){const{extHostCommands:e}=ne();return e.getCommands(i)}};class WS{constructor(){this.stat=T}isWritableFileSystem(){return!1}readDirectory(){return Promise.resolve([])}createDirectory(){return Promise.resolve()}readFile(){return Promise.resolve(new Uint8Array(0))}writeFile(){return Promise.resolve()}delete(){return Promise.resolve()}rename(){return Promise.resolve()}copy(){return Promise.resolve()}}const S_={fs:new WS,workspaceFile:void 0,createFileSystemWatcher(i,e,t,n){const{workspace:r}=ue.get();return r?.createFileSystemWatcher!=null?r.createFileSystemWatcher(i,e,t,n):{ignoreCreateEvents:e??!1,ignoreChangeEvents:t??!1,ignoreDeleteEvents:n??!1,onDidCreate:N.None,onDidChange:N.None,onDidDelete:N.None,dispose:()=>{}}},applyEdit:async i=>{const{extHostBulkEdits:e}=ne(),t=ue.get().extension??ye;return e.applyWorkspaceEdit(i,t)},getConfiguration:(i,e)=>{const{extHostConfiguration:t}=ne();return t.getConfigProvider().getConfiguration(i,e,ue.get().extension??ye)},onDidChangeConfiguration(i,e,t){const{extHostConfiguration:n}=ne();return n.getConfigProvider().onDidChangeConfiguration(i,e,t)},get rootPath(){const{workspace:i}=ue.get();return i?.rootPath},get workspaceFolders(){const{workspace:i}=ue.get();if(i==null)return;if("workspaceFolders"in i)return i.workspaceFolders;const e=i.rootPath;if(e==null)return;const t=x.file(e);return[{uri:t,index:0,name:t.toString()}]},getWorkspaceFolder(i){return this.workspaceFolders?.find(e=>i.path.startsWith(e.uri.path))},get onDidChangeWorkspaceFolders(){const{workspace:i}=ue.get();return i?.onDidChangeWorkspaceFolders??N.None},get textDocuments(){const{extHostDocuments:i}=ne();return Array.from(i.getAllDocumentData().map(e=>e.document))},get onDidOpenTextDocument(){const{extHostDocuments:i}=ne();return i.onDidAddDocument},get onDidCloseTextDocument(){const{extHostDocuments:i}=ne();return i.onDidRemoveDocument},get onDidChangeTextDocument(){const{extHostDocuments:i}=ne();return i.onDidChangeDocument},get onWillSaveTextDocument(){const{workspace:i}=ue.get();return i?.onWillSaveTextDocument??N.None},get onDidSaveTextDocument(){const{workspace:i}=ue.get();return i?.onDidSaveTextDocument??N.None},get onWillCreateFiles(){return N.None},get onDidCreateFiles(){return N.None},get onWillDeleteFiles(){return N.None},get onDidDeleteFiles(){return N.None},get onWillRenameFiles(){return N.None},get onDidRenameFiles(){return N.None},get onDidGrantWorkspaceTrust(){return N.None},asRelativePath:T,updateWorkspaceFolders(i,e,...t){const{workspace:n}=ue.get();return n?.updateWorkspaceFolders!=null?n.updateWorkspaceFolders(i,e,...t):!1},findFiles:T,saveAll:T,openTextDocument(i){const{extHostDocuments:e}=ne();let t;const n=i;if(typeof i=="string")t=Promise.resolve(x.file(i));else if(x.isUri(i))t=Promise.resolve(i);else if(n==null||typeof n=="object")t=e.createDocumentData(n);else throw new Error("illegal argument - uriOrFileNameOrOptions");return t.then(r=>e.ensureDocumentData(r).then(s=>s.document))},registerTextDocumentContentProvider(i,e){const{extHostDocumentContentProviders:t}=ne();return t.registerTextDocumentContentProvider(i,e)},registerTaskProvider:T,registerFileSystemProvider:T,openNotebookDocument:T,registerNotebookSerializer:T,notebookDocuments:[],onDidOpenNotebookDocument:T,onDidCloseNotebookDocument:T,isTrusted:!0,name:void 0,onDidChangeNotebookDocument:T,onDidSaveNotebookDocument:T};class D_{constructor(e){this.uri=e}}function Sf(i,e){return{label:i.uri.fsPath,group:e,get isActive(){return i.isAttachedToEditor()},isDirty:!1,isPinned:!1,isPreview:!1,input:new D_(i.uri)}}const no={isActive:!0,activeTab:void 0,viewColumn:hs.One,get tabs(){return Fe.get(qi).getModels().map(e=>Sf(e,no))}},US={showInformationMessage(i,...e){const{extHostMessageService:t}=ne();return t.showMessage(ue.get().extension??ye,Lt.Info,i,e[0],e.slice(1))},showWarningMessage(i,...e){const{extHostMessageService:t}=ne();return t.showMessage(ue.get().extension??ye,Lt.Warning,i,e[0],e.slice(1))},showErrorMessage(i,...e){const{extHostMessageService:t}=ne();return t.showMessage(ue.get().extension??ye,Lt.Error,i,e[0],e.slice(1))},createOutputChannel(i){const{window:e}=ue.get();return e?.createOutputChannel?.call(e,i)??{name:i,append:()=>{},appendLine:()=>{},clear:T,show:()=>{},hide:T,replace:T,dispose:()=>{}}},withScmProgress(i){const{extHostProgress:e}=ne();return e.withProgress(ue.get().extension??ye,{location:lr.SourceControl},()=>i({report(){}}))},withProgress(i,e){const{extHostProgress:t}=ne();return t.withProgress(ue.get().extension??ye,i,e)},showTextDocument:async(i,e,t)=>{const{extHostEditors:n}=ne(),r=await(x.isUri(i)?Promise.resolve(S_.openTextDocument(i)):Promise.resolve(i));return n.showTextDocument(r,e,t)},createQuickPick(){const{extHostQuickOpen:i}=ne();return i.createQuickPick(ue.get().extension??ye)},showQuickPick(i,e,t){const{extHostQuickOpen:n}=ne();return n.showQuickPick(i,e,t)},createInputBox(){const{extHostQuickOpen:i}=ne(),e=ue.get().extension??ye;return i.createInputBox(e)},showInputBox(i,e){const{extHostQuickOpen:t}=ne();return t.showInput(i,e)},createTextEditorDecorationType:T,showWorkspaceFolderPick:T,showOpenDialog:T,showSaveDialog:T,createWebviewPanel:T,setStatusBarMessage:T,createStatusBarItem:T,createTerminal:T,registerTreeDataProvider:T,createTreeView:T,registerWebviewPanelSerializer:T,get activeTextEditor(){const{extHostEditors:i}=ne();return i.getActiveTextEditor()},get visibleTextEditors(){const{extHostEditors:i}=ne();return i.getVisibleTextEditors()},onDidChangeActiveTextEditor(i,e,t){const{extHostEditors:n}=ne();return n.onDidChangeActiveTextEditor(i,e,t)},onDidChangeVisibleTextEditors(i,e,t){const{extHostEditors:n}=ne();return n.onDidChangeVisibleTextEditors(i,e,t)},onDidChangeTextEditorSelection(i,e,t){const{extHostEditors:n}=ne();return n.onDidChangeTextEditorSelection(i,e,t)},onDidChangeTextEditorVisibleRanges(i,e,t){const{extHostEditors:n}=ne();return n.onDidChangeTextEditorVisibleRanges(i,e,t)},onDidChangeTextEditorOptions(i,e,t){const{extHostEditors:n}=ne();return n.onDidChangeTextEditorOptions(i,e,t)},onDidChangeTextEditorViewColumn(i,e,t){const{extHostEditors:n}=ne();return n.onDidChangeTextEditorViewColumn(i,e,t)},get terminals(){return T()},get activeTerminal(){return T()},onDidChangeActiveTerminal:N.None,onDidOpenTerminal:N.None,onDidCloseTerminal:N.None,get state(){return T()},onDidChangeWindowState:N.None,registerUriHandler:T,registerWebviewViewProvider:T,registerCustomEditorProvider:T,registerTerminalLinkProvider:T,get activeColorTheme(){return T()},onDidChangeActiveColorTheme:N.None,registerFileDecorationProvider:T,registerTerminalProfileProvider:T,onDidChangeTerminalState:N.None,tabGroups:{get all(){return[no]},activeTabGroup:no,onDidChangeTabGroups:N.None,onDidChangeTabs(i){const e=Fe.get(qi),t=new st;return t.add(e.onModelAdded(n=>{i({opened:[Sf(n,no)],closed:[],changed:[]})})),t.add(e.onModelRemoved(n=>{i({opened:[],closed:[Sf(n,no)],changed:[]})})),t},close:T},showNotebookDocument:T,visibleNotebookEditors:[],onDidChangeVisibleNotebookEditors:N.None,activeNotebookEditor:void 0,onDidChangeActiveNotebookEditor:N.None,onDidChangeNotebookEditorSelection:N.None,onDidChangeNotebookEditorVisibleRanges:N.None},jS={appName:"Monaco",appRoot:"",language:window.navigator.language??"en-US",get uriScheme(){return T()},get clipboard(){const{extHostClipboard:i}=ne();return i.value},get machineId(){return T()},get sessionId(){return T()},remoteName:void 0,shell:"",uiKind:Lo.Web,async asExternalUri(i){const{extHostWindow:e}=ne();try{return await e.asExternalUri(i,{allowTunneling:!1})}catch(t){if(Rp(i,Rt.http)||Rp(i,Rt.https))return i;throw t}},openExternal:async(i,e)=>{const{extHostWindow:t}=ne();return t.openUri(i,{allowTunneling:!1,allowContributedOpeners:e?.allowContributedOpeners})},appHost:"web",isNewAppInstall:!1,isTelemetryEnabled:!1,onDidChangeTelemetryEnabled:N.None},Tn=void 0,zS={version:"1.69.0",tasks:Tn,notebooks:Tn,scm:Tn,debug:Tn,extensions:Tn,comments:Tn,authentication:Tn,tests:Tn,env:jS,commands:qS,window:US,workspace:S_,languages:HS,Breakpoint:xo,CallHierarchyIncomingCall:p0,CallHierarchyItem:r_,CallHierarchyOutgoingCall:m0,CancellationError:Jc,CancellationTokenSource:tu,CodeAction:Pl,CodeActionKind:ht,CodeActionTriggerKind:To,CodeLens:Rl,Color:Ro,ColorInformation:Ul,ColorPresentation:sc,ColorThemeKind:Tn,CommentMode:ch,CommentThreadCollapsibleState:ah,CompletionItem:$l,CompletionItemKind:de,CompletionItemTag:ko,CompletionList:nc,CompletionTriggerKind:Qr,ConfigurationTarget:Yr,CustomExecution:o_,DebugAdapterExecutable:Zl,DebugAdapterInlineImplementation:nh,DebugAdapterNamedPipeServer:th,DebugAdapterServer:eh,DebugConfigurationProviderTriggerKind:Cf,DebugConsoleMode:uh,DecorationRangeBehavior:nr,Diagnostic:Xa,DiagnosticRelatedInformation:Co,DiagnosticSeverity:At,DiagnosticTag:tr,Disposable:vn,DocumentHighlight:Za,DocumentHighlightKind:So,DocumentLink:rc,DocumentSymbol:Eo,EndOfLine:Fn,EnvironmentVariableMutatorType:Tl,EvaluatableExpression:uc,InlineValueText:lc,InlineValueVariableLookup:hc,InlineValueEvaluatableExpression:fc,EventEmitter:ce,ExtensionKind:dh,ExtensionMode:gh,FileChangeType:rh,FileDecoration:b0,FileSystemError:sh,FileType:fl,FilePermission:gl,FoldingRange:oh,FoldingRangeKind:es,FunctionBreakpoint:Yl,Hover:Ya,IndentAction:Zw,Location:li,MarkdownString:ls,OverviewRulerLane:eb,ParameterInformation:Il,Position:ke,ProcessExecution:oc,ProgressLocation:lr,QuickInputButtons:gs,Range:Ee,RelativePattern:Zr,Selection:ds,SelectionRange:tc,SemanticTokens:gc,SemanticTokensBuilder:Bg,SemanticTokensEdit:a_,SemanticTokensEdits:qa,SemanticTokensLegend:y0,ShellExecution:ac,ShellQuoting:Vl,SignatureHelp:Fl,SignatureHelpTriggerKind:Ml,SignatureInformation:xl,SnippetString:Qa,SourceBreakpoint:Xl,StatusBarAlignment:ql,SymbolInformation:ec,SymbolKind:Be,SymbolTag:Do,Task:wr,TaskGroup:yr,TaskPanelKind:Bl,TaskRevealKind:zl,TaskScope:Io,TerminalLink:v0,TerminalLocation:jl,TerminalProfile:_0,TextDocumentSaveReason:Wl,TextEdit:wo,TextEditorCursorStyle:$v,TextEditorLineNumbersStyle:ei,TextEditorRevealType:ic,TextEditorSelectionChangeKind:fs,TextDocumentChangeReason:Po,ThemeColor:Ql,ThemeIcon:hi,TreeItem:Kl,TreeItemCollapsibleState:Xr,TypeHierarchyItem:c_,UIKind:Lo,Uri:x,ViewColumn:hs,WorkspaceEdit:bo,InlayHint:Ol,InlayHintLabelPart:Ll,InlayHintKind:Al,NotebookRange:Mn,NotebookCellKind:ir,NotebookCellData:Fi,NotebookData:C0,NotebookCellStatusBarAlignment:lh,NotebookCellOutput:Ao,NotebookCellOutputItem:pn,NotebookCellStatusBarItem:S0,NotebookControllerAffinity:fh,LinkedEditingRanges:D0,TestRunRequest:mh,TestMessage:vh,TestTag:_h,TestRunProfileKind:ph,DataTransfer:Tn,DataTransferItem:Tn,LanguageStatusSeverity:Jr,QuickPickItemKind:Mo,TabInputText:D_,TabInputTextDiff:E0,TabInputCustom:T0,TabInputNotebook:P0,TabInputNotebookDiff:R0,TabInputWebview:k0,TabInputTerminal:I0,InputBoxValidationSeverity:ts,InlineCompletionList:Hl,InlineCompletionTriggerKind:Fo,InlineCompletionItem:Nl,DocumentDropEdit:Jl,NotebookEditorRevealType:hh},{version:BS,tasks:VS,notebooks:KS,scm:GS,debug:JS,extensions:QS,comments:XS,authentication:YS,tests:ZS,env:eD,commands:tD,window:nD,workspace:iD,languages:rD,Breakpoint:sD,CallHierarchyIncomingCall:oD,CallHierarchyItem:aD,CallHierarchyOutgoingCall:cD,CancellationError:uD,CancellationTokenSource:dD,CodeAction:lD,CodeActionKind:hD,CodeActionTriggerKind:fD,CodeLens:gD,Color:pD,ColorInformation:mD,ColorPresentation:vD,ColorThemeKind:_D,CommentMode:yD,CommentThreadCollapsibleState:wD,CompletionItem:bD,CompletionItemKind:CD,CompletionItemTag:SD,CompletionList:DD,CompletionTriggerKind:ED,ConfigurationTarget:TD,CustomExecution:kD,DebugAdapterExecutable:PD,DebugAdapterInlineImplementation:RD,DebugAdapterNamedPipeServer:ID,DebugAdapterServer:xD,DebugConfigurationProviderTriggerKind:FD,DebugConsoleMode:MD,DecorationRangeBehavior:AD,Diagnostic:LD,DiagnosticRelatedInformation:OD,DiagnosticSeverity:$D,DiagnosticTag:ND,Disposable:HD,DocumentHighlight:qD,DocumentHighlightKind:WD,DocumentLink:UD,DocumentSymbol:jD,EndOfLine:zD,EnvironmentVariableMutatorType:BD,EvaluatableExpression:VD,InlineValueText:KD,InlineValueVariableLookup:GD,InlineValueEvaluatableExpression:JD,EventEmitter:QD,ExtensionKind:XD,ExtensionMode:YD,FileChangeType:ZD,FileDecoration:eE,FileSystemError:tE,FileType:nE,FilePermission:iE,FoldingRange:rE,FoldingRangeKind:sE,FunctionBreakpoint:oE,Hover:aE,IndentAction:cE,Location:uE,MarkdownString:dE,OverviewRulerLane:lE,ParameterInformation:hE,Position:fE,ProcessExecution:gE,ProgressLocation:pE,QuickInputButtons:mE,Range:vE,RelativePattern:_E,Selection:yE,SelectionRange:wE,SemanticTokens:bE,SemanticTokensBuilder:CE,SemanticTokensEdit:SE,SemanticTokensEdits:DE,SemanticTokensLegend:EE,ShellExecution:TE,ShellQuoting:kE,SignatureHelp:PE,SignatureHelpTriggerKind:RE,SignatureInformation:IE,SnippetString:xE,SourceBreakpoint:FE,StatusBarAlignment:ME,SymbolInformation:AE,SymbolKind:LE,SymbolTag:OE,Task:$E,TaskGroup:NE,TaskPanelKind:HE,TaskRevealKind:qE,TaskScope:WE,TerminalLink:UE,TerminalLocation:jE,TerminalProfile:zE,TextDocumentSaveReason:BE,TextEdit:VE,TextEditorCursorStyle:KE,TextEditorLineNumbersStyle:GE,TextEditorRevealType:JE,TextEditorSelectionChangeKind:QE,TextDocumentChangeReason:XE,ThemeColor:YE,ThemeIcon:ZE,TreeItem:eT,TreeItemCollapsibleState:tT,TypeHierarchyItem:nT,UIKind:iT,Uri:rT,ViewColumn:sT,WorkspaceEdit:oT,InlayHint:aT,InlayHintLabelPart:cT,InlayHintKind:uT,NotebookRange:dT,NotebookCellKind:lT,NotebookCellData:hT,NotebookData:fT,NotebookCellStatusBarAlignment:gT,NotebookCellOutput:pT,NotebookCellOutputItem:mT,NotebookCellStatusBarItem:vT,NotebookControllerAffinity:_T,LinkedEditingRanges:yT,TestRunRequest:wT,TestMessage:bT,TestTag:CT,TestRunProfileKind:ST,DataTransfer:DT,DataTransferItem:ET,LanguageStatusSeverity:TT,QuickPickItemKind:kT,TabInputText:PT,TabInputTextDiff:RT,TabInputCustom:IT,TabInputNotebook:xT,TabInputNotebookDiff:FT,TabInputWebview:MT,TabInputTerminal:AT,InputBoxValidationSeverity:LT,InlineCompletionList:OT,InlineCompletionTriggerKind:$T,InlineCompletionItem:NT,DocumentDropEdit:HT,NotebookEditorRevealType:qT}=zS,WT=Object.freeze(Object.defineProperty({__proto__:null,Breakpoint:sD,CallHierarchyIncomingCall:oD,CallHierarchyItem:aD,CallHierarchyOutgoingCall:cD,CancellationError:uD,CancellationTokenSource:dD,CodeAction:lD,CodeActionKind:hD,CodeActionTriggerKind:fD,CodeLens:gD,Color:pD,ColorInformation:mD,ColorPresentation:vD,ColorThemeKind:_D,CommentMode:yD,CommentThreadCollapsibleState:wD,CompletionItem:bD,CompletionItemKind:CD,CompletionItemTag:SD,CompletionList:DD,CompletionTriggerKind:ED,ConfigurationTarget:TD,CustomExecution:kD,DataTransfer:DT,DataTransferItem:ET,DebugAdapterExecutable:PD,DebugAdapterInlineImplementation:RD,DebugAdapterNamedPipeServer:ID,DebugAdapterServer:xD,DebugConfigurationProviderTriggerKind:FD,DebugConsoleMode:MD,DecorationRangeBehavior:AD,Diagnostic:LD,DiagnosticRelatedInformation:OD,DiagnosticSeverity:$D,DiagnosticTag:ND,Disposable:HD,DocumentDropEdit:HT,DocumentHighlight:qD,DocumentHighlightKind:WD,DocumentLink:UD,DocumentSymbol:jD,EndOfLine:zD,EnvironmentVariableMutatorType:BD,EvaluatableExpression:VD,EventEmitter:QD,ExtensionKind:XD,ExtensionMode:YD,FileChangeType:ZD,FileDecoration:eE,FilePermission:iE,FileSystemError:tE,FileType:nE,FoldingRange:rE,FoldingRangeKind:sE,FunctionBreakpoint:oE,Hover:aE,IndentAction:cE,InlayHint:aT,InlayHintKind:uT,InlayHintLabelPart:cT,InlineCompletionItem:NT,InlineCompletionList:OT,InlineCompletionTriggerKind:$T,InlineValueEvaluatableExpression:JD,InlineValueText:KD,InlineValueVariableLookup:GD,InputBoxValidationSeverity:LT,LanguageStatusSeverity:TT,LinkedEditingRanges:yT,Location:uE,MarkdownString:dE,NotebookCellData:hT,NotebookCellKind:lT,NotebookCellOutput:pT,NotebookCellOutputItem:mT,NotebookCellStatusBarAlignment:gT,NotebookCellStatusBarItem:vT,NotebookControllerAffinity:_T,NotebookData:fT,NotebookEditorRevealType:qT,NotebookRange:dT,OverviewRulerLane:lE,ParameterInformation:hE,Position:fE,ProcessExecution:gE,ProgressLocation:pE,QuickInputButtons:mE,QuickPickItemKind:kT,Range:vE,RelativePattern:_E,Selection:yE,SelectionRange:wE,SemanticTokens:bE,SemanticTokensBuilder:CE,SemanticTokensEdit:SE,SemanticTokensEdits:DE,SemanticTokensLegend:EE,ShellExecution:TE,ShellQuoting:kE,SignatureHelp:PE,SignatureHelpTriggerKind:RE,SignatureInformation:IE,SnippetString:xE,SourceBreakpoint:FE,StatusBarAlignment:ME,SymbolInformation:AE,SymbolKind:LE,SymbolTag:OE,TabInputCustom:IT,TabInputNotebook:xT,TabInputNotebookDiff:FT,TabInputTerminal:AT,TabInputText:PT,TabInputTextDiff:RT,TabInputWebview:MT,Task:$E,TaskGroup:NE,TaskPanelKind:HE,TaskRevealKind:qE,TaskScope:WE,TerminalLink:UE,TerminalLocation:jE,TerminalProfile:zE,TestMessage:bT,TestRunProfileKind:ST,TestRunRequest:wT,TestTag:CT,TextDocumentChangeReason:XE,TextDocumentSaveReason:BE,TextEdit:VE,TextEditorCursorStyle:KE,TextEditorLineNumbersStyle:GE,TextEditorRevealType:JE,TextEditorSelectionChangeKind:QE,ThemeColor:YE,ThemeIcon:ZE,TreeItem:eT,TreeItemCollapsibleState:tT,TypeHierarchyItem:nT,UIKind:iT,Uri:rT,ViewColumn:sT,WorkspaceEdit:oT,authentication:YS,commands:tD,comments:XS,debug:JS,env:eD,extensions:QS,languages:rD,notebooks:KS,scm:GS,tasks:VS,tests:ZS,version:BS,window:nD,workspace:iD},Symbol.toStringTag,{value:"Module"})),we=Uv(WT);var Se={},Df={exports:{}},mi={},Jg={},Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});let Ef;function Tf(){if(Ef===void 0)throw new Error("No runtime abstraction layer installed");return Ef}(function(i){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");Ef=t}i.install=e})(Tf||(Tf={}));Gn.default=Tf;var Qg={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Disposable=void 0,function(e){function t(n){return{dispose:n}}e.create=t}(i.Disposable||(i.Disposable={}))})(Qg);var Dr={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Emitter=i.Event=void 0;const e=Gn;(function(r){const s={dispose(){}};r.None=function(){return s}})(i.Event||(i.Event={}));class t{add(s,o=null,a){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(s),this._contexts.push(o),Array.isArray(a)&&a.push({dispose:()=>this.remove(s,o)})}remove(s,o=null){if(!this._callbacks)return;let a=!1;for(let c=0,u=this._callbacks.length;c<u;c++)if(this._callbacks[c]===s)if(this._contexts[c]===o){this._callbacks.splice(c,1),this._contexts.splice(c,1);return}else a=!0;if(a)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...s){if(!this._callbacks)return[];const o=[],a=this._callbacks.slice(0),c=this._contexts.slice(0);for(let u=0,l=a.length;u<l;u++)try{o.push(a[u].apply(c[u],s))}catch(g){(0,e.default)().console.error(g)}return o}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class n{constructor(s){this._options=s}get event(){return this._event||(this._event=(s,o,a)=>{this._callbacks||(this._callbacks=new t),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(s,o);const c={dispose:()=>{!this._callbacks||(this._callbacks.remove(s,o),c.dispose=n._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(a)&&a.push(c),c}),this._event}fire(s){this._callbacks&&this._callbacks.invoke.call(this._callbacks,s)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}i.Emitter=n,n._noop=function(){}})(Dr);var lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.AbstractMessageBuffer=void 0;const UT=13,jT=10,zT=`\r
`;class BT{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,t=0,n=0,r=0;e:for(;t<this._chunks.length;){const c=this._chunks[t];for(n=0;n<c.length;){switch(c[n]){case UT:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case jT:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}r+=c.byteLength,t++}if(e!==4)return;const s=this._read(r+n),o=new Map,a=this.toString(s,"ascii").split(zT);if(a.length<2)return o;for(let c=0;c<a.length-2;c++){const u=a[c],l=u.indexOf(":");if(l===-1)throw new Error("Message header must separate key and value using :");const g=u.substr(0,l),h=u.substr(l+1).trim();o.set(g,h)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){const s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}const t=this.allocNative(e);let n=0,r=0;for(;e>0;){const s=this._chunks[r];if(s.byteLength>e){const o=s.slice(0,e);t.set(o,n),n+=e,this._chunks[r]=s.slice(e),this._totalLength-=e,e-=e}else t.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return t}}lu.AbstractMessageBuffer=BT;Object.defineProperty(Jg,"__esModule",{value:!0});const E_=Gn,os=Qg,VT=Dr,KT=lu;class hu extends KT.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return hu.emptyBuffer}fromString(e,t){return new TextEncoder().encode(e)}toString(e,t){return t==="ascii"?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e:e.slice(0,t)}allocNative(e){return new Uint8Array(e)}}hu.emptyBuffer=new Uint8Array(0);class GT{constructor(e){this.socket=e,this._onData=new VT.Emitter,this._messageListener=t=>{t.data.arrayBuffer().then(r=>{this._onData.fire(new Uint8Array(r))},()=>{(0,E_.default)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),os.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),os.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),os.Disposable.create(()=>this.socket.removeEventListener("end",e))}onData(e){return this._onData.event(e)}}class JT{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),os.Disposable.create(()=>this.socket.removeEventListener("close",e))}onError(e){return this.socket.addEventListener("error",e),os.Disposable.create(()=>this.socket.removeEventListener("error",e))}onEnd(e){return this.socket.addEventListener("end",e),os.Disposable.create(()=>this.socket.removeEventListener("end",e))}write(e,t){if(typeof e=="string"){if(t!==void 0&&t!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}}const QT=new TextEncoder,T_=Object.freeze({messageBuffer:Object.freeze({create:i=>new hu(i)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(i,e)=>{if(e.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${e.charset}`);return Promise.resolve(QT.encode(JSON.stringify(i,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(i,e)=>{if(!(i instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(e.charset).decode(i)))}})}),stream:Object.freeze({asReadableStream:i=>new GT(i),asWritableStream:i=>new JT(i)}),console,timer:Object.freeze({setTimeout(i,e,...t){const n=setTimeout(i,e,...t);return{dispose:()=>clearTimeout(n)}},setImmediate(i,...e){const t=setTimeout(i,0,...e);return{dispose:()=>clearTimeout(t)}},setInterval(i,e,...t){const n=setInterval(i,e,...t);return{dispose:()=>clearInterval(n)}}})});function kf(){return T_}(function(i){function e(){E_.default.install(T_)}i.install=e})(kf||(kf={}));Jg.default=kf;var Pf={},Xg={},Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.stringArray=Et.array=Et.func=Et.error=Et.number=Et.string=Et.boolean=void 0;function XT(i){return i===!0||i===!1}Et.boolean=XT;function k_(i){return typeof i=="string"||i instanceof String}Et.string=k_;function YT(i){return typeof i=="number"||i instanceof Number}Et.number=YT;function ZT(i){return i instanceof Error}Et.error=ZT;function ek(i){return typeof i=="function"}Et.func=ek;function P_(i){return Array.isArray(i)}Et.array=P_;function tk(i){return P_(i)&&i.every(e=>k_(e))}Et.stringArray=tk;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Message=i.NotificationType9=i.NotificationType8=i.NotificationType7=i.NotificationType6=i.NotificationType5=i.NotificationType4=i.NotificationType3=i.NotificationType2=i.NotificationType1=i.NotificationType0=i.NotificationType=i.RequestType9=i.RequestType8=i.RequestType7=i.RequestType6=i.RequestType5=i.RequestType4=i.RequestType3=i.RequestType2=i.RequestType1=i.RequestType=i.RequestType0=i.AbstractMessageSignature=i.ParameterStructures=i.ResponseError=i.ErrorCodes=void 0;const e=Et;var t;(function(m){m.ParseError=-32700,m.InvalidRequest=-32600,m.MethodNotFound=-32601,m.InvalidParams=-32602,m.InternalError=-32603,m.jsonrpcReservedErrorRangeStart=-32099,m.serverErrorStart=-32099,m.MessageWriteError=-32099,m.MessageReadError=-32098,m.PendingResponseRejected=-32097,m.ConnectionInactive=-32096,m.ServerNotInitialized=-32002,m.UnknownErrorCode=-32001,m.jsonrpcReservedErrorRangeEnd=-32e3,m.serverErrorEnd=-32e3})(t=i.ErrorCodes||(i.ErrorCodes={}));class n extends Error{constructor(W,fe,L){super(fe),this.code=e.number(W)?W:t.UnknownErrorCode,this.data=L,Object.setPrototypeOf(this,n.prototype)}toJson(){const W={code:this.code,message:this.message};return this.data!==void 0&&(W.data=this.data),W}}i.ResponseError=n;class r{constructor(W){this.kind=W}static is(W){return W===r.auto||W===r.byName||W===r.byPosition}toString(){return this.kind}}i.ParameterStructures=r,r.auto=new r("auto"),r.byPosition=new r("byPosition"),r.byName=new r("byName");class s{constructor(W,fe){this.method=W,this.numberOfParams=fe}get parameterStructures(){return r.auto}}i.AbstractMessageSignature=s;class o extends s{constructor(W){super(W,0)}}i.RequestType0=o;class a extends s{constructor(W,fe=r.auto){super(W,1),this._parameterStructures=fe}get parameterStructures(){return this._parameterStructures}}i.RequestType=a;class c extends s{constructor(W,fe=r.auto){super(W,1),this._parameterStructures=fe}get parameterStructures(){return this._parameterStructures}}i.RequestType1=c;class u extends s{constructor(W){super(W,2)}}i.RequestType2=u;class l extends s{constructor(W){super(W,3)}}i.RequestType3=l;class g extends s{constructor(W){super(W,4)}}i.RequestType4=g;class h extends s{constructor(W){super(W,5)}}i.RequestType5=h;class d extends s{constructor(W){super(W,6)}}i.RequestType6=d;class p extends s{constructor(W){super(W,7)}}i.RequestType7=p;class _ extends s{constructor(W){super(W,8)}}i.RequestType8=_;class b extends s{constructor(W){super(W,9)}}i.RequestType9=b;class k extends s{constructor(W,fe=r.auto){super(W,1),this._parameterStructures=fe}get parameterStructures(){return this._parameterStructures}}i.NotificationType=k;class y extends s{constructor(W){super(W,0)}}i.NotificationType0=y;class E extends s{constructor(W,fe=r.auto){super(W,1),this._parameterStructures=fe}get parameterStructures(){return this._parameterStructures}}i.NotificationType1=E;class M extends s{constructor(W){super(W,2)}}i.NotificationType2=M;class q extends s{constructor(W){super(W,3)}}i.NotificationType3=q;class J extends s{constructor(W){super(W,4)}}i.NotificationType4=J;class Q extends s{constructor(W){super(W,5)}}i.NotificationType5=Q;class I extends s{constructor(W){super(W,6)}}i.NotificationType6=I;class j extends s{constructor(W){super(W,7)}}i.NotificationType7=j;class Y extends s{constructor(W){super(W,8)}}i.NotificationType8=Y;class Z extends s{constructor(W){super(W,9)}}i.NotificationType9=Z,function(m){function W(ee){const ge=ee;return ge&&e.string(ge.method)&&(e.string(ge.id)||e.number(ge.id))}m.isRequest=W;function fe(ee){const ge=ee;return ge&&e.string(ge.method)&&ee.id===void 0}m.isNotification=fe;function L(ee){const ge=ee;return ge&&(ge.result!==void 0||!!ge.error)&&(e.string(ge.id)||e.number(ge.id)||ge.id===null)}m.isResponse=L}(i.Message||(i.Message={}))})(Xg);var Yg={};(function(i){var e;Object.defineProperty(i,"__esModule",{value:!0}),i.LRUCache=i.LinkedMap=i.Touch=void 0;var t;(function(s){s.None=0,s.First=1,s.AsOld=s.First,s.Last=2,s.AsNew=s.Last})(t=i.Touch||(i.Touch={}));class n{constructor(){this[e]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(o){return this._map.has(o)}get(o,a=t.None){const c=this._map.get(o);if(!!c)return a!==t.None&&this.touch(c,a),c.value}set(o,a,c=t.None){let u=this._map.get(o);if(u)u.value=a,c!==t.None&&this.touch(u,c);else{switch(u={key:o,value:a,next:void 0,previous:void 0},c){case t.None:this.addItemLast(u);break;case t.First:this.addItemFirst(u);break;case t.Last:this.addItemLast(u);break;default:this.addItemLast(u);break}this._map.set(o,u),this._size++}return this}delete(o){return!!this.remove(o)}remove(o){const a=this._map.get(o);if(!!a)return this._map.delete(o),this.removeItem(a),this._size--,a.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const o=this._head;return this._map.delete(o.key),this.removeItem(o),this._size--,o.value}forEach(o,a){const c=this._state;let u=this._head;for(;u;){if(a?o.bind(a)(u.value,u.key,this):o(u.value,u.key,this),this._state!==c)throw new Error("LinkedMap got modified during iteration.");u=u.next}}keys(){const o=this._state;let a=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==o)throw new Error("LinkedMap got modified during iteration.");if(a){const u={value:a.key,done:!1};return a=a.next,u}else return{value:void 0,done:!0}}};return c}values(){const o=this._state;let a=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==o)throw new Error("LinkedMap got modified during iteration.");if(a){const u={value:a.value,done:!1};return a=a.next,u}else return{value:void 0,done:!0}}};return c}entries(){const o=this._state;let a=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==o)throw new Error("LinkedMap got modified during iteration.");if(a){const u={value:[a.key,a.value],done:!1};return a=a.next,u}else return{value:void 0,done:!0}}};return c}[(e=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(o){if(o>=this.size)return;if(o===0){this.clear();return}let a=this._head,c=this.size;for(;a&&c>o;)this._map.delete(a.key),a=a.next,c--;this._head=a,this._size=c,a&&(a.previous=void 0),this._state++}addItemFirst(o){if(!this._head&&!this._tail)this._tail=o;else if(this._head)o.next=this._head,this._head.previous=o;else throw new Error("Invalid list");this._head=o,this._state++}addItemLast(o){if(!this._head&&!this._tail)this._head=o;else if(this._tail)o.previous=this._tail,this._tail.next=o;else throw new Error("Invalid list");this._tail=o,this._state++}removeItem(o){if(o===this._head&&o===this._tail)this._head=void 0,this._tail=void 0;else if(o===this._head){if(!o.next)throw new Error("Invalid list");o.next.previous=void 0,this._head=o.next}else if(o===this._tail){if(!o.previous)throw new Error("Invalid list");o.previous.next=void 0,this._tail=o.previous}else{const a=o.next,c=o.previous;if(!a||!c)throw new Error("Invalid list");a.previous=c,c.next=a}o.next=void 0,o.previous=void 0,this._state++}touch(o,a){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(a!==t.First&&a!==t.Last)){if(a===t.First){if(o===this._head)return;const c=o.next,u=o.previous;o===this._tail?(u.next=void 0,this._tail=u):(c.previous=u,u.next=c),o.previous=void 0,o.next=this._head,this._head.previous=o,this._head=o,this._state++}else if(a===t.Last){if(o===this._tail)return;const c=o.next,u=o.previous;o===this._head?(c.previous=void 0,this._head=c):(c.previous=u,u.next=c),o.next=void 0,o.previous=this._tail,this._tail.next=o,this._tail=o,this._state++}}}toJSON(){const o=[];return this.forEach((a,c)=>{o.push([c,a])}),o}fromJSON(o){this.clear();for(const[a,c]of o)this.set(a,c)}}i.LinkedMap=n;class r extends n{constructor(o,a=1){super(),this._limit=o,this._ratio=Math.min(Math.max(0,a),1)}get limit(){return this._limit}set limit(o){this._limit=o,this.checkTrim()}get ratio(){return this._ratio}set ratio(o){this._ratio=Math.min(Math.max(0,o),1),this.checkTrim()}get(o,a=t.AsNew){return super.get(o,a)}peek(o){return super.get(o,t.None)}set(o,a){return super.set(o,a,t.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}i.LRUCache=r})(Yg);var Zg={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.CancellationTokenSource=i.CancellationToken=void 0;const e=Gn,t=Et,n=Dr;var r;(function(c){c.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:n.Event.None}),c.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:n.Event.None});function u(l){const g=l;return g&&(g===c.None||g===c.Cancelled||t.boolean(g.isCancellationRequested)&&!!g.onCancellationRequested)}c.is=u})(r=i.CancellationToken||(i.CancellationToken={}));const s=Object.freeze(function(c,u){const l=(0,e.default)().timer.setTimeout(c.bind(u),0);return{dispose(){l.dispose()}}});class o{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?s:(this._emitter||(this._emitter=new n.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class a{get token(){return this._token||(this._token=new o),this._token}cancel(){this._token?this._token.cancel():this._token=r.Cancelled}dispose(){this._token?this._token instanceof o&&this._token.dispose():this._token=r.None}}i.CancellationTokenSource=a})(Zg);var R_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ReadableStreamMessageReader=i.AbstractMessageReader=i.MessageReader=void 0;const e=Gn,t=Et,n=Dr;(function(a){function c(u){let l=u;return l&&t.func(l.listen)&&t.func(l.dispose)&&t.func(l.onError)&&t.func(l.onClose)&&t.func(l.onPartialMessage)}a.is=c})(i.MessageReader||(i.MessageReader={}));class r{constructor(){this.errorEmitter=new n.Emitter,this.closeEmitter=new n.Emitter,this.partialMessageEmitter=new n.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(c){this.errorEmitter.fire(this.asError(c))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(c){this.partialMessageEmitter.fire(c)}asError(c){return c instanceof Error?c:new Error(`Reader received error. Reason: ${t.string(c.message)?c.message:"unknown"}`)}}i.AbstractMessageReader=r;var s;(function(a){function c(u){let l,g;const h=new Map;let d;const p=new Map;if(u===void 0||typeof u=="string")l=u??"utf-8";else{if(l=u.charset??"utf-8",u.contentDecoder!==void 0&&(g=u.contentDecoder,h.set(g.name,g)),u.contentDecoders!==void 0)for(const _ of u.contentDecoders)h.set(_.name,_);if(u.contentTypeDecoder!==void 0&&(d=u.contentTypeDecoder,p.set(d.name,d)),u.contentTypeDecoders!==void 0)for(const _ of u.contentTypeDecoders)p.set(_.name,_)}return d===void 0&&(d=(0,e.default)().applicationJson.decoder,p.set(d.name,d)),{charset:l,contentDecoder:g,contentDecoders:h,contentTypeDecoder:d,contentTypeDecoders:p}}a.fromOptions=c})(s||(s={}));class o extends r{constructor(c,u){super(),this.readable=c,this.options=s.fromOptions(u),this.buffer=(0,e.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(c){this._partialMessageTimeout=c}get partialMessageTimeout(){return this._partialMessageTimeout}listen(c){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=c;const u=this.readable.onData(l=>{this.onData(l)});return this.readable.onError(l=>this.fireError(l)),this.readable.onClose(()=>this.fireClose()),u}onData(c){for(this.buffer.append(c);;){if(this.nextMessageLength===-1){const g=this.buffer.tryReadHeaders();if(!g)return;const h=g.get("Content-Length");if(!h)throw new Error("Header must provide a Content-Length property.");const d=parseInt(h);if(isNaN(d))throw new Error("Content-Length value must be a number.");this.nextMessageLength=d}const u=this.buffer.tryReadBody(this.nextMessageLength);if(u===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let l;this.options.contentDecoder!==void 0?l=this.options.contentDecoder.decode(u):l=Promise.resolve(u),l.then(g=>{this.options.contentTypeDecoder.decode(g,this.options).then(h=>{this.callback(h)},h=>{this.fireError(h)})},g=>{this.fireError(g)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,e.default)().timer.setTimeout((c,u)=>{this.partialMessageTimer=void 0,c===this.messageToken&&(this.firePartialMessage({messageToken:c,waitingTime:u}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}i.ReadableStreamMessageReader=o})(R_);var I_={},fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.Semaphore=void 0;const nk=Gn;class ik{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,nk.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}fu.Semaphore=ik;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.WriteableStreamMessageWriter=i.AbstractMessageWriter=i.MessageWriter=void 0;const e=Gn,t=Et,n=fu,r=Dr,s="Content-Length: ",o=`\r
`;(function(l){function g(h){let d=h;return d&&t.func(d.dispose)&&t.func(d.onClose)&&t.func(d.onError)&&t.func(d.write)}l.is=g})(i.MessageWriter||(i.MessageWriter={}));class a{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(g,h,d){this.errorEmitter.fire([this.asError(g),h,d])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(g){return g instanceof Error?g:new Error(`Writer received error. Reason: ${t.string(g.message)?g.message:"unknown"}`)}}i.AbstractMessageWriter=a;var c;(function(l){function g(h){return h===void 0||typeof h=="string"?{charset:h??"utf-8",contentTypeEncoder:(0,e.default)().applicationJson.encoder}:{charset:h.charset??"utf-8",contentEncoder:h.contentEncoder,contentTypeEncoder:h.contentTypeEncoder??(0,e.default)().applicationJson.encoder}}l.fromOptions=g})(c||(c={}));class u extends a{constructor(g,h){super(),this.writable=g,this.options=c.fromOptions(h),this.errorCount=0,this.writeSemaphore=new n.Semaphore(1),this.writable.onError(d=>this.fireError(d)),this.writable.onClose(()=>this.fireClose())}async write(g){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(g,this.options).then(d=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(d):d).then(d=>{const p=[];return p.push(s,d.byteLength.toString(),o),p.push(o),this.doWrite(g,p,d)},d=>{throw this.fireError(d),d}))}async doWrite(g,h,d){try{return await this.writable.write(h.join(""),"ascii"),this.writable.write(d)}catch(p){return this.handleError(p,g),Promise.reject(p)}}handleError(g,h){this.errorCount++,this.fireError(g,h,this.errorCount)}end(){this.writable.end()}}i.WriteableStreamMessageWriter=u})(I_);var x_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.createMessageConnection=i.ConnectionOptions=i.CancellationStrategy=i.CancellationSenderStrategy=i.CancellationReceiverStrategy=i.ConnectionStrategy=i.ConnectionError=i.ConnectionErrors=i.LogTraceNotification=i.SetTraceNotification=i.TraceFormat=i.TraceValues=i.Trace=i.NullLogger=i.ProgressType=i.ProgressToken=void 0;const e=Gn,t=Et,n=Xg,r=Yg,s=Dr,o=Zg;var a;(function(I){I.type=new n.NotificationType("$/cancelRequest")})(a||(a={}));var c;(function(I){function j(Y){return typeof Y=="string"||typeof Y=="number"}I.is=j})(c=i.ProgressToken||(i.ProgressToken={}));var u;(function(I){I.type=new n.NotificationType("$/progress")})(u||(u={}));class l{constructor(){}}i.ProgressType=l;var g;(function(I){function j(Y){return t.func(Y)}I.is=j})(g||(g={})),i.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var h;(function(I){I[I.Off=0]="Off",I[I.Messages=1]="Messages",I[I.Compact=2]="Compact",I[I.Verbose=3]="Verbose"})(h=i.Trace||(i.Trace={})),function(I){I.Off="off",I.Messages="messages",I.Compact="compact",I.Verbose="verbose"}(i.TraceValues||(i.TraceValues={})),function(I){function j(Z){if(!t.string(Z))return I.Off;switch(Z=Z.toLowerCase(),Z){case"off":return I.Off;case"messages":return I.Messages;case"compact":return I.Compact;case"verbose":return I.Verbose;default:return I.Off}}I.fromString=j;function Y(Z){switch(Z){case I.Off:return"off";case I.Messages:return"messages";case I.Compact:return"compact";case I.Verbose:return"verbose";default:return"off"}}I.toString=Y}(h=i.Trace||(i.Trace={}));var d;(function(I){I.Text="text",I.JSON="json"})(d=i.TraceFormat||(i.TraceFormat={})),function(I){function j(Y){return t.string(Y)?(Y=Y.toLowerCase(),Y==="json"?I.JSON:I.Text):I.Text}I.fromString=j}(d=i.TraceFormat||(i.TraceFormat={}));var p;(function(I){I.type=new n.NotificationType("$/setTrace")})(p=i.SetTraceNotification||(i.SetTraceNotification={}));var _;(function(I){I.type=new n.NotificationType("$/logTrace")})(_=i.LogTraceNotification||(i.LogTraceNotification={}));var b;(function(I){I[I.Closed=1]="Closed",I[I.Disposed=2]="Disposed",I[I.AlreadyListening=3]="AlreadyListening"})(b=i.ConnectionErrors||(i.ConnectionErrors={}));class k extends Error{constructor(j,Y){super(Y),this.code=j,Object.setPrototypeOf(this,k.prototype)}}i.ConnectionError=k;var y;(function(I){function j(Y){const Z=Y;return Z&&t.func(Z.cancelUndispatched)}I.is=j})(y=i.ConnectionStrategy||(i.ConnectionStrategy={}));var E;(function(I){I.Message=Object.freeze({createCancellationTokenSource(Y){return new o.CancellationTokenSource}});function j(Y){const Z=Y;return Z&&t.func(Z.createCancellationTokenSource)}I.is=j})(E=i.CancellationReceiverStrategy||(i.CancellationReceiverStrategy={}));var M;(function(I){I.Message=Object.freeze({sendCancellation(Y,Z){return Y.sendNotification(a.type,{id:Z})},cleanup(Y){}});function j(Y){const Z=Y;return Z&&t.func(Z.sendCancellation)&&t.func(Z.cleanup)}I.is=j})(M=i.CancellationSenderStrategy||(i.CancellationSenderStrategy={}));var q;(function(I){I.Message=Object.freeze({receiver:E.Message,sender:M.Message});function j(Y){const Z=Y;return Z&&E.is(Z.receiver)&&M.is(Z.sender)}I.is=j})(q=i.CancellationStrategy||(i.CancellationStrategy={})),function(I){function j(Y){const Z=Y;return Z&&(q.is(Z.cancellationStrategy)||y.is(Z.connectionStrategy))}I.is=j}(i.ConnectionOptions||(i.ConnectionOptions={}));var J;(function(I){I[I.New=1]="New",I[I.Listening=2]="Listening",I[I.Closed=3]="Closed",I[I.Disposed=4]="Disposed"})(J||(J={}));function Q(I,j,Y,Z){const m=Y!==void 0?Y:i.NullLogger;let W=0,fe=0,L=0;const ee="2.0";let ge;const ie=new Map;let ut;const be=new Map,Ut=new Map;let Ue,yt=new r.LinkedMap,Vt=new Map,Qt=new Set,pt=new Map,Te=h.Off,wt=d.Text,je,dt=J.New;const Xt=new s.Emitter,jt=new s.Emitter,ve=new s.Emitter,Ot=new s.Emitter,ln=new s.Emitter,nn=Z&&Z.cancellationStrategy?Z.cancellationStrategy:q.Message;function $t(w){if(w===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+w.toString()}function le(w){return w===null?"res-unknown-"+(++L).toString():"res-"+w.toString()}function C(){return"not-"+(++fe).toString()}function P(w,O){n.Message.isRequest(O)?w.set($t(O.id),O):n.Message.isResponse(O)?w.set(le(O.id),O):w.set(C(),O)}function D(w){}function U(){return dt===J.Listening}function $(){return dt===J.Closed}function V(){return dt===J.Disposed}function pe(){(dt===J.New||dt===J.Listening)&&(dt=J.Closed,jt.fire(void 0))}function Me(w){Xt.fire([w,void 0,void 0])}function Ge(w){Xt.fire(w)}I.onClose(pe),I.onError(Me),j.onClose(pe),j.onError(Ge);function it(){Ue||yt.size===0||(Ue=(0,e.default)().timer.setImmediate(()=>{Ue=void 0,$n()}))}function $n(){if(yt.size===0)return;const w=yt.shift();try{n.Message.isRequest(w)?ks(w):n.Message.isNotification(w)?Tr(w):n.Message.isResponse(w)?Er(w):Ps(w)}finally{it()}}const vi=w=>{try{if(n.Message.isNotification(w)&&w.method===a.type.method){const O=w.params.id,X=$t(O),se=yt.get(X);if(n.Message.isRequest(se)){const Ye=Z?.connectionStrategy,ct=Ye&&Ye.cancelUndispatched?Ye.cancelUndispatched(se,D):void 0;if(ct&&(ct.error!==void 0||ct.result!==void 0)){yt.delete(X),pt.delete(O),ct.id=se.id,Nn(ct,w.method,Date.now()),j.write(ct).catch(()=>m.error("Sending response for canceled message failed."));return}}const Xe=pt.get(O);if(Xe!==void 0){Xe.cancel(),F(w);return}else Qt.add(O)}P(yt,w)}finally{it()}};function ks(w){if(V())return;function O(Le,ot,He){const f={jsonrpc:ee,id:w.id};Le instanceof n.ResponseError?f.error=Le.toJson():f.result=Le===void 0?null:Le,Nn(f,ot,He),j.write(f).catch(()=>m.error("Sending response failed."))}function X(Le,ot,He){const f={jsonrpc:ee,id:w.id,error:Le.toJson()};Nn(f,ot,He),j.write(f).catch(()=>m.error("Sending response failed."))}function se(Le,ot,He){Le===void 0&&(Le=null);const f={jsonrpc:ee,id:w.id,result:Le};Nn(f,ot,He),j.write(f).catch(()=>m.error("Sending response failed."))}v(w);const Xe=ie.get(w.method);let Ye,ct;Xe&&(Ye=Xe.type,ct=Xe.handler);const St=Date.now();if(ct||ge){const Le=w.id??String(Date.now()),ot=nn.receiver.createCancellationTokenSource(Le);w.id!==null&&Qt.has(w.id)&&ot.cancel(),w.id!==null&&pt.set(Le,ot);try{let He;if(ct)if(w.params===void 0){if(Ye!==void 0&&Ye.numberOfParams!==0){X(new n.ResponseError(n.ErrorCodes.InvalidParams,`Request ${w.method} defines ${Ye.numberOfParams} params but received none.`),w.method,St);return}He=ct(ot.token)}else if(Array.isArray(w.params)){if(Ye!==void 0&&Ye.parameterStructures===n.ParameterStructures.byName){X(new n.ResponseError(n.ErrorCodes.InvalidParams,`Request ${w.method} defines parameters by name but received parameters by position`),w.method,St);return}He=ct(...w.params,ot.token)}else{if(Ye!==void 0&&Ye.parameterStructures===n.ParameterStructures.byPosition){X(new n.ResponseError(n.ErrorCodes.InvalidParams,`Request ${w.method} defines parameters by position but received parameters by name`),w.method,St);return}He=ct(w.params,ot.token)}else ge&&(He=ge(w.method,w.params,ot.token));const f=He;He?f.then?f.then(S=>{pt.delete(Le),O(S,w.method,St)},S=>{pt.delete(Le),S instanceof n.ResponseError?X(S,w.method,St):S&&t.string(S.message)?X(new n.ResponseError(n.ErrorCodes.InternalError,`Request ${w.method} failed with message: ${S.message}`),w.method,St):X(new n.ResponseError(n.ErrorCodes.InternalError,`Request ${w.method} failed unexpectedly without providing any details.`),w.method,St)}):(pt.delete(Le),O(He,w.method,St)):(pt.delete(Le),se(He,w.method,St))}catch(He){pt.delete(Le),He instanceof n.ResponseError?O(He,w.method,St):He&&t.string(He.message)?X(new n.ResponseError(n.ErrorCodes.InternalError,`Request ${w.method} failed with message: ${He.message}`),w.method,St):X(new n.ResponseError(n.ErrorCodes.InternalError,`Request ${w.method} failed unexpectedly without providing any details.`),w.method,St)}}else X(new n.ResponseError(n.ErrorCodes.MethodNotFound,`Unhandled method ${w.method}`),w.method,St)}function Er(w){if(!V())if(w.id===null)w.error?m.error(`Received response message without id: Error is: 
${JSON.stringify(w.error,void 0,4)}`):m.error("Received response message without id. No further error information provided.");else{const O=w.id,X=Vt.get(O);if(oe(w,X),X!==void 0){Vt.delete(O);try{if(w.error){const se=w.error;X.reject(new n.ResponseError(se.code,se.message,se.data))}else if(w.result!==void 0)X.resolve(w.result);else throw new Error("Should never happen.")}catch(se){se.message?m.error(`Response handler '${X.method}' failed with message: ${se.message}`):m.error(`Response handler '${X.method}' failed unexpectedly.`)}}}}function Tr(w){if(V())return;let O,X;if(w.method===a.type.method){const se=w.params.id;Qt.delete(se),F(w);return}else{const se=be.get(w.method);se&&(X=se.handler,O=se.type)}if(X||ut)try{if(F(w),X)if(w.params===void 0)O!==void 0&&O.numberOfParams!==0&&O.parameterStructures!==n.ParameterStructures.byName&&m.error(`Notification ${w.method} defines ${O.numberOfParams} params but received none.`),X();else if(Array.isArray(w.params)){const se=w.params;w.method===u.type.method&&se.length===2&&c.is(se[0])?X({token:se[0],value:se[1]}):(O!==void 0&&(O.parameterStructures===n.ParameterStructures.byName&&m.error(`Notification ${w.method} defines parameters by name but received parameters by position`),O.numberOfParams!==w.params.length&&m.error(`Notification ${w.method} defines ${O.numberOfParams} params but received ${se.length} arguments`)),X(...se))}else O!==void 0&&O.parameterStructures===n.ParameterStructures.byPosition&&m.error(`Notification ${w.method} defines parameters by position but received parameters by name`),X(w.params);else ut&&ut(w.method,w.params)}catch(se){se.message?m.error(`Notification handler '${w.method}' failed with message: ${se.message}`):m.error(`Notification handler '${w.method}' failed unexpectedly.`)}else ve.fire(w)}function Ps(w){if(!w){m.error("Received empty message.");return}m.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(w,null,4)}`);const O=w;if(t.string(O.id)||t.number(O.id)){const X=O.id,se=Vt.get(X);se&&se.reject(new Error("The received response has neither a result nor an error property."))}}function rn(w){if(w!=null)switch(Te){case h.Verbose:return JSON.stringify(w,null,4);case h.Compact:return JSON.stringify(w);default:return}}function Rs(w){if(!(Te===h.Off||!je))if(wt===d.Text){let O;(Te===h.Verbose||Te===h.Compact)&&w.params&&(O=`Params: ${rn(w.params)}

`),je.log(`Sending request '${w.method} - (${w.id})'.`,O)}else Ae("send-request",w)}function kr(w){if(!(Te===h.Off||!je))if(wt===d.Text){let O;(Te===h.Verbose||Te===h.Compact)&&(w.params?O=`Params: ${rn(w.params)}

`:O=`No parameters provided.

`),je.log(`Sending notification '${w.method}'.`,O)}else Ae("send-notification",w)}function Nn(w,O,X){if(!(Te===h.Off||!je))if(wt===d.Text){let se;(Te===h.Verbose||Te===h.Compact)&&(w.error&&w.error.data?se=`Error data: ${rn(w.error.data)}

`:w.result?se=`Result: ${rn(w.result)}

`:w.error===void 0&&(se=`No result returned.

`)),je.log(`Sending response '${O} - (${w.id})'. Processing request took ${Date.now()-X}ms`,se)}else Ae("send-response",w)}function v(w){if(!(Te===h.Off||!je))if(wt===d.Text){let O;(Te===h.Verbose||Te===h.Compact)&&w.params&&(O=`Params: ${rn(w.params)}

`),je.log(`Received request '${w.method} - (${w.id})'.`,O)}else Ae("receive-request",w)}function F(w){if(!(Te===h.Off||!je||w.method===_.type.method))if(wt===d.Text){let O;(Te===h.Verbose||Te===h.Compact)&&(w.params?O=`Params: ${rn(w.params)}

`:O=`No parameters provided.

`),je.log(`Received notification '${w.method}'.`,O)}else Ae("receive-notification",w)}function oe(w,O){if(!(Te===h.Off||!je))if(wt===d.Text){let X;if((Te===h.Verbose||Te===h.Compact)&&(w.error&&w.error.data?X=`Error data: ${rn(w.error.data)}

`:w.result?X=`Result: ${rn(w.result)}

`:w.error===void 0&&(X=`No result returned.

`)),O){const se=w.error?` Request failed: ${w.error.message} (${w.error.code}).`:"";je.log(`Received response '${O.method} - (${w.id})' in ${Date.now()-O.timerStart}ms.${se}`,X)}else je.log(`Received response ${w.id} without active response promise.`,X)}else Ae("receive-response",w)}function Ae(w,O){if(!je||Te===h.Off)return;const X={isLSPMessage:!0,type:w,message:O,timestamp:Date.now()};je.log(X)}function xe(){if($())throw new k(b.Closed,"Connection is closed.");if(V())throw new k(b.Disposed,"Connection is disposed.")}function Tt(){if(U())throw new k(b.AlreadyListening,"Connection is already listening")}function Sn(){if(!U())throw new Error("Call listen() first.")}function Dn(w){return w===void 0?null:w}function ua(w){if(w!==null)return w}function Wi(w){return w!=null&&!Array.isArray(w)&&typeof w=="object"}function Is(w,O){switch(w){case n.ParameterStructures.auto:return Wi(O)?ua(O):[Dn(O)];case n.ParameterStructures.byName:if(!Wi(O))throw new Error("Received parameters by name but param is not an object literal.");return ua(O);case n.ParameterStructures.byPosition:return[Dn(O)];default:throw new Error(`Unknown parameter structure ${w.toString()}`)}}function xs(w,O){let X;const se=w.numberOfParams;switch(se){case 0:X=void 0;break;case 1:X=Is(w.parameterStructures,O[0]);break;default:X=[];for(let Xe=0;Xe<O.length&&Xe<se;Xe++)X.push(Dn(O[Xe]));if(O.length<se)for(let Xe=O.length;Xe<se;Xe++)X.push(null);break}return X}const _i={sendNotification:(w,...O)=>{xe();let X,se;if(t.string(w)){X=w;const Ye=O[0];let ct=0,St=n.ParameterStructures.auto;n.ParameterStructures.is(Ye)&&(ct=1,St=Ye);let Le=O.length;const ot=Le-ct;switch(ot){case 0:se=void 0;break;case 1:se=Is(St,O[ct]);break;default:if(St===n.ParameterStructures.byName)throw new Error(`Received ${ot} parameters for 'by Name' notification parameter structure.`);se=O.slice(ct,Le).map(He=>Dn(He));break}}else{const Ye=O;X=w.method,se=xs(w,Ye)}const Xe={jsonrpc:ee,method:X,params:se};return kr(Xe),j.write(Xe).catch(()=>m.error("Sending notification failed."))},onNotification:(w,O)=>{xe();let X;return t.func(w)?ut=w:O&&(t.string(w)?(X=w,be.set(w,{type:void 0,handler:O})):(X=w.method,be.set(w.method,{type:w,handler:O}))),{dispose:()=>{X!==void 0?be.delete(X):ut=void 0}}},onProgress:(w,O,X)=>{if(Ut.has(O))throw new Error(`Progress handler for token ${O} already registered`);return Ut.set(O,X),{dispose:()=>{Ut.delete(O)}}},sendProgress:(w,O,X)=>_i.sendNotification(u.type,{token:O,value:X}),onUnhandledProgress:Ot.event,sendRequest:(w,...O)=>{xe(),Sn();let X,se,Xe;if(t.string(w)){X=w;const Le=O[0],ot=O[O.length-1];let He=0,f=n.ParameterStructures.auto;n.ParameterStructures.is(Le)&&(He=1,f=Le);let S=O.length;o.CancellationToken.is(ot)&&(S=S-1,Xe=ot);const A=S-He;switch(A){case 0:se=void 0;break;case 1:se=Is(f,O[He]);break;default:if(f===n.ParameterStructures.byName)throw new Error(`Received ${A} parameters for 'by Name' request parameter structure.`);se=O.slice(He,S).map(re=>Dn(re));break}}else{const Le=O;X=w.method,se=xs(w,Le);const ot=w.numberOfParams;Xe=o.CancellationToken.is(Le[ot])?Le[ot]:void 0}const Ye=W++;let ct;return Xe&&(ct=Xe.onCancellationRequested(()=>{const Le=nn.sender.sendCancellation(_i,Ye);return Le===void 0?(m.log(`Received no promise from cancellation strategy when cancelling id ${Ye}`),Promise.resolve()):Le.catch(()=>{m.log(`Sending cancellation messages for id ${Ye} failed`)})})),new Promise((Le,ot)=>{const He={jsonrpc:ee,id:Ye,method:X,params:se},f=re=>{Le(re),nn.sender.cleanup(Ye),ct?.dispose()},S=re=>{ot(re),nn.sender.cleanup(Ye),ct?.dispose()};let A={method:X,timerStart:Date.now(),resolve:f,reject:S};Rs(He);try{j.write(He).catch(()=>m.error("Sending request failed."))}catch(re){A.reject(new n.ResponseError(n.ErrorCodes.MessageWriteError,re.message?re.message:"Unknown reason")),A=null}A&&Vt.set(Ye,A)})},onRequest:(w,O)=>{xe();let X=null;return g.is(w)?(X=void 0,ge=w):t.string(w)?(X=null,O!==void 0&&(X=w,ie.set(w,{handler:O,type:void 0}))):O!==void 0&&(X=w.method,ie.set(w.method,{type:w,handler:O})),{dispose:()=>{X!==null&&(X!==void 0?ie.delete(X):ge=void 0)}}},hasPendingResponse:()=>Vt.size>0,trace:async(w,O,X)=>{let se=!1,Xe=d.Text;X!==void 0&&(t.boolean(X)?se=X:(se=X.sendNotification||!1,Xe=X.traceFormat||d.Text)),Te=w,wt=Xe,Te===h.Off?je=void 0:je=O,se&&!$()&&!V()&&await _i.sendNotification(p.type,{value:h.toString(w)})},onError:Xt.event,onClose:jt.event,onUnhandledNotification:ve.event,onDispose:ln.event,end:()=>{j.end()},dispose:()=>{if(V())return;dt=J.Disposed,ln.fire(void 0);const w=new n.ResponseError(n.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const O of Vt.values())O.reject(w);Vt=new Map,pt=new Map,Qt=new Set,yt=new r.LinkedMap,t.func(j.dispose)&&j.dispose(),t.func(I.dispose)&&I.dispose()},listen:()=>{xe(),Tt(),dt=J.Listening,I.listen(vi)},inspect:()=>{(0,e.default)().console.log("inspect")}};return _i.onNotification(_.type,w=>{if(Te===h.Off||!je)return;const O=Te===h.Verbose||Te===h.Compact;je.log(w.message,O?w.verbose:void 0)}),_i.onNotification(u.type,w=>{const O=Ut.get(w.token);O?O(w.value):Ot.fire(w)}),_i}i.createMessageConnection=Q})(x_);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.TraceFormat=i.TraceValues=i.Trace=i.ProgressType=i.ProgressToken=i.createMessageConnection=i.NullLogger=i.ConnectionOptions=i.ConnectionStrategy=i.WriteableStreamMessageWriter=i.AbstractMessageWriter=i.MessageWriter=i.ReadableStreamMessageReader=i.AbstractMessageReader=i.MessageReader=i.CancellationToken=i.CancellationTokenSource=i.Emitter=i.Event=i.Disposable=i.LRUCache=i.Touch=i.LinkedMap=i.ParameterStructures=i.NotificationType9=i.NotificationType8=i.NotificationType7=i.NotificationType6=i.NotificationType5=i.NotificationType4=i.NotificationType3=i.NotificationType2=i.NotificationType1=i.NotificationType0=i.NotificationType=i.ErrorCodes=i.ResponseError=i.RequestType9=i.RequestType8=i.RequestType7=i.RequestType6=i.RequestType5=i.RequestType4=i.RequestType3=i.RequestType2=i.RequestType1=i.RequestType0=i.RequestType=i.Message=i.RAL=void 0,i.CancellationStrategy=i.CancellationSenderStrategy=i.CancellationReceiverStrategy=i.ConnectionError=i.ConnectionErrors=i.LogTraceNotification=i.SetTraceNotification=void 0;const e=Xg;Object.defineProperty(i,"Message",{enumerable:!0,get:function(){return e.Message}}),Object.defineProperty(i,"RequestType",{enumerable:!0,get:function(){return e.RequestType}}),Object.defineProperty(i,"RequestType0",{enumerable:!0,get:function(){return e.RequestType0}}),Object.defineProperty(i,"RequestType1",{enumerable:!0,get:function(){return e.RequestType1}}),Object.defineProperty(i,"RequestType2",{enumerable:!0,get:function(){return e.RequestType2}}),Object.defineProperty(i,"RequestType3",{enumerable:!0,get:function(){return e.RequestType3}}),Object.defineProperty(i,"RequestType4",{enumerable:!0,get:function(){return e.RequestType4}}),Object.defineProperty(i,"RequestType5",{enumerable:!0,get:function(){return e.RequestType5}}),Object.defineProperty(i,"RequestType6",{enumerable:!0,get:function(){return e.RequestType6}}),Object.defineProperty(i,"RequestType7",{enumerable:!0,get:function(){return e.RequestType7}}),Object.defineProperty(i,"RequestType8",{enumerable:!0,get:function(){return e.RequestType8}}),Object.defineProperty(i,"RequestType9",{enumerable:!0,get:function(){return e.RequestType9}}),Object.defineProperty(i,"ResponseError",{enumerable:!0,get:function(){return e.ResponseError}}),Object.defineProperty(i,"ErrorCodes",{enumerable:!0,get:function(){return e.ErrorCodes}}),Object.defineProperty(i,"NotificationType",{enumerable:!0,get:function(){return e.NotificationType}}),Object.defineProperty(i,"NotificationType0",{enumerable:!0,get:function(){return e.NotificationType0}}),Object.defineProperty(i,"NotificationType1",{enumerable:!0,get:function(){return e.NotificationType1}}),Object.defineProperty(i,"NotificationType2",{enumerable:!0,get:function(){return e.NotificationType2}}),Object.defineProperty(i,"NotificationType3",{enumerable:!0,get:function(){return e.NotificationType3}}),Object.defineProperty(i,"NotificationType4",{enumerable:!0,get:function(){return e.NotificationType4}}),Object.defineProperty(i,"NotificationType5",{enumerable:!0,get:function(){return e.NotificationType5}}),Object.defineProperty(i,"NotificationType6",{enumerable:!0,get:function(){return e.NotificationType6}}),Object.defineProperty(i,"NotificationType7",{enumerable:!0,get:function(){return e.NotificationType7}}),Object.defineProperty(i,"NotificationType8",{enumerable:!0,get:function(){return e.NotificationType8}}),Object.defineProperty(i,"NotificationType9",{enumerable:!0,get:function(){return e.NotificationType9}}),Object.defineProperty(i,"ParameterStructures",{enumerable:!0,get:function(){return e.ParameterStructures}});const t=Yg;Object.defineProperty(i,"LinkedMap",{enumerable:!0,get:function(){return t.LinkedMap}}),Object.defineProperty(i,"LRUCache",{enumerable:!0,get:function(){return t.LRUCache}}),Object.defineProperty(i,"Touch",{enumerable:!0,get:function(){return t.Touch}});const n=Qg;Object.defineProperty(i,"Disposable",{enumerable:!0,get:function(){return n.Disposable}});const r=Dr;Object.defineProperty(i,"Event",{enumerable:!0,get:function(){return r.Event}}),Object.defineProperty(i,"Emitter",{enumerable:!0,get:function(){return r.Emitter}});const s=Zg;Object.defineProperty(i,"CancellationTokenSource",{enumerable:!0,get:function(){return s.CancellationTokenSource}}),Object.defineProperty(i,"CancellationToken",{enumerable:!0,get:function(){return s.CancellationToken}});const o=R_;Object.defineProperty(i,"MessageReader",{enumerable:!0,get:function(){return o.MessageReader}}),Object.defineProperty(i,"AbstractMessageReader",{enumerable:!0,get:function(){return o.AbstractMessageReader}}),Object.defineProperty(i,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return o.ReadableStreamMessageReader}});const a=I_;Object.defineProperty(i,"MessageWriter",{enumerable:!0,get:function(){return a.MessageWriter}}),Object.defineProperty(i,"AbstractMessageWriter",{enumerable:!0,get:function(){return a.AbstractMessageWriter}}),Object.defineProperty(i,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return a.WriteableStreamMessageWriter}});const c=x_;Object.defineProperty(i,"ConnectionStrategy",{enumerable:!0,get:function(){return c.ConnectionStrategy}}),Object.defineProperty(i,"ConnectionOptions",{enumerable:!0,get:function(){return c.ConnectionOptions}}),Object.defineProperty(i,"NullLogger",{enumerable:!0,get:function(){return c.NullLogger}}),Object.defineProperty(i,"createMessageConnection",{enumerable:!0,get:function(){return c.createMessageConnection}}),Object.defineProperty(i,"ProgressToken",{enumerable:!0,get:function(){return c.ProgressToken}}),Object.defineProperty(i,"ProgressType",{enumerable:!0,get:function(){return c.ProgressType}}),Object.defineProperty(i,"Trace",{enumerable:!0,get:function(){return c.Trace}}),Object.defineProperty(i,"TraceValues",{enumerable:!0,get:function(){return c.TraceValues}}),Object.defineProperty(i,"TraceFormat",{enumerable:!0,get:function(){return c.TraceFormat}}),Object.defineProperty(i,"SetTraceNotification",{enumerable:!0,get:function(){return c.SetTraceNotification}}),Object.defineProperty(i,"LogTraceNotification",{enumerable:!0,get:function(){return c.LogTraceNotification}}),Object.defineProperty(i,"ConnectionErrors",{enumerable:!0,get:function(){return c.ConnectionErrors}}),Object.defineProperty(i,"ConnectionError",{enumerable:!0,get:function(){return c.ConnectionError}}),Object.defineProperty(i,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return c.CancellationReceiverStrategy}}),Object.defineProperty(i,"CancellationSenderStrategy",{enumerable:!0,get:function(){return c.CancellationSenderStrategy}}),Object.defineProperty(i,"CancellationStrategy",{enumerable:!0,get:function(){return c.CancellationStrategy}});const u=Gn;i.RAL=u.default})(Pf);(function(i){var e=yn&&yn.__createBinding||(Object.create?function(c,u,l,g){g===void 0&&(g=l);var h=Object.getOwnPropertyDescriptor(u,l);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(c,g,h)}:function(c,u,l,g){g===void 0&&(g=l),c[g]=u[l]}),t=yn&&yn.__exportStar||function(c,u){for(var l in c)l!=="default"&&!Object.prototype.hasOwnProperty.call(u,l)&&e(u,c,l)};Object.defineProperty(i,"__esModule",{value:!0}),i.createMessageConnection=i.BrowserMessageWriter=i.BrowserMessageReader=void 0,Jg.default.install();const r=Pf;t(Pf,i);class s extends r.AbstractMessageReader{constructor(u){super(),this._onData=new r.Emitter,this._messageListener=l=>{this._onData.fire(l.data)},u.addEventListener("error",l=>this.fireError(l)),u.onmessage=this._messageListener}listen(u){return this._onData.event(u)}}i.BrowserMessageReader=s;class o extends r.AbstractMessageWriter{constructor(u){super(),this.context=u,this.errorCount=0,u.addEventListener("error",l=>this.fireError(l))}write(u){try{return this.context.postMessage(u),Promise.resolve()}catch(l){return this.handleError(l,u),Promise.reject(l)}}handleError(u,l){this.errorCount++,this.fireError(u,l,this.errorCount)}end(){}}i.BrowserMessageWriter=o;function a(c,u,l,g){return l===void 0&&(l=r.NullLogger),r.ConnectionStrategy.is(g)&&(g={connectionStrategy:g}),(0,r.createMessageConnection)(c,u,l,g)}i.createMessageConnection=a})(mi);(function(i){i.exports=mi})(Df);var F_={},Rf;(function(i){function e(t){return typeof t=="string"}i.is=e})(Rf||(Rf={}));var $c;(function(i){function e(t){return typeof t=="string"}i.is=e})($c||($c={}));var If;(function(i){i.MIN_VALUE=-2147483648,i.MAX_VALUE=2147483647;function e(t){return typeof t=="number"&&i.MIN_VALUE<=t&&t<=i.MAX_VALUE}i.is=e})(If||(If={}));var qo;(function(i){i.MIN_VALUE=0,i.MAX_VALUE=2147483647;function e(t){return typeof t=="number"&&i.MIN_VALUE<=t&&t<=i.MAX_VALUE}i.is=e})(qo||(qo={}));var _n;(function(i){function e(n,r){return n===Number.MAX_VALUE&&(n=qo.MAX_VALUE),r===Number.MAX_VALUE&&(r=qo.MAX_VALUE),{line:n,character:r}}i.create=e;function t(n){var r=n;return R.objectLiteral(r)&&R.uinteger(r.line)&&R.uinteger(r.character)}i.is=t})(_n||(_n={}));var _t;(function(i){function e(n,r,s,o){if(R.uinteger(n)&&R.uinteger(r)&&R.uinteger(s)&&R.uinteger(o))return{start:_n.create(n,r),end:_n.create(s,o)};if(_n.is(n)&&_n.is(r))return{start:n,end:r};throw new Error("Range#create called with invalid arguments[".concat(n,", ").concat(r,", ").concat(s,", ").concat(o,"]"))}i.create=e;function t(n){var r=n;return R.objectLiteral(r)&&_n.is(r.start)&&_n.is(r.end)}i.is=t})(_t||(_t={}));var Wo;(function(i){function e(n,r){return{uri:n,range:r}}i.create=e;function t(n){var r=n;return R.objectLiteral(r)&&_t.is(r.range)&&(R.string(r.uri)||R.undefined(r.uri))}i.is=t})(Wo||(Wo={}));var xf;(function(i){function e(n,r,s,o){return{targetUri:n,targetRange:r,targetSelectionRange:s,originSelectionRange:o}}i.create=e;function t(n){var r=n;return R.objectLiteral(r)&&_t.is(r.targetRange)&&R.string(r.targetUri)&&_t.is(r.targetSelectionRange)&&(_t.is(r.originSelectionRange)||R.undefined(r.originSelectionRange))}i.is=t})(xf||(xf={}));var Nc;(function(i){function e(n,r,s,o){return{red:n,green:r,blue:s,alpha:o}}i.create=e;function t(n){var r=n;return R.objectLiteral(r)&&R.numberRange(r.red,0,1)&&R.numberRange(r.green,0,1)&&R.numberRange(r.blue,0,1)&&R.numberRange(r.alpha,0,1)}i.is=t})(Nc||(Nc={}));var Ff;(function(i){function e(n,r){return{range:n,color:r}}i.create=e;function t(n){var r=n;return R.objectLiteral(r)&&_t.is(r.range)&&Nc.is(r.color)}i.is=t})(Ff||(Ff={}));var Mf;(function(i){function e(n,r,s){return{label:n,textEdit:r,additionalTextEdits:s}}i.create=e;function t(n){var r=n;return R.objectLiteral(r)&&R.string(r.label)&&(R.undefined(r.textEdit)||Bn.is(r))&&(R.undefined(r.additionalTextEdits)||R.typedArray(r.additionalTextEdits,Bn.is))}i.is=t})(Mf||(Mf={}));var Af;(function(i){i.Comment="comment",i.Imports="imports",i.Region="region"})(Af||(Af={}));var Lf;(function(i){function e(n,r,s,o,a,c){var u={startLine:n,endLine:r};return R.defined(s)&&(u.startCharacter=s),R.defined(o)&&(u.endCharacter=o),R.defined(a)&&(u.kind=a),R.defined(c)&&(u.collapsedText=c),u}i.create=e;function t(n){var r=n;return R.objectLiteral(r)&&R.uinteger(r.startLine)&&R.uinteger(r.startLine)&&(R.undefined(r.startCharacter)||R.uinteger(r.startCharacter))&&(R.undefined(r.endCharacter)||R.uinteger(r.endCharacter))&&(R.undefined(r.kind)||R.string(r.kind))}i.is=t})(Lf||(Lf={}));var Hc;(function(i){function e(n,r){return{location:n,message:r}}i.create=e;function t(n){var r=n;return R.defined(r)&&Wo.is(r.location)&&R.string(r.message)}i.is=t})(Hc||(Hc={}));var cr;(function(i){i.Error=1,i.Warning=2,i.Information=3,i.Hint=4})(cr||(cr={}));var Uo;(function(i){i.Unnecessary=1,i.Deprecated=2})(Uo||(Uo={}));var Of;(function(i){function e(t){var n=t;return R.objectLiteral(n)&&R.string(n.href)}i.is=e})(Of||(Of={}));var jo;(function(i){function e(n,r,s,o,a,c){var u={range:n,message:r};return R.defined(s)&&(u.severity=s),R.defined(o)&&(u.code=o),R.defined(a)&&(u.source=a),R.defined(c)&&(u.relatedInformation=c),u}i.create=e;function t(n){var r,s=n;return R.defined(s)&&_t.is(s.range)&&R.string(s.message)&&(R.number(s.severity)||R.undefined(s.severity))&&(R.integer(s.code)||R.string(s.code)||R.undefined(s.code))&&(R.undefined(s.codeDescription)||R.string((r=s.codeDescription)===null||r===void 0?void 0:r.href))&&(R.string(s.source)||R.undefined(s.source))&&(R.undefined(s.relatedInformation)||R.typedArray(s.relatedInformation,Hc.is))}i.is=t})(jo||(jo={}));var Cr;(function(i){function e(n,r){for(var s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];var a={title:n,command:r};return R.defined(s)&&s.length>0&&(a.arguments=s),a}i.create=e;function t(n){var r=n;return R.defined(r)&&R.string(r.title)&&R.string(r.command)}i.is=t})(Cr||(Cr={}));var Bn;(function(i){function e(s,o){return{range:s,newText:o}}i.replace=e;function t(s,o){return{range:{start:s,end:s},newText:o}}i.insert=t;function n(s){return{range:s,newText:""}}i.del=n;function r(s){var o=s;return R.objectLiteral(o)&&R.string(o.newText)&&_t.is(o.range)}i.is=r})(Bn||(Bn={}));var fr;(function(i){function e(n,r,s){var o={label:n};return r!==void 0&&(o.needsConfirmation=r),s!==void 0&&(o.description=s),o}i.create=e;function t(n){var r=n;return R.objectLiteral(r)&&R.string(r.label)&&(R.boolean(r.needsConfirmation)||r.needsConfirmation===void 0)&&(R.string(r.description)||r.description===void 0)}i.is=t})(fr||(fr={}));var qt;(function(i){function e(t){var n=t;return R.string(n)}i.is=e})(qt||(qt={}));var ti;(function(i){function e(s,o,a){return{range:s,newText:o,annotationId:a}}i.replace=e;function t(s,o,a){return{range:{start:s,end:s},newText:o,annotationId:a}}i.insert=t;function n(s,o){return{range:s,newText:"",annotationId:o}}i.del=n;function r(s){var o=s;return Bn.is(o)&&(fr.is(o.annotationId)||qt.is(o.annotationId))}i.is=r})(ti||(ti={}));var zo;(function(i){function e(n,r){return{textDocument:n,edits:r}}i.create=e;function t(n){var r=n;return R.defined(r)&&Bo.is(r.textDocument)&&Array.isArray(r.edits)}i.is=t})(zo||(zo={}));var _s;(function(i){function e(n,r,s){var o={kind:"create",uri:n};return r!==void 0&&(r.overwrite!==void 0||r.ignoreIfExists!==void 0)&&(o.options=r),s!==void 0&&(o.annotationId=s),o}i.create=e;function t(n){var r=n;return r&&r.kind==="create"&&R.string(r.uri)&&(r.options===void 0||(r.options.overwrite===void 0||R.boolean(r.options.overwrite))&&(r.options.ignoreIfExists===void 0||R.boolean(r.options.ignoreIfExists)))&&(r.annotationId===void 0||qt.is(r.annotationId))}i.is=t})(_s||(_s={}));var ys;(function(i){function e(n,r,s,o){var a={kind:"rename",oldUri:n,newUri:r};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(a.options=s),o!==void 0&&(a.annotationId=o),a}i.create=e;function t(n){var r=n;return r&&r.kind==="rename"&&R.string(r.oldUri)&&R.string(r.newUri)&&(r.options===void 0||(r.options.overwrite===void 0||R.boolean(r.options.overwrite))&&(r.options.ignoreIfExists===void 0||R.boolean(r.options.ignoreIfExists)))&&(r.annotationId===void 0||qt.is(r.annotationId))}i.is=t})(ys||(ys={}));var ws;(function(i){function e(n,r,s){var o={kind:"delete",uri:n};return r!==void 0&&(r.recursive!==void 0||r.ignoreIfNotExists!==void 0)&&(o.options=r),s!==void 0&&(o.annotationId=s),o}i.create=e;function t(n){var r=n;return r&&r.kind==="delete"&&R.string(r.uri)&&(r.options===void 0||(r.options.recursive===void 0||R.boolean(r.options.recursive))&&(r.options.ignoreIfNotExists===void 0||R.boolean(r.options.ignoreIfNotExists)))&&(r.annotationId===void 0||qt.is(r.annotationId))}i.is=t})(ws||(ws={}));var qc;(function(i){function e(t){var n=t;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(function(r){return R.string(r.kind)?_s.is(r)||ys.is(r)||ws.is(r):zo.is(r)}))}i.is=e})(qc||(qc={}));var Ea=function(){function i(e,t){this.edits=e,this.changeAnnotations=t}return i.prototype.insert=function(e,t,n){var r,s;if(n===void 0?r=Bn.insert(e,t):qt.is(n)?(s=n,r=ti.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(n),r=ti.insert(e,t,s)),this.edits.push(r),s!==void 0)return s},i.prototype.replace=function(e,t,n){var r,s;if(n===void 0?r=Bn.replace(e,t):qt.is(n)?(s=n,r=ti.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(n),r=ti.replace(e,t,s)),this.edits.push(r),s!==void 0)return s},i.prototype.delete=function(e,t){var n,r;if(t===void 0?n=Bn.del(e):qt.is(t)?(r=t,n=ti.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(t),n=ti.del(e,r)),this.edits.push(n),r!==void 0)return r},i.prototype.add=function(e){this.edits.push(e)},i.prototype.all=function(){return this.edits},i.prototype.clear=function(){this.edits.splice(0,this.edits.length)},i.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},i}(),Fm=function(){function i(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return i.prototype.all=function(){return this._annotations},Object.defineProperty(i.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),i.prototype.manage=function(e,t){var n;if(qt.is(e)?n=e:(n=this.nextId(),t=e),this._annotations[n]!==void 0)throw new Error("Id ".concat(n," is already in use."));if(t===void 0)throw new Error("No annotation provided for id ".concat(n));return this._annotations[n]=t,this._size++,n},i.prototype.nextId=function(){return this._counter++,this._counter.toString()},i}(),rk=function(){function i(e){var t=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Fm(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(n){if(zo.is(n)){var r=new Ea(n.edits,t._changeAnnotations);t._textEditChanges[n.textDocument.uri]=r}})):e.changes&&Object.keys(e.changes).forEach(function(n){var r=new Ea(e.changes[n]);t._textEditChanges[n]=r})):this._workspaceEdit={}}return Object.defineProperty(i.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),i.prototype.getTextEditChange=function(e){if(Bo.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version},n=this._textEditChanges[t.uri];if(!n){var r=[],s={textDocument:t,edits:r};this._workspaceEdit.documentChanges.push(s),n=new Ea(r,this._changeAnnotations),this._textEditChanges[t.uri]=n}return n}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var n=this._textEditChanges[e];if(!n){var r=[];this._workspaceEdit.changes[e]=r,n=new Ea(r),this._textEditChanges[e]=n}return n}},i.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Fm,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},i.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},i.prototype.createFile=function(e,t,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var r;fr.is(t)||qt.is(t)?r=t:n=t;var s,o;if(r===void 0?s=_s.create(e,n):(o=qt.is(r)?r:this._changeAnnotations.manage(r),s=_s.create(e,n,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o},i.prototype.renameFile=function(e,t,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var s;fr.is(n)||qt.is(n)?s=n:r=n;var o,a;if(s===void 0?o=ys.create(e,t,r):(a=qt.is(s)?s:this._changeAnnotations.manage(s),o=ys.create(e,t,r,a)),this._workspaceEdit.documentChanges.push(o),a!==void 0)return a},i.prototype.deleteFile=function(e,t,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var r;fr.is(t)||qt.is(t)?r=t:n=t;var s,o;if(r===void 0?s=ws.create(e,n):(o=qt.is(r)?r:this._changeAnnotations.manage(r),s=ws.create(e,n,o)),this._workspaceEdit.documentChanges.push(s),o!==void 0)return o},i}(),$f;(function(i){function e(n){return{uri:n}}i.create=e;function t(n){var r=n;return R.defined(r)&&R.string(r.uri)}i.is=t})($f||($f={}));var Nf;(function(i){function e(n,r){return{uri:n,version:r}}i.create=e;function t(n){var r=n;return R.defined(r)&&R.string(r.uri)&&R.integer(r.version)}i.is=t})(Nf||(Nf={}));var Bo;(function(i){function e(n,r){return{uri:n,version:r}}i.create=e;function t(n){var r=n;return R.defined(r)&&R.string(r.uri)&&(r.version===null||R.integer(r.version))}i.is=t})(Bo||(Bo={}));var Hf;(function(i){function e(n,r,s,o){return{uri:n,languageId:r,version:s,text:o}}i.create=e;function t(n){var r=n;return R.defined(r)&&R.string(r.uri)&&R.string(r.languageId)&&R.integer(r.version)&&R.string(r.text)}i.is=t})(Hf||(Hf={}));var Wc;(function(i){i.PlainText="plaintext",i.Markdown="markdown";function e(t){var n=t;return n===i.PlainText||n===i.Markdown}i.is=e})(Wc||(Wc={}));var bs;(function(i){function e(t){var n=t;return R.objectLiteral(t)&&Wc.is(n.kind)&&R.string(n.value)}i.is=e})(bs||(bs={}));var bt;(function(i){i.Text=1,i.Method=2,i.Function=3,i.Constructor=4,i.Field=5,i.Variable=6,i.Class=7,i.Interface=8,i.Module=9,i.Property=10,i.Unit=11,i.Value=12,i.Enum=13,i.Keyword=14,i.Snippet=15,i.Color=16,i.File=17,i.Reference=18,i.Folder=19,i.EnumMember=20,i.Constant=21,i.Struct=22,i.Event=23,i.Operator=24,i.TypeParameter=25})(bt||(bt={}));var Uc;(function(i){i.PlainText=1,i.Snippet=2})(Uc||(Uc={}));var qf;(function(i){i.Deprecated=1})(qf||(qf={}));var Wf;(function(i){function e(n,r,s){return{newText:n,insert:r,replace:s}}i.create=e;function t(n){var r=n;return r&&R.string(r.newText)&&_t.is(r.insert)&&_t.is(r.replace)}i.is=t})(Wf||(Wf={}));var Uf;(function(i){i.asIs=1,i.adjustIndentation=2})(Uf||(Uf={}));var jf;(function(i){function e(t){var n=t;return n&&(R.string(n.detail)||n.detail===void 0)&&(R.string(n.description)||n.description===void 0)}i.is=e})(jf||(jf={}));var zf;(function(i){function e(t){return{label:t}}i.create=e})(zf||(zf={}));var Bf;(function(i){function e(t,n){return{items:t||[],isIncomplete:!!n}}i.create=e})(Bf||(Bf={}));var Vo;(function(i){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}i.fromPlainText=e;function t(n){var r=n;return R.string(r)||R.objectLiteral(r)&&R.string(r.language)&&R.string(r.value)}i.is=t})(Vo||(Vo={}));var Vf;(function(i){function e(t){var n=t;return!!n&&R.objectLiteral(n)&&(bs.is(n.contents)||Vo.is(n.contents)||R.typedArray(n.contents,Vo.is))&&(t.range===void 0||_t.is(t.range))}i.is=e})(Vf||(Vf={}));var Kf;(function(i){function e(t,n){return n?{label:t,documentation:n}:{label:t}}i.create=e})(Kf||(Kf={}));var Gf;(function(i){function e(t,n){for(var r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];var o={label:t};return R.defined(n)&&(o.documentation=n),R.defined(r)?o.parameters=r:o.parameters=[],o}i.create=e})(Gf||(Gf={}));var Jf;(function(i){i.Text=1,i.Read=2,i.Write=3})(Jf||(Jf={}));var Qf;(function(i){function e(t,n){var r={range:t};return R.number(n)&&(r.kind=n),r}i.create=e})(Qf||(Qf={}));var Ct;(function(i){i.File=1,i.Module=2,i.Namespace=3,i.Package=4,i.Class=5,i.Method=6,i.Property=7,i.Field=8,i.Constructor=9,i.Enum=10,i.Interface=11,i.Function=12,i.Variable=13,i.Constant=14,i.String=15,i.Number=16,i.Boolean=17,i.Array=18,i.Object=19,i.Key=20,i.Null=21,i.EnumMember=22,i.Struct=23,i.Event=24,i.Operator=25,i.TypeParameter=26})(Ct||(Ct={}));var Xf;(function(i){i.Deprecated=1})(Xf||(Xf={}));var Yf;(function(i){function e(t,n,r,s,o){var a={name:t,kind:n,location:{uri:s,range:r}};return o&&(a.containerName=o),a}i.create=e})(Yf||(Yf={}));var Zf;(function(i){function e(t,n,r,s){return s!==void 0?{name:t,kind:n,location:{uri:r,range:s}}:{name:t,kind:n,location:{uri:r}}}i.create=e})(Zf||(Zf={}));var eg;(function(i){function e(n,r,s,o,a,c){var u={name:n,detail:r,kind:s,range:o,selectionRange:a};return c!==void 0&&(u.children=c),u}i.create=e;function t(n){var r=n;return r&&R.string(r.name)&&R.number(r.kind)&&_t.is(r.range)&&_t.is(r.selectionRange)&&(r.detail===void 0||R.string(r.detail))&&(r.deprecated===void 0||R.boolean(r.deprecated))&&(r.children===void 0||Array.isArray(r.children))&&(r.tags===void 0||Array.isArray(r.tags))}i.is=t})(eg||(eg={}));var tg;(function(i){i.Empty="",i.QuickFix="quickfix",i.Refactor="refactor",i.RefactorExtract="refactor.extract",i.RefactorInline="refactor.inline",i.RefactorRewrite="refactor.rewrite",i.Source="source",i.SourceOrganizeImports="source.organizeImports",i.SourceFixAll="source.fixAll"})(tg||(tg={}));var Ko;(function(i){i.Invoked=1,i.Automatic=2})(Ko||(Ko={}));var ng;(function(i){function e(n,r,s){var o={diagnostics:n};return r!=null&&(o.only=r),s!=null&&(o.triggerKind=s),o}i.create=e;function t(n){var r=n;return R.defined(r)&&R.typedArray(r.diagnostics,jo.is)&&(r.only===void 0||R.typedArray(r.only,R.string))&&(r.triggerKind===void 0||r.triggerKind===Ko.Invoked||r.triggerKind===Ko.Automatic)}i.is=t})(ng||(ng={}));var ig;(function(i){function e(n,r,s){var o={title:n},a=!0;return typeof r=="string"?(a=!1,o.kind=r):Cr.is(r)?o.command=r:o.edit=r,a&&s!==void 0&&(o.kind=s),o}i.create=e;function t(n){var r=n;return r&&R.string(r.title)&&(r.diagnostics===void 0||R.typedArray(r.diagnostics,jo.is))&&(r.kind===void 0||R.string(r.kind))&&(r.edit!==void 0||r.command!==void 0)&&(r.command===void 0||Cr.is(r.command))&&(r.isPreferred===void 0||R.boolean(r.isPreferred))&&(r.edit===void 0||qc.is(r.edit))}i.is=t})(ig||(ig={}));var rg;(function(i){function e(n,r){var s={range:n};return R.defined(r)&&(s.data=r),s}i.create=e;function t(n){var r=n;return R.defined(r)&&_t.is(r.range)&&(R.undefined(r.command)||Cr.is(r.command))}i.is=t})(rg||(rg={}));var sg;(function(i){function e(n,r){return{tabSize:n,insertSpaces:r}}i.create=e;function t(n){var r=n;return R.defined(r)&&R.uinteger(r.tabSize)&&R.boolean(r.insertSpaces)}i.is=t})(sg||(sg={}));var og;(function(i){function e(n,r,s){return{range:n,target:r,data:s}}i.create=e;function t(n){var r=n;return R.defined(r)&&_t.is(r.range)&&(R.undefined(r.target)||R.string(r.target))}i.is=t})(og||(og={}));var ag;(function(i){function e(n,r){return{range:n,parent:r}}i.create=e;function t(n){var r=n;return R.objectLiteral(r)&&_t.is(r.range)&&(r.parent===void 0||i.is(r.parent))}i.is=t})(ag||(ag={}));var cg;(function(i){i.namespace="namespace",i.type="type",i.class="class",i.enum="enum",i.interface="interface",i.struct="struct",i.typeParameter="typeParameter",i.parameter="parameter",i.variable="variable",i.property="property",i.enumMember="enumMember",i.event="event",i.function="function",i.method="method",i.macro="macro",i.keyword="keyword",i.modifier="modifier",i.comment="comment",i.string="string",i.number="number",i.regexp="regexp",i.operator="operator",i.decorator="decorator"})(cg||(cg={}));var ug;(function(i){i.declaration="declaration",i.definition="definition",i.readonly="readonly",i.static="static",i.deprecated="deprecated",i.abstract="abstract",i.async="async",i.modification="modification",i.documentation="documentation",i.defaultLibrary="defaultLibrary"})(ug||(ug={}));var dg;(function(i){function e(t){var n=t;return R.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}i.is=e})(dg||(dg={}));var lg;(function(i){function e(n,r){return{range:n,text:r}}i.create=e;function t(n){var r=n;return r!=null&&_t.is(r.range)&&R.string(r.text)}i.is=t})(lg||(lg={}));var hg;(function(i){function e(n,r,s){return{range:n,variableName:r,caseSensitiveLookup:s}}i.create=e;function t(n){var r=n;return r!=null&&_t.is(r.range)&&R.boolean(r.caseSensitiveLookup)&&(R.string(r.variableName)||r.variableName===void 0)}i.is=t})(hg||(hg={}));var fg;(function(i){function e(n,r){return{range:n,expression:r}}i.create=e;function t(n){var r=n;return r!=null&&_t.is(r.range)&&(R.string(r.expression)||r.expression===void 0)}i.is=t})(fg||(fg={}));var gg;(function(i){function e(n,r){return{frameId:n,stoppedLocation:r}}i.create=e;function t(n){var r=n;return R.defined(r)&&_t.is(n.stoppedLocation)}i.is=t})(gg||(gg={}));var jc;(function(i){i.Type=1,i.Parameter=2;function e(t){return t===1||t===2}i.is=e})(jc||(jc={}));var zc;(function(i){function e(n){return{value:n}}i.create=e;function t(n){var r=n;return R.objectLiteral(r)&&(r.tooltip===void 0||R.string(r.tooltip)||bs.is(r.tooltip))&&(r.location===void 0||Wo.is(r.location))&&(r.command===void 0||Cr.is(r.command))}i.is=t})(zc||(zc={}));var pg;(function(i){function e(n,r,s){var o={position:n,label:r};return s!==void 0&&(o.kind=s),o}i.create=e;function t(n){var r=n;return R.objectLiteral(r)&&_n.is(r.position)&&(R.string(r.label)||R.typedArray(r.label,zc.is))&&(r.kind===void 0||jc.is(r.kind))&&r.textEdits===void 0||R.typedArray(r.textEdits,Bn.is)&&(r.tooltip===void 0||R.string(r.tooltip)||bs.is(r.tooltip))&&(r.paddingLeft===void 0||R.boolean(r.paddingLeft))&&(r.paddingRight===void 0||R.boolean(r.paddingRight))}i.is=t})(pg||(pg={}));var mg;(function(i){function e(t){var n=t;return R.objectLiteral(n)&&$c.is(n.uri)&&R.string(n.name)}i.is=e})(mg||(mg={}));var sk=[`
`,`\r
`,"\r"],vg;(function(i){function e(s,o,a,c){return new ok(s,o,a,c)}i.create=e;function t(s){var o=s;return!!(R.defined(o)&&R.string(o.uri)&&(R.undefined(o.languageId)||R.string(o.languageId))&&R.uinteger(o.lineCount)&&R.func(o.getText)&&R.func(o.positionAt)&&R.func(o.offsetAt))}i.is=t;function n(s,o){for(var a=s.getText(),c=r(o,function(p,_){var b=p.range.start.line-_.range.start.line;return b===0?p.range.start.character-_.range.start.character:b}),u=a.length,l=c.length-1;l>=0;l--){var g=c[l],h=s.offsetAt(g.range.start),d=s.offsetAt(g.range.end);if(d<=u)a=a.substring(0,h)+g.newText+a.substring(d,a.length);else throw new Error("Overlapping edit");u=h}return a}i.applyEdits=n;function r(s,o){if(s.length<=1)return s;var a=s.length/2|0,c=s.slice(0,a),u=s.slice(a);r(c,o),r(u,o);for(var l=0,g=0,h=0;l<c.length&&g<u.length;){var d=o(c[l],u[g]);d<=0?s[h++]=c[l++]:s[h++]=u[g++]}for(;l<c.length;)s[h++]=c[l++];for(;g<u.length;)s[h++]=u[g++];return s}})(vg||(vg={}));var ok=function(){function i(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(i.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),i.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},i.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},i.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var s=t.charAt(r);n=s==="\r"||s===`
`,s==="\r"&&r+1<t.length&&t.charAt(r+1)===`
`&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},i.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(r===0)return _n.create(0,e);for(;n<r;){var s=Math.floor((n+r)/2);t[s]>e?r=s:n=s+1}var o=n-1;return _n.create(o,e-t[o])},i.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(i.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),i}(),R;(function(i){var e=Object.prototype.toString;function t(d){return typeof d<"u"}i.defined=t;function n(d){return typeof d>"u"}i.undefined=n;function r(d){return d===!0||d===!1}i.boolean=r;function s(d){return e.call(d)==="[object String]"}i.string=s;function o(d){return e.call(d)==="[object Number]"}i.number=o;function a(d,p,_){return e.call(d)==="[object Number]"&&p<=d&&d<=_}i.numberRange=a;function c(d){return e.call(d)==="[object Number]"&&-2147483648<=d&&d<=2147483647}i.integer=c;function u(d){return e.call(d)==="[object Number]"&&0<=d&&d<=2147483647}i.uinteger=u;function l(d){return e.call(d)==="[object Function]"}i.func=l;function g(d){return d!==null&&typeof d=="object"}i.objectLiteral=g;function h(d,p){return Array.isArray(d)&&d.every(p)}i.typedArray=h})(R||(R={}));const ak=Object.freeze(Object.defineProperty({__proto__:null,get DocumentUri(){return Rf},get URI(){return $c},get integer(){return If},get uinteger(){return qo},get Position(){return _n},get Range(){return _t},get Location(){return Wo},get LocationLink(){return xf},get Color(){return Nc},get ColorInformation(){return Ff},get ColorPresentation(){return Mf},get FoldingRangeKind(){return Af},get FoldingRange(){return Lf},get DiagnosticRelatedInformation(){return Hc},get DiagnosticSeverity(){return cr},get DiagnosticTag(){return Uo},get CodeDescription(){return Of},get Diagnostic(){return jo},get Command(){return Cr},get TextEdit(){return Bn},get ChangeAnnotation(){return fr},get ChangeAnnotationIdentifier(){return qt},get AnnotatedTextEdit(){return ti},get TextDocumentEdit(){return zo},get CreateFile(){return _s},get RenameFile(){return ys},get DeleteFile(){return ws},get WorkspaceEdit(){return qc},WorkspaceChange:rk,get TextDocumentIdentifier(){return $f},get VersionedTextDocumentIdentifier(){return Nf},get OptionalVersionedTextDocumentIdentifier(){return Bo},get TextDocumentItem(){return Hf},get MarkupKind(){return Wc},get MarkupContent(){return bs},get CompletionItemKind(){return bt},get InsertTextFormat(){return Uc},get CompletionItemTag(){return qf},get InsertReplaceEdit(){return Wf},get InsertTextMode(){return Uf},get CompletionItemLabelDetails(){return jf},get CompletionItem(){return zf},get CompletionList(){return Bf},get MarkedString(){return Vo},get Hover(){return Vf},get ParameterInformation(){return Kf},get SignatureInformation(){return Gf},get DocumentHighlightKind(){return Jf},get DocumentHighlight(){return Qf},get SymbolKind(){return Ct},get SymbolTag(){return Xf},get SymbolInformation(){return Yf},get WorkspaceSymbol(){return Zf},get DocumentSymbol(){return eg},get CodeActionKind(){return tg},get CodeActionTriggerKind(){return Ko},get CodeActionContext(){return ng},get CodeAction(){return ig},get CodeLens(){return rg},get FormattingOptions(){return sg},get DocumentLink(){return og},get SelectionRange(){return ag},get SemanticTokenTypes(){return cg},get SemanticTokenModifiers(){return ug},get SemanticTokens(){return dg},get InlineValueText(){return lg},get InlineValueVariableLookup(){return hg},get InlineValueEvaluatableExpression(){return fg},get InlineValueContext(){return gg},get InlayHintKind(){return jc},get InlayHintLabelPart(){return zc},get InlayHint(){return pg},get WorkspaceFolder(){return mg},EOL:sk,get TextDocument(){return vg}},Symbol.toStringTag,{value:"Module"})),ep=Uv(ak);var ft={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ProtocolNotificationType=i.ProtocolNotificationType0=i.ProtocolRequestType=i.ProtocolRequestType0=i.RegistrationType=i.MessageDirection=void 0;const e=mi;(function(a){a.clientToServer="clientToServer",a.serverToClient="serverToClient",a.both="both"})(i.MessageDirection||(i.MessageDirection={}));class t{constructor(c){this.method=c}}i.RegistrationType=t;class n extends e.RequestType0{constructor(c){super(c)}}i.ProtocolRequestType0=n;class r extends e.RequestType{constructor(c){super(c,e.ParameterStructures.byName)}}i.ProtocolRequestType=r;class s extends e.NotificationType0{constructor(c){super(c)}}i.ProtocolNotificationType0=s;class o extends e.NotificationType{constructor(c){super(c,e.ParameterStructures.byName)}}i.ProtocolNotificationType=o})(ft);var M_={},mt={};Object.defineProperty(mt,"__esModule",{value:!0});mt.objectLiteral=mt.typedArray=mt.stringArray=mt.array=mt.func=mt.error=mt.number=mt.string=mt.boolean=void 0;function ck(i){return i===!0||i===!1}mt.boolean=ck;function A_(i){return typeof i=="string"||i instanceof String}mt.string=A_;function uk(i){return typeof i=="number"||i instanceof Number}mt.number=uk;function dk(i){return i instanceof Error}mt.error=dk;function lk(i){return typeof i=="function"}mt.func=lk;function L_(i){return Array.isArray(i)}mt.array=L_;function hk(i){return L_(i)&&i.every(e=>A_(e))}mt.stringArray=hk;function fk(i,e){return Array.isArray(i)&&i.every(e)}mt.typedArray=fk;function gk(i){return i!==null&&typeof i=="object"}mt.objectLiteral=gk;var O_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ImplementationRequest=void 0;const e=ft;(function(t){t.method="textDocument/implementation",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.ImplementationRequest||(i.ImplementationRequest={}))})(O_);var $_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.TypeDefinitionRequest=void 0;const e=ft;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.TypeDefinitionRequest||(i.TypeDefinitionRequest={}))})($_);var N_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DidChangeWorkspaceFoldersNotification=i.WorkspaceFoldersRequest=void 0;const e=ft;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=e.MessageDirection.serverToClient,t.type=new e.ProtocolRequestType0(t.method)})(i.WorkspaceFoldersRequest||(i.WorkspaceFoldersRequest={})),function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolNotificationType(t.method)}(i.DidChangeWorkspaceFoldersNotification||(i.DidChangeWorkspaceFoldersNotification={}))})(N_);var H_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ConfigurationRequest=void 0;const e=ft;(function(t){t.method="workspace/configuration",t.messageDirection=e.MessageDirection.serverToClient,t.type=new e.ProtocolRequestType(t.method)})(i.ConfigurationRequest||(i.ConfigurationRequest={}))})(H_);var q_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ColorPresentationRequest=i.DocumentColorRequest=void 0;const e=ft;(function(t){t.method="textDocument/documentColor",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.DocumentColorRequest||(i.DocumentColorRequest={})),function(t){t.method="textDocument/colorPresentation",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.ColorPresentationRequest||(i.ColorPresentationRequest={}))})(q_);var W_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.FoldingRangeRequest=void 0;const e=ft;(function(t){t.method="textDocument/foldingRange",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.FoldingRangeRequest||(i.FoldingRangeRequest={}))})(W_);var U_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DeclarationRequest=void 0;const e=ft;(function(t){t.method="textDocument/declaration",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.DeclarationRequest||(i.DeclarationRequest={}))})(U_);var j_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionRangeRequest=void 0;const e=ft;(function(t){t.method="textDocument/selectionRange",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.SelectionRangeRequest||(i.SelectionRangeRequest={}))})(j_);var z_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.WorkDoneProgressCancelNotification=i.WorkDoneProgressCreateRequest=i.WorkDoneProgress=void 0;const e=mi,t=ft;(function(n){n.type=new e.ProgressType;function r(s){return s===n.type}n.is=r})(i.WorkDoneProgress||(i.WorkDoneProgress={})),function(n){n.method="window/workDoneProgress/create",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType(n.method)}(i.WorkDoneProgressCreateRequest||(i.WorkDoneProgressCreateRequest={})),function(n){n.method="window/workDoneProgress/cancel",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(i.WorkDoneProgressCancelNotification||(i.WorkDoneProgressCancelNotification={}))})(z_);var B_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.CallHierarchyOutgoingCallsRequest=i.CallHierarchyIncomingCallsRequest=i.CallHierarchyPrepareRequest=void 0;const e=ft;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.CallHierarchyPrepareRequest||(i.CallHierarchyPrepareRequest={})),function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.CallHierarchyIncomingCallsRequest||(i.CallHierarchyIncomingCallsRequest={})),function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.CallHierarchyOutgoingCallsRequest||(i.CallHierarchyOutgoingCallsRequest={}))})(B_);var V_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.SemanticTokensRefreshRequest=i.SemanticTokensRangeRequest=i.SemanticTokensDeltaRequest=i.SemanticTokensRequest=i.SemanticTokensRegistrationType=i.TokenFormat=void 0;const e=ft;(function(n){n.Relative="relative"})(i.TokenFormat||(i.TokenFormat={}));var t;(function(n){n.method="textDocument/semanticTokens",n.type=new e.RegistrationType(n.method)})(t=i.SemanticTokensRegistrationType||(i.SemanticTokensRegistrationType={})),function(n){n.method="textDocument/semanticTokens/full",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method),n.registrationMethod=t.method}(i.SemanticTokensRequest||(i.SemanticTokensRequest={})),function(n){n.method="textDocument/semanticTokens/full/delta",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method),n.registrationMethod=t.method}(i.SemanticTokensDeltaRequest||(i.SemanticTokensDeltaRequest={})),function(n){n.method="textDocument/semanticTokens/range",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method),n.registrationMethod=t.method}(i.SemanticTokensRangeRequest||(i.SemanticTokensRangeRequest={})),function(n){n.method="workspace/semanticTokens/refresh",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType0(n.method)}(i.SemanticTokensRefreshRequest||(i.SemanticTokensRefreshRequest={}))})(V_);var K_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ShowDocumentRequest=void 0;const e=ft;(function(t){t.method="window/showDocument",t.messageDirection=e.MessageDirection.serverToClient,t.type=new e.ProtocolRequestType(t.method)})(i.ShowDocumentRequest||(i.ShowDocumentRequest={}))})(K_);var G_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.LinkedEditingRangeRequest=void 0;const e=ft;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.LinkedEditingRangeRequest||(i.LinkedEditingRangeRequest={}))})(G_);var J_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.WillDeleteFilesRequest=i.DidDeleteFilesNotification=i.DidRenameFilesNotification=i.WillRenameFilesRequest=i.DidCreateFilesNotification=i.WillCreateFilesRequest=i.FileOperationPatternKind=void 0;const e=ft;(function(t){t.file="file",t.folder="folder"})(i.FileOperationPatternKind||(i.FileOperationPatternKind={})),function(t){t.method="workspace/willCreateFiles",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.WillCreateFilesRequest||(i.WillCreateFilesRequest={})),function(t){t.method="workspace/didCreateFiles",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolNotificationType(t.method)}(i.DidCreateFilesNotification||(i.DidCreateFilesNotification={})),function(t){t.method="workspace/willRenameFiles",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.WillRenameFilesRequest||(i.WillRenameFilesRequest={})),function(t){t.method="workspace/didRenameFiles",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolNotificationType(t.method)}(i.DidRenameFilesNotification||(i.DidRenameFilesNotification={})),function(t){t.method="workspace/didDeleteFiles",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolNotificationType(t.method)}(i.DidDeleteFilesNotification||(i.DidDeleteFilesNotification={})),function(t){t.method="workspace/willDeleteFiles",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.WillDeleteFilesRequest||(i.WillDeleteFilesRequest={}))})(J_);var Q_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.MonikerRequest=i.MonikerKind=i.UniquenessLevel=void 0;const e=ft;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(i.UniquenessLevel||(i.UniquenessLevel={})),function(t){t.$import="import",t.$export="export",t.local="local"}(i.MonikerKind||(i.MonikerKind={})),function(t){t.method="textDocument/moniker",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.MonikerRequest||(i.MonikerRequest={}))})(Q_);var X_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.TypeHierarchySubtypesRequest=i.TypeHierarchySupertypesRequest=i.TypeHierarchyPrepareRequest=void 0;const e=ft;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.TypeHierarchyPrepareRequest||(i.TypeHierarchyPrepareRequest={})),function(t){t.method="typeHierarchy/supertypes",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.TypeHierarchySupertypesRequest||(i.TypeHierarchySupertypesRequest={})),function(t){t.method="typeHierarchy/subtypes",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.TypeHierarchySubtypesRequest||(i.TypeHierarchySubtypesRequest={}))})(X_);var Y_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.InlineValueRefreshRequest=i.InlineValueRequest=void 0;const e=ft;(function(t){t.method="textDocument/inlineValue",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.InlineValueRequest||(i.InlineValueRequest={})),function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType0(t.method)}(i.InlineValueRefreshRequest||(i.InlineValueRefreshRequest={}))})(Y_);var Z_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.InlayHintRefreshRequest=i.InlayHintResolveRequest=i.InlayHintRequest=void 0;const e=ft;(function(t){t.method="textDocument/inlayHint",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)})(i.InlayHintRequest||(i.InlayHintRequest={})),function(t){t.method="inlayHint/resolve",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType(t.method)}(i.InlayHintResolveRequest||(i.InlayHintResolveRequest={})),function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=e.MessageDirection.clientToServer,t.type=new e.ProtocolRequestType0(t.method)}(i.InlayHintRefreshRequest||(i.InlayHintRefreshRequest={}))})(Z_);var ey={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DiagnosticRefreshRequest=i.WorkspaceDiagnosticRequest=i.DocumentDiagnosticRequest=i.DocumentDiagnosticReportKind=i.DiagnosticServerCancellationData=void 0;const e=mi,t=mt,n=ft;(function(r){function s(o){const a=o;return a&&t.boolean(a.retriggerRequest)}r.is=s})(i.DiagnosticServerCancellationData||(i.DiagnosticServerCancellationData={})),function(r){r.Full="full",r.Unchanged="unchanged"}(i.DocumentDiagnosticReportKind||(i.DocumentDiagnosticReportKind={})),function(r){r.method="textDocument/diagnostic",r.messageDirection=n.MessageDirection.clientToServer,r.type=new n.ProtocolRequestType(r.method),r.partialResult=new e.ProgressType}(i.DocumentDiagnosticRequest||(i.DocumentDiagnosticRequest={})),function(r){r.method="workspace/diagnostic",r.messageDirection=n.MessageDirection.clientToServer,r.type=new n.ProtocolRequestType(r.method),r.partialResult=new e.ProgressType}(i.WorkspaceDiagnosticRequest||(i.WorkspaceDiagnosticRequest={})),function(r){r.method="workspace/diagnostic/refresh",r.messageDirection=n.MessageDirection.clientToServer,r.type=new n.ProtocolRequestType0(r.method)}(i.DiagnosticRefreshRequest||(i.DiagnosticRefreshRequest={}))})(ey);var ty={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DidCloseNotebookDocumentNotification=i.DidSaveNotebookDocumentNotification=i.DidChangeNotebookDocumentNotification=i.NotebookCellArrayChange=i.DidOpenNotebookDocumentNotification=i.NotebookDocumentSyncRegistrationType=i.NotebookDocument=i.NotebookCell=i.ExecutionSummary=i.NotebookCellKind=void 0;const e=ep,t=mt,n=ft;var r;(function(c){c.Markup=1,c.Code=2;function u(l){return l===1||l===2}c.is=u})(r=i.NotebookCellKind||(i.NotebookCellKind={}));var s;(function(c){function u(h,d){const p={executionOrder:h};return(d===!0||d===!1)&&(p.success=d),p}c.create=u;function l(h){const d=h;return t.objectLiteral(d)&&e.uinteger.is(d.executionOrder)&&(d.success===void 0||t.boolean(d.success))}c.is=l;function g(h,d){return h===d?!0:h==null||d===null||d===void 0?!1:h.executionOrder===d.executionOrder&&h.success===d.success}c.equals=g})(s=i.ExecutionSummary||(i.ExecutionSummary={}));var o;(function(c){function u(d,p){return{kind:d,document:p}}c.create=u;function l(d){const p=d;return t.objectLiteral(p)&&r.is(p.kind)&&e.DocumentUri.is(p.document)&&(p.metadata===void 0||t.objectLiteral(p.metadata))}c.is=l;function g(d,p){const _=new Set;return d.document!==p.document&&_.add("document"),d.kind!==p.kind&&_.add("kind"),d.executionSummary!==p.executionSummary&&_.add("executionSummary"),(d.metadata!==void 0||p.metadata!==void 0)&&!h(d.metadata,p.metadata)&&_.add("metadata"),(d.executionSummary!==void 0||p.executionSummary!==void 0)&&!s.equals(d.executionSummary,p.executionSummary)&&_.add("executionSummary"),_}c.diff=g;function h(d,p){if(d===p)return!0;if(d==null||p===null||p===void 0||typeof d!=typeof p||typeof d!="object")return!1;const _=Array.isArray(d),b=Array.isArray(p);if(_!==b)return!1;if(_&&b){if(d.length!==p.length)return!1;for(let k=0;k<d.length;k++)if(!h(d[k],p[k]))return!1}if(t.objectLiteral(d)&&t.objectLiteral(p)){const k=Object.keys(d),y=Object.keys(p);if(k.length!==y.length||(k.sort(),y.sort(),!h(k,y)))return!1;for(let E=0;E<k.length;E++){const M=k[E];if(!h(d[M],p[M]))return!1}}return!0}})(o=i.NotebookCell||(i.NotebookCell={})),function(c){function u(g,h,d,p){return{uri:g,notebookType:h,version:d,cells:p}}c.create=u;function l(g){const h=g;return t.objectLiteral(h)&&t.string(h.uri)&&e.integer.is(h.version)&&t.typedArray(h.cells,o.is)}c.is=l}(i.NotebookDocument||(i.NotebookDocument={}));var a;(function(c){c.method="notebookDocument/sync",c.messageDirection=n.MessageDirection.clientToServer,c.type=new n.RegistrationType(c.method)})(a=i.NotebookDocumentSyncRegistrationType||(i.NotebookDocumentSyncRegistrationType={})),function(c){c.method="notebookDocument/didOpen",c.messageDirection=n.MessageDirection.clientToServer,c.type=new n.ProtocolNotificationType(c.method),c.registrationMethod=a.method}(i.DidOpenNotebookDocumentNotification||(i.DidOpenNotebookDocumentNotification={})),function(c){function u(g){const h=g;return t.objectLiteral(h)&&e.uinteger.is(h.start)&&e.uinteger.is(h.deleteCount)&&(h.cells===void 0||t.typedArray(h.cells,o.is))}c.is=u;function l(g,h,d){const p={start:g,deleteCount:h};return d!==void 0&&(p.cells=d),p}c.create=l}(i.NotebookCellArrayChange||(i.NotebookCellArrayChange={})),function(c){c.method="notebookDocument/didChange",c.messageDirection=n.MessageDirection.clientToServer,c.type=new n.ProtocolNotificationType(c.method),c.registrationMethod=a.method}(i.DidChangeNotebookDocumentNotification||(i.DidChangeNotebookDocumentNotification={})),function(c){c.method="notebookDocument/didSave",c.messageDirection=n.MessageDirection.clientToServer,c.type=new n.ProtocolNotificationType(c.method),c.registrationMethod=a.method}(i.DidSaveNotebookDocumentNotification||(i.DidSaveNotebookDocumentNotification={})),function(c){c.method="notebookDocument/didClose",c.messageDirection=n.MessageDirection.clientToServer,c.type=new n.ProtocolNotificationType(c.method),c.registrationMethod=a.method}(i.DidCloseNotebookDocumentNotification||(i.DidCloseNotebookDocumentNotification={}))})(ty);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.WorkspaceSymbolRequest=i.CodeActionResolveRequest=i.CodeActionRequest=i.DocumentSymbolRequest=i.DocumentHighlightRequest=i.ReferencesRequest=i.DefinitionRequest=i.SignatureHelpRequest=i.SignatureHelpTriggerKind=i.HoverRequest=i.CompletionResolveRequest=i.CompletionRequest=i.CompletionTriggerKind=i.PublishDiagnosticsNotification=i.WatchKind=i.RelativePattern=i.FileChangeType=i.DidChangeWatchedFilesNotification=i.WillSaveTextDocumentWaitUntilRequest=i.WillSaveTextDocumentNotification=i.TextDocumentSaveReason=i.DidSaveTextDocumentNotification=i.DidCloseTextDocumentNotification=i.DidChangeTextDocumentNotification=i.TextDocumentContentChangeEvent=i.DidOpenTextDocumentNotification=i.TextDocumentSyncKind=i.TelemetryEventNotification=i.LogMessageNotification=i.ShowMessageRequest=i.ShowMessageNotification=i.MessageType=i.DidChangeConfigurationNotification=i.ExitNotification=i.ShutdownRequest=i.InitializedNotification=i.InitializeErrorCodes=i.InitializeRequest=i.WorkDoneProgressOptions=i.TextDocumentRegistrationOptions=i.StaticRegistrationOptions=i.PositionEncodingKind=i.FailureHandlingKind=i.ResourceOperationKind=i.UnregistrationRequest=i.RegistrationRequest=i.DocumentSelector=i.NotebookCellTextDocumentFilter=i.NotebookDocumentFilter=i.TextDocumentFilter=void 0,i.TypeHierarchySubtypesRequest=i.TypeHierarchyPrepareRequest=i.MonikerRequest=i.MonikerKind=i.UniquenessLevel=i.WillDeleteFilesRequest=i.DidDeleteFilesNotification=i.WillRenameFilesRequest=i.DidRenameFilesNotification=i.WillCreateFilesRequest=i.DidCreateFilesNotification=i.FileOperationPatternKind=i.LinkedEditingRangeRequest=i.ShowDocumentRequest=i.SemanticTokensRegistrationType=i.SemanticTokensRefreshRequest=i.SemanticTokensRangeRequest=i.SemanticTokensDeltaRequest=i.SemanticTokensRequest=i.TokenFormat=i.CallHierarchyPrepareRequest=i.CallHierarchyOutgoingCallsRequest=i.CallHierarchyIncomingCallsRequest=i.WorkDoneProgressCancelNotification=i.WorkDoneProgressCreateRequest=i.WorkDoneProgress=i.SelectionRangeRequest=i.DeclarationRequest=i.FoldingRangeRequest=i.ColorPresentationRequest=i.DocumentColorRequest=i.ConfigurationRequest=i.DidChangeWorkspaceFoldersNotification=i.WorkspaceFoldersRequest=i.TypeDefinitionRequest=i.ImplementationRequest=i.ApplyWorkspaceEditRequest=i.ExecuteCommandRequest=i.PrepareRenameRequest=i.RenameRequest=i.PrepareSupportDefaultBehavior=i.DocumentOnTypeFormattingRequest=i.DocumentRangeFormattingRequest=i.DocumentFormattingRequest=i.DocumentLinkResolveRequest=i.DocumentLinkRequest=i.CodeLensRefreshRequest=i.CodeLensResolveRequest=i.CodeLensRequest=i.WorkspaceSymbolResolveRequest=void 0,i.DidCloseNotebookDocumentNotification=i.DidSaveNotebookDocumentNotification=i.DidChangeNotebookDocumentNotification=i.NotebookCellArrayChange=i.DidOpenNotebookDocumentNotification=i.NotebookDocumentSyncRegistrationType=i.NotebookDocument=i.NotebookCell=i.ExecutionSummary=i.NotebookCellKind=i.DiagnosticRefreshRequest=i.WorkspaceDiagnosticRequest=i.DocumentDiagnosticRequest=i.DocumentDiagnosticReportKind=i.DiagnosticServerCancellationData=i.InlayHintRefreshRequest=i.InlayHintResolveRequest=i.InlayHintRequest=i.InlineValueRefreshRequest=i.InlineValueRequest=i.TypeHierarchySupertypesRequest=void 0;const e=ft,t=ep,n=mt,r=O_;Object.defineProperty(i,"ImplementationRequest",{enumerable:!0,get:function(){return r.ImplementationRequest}});const s=$_;Object.defineProperty(i,"TypeDefinitionRequest",{enumerable:!0,get:function(){return s.TypeDefinitionRequest}});const o=N_;Object.defineProperty(i,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return o.WorkspaceFoldersRequest}}),Object.defineProperty(i,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return o.DidChangeWorkspaceFoldersNotification}});const a=H_;Object.defineProperty(i,"ConfigurationRequest",{enumerable:!0,get:function(){return a.ConfigurationRequest}});const c=q_;Object.defineProperty(i,"DocumentColorRequest",{enumerable:!0,get:function(){return c.DocumentColorRequest}}),Object.defineProperty(i,"ColorPresentationRequest",{enumerable:!0,get:function(){return c.ColorPresentationRequest}});const u=W_;Object.defineProperty(i,"FoldingRangeRequest",{enumerable:!0,get:function(){return u.FoldingRangeRequest}});const l=U_;Object.defineProperty(i,"DeclarationRequest",{enumerable:!0,get:function(){return l.DeclarationRequest}});const g=j_;Object.defineProperty(i,"SelectionRangeRequest",{enumerable:!0,get:function(){return g.SelectionRangeRequest}});const h=z_;Object.defineProperty(i,"WorkDoneProgress",{enumerable:!0,get:function(){return h.WorkDoneProgress}}),Object.defineProperty(i,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return h.WorkDoneProgressCreateRequest}}),Object.defineProperty(i,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return h.WorkDoneProgressCancelNotification}});const d=B_;Object.defineProperty(i,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return d.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(i,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return d.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(i,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return d.CallHierarchyPrepareRequest}});const p=V_;Object.defineProperty(i,"TokenFormat",{enumerable:!0,get:function(){return p.TokenFormat}}),Object.defineProperty(i,"SemanticTokensRequest",{enumerable:!0,get:function(){return p.SemanticTokensRequest}}),Object.defineProperty(i,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return p.SemanticTokensDeltaRequest}}),Object.defineProperty(i,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return p.SemanticTokensRangeRequest}}),Object.defineProperty(i,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return p.SemanticTokensRefreshRequest}}),Object.defineProperty(i,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return p.SemanticTokensRegistrationType}});const _=K_;Object.defineProperty(i,"ShowDocumentRequest",{enumerable:!0,get:function(){return _.ShowDocumentRequest}});const b=G_;Object.defineProperty(i,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return b.LinkedEditingRangeRequest}});const k=J_;Object.defineProperty(i,"FileOperationPatternKind",{enumerable:!0,get:function(){return k.FileOperationPatternKind}}),Object.defineProperty(i,"DidCreateFilesNotification",{enumerable:!0,get:function(){return k.DidCreateFilesNotification}}),Object.defineProperty(i,"WillCreateFilesRequest",{enumerable:!0,get:function(){return k.WillCreateFilesRequest}}),Object.defineProperty(i,"DidRenameFilesNotification",{enumerable:!0,get:function(){return k.DidRenameFilesNotification}}),Object.defineProperty(i,"WillRenameFilesRequest",{enumerable:!0,get:function(){return k.WillRenameFilesRequest}}),Object.defineProperty(i,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return k.DidDeleteFilesNotification}}),Object.defineProperty(i,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return k.WillDeleteFilesRequest}});const y=Q_;Object.defineProperty(i,"UniquenessLevel",{enumerable:!0,get:function(){return y.UniquenessLevel}}),Object.defineProperty(i,"MonikerKind",{enumerable:!0,get:function(){return y.MonikerKind}}),Object.defineProperty(i,"MonikerRequest",{enumerable:!0,get:function(){return y.MonikerRequest}});const E=X_;Object.defineProperty(i,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return E.TypeHierarchyPrepareRequest}}),Object.defineProperty(i,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return E.TypeHierarchySubtypesRequest}}),Object.defineProperty(i,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return E.TypeHierarchySupertypesRequest}});const M=Y_;Object.defineProperty(i,"InlineValueRequest",{enumerable:!0,get:function(){return M.InlineValueRequest}}),Object.defineProperty(i,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return M.InlineValueRefreshRequest}});const q=Z_;Object.defineProperty(i,"InlayHintRequest",{enumerable:!0,get:function(){return q.InlayHintRequest}}),Object.defineProperty(i,"InlayHintResolveRequest",{enumerable:!0,get:function(){return q.InlayHintResolveRequest}}),Object.defineProperty(i,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return q.InlayHintRefreshRequest}});const J=ey;Object.defineProperty(i,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return J.DiagnosticServerCancellationData}}),Object.defineProperty(i,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return J.DocumentDiagnosticReportKind}}),Object.defineProperty(i,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return J.DocumentDiagnosticRequest}}),Object.defineProperty(i,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return J.WorkspaceDiagnosticRequest}}),Object.defineProperty(i,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return J.DiagnosticRefreshRequest}});const Q=ty;Object.defineProperty(i,"NotebookCellKind",{enumerable:!0,get:function(){return Q.NotebookCellKind}}),Object.defineProperty(i,"ExecutionSummary",{enumerable:!0,get:function(){return Q.ExecutionSummary}}),Object.defineProperty(i,"NotebookCell",{enumerable:!0,get:function(){return Q.NotebookCell}}),Object.defineProperty(i,"NotebookDocument",{enumerable:!0,get:function(){return Q.NotebookDocument}}),Object.defineProperty(i,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Q.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(i,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Q.DidOpenNotebookDocumentNotification}}),Object.defineProperty(i,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Q.NotebookCellArrayChange}}),Object.defineProperty(i,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Q.DidChangeNotebookDocumentNotification}}),Object.defineProperty(i,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Q.DidSaveNotebookDocumentNotification}}),Object.defineProperty(i,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Q.DidCloseNotebookDocumentNotification}});var I;(function(m){function W(fe){const L=fe;return n.string(L.language)||n.string(L.scheme)||n.string(L.pattern)}m.is=W})(I=i.TextDocumentFilter||(i.TextDocumentFilter={}));var j;(function(m){function W(fe){const L=fe;return n.objectLiteral(L)&&(n.string(L.notebookType)||n.string(L.scheme)||n.string(L.pattern))}m.is=W})(j=i.NotebookDocumentFilter||(i.NotebookDocumentFilter={}));var Y;(function(m){function W(fe){const L=fe;return n.objectLiteral(L)&&(n.string(L.notebook)||j.is(L.notebook))&&(L.language===void 0||n.string(L.language))}m.is=W})(Y=i.NotebookCellTextDocumentFilter||(i.NotebookCellTextDocumentFilter={}));var Z;(function(m){function W(fe){if(!Array.isArray(fe))return!1;for(let L of fe)if(!n.string(L)&&!I.is(L)&&!Y.is(L))return!1;return!0}m.is=W})(Z=i.DocumentSelector||(i.DocumentSelector={})),function(m){m.method="client/registerCapability",m.messageDirection=e.MessageDirection.serverToClient,m.type=new e.ProtocolRequestType(m.method)}(i.RegistrationRequest||(i.RegistrationRequest={})),function(m){m.method="client/unregisterCapability",m.messageDirection=e.MessageDirection.serverToClient,m.type=new e.ProtocolRequestType(m.method)}(i.UnregistrationRequest||(i.UnregistrationRequest={})),function(m){m.Create="create",m.Rename="rename",m.Delete="delete"}(i.ResourceOperationKind||(i.ResourceOperationKind={})),function(m){m.Abort="abort",m.Transactional="transactional",m.TextOnlyTransactional="textOnlyTransactional",m.Undo="undo"}(i.FailureHandlingKind||(i.FailureHandlingKind={})),function(m){m.UTF8="utf-8",m.UTF16="utf-16",m.UTF32="utf-32"}(i.PositionEncodingKind||(i.PositionEncodingKind={})),function(m){function W(fe){const L=fe;return L&&n.string(L.id)&&L.id.length>0}m.hasId=W}(i.StaticRegistrationOptions||(i.StaticRegistrationOptions={})),function(m){function W(fe){const L=fe;return L&&(L.documentSelector===null||Z.is(L.documentSelector))}m.is=W}(i.TextDocumentRegistrationOptions||(i.TextDocumentRegistrationOptions={})),function(m){function W(L){const ee=L;return n.objectLiteral(ee)&&(ee.workDoneProgress===void 0||n.boolean(ee.workDoneProgress))}m.is=W;function fe(L){const ee=L;return ee&&n.boolean(ee.workDoneProgress)}m.hasWorkDoneProgress=fe}(i.WorkDoneProgressOptions||(i.WorkDoneProgressOptions={})),function(m){m.method="initialize",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.InitializeRequest||(i.InitializeRequest={})),function(m){m.unknownProtocolVersion=1}(i.InitializeErrorCodes||(i.InitializeErrorCodes={})),function(m){m.method="initialized",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolNotificationType(m.method)}(i.InitializedNotification||(i.InitializedNotification={})),function(m){m.method="shutdown",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType0(m.method)}(i.ShutdownRequest||(i.ShutdownRequest={})),function(m){m.method="exit",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolNotificationType0(m.method)}(i.ExitNotification||(i.ExitNotification={})),function(m){m.method="workspace/didChangeConfiguration",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolNotificationType(m.method)}(i.DidChangeConfigurationNotification||(i.DidChangeConfigurationNotification={})),function(m){m.Error=1,m.Warning=2,m.Info=3,m.Log=4}(i.MessageType||(i.MessageType={})),function(m){m.method="window/showMessage",m.messageDirection=e.MessageDirection.serverToClient,m.type=new e.ProtocolNotificationType(m.method)}(i.ShowMessageNotification||(i.ShowMessageNotification={})),function(m){m.method="window/showMessageRequest",m.messageDirection=e.MessageDirection.serverToClient,m.type=new e.ProtocolRequestType(m.method)}(i.ShowMessageRequest||(i.ShowMessageRequest={})),function(m){m.method="window/logMessage",m.messageDirection=e.MessageDirection.serverToClient,m.type=new e.ProtocolNotificationType(m.method)}(i.LogMessageNotification||(i.LogMessageNotification={})),function(m){m.method="telemetry/event",m.messageDirection=e.MessageDirection.serverToClient,m.type=new e.ProtocolNotificationType(m.method)}(i.TelemetryEventNotification||(i.TelemetryEventNotification={})),function(m){m.None=0,m.Full=1,m.Incremental=2}(i.TextDocumentSyncKind||(i.TextDocumentSyncKind={})),function(m){m.method="textDocument/didOpen",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolNotificationType(m.method)}(i.DidOpenTextDocumentNotification||(i.DidOpenTextDocumentNotification={})),function(m){function W(L){let ee=L;return ee!=null&&typeof ee.text=="string"&&ee.range!==void 0&&(ee.rangeLength===void 0||typeof ee.rangeLength=="number")}m.isIncremental=W;function fe(L){let ee=L;return ee!=null&&typeof ee.text=="string"&&ee.range===void 0&&ee.rangeLength===void 0}m.isFull=fe}(i.TextDocumentContentChangeEvent||(i.TextDocumentContentChangeEvent={})),function(m){m.method="textDocument/didChange",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolNotificationType(m.method)}(i.DidChangeTextDocumentNotification||(i.DidChangeTextDocumentNotification={})),function(m){m.method="textDocument/didClose",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolNotificationType(m.method)}(i.DidCloseTextDocumentNotification||(i.DidCloseTextDocumentNotification={})),function(m){m.method="textDocument/didSave",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolNotificationType(m.method)}(i.DidSaveTextDocumentNotification||(i.DidSaveTextDocumentNotification={})),function(m){m.Manual=1,m.AfterDelay=2,m.FocusOut=3}(i.TextDocumentSaveReason||(i.TextDocumentSaveReason={})),function(m){m.method="textDocument/willSave",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolNotificationType(m.method)}(i.WillSaveTextDocumentNotification||(i.WillSaveTextDocumentNotification={})),function(m){m.method="textDocument/willSaveWaitUntil",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.WillSaveTextDocumentWaitUntilRequest||(i.WillSaveTextDocumentWaitUntilRequest={})),function(m){m.method="workspace/didChangeWatchedFiles",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolNotificationType(m.method)}(i.DidChangeWatchedFilesNotification||(i.DidChangeWatchedFilesNotification={})),function(m){m.Created=1,m.Changed=2,m.Deleted=3}(i.FileChangeType||(i.FileChangeType={})),function(m){function W(fe){const L=fe;return n.objectLiteral(L)&&(t.URI.is(L.baseUri)||t.WorkspaceFolder.is(L.baseUri))&&n.string(L.pattern)}m.is=W}(i.RelativePattern||(i.RelativePattern={})),function(m){m.Create=1,m.Change=2,m.Delete=4}(i.WatchKind||(i.WatchKind={})),function(m){m.method="textDocument/publishDiagnostics",m.messageDirection=e.MessageDirection.serverToClient,m.type=new e.ProtocolNotificationType(m.method)}(i.PublishDiagnosticsNotification||(i.PublishDiagnosticsNotification={})),function(m){m.Invoked=1,m.TriggerCharacter=2,m.TriggerForIncompleteCompletions=3}(i.CompletionTriggerKind||(i.CompletionTriggerKind={})),function(m){m.method="textDocument/completion",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.CompletionRequest||(i.CompletionRequest={})),function(m){m.method="completionItem/resolve",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.CompletionResolveRequest||(i.CompletionResolveRequest={})),function(m){m.method="textDocument/hover",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.HoverRequest||(i.HoverRequest={})),function(m){m.Invoked=1,m.TriggerCharacter=2,m.ContentChange=3}(i.SignatureHelpTriggerKind||(i.SignatureHelpTriggerKind={})),function(m){m.method="textDocument/signatureHelp",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.SignatureHelpRequest||(i.SignatureHelpRequest={})),function(m){m.method="textDocument/definition",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.DefinitionRequest||(i.DefinitionRequest={})),function(m){m.method="textDocument/references",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.ReferencesRequest||(i.ReferencesRequest={})),function(m){m.method="textDocument/documentHighlight",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.DocumentHighlightRequest||(i.DocumentHighlightRequest={})),function(m){m.method="textDocument/documentSymbol",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.DocumentSymbolRequest||(i.DocumentSymbolRequest={})),function(m){m.method="textDocument/codeAction",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.CodeActionRequest||(i.CodeActionRequest={})),function(m){m.method="codeAction/resolve",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.CodeActionResolveRequest||(i.CodeActionResolveRequest={})),function(m){m.method="workspace/symbol",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.WorkspaceSymbolRequest||(i.WorkspaceSymbolRequest={})),function(m){m.method="workspaceSymbol/resolve",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.WorkspaceSymbolResolveRequest||(i.WorkspaceSymbolResolveRequest={})),function(m){m.method="textDocument/codeLens",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.CodeLensRequest||(i.CodeLensRequest={})),function(m){m.method="codeLens/resolve",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.CodeLensResolveRequest||(i.CodeLensResolveRequest={})),function(m){m.method="workspace/codeLens/refresh",m.messageDirection=e.MessageDirection.serverToClient,m.type=new e.ProtocolRequestType0(m.method)}(i.CodeLensRefreshRequest||(i.CodeLensRefreshRequest={})),function(m){m.method="textDocument/documentLink",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.DocumentLinkRequest||(i.DocumentLinkRequest={})),function(m){m.method="documentLink/resolve",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.DocumentLinkResolveRequest||(i.DocumentLinkResolveRequest={})),function(m){m.method="textDocument/formatting",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.DocumentFormattingRequest||(i.DocumentFormattingRequest={})),function(m){m.method="textDocument/rangeFormatting",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.DocumentRangeFormattingRequest||(i.DocumentRangeFormattingRequest={})),function(m){m.method="textDocument/onTypeFormatting",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.DocumentOnTypeFormattingRequest||(i.DocumentOnTypeFormattingRequest={})),function(m){m.Identifier=1}(i.PrepareSupportDefaultBehavior||(i.PrepareSupportDefaultBehavior={})),function(m){m.method="textDocument/rename",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.RenameRequest||(i.RenameRequest={})),function(m){m.method="textDocument/prepareRename",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.PrepareRenameRequest||(i.PrepareRenameRequest={})),function(m){m.method="workspace/executeCommand",m.messageDirection=e.MessageDirection.clientToServer,m.type=new e.ProtocolRequestType(m.method)}(i.ExecuteCommandRequest||(i.ExecuteCommandRequest={})),function(m){m.method="workspace/applyEdit",m.messageDirection=e.MessageDirection.serverToClient,m.type=new e.ProtocolRequestType("workspace/applyEdit")}(i.ApplyWorkspaceEditRequest||(i.ApplyWorkspaceEditRequest={}))})(M_);var gu={};Object.defineProperty(gu,"__esModule",{value:!0});gu.createProtocolConnection=void 0;const Mm=mi;function pk(i,e,t,n){return Mm.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,Mm.createMessageConnection)(i,e,t,n)}gu.createProtocolConnection=pk;(function(i){var e=yn&&yn.__createBinding||(Object.create?function(r,s,o,a){a===void 0&&(a=o);var c=Object.getOwnPropertyDescriptor(s,o);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(r,a,c)}:function(r,s,o,a){a===void 0&&(a=o),r[a]=s[o]}),t=yn&&yn.__exportStar||function(r,s){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,r,o)};Object.defineProperty(i,"__esModule",{value:!0}),i.LSPErrorCodes=i.createProtocolConnection=void 0,t(mi,i),t(ep,i),t(ft,i),t(M_,i);var n=gu;Object.defineProperty(i,"createProtocolConnection",{enumerable:!0,get:function(){return n.createProtocolConnection}}),function(r){r.lspReservedErrorRangeStart=-32899,r.RequestFailed=-32803,r.ServerCancelled=-32802,r.ContentModified=-32801,r.RequestCancelled=-32800,r.lspReservedErrorRangeEnd=-32800}(i.LSPErrorCodes||(i.LSPErrorCodes={}))})(F_);(function(i){var e=yn&&yn.__createBinding||(Object.create?function(s,o,a,c){c===void 0&&(c=a);var u=Object.getOwnPropertyDescriptor(o,a);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(s,c,u)}:function(s,o,a,c){c===void 0&&(c=a),s[c]=o[a]}),t=yn&&yn.__exportStar||function(s,o){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&e(o,s,a)};Object.defineProperty(i,"__esModule",{value:!0}),i.createProtocolConnection=void 0;const n=Df.exports;t(Df.exports,i),t(F_,i);function r(s,o,a,c){return(0,n.createMessageConnection)(s,o,a,c)}i.createProtocolConnection=r})(Se);var pu={},Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.asPromise=Ve.thenable=Ve.typedArray=Ve.stringArray=Ve.array=Ve.func=Ve.error=Ve.number=Ve.string=Ve.boolean=void 0;function mk(i){return i===!0||i===!1}Ve.boolean=mk;function ny(i){return typeof i=="string"||i instanceof String}Ve.string=ny;function vk(i){return typeof i=="number"||i instanceof Number}Ve.number=vk;function _k(i){return i instanceof Error}Ve.error=_k;function iy(i){return typeof i=="function"}Ve.func=iy;function ry(i){return Array.isArray(i)}Ve.array=ry;function yk(i){return ry(i)&&i.every(e=>ny(e))}Ve.stringArray=yk;function wk(i,e){return Array.isArray(i)&&i.every(e)}Ve.typedArray=wk;function sy(i){return i&&iy(i.then)}Ve.thenable=sy;function bk(i){return i instanceof Promise?i:sy(i)?new Promise((e,t)=>{i.then(n=>e(n),n=>t(n))}):Promise.resolve(i)}Ve.asPromise=bk;var It={};Object.defineProperty(It,"__esModule",{value:!0});It.forEach=It.mapAsync=It.map=It.clearTestMode=It.setTestMode=It.Semaphore=It.Delayer=void 0;const aa=Se;class Ck{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(t>=0||this.timeout===void 0)&&(this.timeout=(0,aa.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}}It.Delayer=Ck;class Sk{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,aa.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}It.Semaphore=Sk;let tp=!1;function Dk(){tp=!0}It.setTestMode=Dk;function Ek(){tp=!1}It.clearTestMode=Ek;const Am=15;class np{constructor(e=Am){this.yieldAfter=tp===!0?Math.max(e,2):Math.max(e,Am),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){const e=Date.now()-this.startTime,t=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||t<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}}async function Tk(i,e,t,n){if(i.length===0)return[];const r=new Array(i.length),s=new np(n?.yieldAfter);function o(c){s.start();for(let u=c;u<i.length;u++)if(r[u]=e(i[u]),s.shouldYield())return n?.yieldCallback&&n.yieldCallback(),u+1;return-1}let a=o(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(c=>{(0,aa.RAL)().timer.setImmediate(()=>{c(o(a))})});return r}It.map=Tk;async function kk(i,e,t,n){if(i.length===0)return[];const r=new Array(i.length),s=new np(n?.yieldAfter);async function o(c){s.start();for(let u=c;u<i.length;u++)if(r[u]=await e(i[u],t),s.shouldYield())return n?.yieldCallback&&n.yieldCallback(),u+1;return-1}let a=await o(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(c=>{(0,aa.RAL)().timer.setImmediate(()=>{c(o(a))})});return r}It.mapAsync=kk;async function Pk(i,e,t,n){if(i.length===0)return;const r=new np(n?.yieldAfter);function s(a){r.start();for(let c=a;c<i.length;c++)if(e(i[c]),r.shouldYield())return n?.yieldCallback&&n.yieldCallback(),c+1;return-1}let o=s(0);for(;o!==-1&&!(t!==void 0&&t.isCancellationRequested);)o=await new Promise(a=>{(0,aa.RAL)().timer.setImmediate(()=>{a(s(o))})})}It.forEach=Pk;var mu={};Object.defineProperty(mu,"__esModule",{value:!0});const Rk=we;class Ik extends Rk.CompletionItem{constructor(e){super(e)}}mu.default=Ik;var vu={};Object.defineProperty(vu,"__esModule",{value:!0});const xk=we;class Fk extends xk.CodeLens{constructor(e){super(e)}}vu.default=Fk;var _u={};Object.defineProperty(_u,"__esModule",{value:!0});const Mk=we;class Ak extends Mk.DocumentLink{constructor(e,t){super(e,t)}}_u.default=Ak;var yu={};Object.defineProperty(yu,"__esModule",{value:!0});const Lk=we;class Ok extends Lk.CodeAction{constructor(e,t){super(e),this.data=t}}yu.default=Ok;var ip={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ProtocolDiagnostic=i.DiagnosticCode=void 0;const e=we,t=Ve;(function(r){function s(o){const a=o;return a!=null&&(t.number(a.value)||t.string(a.value))&&t.string(a.target)}r.is=s})(i.DiagnosticCode||(i.DiagnosticCode={}));class n extends e.Diagnostic{constructor(s,o,a,c){super(s,o,a),this.data=c,this.hasDiagnosticCode=!1}}i.ProtocolDiagnostic=n})(ip);var wu={};Object.defineProperty(wu,"__esModule",{value:!0});const $k=we;class Nk extends $k.CallHierarchyItem{constructor(e,t,n,r,s,o,a){super(e,t,n,r,s,o),a!==void 0&&(this.data=a)}}wu.default=Nk;var bu={};Object.defineProperty(bu,"__esModule",{value:!0});const Hk=we;class qk extends Hk.TypeHierarchyItem{constructor(e,t,n,r,s,o,a){super(e,t,n,r,s,o),a!==void 0&&(this.data=a)}}bu.default=qk;var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});const Ta=we;class Wk extends Ta.SymbolInformation{constructor(e,t,n,r,s){const o=!(r instanceof Ta.Uri);super(e,t,n,o?r:new Ta.Location(r,new Ta.Range(0,0,0,0))),this.hasRange=o,s!==void 0&&(this.data=s)}}Cu.default=Wk;var Su={};Object.defineProperty(Su,"__esModule",{value:!0});const Uk=we;class jk extends Uk.InlayHint{constructor(e,t,n){super(e,t,n)}}Su.default=jk;Object.defineProperty(pu,"__esModule",{value:!0});pu.createConverter=void 0;const Dt=we,De=Se,xr=Ve,Lm=It,zk=mu,Bk=vu,Vk=_u,Kk=yu,Om=ip,Gk=wu,Jk=bu,Qk=Cu,Xk=Su;var _g;(function(i){function e(t){const n=t;return n&&!!n.inserting&&!!n.replacing}i.is=e})(_g||(_g={}));function Yk(i){const t=i||(v=>v.toString());function n(v){return t(v)}function r(v){return{uri:t(v.uri)}}function s(v){return{uri:t(v.uri),languageId:v.languageId,version:v.version,text:v.getText()}}function o(v){return{uri:t(v.uri),version:v.version}}function a(v){return{textDocument:s(v)}}function c(v){let F=v;return!!F.document&&!!F.contentChanges}function u(v){let F=v;return!!F.uri&&!!F.version}function l(v){if(u(v))return{textDocument:{uri:t(v.uri),version:v.version},contentChanges:[{text:v.getText()}]};if(c(v)){let F=v.document;return{textDocument:{uri:t(F.uri),version:F.version},contentChanges:v.contentChanges.map(Ae=>{let xe=Ae.range;return{range:{start:{line:xe.start.line,character:xe.start.character},end:{line:xe.end.line,character:xe.end.character}},rangeLength:Ae.rangeLength,text:Ae.text}})}}else throw Error("Unsupported text document change parameter")}function g(v){return{textDocument:r(v)}}function h(v,F=!1){let oe={textDocument:r(v)};return F&&(oe.text=v.getText()),oe}function d(v){switch(v){case Dt.TextDocumentSaveReason.Manual:return De.TextDocumentSaveReason.Manual;case Dt.TextDocumentSaveReason.AfterDelay:return De.TextDocumentSaveReason.AfterDelay;case Dt.TextDocumentSaveReason.FocusOut:return De.TextDocumentSaveReason.FocusOut}return De.TextDocumentSaveReason.Manual}function p(v){return{textDocument:r(v.document),reason:d(v.reason)}}function _(v){return{files:v.files.map(F=>({uri:t(F)}))}}function b(v){return{files:v.files.map(F=>({oldUri:t(F.oldUri),newUri:t(F.newUri)}))}}function k(v){return{files:v.files.map(F=>({uri:t(F)}))}}function y(v){return{files:v.files.map(F=>({uri:t(F)}))}}function E(v){return{files:v.files.map(F=>({oldUri:t(F.oldUri),newUri:t(F.newUri)}))}}function M(v){return{files:v.files.map(F=>({uri:t(F)}))}}function q(v,F){return{textDocument:r(v),position:L(F)}}function J(v){switch(v){case Dt.CompletionTriggerKind.TriggerCharacter:return De.CompletionTriggerKind.TriggerCharacter;case Dt.CompletionTriggerKind.TriggerForIncompleteCompletions:return De.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return De.CompletionTriggerKind.Invoked}}function Q(v,F,oe){return{textDocument:r(v),position:L(F),context:{triggerKind:J(oe.triggerKind),triggerCharacter:oe.triggerCharacter}}}function I(v){switch(v){case Dt.SignatureHelpTriggerKind.Invoke:return De.SignatureHelpTriggerKind.Invoked;case Dt.SignatureHelpTriggerKind.TriggerCharacter:return De.SignatureHelpTriggerKind.TriggerCharacter;case Dt.SignatureHelpTriggerKind.ContentChange:return De.SignatureHelpTriggerKind.ContentChange}}function j(v){return{label:v.label}}function Y(v){return v.map(j)}function Z(v){return{label:v.label,parameters:Y(v.parameters)}}function m(v){return v.map(Z)}function W(v){return v===void 0?v:{signatures:m(v.signatures),activeSignature:v.activeSignature,activeParameter:v.activeParameter}}function fe(v,F,oe){return{textDocument:r(v),position:L(F),context:{isRetrigger:oe.isRetrigger,triggerCharacter:oe.triggerCharacter,triggerKind:I(oe.triggerKind),activeSignatureHelp:W(oe.activeSignatureHelp)}}}function L(v){return{line:v.line,character:v.character}}function ee(v){return v==null?v:{line:v.line>De.uinteger.MAX_VALUE?De.uinteger.MAX_VALUE:v.line,character:v.character>De.uinteger.MAX_VALUE?De.uinteger.MAX_VALUE:v.character}}function ge(v,F){return Lm.map(v,ee,F)}function ie(v){return v==null?v:{start:ee(v.start),end:ee(v.end)}}function ut(v){return v==null?v:De.Location.create(n(v.uri),ie(v.range))}function be(v){switch(v){case Dt.DiagnosticSeverity.Error:return De.DiagnosticSeverity.Error;case Dt.DiagnosticSeverity.Warning:return De.DiagnosticSeverity.Warning;case Dt.DiagnosticSeverity.Information:return De.DiagnosticSeverity.Information;case Dt.DiagnosticSeverity.Hint:return De.DiagnosticSeverity.Hint}}function Ut(v){if(!v)return;let F=[];for(let oe of v){let Ae=Ue(oe);Ae!==void 0&&F.push(Ae)}return F.length>0?F:void 0}function Ue(v){switch(v){case Dt.DiagnosticTag.Unnecessary:return De.DiagnosticTag.Unnecessary;case Dt.DiagnosticTag.Deprecated:return De.DiagnosticTag.Deprecated;default:return}}function yt(v){return{message:v.message,location:ut(v.location)}}function Vt(v){return v.map(yt)}function Qt(v){if(v!=null)return xr.number(v)||xr.string(v)?v:{value:v.value,target:n(v.target)}}function pt(v){const F=De.Diagnostic.create(ie(v.range),v.message),oe=v instanceof Om.ProtocolDiagnostic?v:void 0;oe!==void 0&&oe.data!==void 0&&(F.data=oe.data);const Ae=Qt(v.code);return Om.DiagnosticCode.is(Ae)?oe!==void 0&&oe.hasDiagnosticCode?F.code=Ae:(F.code=Ae.value,F.codeDescription={href:Ae.target}):F.code=Ae,xr.number(v.severity)&&(F.severity=be(v.severity)),Array.isArray(v.tags)&&(F.tags=Ut(v.tags)),v.relatedInformation&&(F.relatedInformation=Vt(v.relatedInformation)),v.source&&(F.source=v.source),F}function Te(v,F){return v==null?v:Lm.map(v,pt,F)}function wt(v,F){switch(v){case"$string":return F;case De.MarkupKind.PlainText:return{kind:v,value:F};case De.MarkupKind.Markdown:return{kind:v,value:F.value};default:return`Unsupported Markup content received. Kind is: ${v}`}}function je(v){switch(v){case Dt.CompletionItemTag.Deprecated:return De.CompletionItemTag.Deprecated}}function dt(v){if(v===void 0)return v;const F=[];for(let oe of v){const Ae=je(oe);Ae!==void 0&&F.push(Ae)}return F}function Xt(v,F){return F!==void 0?F:v+1}function jt(v,F=!1){let oe,Ae;xr.string(v.label)?oe=v.label:(oe=v.label.label,F&&(v.label.detail!==void 0||v.label.description!==void 0)&&(Ae={detail:v.label.detail,description:v.label.description}));let xe={label:oe};Ae!==void 0&&(xe.labelDetails=Ae);let Tt=v instanceof zk.default?v:void 0;v.detail&&(xe.detail=v.detail),v.documentation&&(!Tt||Tt.documentationFormat==="$string"?xe.documentation=v.documentation:xe.documentation=wt(Tt.documentationFormat,v.documentation)),v.filterText&&(xe.filterText=v.filterText),ve(xe,v),xr.number(v.kind)&&(xe.kind=Xt(v.kind,Tt&&Tt.originalItemKind)),v.sortText&&(xe.sortText=v.sortText),v.additionalTextEdits&&(xe.additionalTextEdits=nn(v.additionalTextEdits)),v.commitCharacters&&(xe.commitCharacters=v.commitCharacters.slice()),v.command&&(xe.command=Me(v.command)),(v.preselect===!0||v.preselect===!1)&&(xe.preselect=v.preselect);const Sn=dt(v.tags);if(Tt){if(Tt.data!==void 0&&(xe.data=Tt.data),Tt.deprecated===!0||Tt.deprecated===!1){if(Tt.deprecated===!0&&Sn!==void 0&&Sn.length>0){const Dn=Sn.indexOf(Dt.CompletionItemTag.Deprecated);Dn!==-1&&Sn.splice(Dn,1)}xe.deprecated=Tt.deprecated}Tt.insertTextMode!==void 0&&(xe.insertTextMode=Tt.insertTextMode)}return Sn!==void 0&&Sn.length>0&&(xe.tags=Sn),xe.insertTextMode===void 0&&v.keepWhitespace===!0&&(xe.insertTextMode=De.InsertTextMode.adjustIndentation),xe}function ve(v,F){let oe=De.InsertTextFormat.PlainText,Ae,xe;F.textEdit?(Ae=F.textEdit.newText,xe=F.textEdit.range):F.insertText instanceof Dt.SnippetString?(oe=De.InsertTextFormat.Snippet,Ae=F.insertText.value):Ae=F.insertText,F.range&&(xe=F.range),v.insertTextFormat=oe,F.fromEdit&&Ae!==void 0&&xe!==void 0?v.textEdit=Ot(Ae,xe):v.insertText=Ae}function Ot(v,F){return _g.is(F)?De.InsertReplaceEdit.create(v,ie(F.inserting),ie(F.replacing)):{newText:v,range:ie(F)}}function ln(v){return{range:ie(v.range),newText:v.newText}}function nn(v){return v==null?v:v.map(ln)}function $t(v){return v<=Dt.SymbolKind.TypeParameter?v+1:De.SymbolKind.Property}function le(v){return v}function C(v){return v.map(le)}function P(v,F,oe){return{textDocument:r(v),position:L(F),context:{includeDeclaration:oe.includeDeclaration}}}async function D(v,F){let oe=De.CodeAction.create(v.title);if(v instanceof Kk.default&&v.data!==void 0&&(oe.data=v.data),v.kind!==void 0&&(oe.kind=V(v.kind)),v.diagnostics!==void 0&&(oe.diagnostics=await Te(v.diagnostics,F)),v.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return v.command!==void 0&&(oe.command=Me(v.command)),v.isPreferred!==void 0&&(oe.isPreferred=v.isPreferred),v.disabled!==void 0&&(oe.disabled={reason:v.disabled.reason}),oe}async function U(v,F){if(v==null)return v;let oe;return v.only&&xr.string(v.only.value)&&(oe=[v.only.value]),De.CodeActionContext.create(await Te(v.diagnostics,F),oe,$(v.triggerKind))}function $(v){switch(v){case Dt.CodeActionTriggerKind.Invoke:return De.CodeActionTriggerKind.Invoked;case Dt.CodeActionTriggerKind.Automatic:return De.CodeActionTriggerKind.Automatic;default:return}}function V(v){if(v!=null)return v.value}function pe(v){return v==null?v:De.InlineValueContext.create(v.frameId,ie(v.stoppedLocation))}function Me(v){let F=De.Command.create(v.title,v.command);return v.arguments&&(F.arguments=v.arguments),F}function Ge(v){let F=De.CodeLens.create(ie(v.range));return v.command&&(F.command=Me(v.command)),v instanceof Bk.default&&v.data&&(F.data=v.data),F}function it(v,F){const oe={tabSize:v.tabSize,insertSpaces:v.insertSpaces};return F.trimTrailingWhitespace&&(oe.trimTrailingWhitespace=!0),F.trimFinalNewlines&&(oe.trimFinalNewlines=!0),F.insertFinalNewline&&(oe.insertFinalNewline=!0),oe}function $n(v){return{textDocument:r(v)}}function vi(v){return{textDocument:r(v)}}function ks(v){let F=De.DocumentLink.create(ie(v.range));v.target&&(F.target=n(v.target)),v.tooltip!==void 0&&(F.tooltip=v.tooltip);let oe=v instanceof Vk.default?v:void 0;return oe&&oe.data&&(F.data=oe.data),F}function Er(v){return{textDocument:r(v)}}function Tr(v){const F={name:v.name,kind:$t(v.kind),uri:n(v.uri),range:ie(v.range),selectionRange:ie(v.selectionRange)};return v.detail!==void 0&&v.detail.length>0&&(F.detail=v.detail),v.tags!==void 0&&(F.tags=C(v.tags)),v instanceof Gk.default&&v.data!==void 0&&(F.data=v.data),F}function Ps(v){const F={name:v.name,kind:$t(v.kind),uri:n(v.uri),range:ie(v.range),selectionRange:ie(v.selectionRange)};return v.detail!==void 0&&v.detail.length>0&&(F.detail=v.detail),v.tags!==void 0&&(F.tags=C(v.tags)),v instanceof Jk.default&&v.data!==void 0&&(F.data=v.data),F}function rn(v){const F=v instanceof Qk.default?{name:v.name,kind:$t(v.kind),location:v.hasRange?ut(v.location):{uri:t(v.location.uri)},data:v.data}:{name:v.name,kind:$t(v.kind),location:ut(v.location)};return v.tags!==void 0&&(F.tags=C(v.tags)),v.containerName!==""&&(F.containerName=v.containerName),F}function Rs(v){const F=typeof v.label=="string"?v.label:v.label.map(kr),oe=De.InlayHint.create(ee(v.position),F);return v.kind!==void 0&&(oe.kind=v.kind),v.textEdits!==void 0&&(oe.textEdits=nn(v.textEdits)),v.tooltip!==void 0&&(oe.tooltip=Nn(v.tooltip)),v.paddingLeft!==void 0&&(oe.paddingLeft=v.paddingLeft),v.paddingRight!==void 0&&(oe.paddingRight=v.paddingRight),v instanceof Xk.default&&v.data!==void 0&&(oe.data=v.data),oe}function kr(v){const F=De.InlayHintLabelPart.create(v.value);return v.location!==void 0&&(F.location=ut(v.location)),v.command!==void 0&&(F.command=Me(v.command)),v.tooltip!==void 0&&(F.tooltip=Nn(v.tooltip)),F}function Nn(v){return typeof v=="string"?v:{kind:De.MarkupKind.Markdown,value:v.value}}return{asUri:n,asTextDocumentIdentifier:r,asTextDocumentItem:s,asVersionedTextDocumentIdentifier:o,asOpenTextDocumentParams:a,asChangeTextDocumentParams:l,asCloseTextDocumentParams:g,asSaveTextDocumentParams:h,asWillSaveTextDocumentParams:p,asDidCreateFilesParams:_,asDidRenameFilesParams:b,asDidDeleteFilesParams:k,asWillCreateFilesParams:y,asWillRenameFilesParams:E,asWillDeleteFilesParams:M,asTextDocumentPositionParams:q,asCompletionParams:Q,asSignatureHelpParams:fe,asWorkerPosition:L,asRange:ie,asPosition:ee,asPositions:ge,asLocation:ut,asDiagnosticSeverity:be,asDiagnosticTag:Ue,asDiagnostic:pt,asDiagnostics:Te,asCompletionItem:jt,asTextEdit:ln,asSymbolKind:$t,asSymbolTag:le,asSymbolTags:C,asReferenceParams:P,asCodeAction:D,asCodeActionContext:U,asInlineValueContext:pe,asCommand:Me,asCodeLens:Ge,asFormattingOptions:it,asDocumentSymbolParams:$n,asCodeLensParams:vi,asDocumentLink:ks,asDocumentLinkParams:Er,asCallHierarchyItem:Tr,asTypeHierarchyItem:Ps,asInlayHint:Rs,asWorkspaceSymbol:rn}}pu.createConverter=Yk;var Du={};Object.defineProperty(Du,"__esModule",{value:!0});Du.createConverter=void 0;const te=we,me=Se,fn=Ve,ze=It,Zk=mu,e2=vu,t2=_u,n2=yu,$m=ip,i2=wu,r2=bu,s2=Cu,o2=Su,Nm=Se;var Bc;(function(i){function e(t){let n=t;return n&&fn.string(n.language)&&fn.string(n.value)}i.is=e})(Bc||(Bc={}));function a2(i,e,t){const r=i||(f=>te.Uri.parse(f));function s(f){return r(f)}function o(f){const S=[];for(const A of f)if(typeof A=="string")S.push(A);else if(Nm.NotebookCellTextDocumentFilter.is(A))if(typeof A.notebook=="string")S.push({notebookType:A.notebook,language:A.language});else{const re=A.notebook.notebookType??"*";S.push({notebookType:re,scheme:A.notebook.scheme,pattern:A.notebook.pattern,language:A.language})}else Nm.TextDocumentFilter.is(A)&&S.push({language:A.language,scheme:A.scheme,pattern:A.pattern});return S}async function a(f,S){return ze.map(f,u,S)}function c(f){const S=new Array(f.length);for(let A=0;A<f.length;A++)S[A]=u(f[A]);return S}function u(f){let S=new $m.ProtocolDiagnostic(p(f.range),f.message,b(f.severity),f.data);if(f.code!==void 0){if(typeof f.code=="string"||typeof f.code=="number")me.CodeDescription.is(f.codeDescription)?S.code={value:f.code,target:s(f.codeDescription.href)}:S.code=f.code;else if($m.DiagnosticCode.is(f.code)){S.hasDiagnosticCode=!0;const A=f.code;S.code={value:A.value,target:s(A.target)}}}return f.source&&(S.source=f.source),f.relatedInformation&&(S.relatedInformation=l(f.relatedInformation)),Array.isArray(f.tags)&&(S.tags=g(f.tags)),S}function l(f){const S=new Array(f.length);for(let A=0;A<f.length;A++){const re=f[A];S[A]=new te.DiagnosticRelatedInformation(Ue(re.location),re.message)}return S}function g(f){if(!f)return;let S=[];for(let A of f){let re=h(A);re!==void 0&&S.push(re)}return S.length>0?S:void 0}function h(f){switch(f){case me.DiagnosticTag.Unnecessary:return te.DiagnosticTag.Unnecessary;case me.DiagnosticTag.Deprecated:return te.DiagnosticTag.Deprecated;default:return}}function d(f){return f?new te.Position(f.line,f.character):void 0}function p(f){return f?new te.Range(f.start.line,f.start.character,f.end.line,f.end.character):void 0}async function _(f,S){return ze.map(f,A=>new te.Range(A.start.line,A.start.character,A.end.line,A.end.character),S)}function b(f){if(f==null)return te.DiagnosticSeverity.Error;switch(f){case me.DiagnosticSeverity.Error:return te.DiagnosticSeverity.Error;case me.DiagnosticSeverity.Warning:return te.DiagnosticSeverity.Warning;case me.DiagnosticSeverity.Information:return te.DiagnosticSeverity.Information;case me.DiagnosticSeverity.Hint:return te.DiagnosticSeverity.Hint}return te.DiagnosticSeverity.Error}function k(f){if(fn.string(f))return E(f);if(Bc.is(f))return E().appendCodeblock(f.value,f.language);if(Array.isArray(f)){let S=[];for(let A of f){let re=E();Bc.is(A)?re.appendCodeblock(A.value,A.language):re.appendMarkdown(A),S.push(re)}return S}else return E(f)}function y(f){if(fn.string(f))return f;switch(f.kind){case me.MarkupKind.Markdown:return E(f.value);case me.MarkupKind.PlainText:return f.value;default:return`Unsupported Markup content received. Kind is: ${f.kind}`}}function E(f){let S;if(f===void 0||typeof f=="string")S=new te.MarkdownString(f);else switch(f.kind){case me.MarkupKind.Markdown:S=new te.MarkdownString(f.value);break;case me.MarkupKind.PlainText:S=new te.MarkdownString,S.appendText(f.value);break;default:S=new te.MarkdownString,S.appendText(`Unsupported Markup content received. Kind is: ${f.kind}`);break}return S.isTrusted=e,S.supportHtml=t,S}function M(f){if(!!f)return new te.Hover(k(f.contents),p(f.range))}async function q(f,S,A){if(!f)return;if(Array.isArray(f))return ze.map(f,Hn=>Y(Hn,S),A);const re=f,{defaultRange:Yt,commitCharacters:Nt}=J(re,S),Ke=await ze.map(re.items,Hn=>Y(Hn,Nt,Yt,re.itemDefaults?.insertTextMode,re.itemDefaults?.insertTextFormat,re.itemDefaults?.data),A);return new te.CompletionList(Ke,re.isIncomplete)}function J(f,S){const A=f.itemDefaults?.editRange,re=f.itemDefaults?.commitCharacters??S;return me.Range.is(A)?{defaultRange:p(A),commitCharacters:re}:A!==void 0?{defaultRange:{inserting:p(A.insert),replacing:p(A.replace)},commitCharacters:re}:{defaultRange:void 0,commitCharacters:re}}function Q(f){return me.CompletionItemKind.Text<=f&&f<=me.CompletionItemKind.TypeParameter?[f-1,void 0]:[te.CompletionItemKind.Text,f]}function I(f){switch(f){case me.CompletionItemTag.Deprecated:return te.CompletionItemTag.Deprecated}}function j(f){if(f==null)return[];const S=[];for(const A of f){const re=I(A);re!==void 0&&S.push(re)}return S}function Y(f,S,A,re,Yt,Nt){const Ke=j(f.tags),Hn=Z(f),Ze=new Zk.default(Hn);f.detail&&(Ze.detail=f.detail),f.documentation&&(Ze.documentation=y(f.documentation),Ze.documentationFormat=fn.string(f.documentation)?"$string":f.documentation.kind),f.filterText&&(Ze.filterText=f.filterText);const da=m(f,A,Yt);if(da&&(Ze.insertText=da.text,Ze.range=da.range,Ze.fromEdit=da.fromEdit),fn.number(f.kind)){let[i1,gp]=Q(f.kind);Ze.kind=i1,gp&&(Ze.originalItemKind=gp)}f.sortText&&(Ze.sortText=f.sortText),f.additionalTextEdits&&(Ze.additionalTextEdits=ee(f.additionalTextEdits));const hp=f.commitCharacters!==void 0?fn.stringArray(f.commitCharacters)?f.commitCharacters:void 0:S;hp&&(Ze.commitCharacters=hp.slice()),f.command&&(Ze.command=C(f.command)),(f.deprecated===!0||f.deprecated===!1)&&(Ze.deprecated=f.deprecated,f.deprecated===!0&&Ke.push(te.CompletionItemTag.Deprecated)),(f.preselect===!0||f.preselect===!1)&&(Ze.preselect=f.preselect);const fp=f.data??Nt;fp!==void 0&&(Ze.data=fp),Ke.length>0&&(Ze.tags=Ke);const td=f.insertTextMode??re;return td!==void 0&&(Ze.insertTextMode=td,td===me.InsertTextMode.asIs&&(Ze.keepWhitespace=!0)),Ze}function Z(f){return me.CompletionItemLabelDetails.is(f.labelDetails)?{label:f.label,detail:f.labelDetails.detail,description:f.labelDetails.description}:f.label}function m(f,S,A){const re=f.insertTextFormat??A;if(f.textEdit!==void 0||S!==void 0){const[Yt,Nt]=f.textEdit!==void 0?W(f.textEdit):[S,f.textEditText??f.label];return re===me.InsertTextFormat.Snippet?{text:new te.SnippetString(Nt),range:Yt,fromEdit:!0}:{text:Nt,range:Yt,fromEdit:!0}}else return f.insertText?re===me.InsertTextFormat.Snippet?{text:new te.SnippetString(f.insertText),fromEdit:!1}:{text:f.insertText,fromEdit:!1}:void 0}function W(f){return me.InsertReplaceEdit.is(f)?[{inserting:p(f.insert),replacing:p(f.replace)},f.newText]:[p(f.range),f.newText]}function fe(f){if(!!f)return new te.TextEdit(p(f.range),f.newText)}async function L(f,S){if(!!f)return ze.map(f,fe,S)}function ee(f){if(!f)return;const S=new Array(f.length);for(let A=0;A<f.length;A++)S[A]=fe(f[A]);return S}async function ge(f,S){if(!f)return;let A=new te.SignatureHelp;return fn.number(f.activeSignature)?A.activeSignature=f.activeSignature:A.activeSignature=0,fn.number(f.activeParameter)?A.activeParameter=f.activeParameter:A.activeParameter=0,f.signatures&&(A.signatures=await ie(f.signatures,S)),A}async function ie(f,S){return ze.mapAsync(f,ut,S)}async function ut(f,S){let A=new te.SignatureInformation(f.label);return f.documentation!==void 0&&(A.documentation=y(f.documentation)),f.parameters!==void 0&&(A.parameters=await be(f.parameters,S)),f.activeParameter!==void 0&&(A.activeParameter=f.activeParameter),A}function be(f,S){return ze.map(f,Ut,S)}function Ut(f){let S=new te.ParameterInformation(f.label);return f.documentation&&(S.documentation=y(f.documentation)),S}function Ue(f){return f?new te.Location(r(f.uri),p(f.range)):void 0}async function yt(f,S){if(!!f)return pt(f,S)}async function Vt(f,S){if(!!f)return pt(f,S)}function Qt(f){if(!f)return;let S={targetUri:r(f.targetUri),targetRange:p(f.targetRange),originSelectionRange:p(f.originSelectionRange),targetSelectionRange:p(f.targetSelectionRange)};if(!S.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return S}async function pt(f,S){if(!!f)if(fn.array(f)){if(f.length===0)return[];if(me.LocationLink.is(f[0])){const A=f;return ze.map(A,Qt,S)}else{const A=f;return ze.map(A,Ue,S)}}else return me.LocationLink.is(f)?[Qt(f)]:Ue(f)}async function Te(f,S){if(!!f)return ze.map(f,Ue,S)}async function wt(f,S){if(!!f)return ze.map(f,je,S)}function je(f){let S=new te.DocumentHighlight(p(f.range));return fn.number(f.kind)&&(S.kind=dt(f.kind)),S}function dt(f){switch(f){case me.DocumentHighlightKind.Text:return te.DocumentHighlightKind.Text;case me.DocumentHighlightKind.Read:return te.DocumentHighlightKind.Read;case me.DocumentHighlightKind.Write:return te.DocumentHighlightKind.Write}return te.DocumentHighlightKind.Text}async function Xt(f,S){if(!!f)return ze.map(f,ln,S)}function jt(f){return f<=me.SymbolKind.TypeParameter?f-1:te.SymbolKind.Property}function ve(f){switch(f){case me.SymbolTag.Deprecated:return te.SymbolTag.Deprecated;default:return}}function Ot(f){if(f==null)return;const S=[];for(const A of f){const re=ve(A);re!==void 0&&S.push(re)}return S.length===0?void 0:S}function ln(f){const S=f.data,A=f.location,re=A.range===void 0||S!==void 0?new s2.default(f.name,jt(f.kind),f.containerName??"",A.range===void 0?r(A.uri):new te.Location(r(f.location.uri),p(A.range)),S):new te.SymbolInformation(f.name,jt(f.kind),f.containerName??"",new te.Location(r(f.location.uri),p(A.range)));return le(re,f),re}async function nn(f,S){if(f!=null)return ze.map(f,$t,S)}function $t(f){let S=new te.DocumentSymbol(f.name,f.detail||"",jt(f.kind),p(f.range),p(f.selectionRange));if(le(S,f),f.children!==void 0&&f.children.length>0){let A=[];for(let re of f.children)A.push($t(re));S.children=A}return S}function le(f,S){f.tags=Ot(S.tags),S.deprecated&&(f.tags?f.tags.includes(te.SymbolTag.Deprecated)||(f.tags=f.tags.concat(te.SymbolTag.Deprecated)):f.tags=[te.SymbolTag.Deprecated])}function C(f){let S={title:f.title,command:f.command};return f.arguments&&(S.arguments=f.arguments),S}async function P(f,S){if(!!f)return ze.map(f,C,S)}const D=new Map;D.set(me.CodeActionKind.Empty,te.CodeActionKind.Empty),D.set(me.CodeActionKind.QuickFix,te.CodeActionKind.QuickFix),D.set(me.CodeActionKind.Refactor,te.CodeActionKind.Refactor),D.set(me.CodeActionKind.RefactorExtract,te.CodeActionKind.RefactorExtract),D.set(me.CodeActionKind.RefactorInline,te.CodeActionKind.RefactorInline),D.set(me.CodeActionKind.RefactorRewrite,te.CodeActionKind.RefactorRewrite),D.set(me.CodeActionKind.Source,te.CodeActionKind.Source),D.set(me.CodeActionKind.SourceOrganizeImports,te.CodeActionKind.SourceOrganizeImports);function U(f){if(f==null)return;let S=D.get(f);if(S)return S;let A=f.split(".");S=te.CodeActionKind.Empty;for(let re of A)S=S.append(re);return S}function $(f){if(f!=null)return f.map(S=>U(S))}async function V(f,S){if(f==null)return;let A=new n2.default(f.title,f.data);return f.kind!==void 0&&(A.kind=U(f.kind)),f.diagnostics!==void 0&&(A.diagnostics=c(f.diagnostics)),f.edit!==void 0&&(A.edit=await it(f.edit,S)),f.command!==void 0&&(A.command=C(f.command)),f.isPreferred!==void 0&&(A.isPreferred=f.isPreferred),f.disabled!==void 0&&(A.disabled={reason:f.disabled.reason}),A}function pe(f,S){return ze.mapAsync(f,async A=>me.Command.is(A)?C(A):V(A,S),S)}function Me(f){if(!f)return;let S=new e2.default(p(f.range));return f.command&&(S.command=C(f.command)),f.data!==void 0&&f.data!==null&&(S.data=f.data),S}async function Ge(f,S){if(!!f)return ze.map(f,Me,S)}async function it(f,S){if(!f)return;const A=new Map;if(f.changeAnnotations!==void 0){const Nt=f.changeAnnotations;await ze.forEach(Object.keys(Nt),Ke=>{const Hn=$n(Nt[Ke]);A.set(Ke,Hn)},S)}const re=Nt=>{if(Nt!==void 0)return A.get(Nt)},Yt=new te.WorkspaceEdit;if(f.documentChanges){const Nt=f.documentChanges;await ze.forEach(Nt,Ke=>{if(me.CreateFile.is(Ke))Yt.createFile(r(Ke.uri),Ke.options,re(Ke.annotationId));else if(me.RenameFile.is(Ke))Yt.renameFile(r(Ke.oldUri),r(Ke.newUri),Ke.options,re(Ke.annotationId));else if(me.DeleteFile.is(Ke))Yt.deleteFile(r(Ke.uri),Ke.options,re(Ke.annotationId));else if(me.TextDocumentEdit.is(Ke)){const Hn=r(Ke.textDocument.uri);for(const Ze of Ke.edits)me.AnnotatedTextEdit.is(Ze)?Yt.replace(Hn,p(Ze.range),Ze.newText,re(Ze.annotationId)):Yt.replace(Hn,p(Ze.range),Ze.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(Ke,void 0,4)}`)},S)}else if(f.changes){const Nt=f.changes;await ze.forEach(Object.keys(Nt),Ke=>{Yt.set(r(Ke),ee(Nt[Ke]))},S)}return Yt}function $n(f){if(f!==void 0)return{label:f.label,needsConfirmation:!!f.needsConfirmation,description:f.description}}function vi(f){let S=p(f.range),A=f.target?s(f.target):void 0,re=new t2.default(S,A);return f.tooltip!==void 0&&(re.tooltip=f.tooltip),f.data!==void 0&&f.data!==null&&(re.data=f.data),re}async function ks(f,S){if(!!f)return ze.map(f,vi,S)}function Er(f){return new te.Color(f.red,f.green,f.blue,f.alpha)}function Tr(f){return new te.ColorInformation(p(f.range),Er(f.color))}async function Ps(f,S){if(!!f)return ze.map(f,Tr,S)}function rn(f){let S=new te.ColorPresentation(f.label);return S.additionalTextEdits=ee(f.additionalTextEdits),f.textEdit&&(S.textEdit=fe(f.textEdit)),S}async function Rs(f,S){if(!!f)return ze.map(f,rn,S)}function kr(f){if(f)switch(f){case me.FoldingRangeKind.Comment:return te.FoldingRangeKind.Comment;case me.FoldingRangeKind.Imports:return te.FoldingRangeKind.Imports;case me.FoldingRangeKind.Region:return te.FoldingRangeKind.Region}}function Nn(f){return new te.FoldingRange(f.startLine,f.endLine,kr(f.kind))}async function v(f,S){if(!!f)return ze.map(f,Nn,S)}function F(f){return new te.SelectionRange(p(f.range),f.parent?F(f.parent):void 0)}async function oe(f,S){return Array.isArray(f)?ze.map(f,F,S):[]}function Ae(f){return me.InlineValueText.is(f)?new te.InlineValueText(p(f.range),f.text):me.InlineValueVariableLookup.is(f)?new te.InlineValueVariableLookup(p(f.range),f.variableName,f.caseSensitiveLookup):new te.InlineValueEvaluatableExpression(p(f.range),f.expression)}async function xe(f,S){return Array.isArray(f)?ze.map(f,Ae,S):[]}async function Tt(f,S){const A=typeof f.label=="string"?f.label:await ze.map(f.label,Sn,S),re=new o2.default(d(f.position),A);return f.kind!==void 0&&(re.kind=f.kind),f.textEdits!==void 0&&(re.textEdits=await L(f.textEdits,S)),f.tooltip!==void 0&&(re.tooltip=Dn(f.tooltip)),f.paddingLeft!==void 0&&(re.paddingLeft=f.paddingLeft),f.paddingRight!==void 0&&(re.paddingRight=f.paddingRight),f.data!==void 0&&(re.data=f.data),re}function Sn(f){const S=new te.InlayHintLabelPart(f.value);return f.location!==void 0&&(S.location=Ue(f.location)),f.tooltip!==void 0&&(S.tooltip=Dn(f.tooltip)),f.command!==void 0&&(S.command=C(f.command)),S}function Dn(f){return typeof f=="string"?f:E(f)}async function ua(f,S){if(!!Array.isArray(f))return ze.mapAsync(f,Tt,S)}function Wi(f){if(f===null)return;const S=new i2.default(jt(f.kind),f.name,f.detail||"",s(f.uri),p(f.range),p(f.selectionRange),f.data);return f.tags!==void 0&&(S.tags=Ot(f.tags)),S}async function Is(f,S){if(f!==null)return ze.map(f,Wi,S)}async function xs(f,S){return new te.CallHierarchyIncomingCall(Wi(f.from),await _(f.fromRanges,S))}async function _i(f,S){if(f!==null)return ze.mapAsync(f,xs,S)}async function w(f,S){return new te.CallHierarchyOutgoingCall(Wi(f.to),await _(f.fromRanges,S))}async function O(f,S){if(f!==null)return ze.mapAsync(f,w,S)}async function X(f,S){if(f!=null)return new te.SemanticTokens(new Uint32Array(f.data),f.resultId)}function se(f){return new te.SemanticTokensEdit(f.start,f.deleteCount,f.data!==void 0?new Uint32Array(f.data):void 0)}async function Xe(f,S){if(f!=null)return new te.SemanticTokensEdits(f.edits.map(se),f.resultId)}function Ye(f){return f}async function ct(f,S){if(f!=null)return new te.LinkedEditingRanges(await _(f.ranges,S),St(f.wordPattern))}function St(f){if(f!=null)return new RegExp(f)}function Le(f){if(f===null)return;let S=new r2.default(jt(f.kind),f.name,f.detail||"",s(f.uri),p(f.range),p(f.selectionRange),f.data);return f.tags!==void 0&&(S.tags=Ot(f.tags)),S}async function ot(f,S){if(f!==null)return ze.map(f,Le,S)}function He(f){if(fn.string(f))return f;if(me.RelativePattern.is(f)){if(me.URI.is(f.baseUri))return new te.RelativePattern(s(f.baseUri),f.pattern);if(me.WorkspaceFolder.is(f.baseUri)){const S=te.workspace.getWorkspaceFolder(s(f.baseUri.uri));return S!==void 0?new te.RelativePattern(S,f.pattern):void 0}}}return{asUri:s,asDocumentSelector:o,asDiagnostics:a,asDiagnostic:u,asRange:p,asRanges:_,asPosition:d,asDiagnosticSeverity:b,asDiagnosticTag:h,asHover:M,asCompletionResult:q,asCompletionItem:Y,asTextEdit:fe,asTextEdits:L,asSignatureHelp:ge,asSignatureInformations:ie,asSignatureInformation:ut,asParameterInformations:be,asParameterInformation:Ut,asDeclarationResult:yt,asDefinitionResult:Vt,asLocation:Ue,asReferences:Te,asDocumentHighlights:wt,asDocumentHighlight:je,asDocumentHighlightKind:dt,asSymbolKind:jt,asSymbolTag:ve,asSymbolTags:Ot,asSymbolInformations:Xt,asSymbolInformation:ln,asDocumentSymbols:nn,asDocumentSymbol:$t,asCommand:C,asCommands:P,asCodeAction:V,asCodeActionKind:U,asCodeActionKinds:$,asCodeActionResult:pe,asCodeLens:Me,asCodeLenses:Ge,asWorkspaceEdit:it,asDocumentLink:vi,asDocumentLinks:ks,asFoldingRangeKind:kr,asFoldingRange:Nn,asFoldingRanges:v,asColor:Er,asColorInformation:Tr,asColorInformations:Ps,asColorPresentation:rn,asColorPresentations:Rs,asSelectionRange:F,asSelectionRanges:oe,asInlineValue:Ae,asInlineValues:xe,asInlayHint:Tt,asInlayHints:ua,asSemanticTokensLegend:Ye,asSemanticTokens:X,asSemanticTokensEdit:se,asSemanticTokensEdits:Xe,asCallHierarchyItem:Wi,asCallHierarchyItems:Is,asCallHierarchyIncomingCall:xs,asCallHierarchyIncomingCalls:_i,asCallHierarchyOutgoingCall:w,asCallHierarchyOutgoingCalls:O,asLinkedEditingRanges:ct,asTypeHierarchyItem:Le,asTypeHierarchyItems:ot,asGlobPattern:He}}Du.createConverter=a2;var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.generateUuid=Ne.parse=Ne.isUUID=Ne.v4=Ne.empty=void 0;class rp{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class Pe extends rp{constructor(){super([Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),"-",Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),"-","4",Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),"-",Pe._oneOf(Pe._timeHighBits),Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),"-",Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),Pe._randomHex(),Pe._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return Pe._oneOf(Pe._chars)}}Pe._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Pe._timeHighBits=["8","9","a","b"];Ne.empty=new rp("00000000-0000-0000-0000-000000000000");function oy(){return new Pe}Ne.v4=oy;const c2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function ay(i){return c2.test(i)}Ne.isUUID=ay;function u2(i){if(!ay(i))throw new Error("invalid uuid");return new rp(i)}Ne.parse=u2;function d2(){return oy().asHex()}Ne.generateUuid=d2;var ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.ProgressPart=void 0;const Hm=we,qm=Se,Wm=Ve;class l2{constructor(e,t,n){this._client=e,this._token=t,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(qm.WorkDoneProgress.type,this._token,r=>{switch(r.kind){case"begin":this.begin(r);break;case"report":this.report(r);break;case"end":this.done(),n&&n(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&Hm.window.withProgress({location:Hm.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(t,n)=>{if(this._lspProgressDisposable!==void 0)return this._progress=t,this._cancellationToken=n,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(qm.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((r,s)=>{this._resolve=r,this._reject=s})})}report(e){if(this._infinite&&Wm.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(Wm.number(e.percentage)){const t=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,t-this._reported);this._reported+=n,this._progress!==void 0&&this._progress.report({message:e.message,increment:n})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}}ca.ProgressPart=l2;var We={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.WorkspaceFeature=i.TextDocumentLanguageFeature=i.TextDocumentEventFeature=i.DynamicDocumentFeature=i.DynamicFeature=i.StaticFeature=i.ensure=i.LSPCancellationError=void 0;const e=we,t=Se,n=Ve,r=Ne;class s extends e.CancellationError{constructor(h){super(),this.data=h}}i.LSPCancellationError=s;function o(g,h){return g[h]===void 0&&(g[h]={}),g[h]}i.ensure=o,function(g){function h(d){const p=d;return p!=null&&n.func(p.fillClientCapabilities)&&n.func(p.initialize)&&n.func(p.getState)&&n.func(p.dispose)&&(p.fillInitializeParams===void 0||n.func(p.fillInitializeParams))}g.is=h}(i.StaticFeature||(i.StaticFeature={})),function(g){function h(d){const p=d;return p!=null&&n.func(p.fillClientCapabilities)&&n.func(p.initialize)&&n.func(p.getState)&&n.func(p.dispose)&&(p.fillInitializeParams===void 0||n.func(p.fillInitializeParams))&&n.func(p.register)&&n.func(p.unregister)&&p.registrationType!==void 0}g.is=h}(i.DynamicFeature||(i.DynamicFeature={}));class a{constructor(h){this._client=h}getState(){const h=this.getDocumentSelectors();let d=0;for(const _ of h){d++;for(const b of e.workspace.textDocuments)if(e.languages.match(_,b)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}const p=d>0;return{kind:"document",id:this.registrationType.method,registrations:p,matches:!1}}}i.DynamicDocumentFeature=a;class c extends a{constructor(h,d,p,_,b,k,y){super(h),this._event=d,this._type=p,this._middleware=_,this._createParams=b,this._textDocument=k,this._selectorFilter=y,this._selectors=new Map,this._onNotificationSent=new e.EventEmitter}static textDocumentFilter(h,d){for(const p of h)if(e.languages.match(p,d)>0)return!0;return!1}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(h){!h.registerOptions.documentSelector||(this._listener||(this._listener=this._event(d=>{this.callback(d).catch(p=>{this._client.error(`Sending document notification ${this._type.method} failed.`,p)})})),this._selectors.set(h.id,this._client.protocol2CodeConverter.asDocumentSelector(h.registerOptions.documentSelector)))}async callback(h){const d=async p=>{const _=this._createParams(p);await this._client.sendNotification(this._type,_).catch(),this.notificationSent(p,this._type,_)};if(this.matches(h)){const p=this._middleware();return p?p(h,_=>d(_)):d(h)}}matches(h){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(h))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),h)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(h,d,p){this._onNotificationSent.fire({original:h,type:d,params:p})}unregister(h){this._selectors.delete(h),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(h){for(const d of this._selectors.values())if(e.languages.match(d,h)>0)return{send:p=>this.callback(p)}}}i.TextDocumentEventFeature=c;class u extends a{constructor(h,d){super(h),this._registrationType=d,this._registrations=new Map}*getDocumentSelectors(){for(const h of this._registrations.values()){const d=h.data.registerOptions.documentSelector;d!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(d))}}get registrationType(){return this._registrationType}register(h){if(!h.registerOptions.documentSelector)return;let d=this.registerLanguageProvider(h.registerOptions,h.id);this._registrations.set(h.id,{disposable:d[0],data:h,provider:d[1]})}unregister(h){let d=this._registrations.get(h);d!==void 0&&d.disposable.dispose()}dispose(){this._registrations.forEach(h=>{h.disposable.dispose()}),this._registrations.clear()}getRegistration(h,d){if(d){if(t.TextDocumentRegistrationOptions.is(d)){const p=t.StaticRegistrationOptions.hasId(d)?d.id:r.generateUuid(),_=d.documentSelector||h;if(_)return[p,Object.assign({},d,{documentSelector:_})]}else if(n.boolean(d)&&d===!0||t.WorkDoneProgressOptions.is(d)){if(!h)return[void 0,void 0];let p=n.boolean(d)&&d===!0?{documentSelector:h}:Object.assign({},d,{documentSelector:h});return[r.generateUuid(),p]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(h,d){if(!(!h||!d))return n.boolean(d)&&d===!0?{documentSelector:h}:Object.assign({},d,{documentSelector:h})}getProvider(h){for(const d of this._registrations.values()){let p=d.data.registerOptions.documentSelector;if(p!==null&&e.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(p),h)>0)return d.provider}}getAllProviders(){const h=[];for(const d of this._registrations.values())h.push(d.provider);return h}}i.TextDocumentLanguageFeature=u;class l{constructor(h,d){this._client=h,this._registrationType=d,this._registrations=new Map}getState(){const h=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:h}}get registrationType(){return this._registrationType}register(h){const d=this.registerLanguageProvider(h.registerOptions);this._registrations.set(h.id,{disposable:d[0],provider:d[1]})}unregister(h){let d=this._registrations.get(h);d!==void 0&&d.disposable.dispose()}dispose(){this._registrations.forEach(h=>{h.disposable.dispose()}),this._registrations.clear()}getProviders(){const h=[];for(const d of this._registrations.values())h.push(d.provider);return h}}i.WorkspaceFeature=l})(We);var sp={};const h2=typeof process=="object"&&process&&process.platform==="win32";var f2=h2?{sep:"\\"}:{sep:"/"},g2=function(i,e){for(var t=[],n=0;n<i.length;n++){var r=e(i[n],n);p2(r)?t.push.apply(t,r):t.push(r)}return t},p2=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"},m2=g2,cy=nb,v2=w2,uy="\0SLASH"+Math.random()+"\0",dy="\0OPEN"+Math.random()+"\0",op="\0CLOSE"+Math.random()+"\0",ly="\0COMMA"+Math.random()+"\0",hy="\0PERIOD"+Math.random()+"\0";function Ed(i){return parseInt(i,10)==i?parseInt(i,10):i.charCodeAt(0)}function _2(i){return i.split("\\\\").join(uy).split("\\{").join(dy).split("\\}").join(op).split("\\,").join(ly).split("\\.").join(hy)}function y2(i){return i.split(uy).join("\\").split(dy).join("{").split(op).join("}").split(ly).join(",").split(hy).join(".")}function fy(i){if(!i)return[""];var e=[],t=cy("{","}",i);if(!t)return i.split(",");var n=t.pre,r=t.body,s=t.post,o=n.split(",");o[o.length-1]+="{"+r+"}";var a=fy(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function w2(i){return i?(i.substr(0,2)==="{}"&&(i="\\{\\}"+i.substr(2)),Hr(_2(i),!0).map(y2)):[]}function b2(i){return"{"+i+"}"}function C2(i){return/^-?0\d/.test(i)}function S2(i,e){return i<=e}function D2(i,e){return i>=e}function Hr(i,e){var t=[],n=cy("{","}",i);if(!n||/\$$/.test(n.pre))return[i];var r=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),o=r||s,a=n.body.indexOf(",")>=0;if(!o&&!a)return n.post.match(/,.*\}/)?(i=n.pre+"{"+n.body+op+n.post,Hr(i)):[i];var c;if(o)c=n.body.split(/\.\./);else if(c=fy(n.body),c.length===1&&(c=Hr(c[0],!1).map(b2),c.length===1)){var l=n.post.length?Hr(n.post,!1):[""];return l.map(function(Z){return n.pre+c[0]+Z})}var u=n.pre,l=n.post.length?Hr(n.post,!1):[""],g;if(o){var h=Ed(c[0]),d=Ed(c[1]),p=Math.max(c[0].length,c[1].length),_=c.length==3?Math.abs(Ed(c[2])):1,b=S2,k=d<h;k&&(_*=-1,b=D2);var y=c.some(C2);g=[];for(var E=h;b(E,d);E+=_){var M;if(s)M=String.fromCharCode(E),M==="\\"&&(M="");else if(M=String(E),y){var q=p-M.length;if(q>0){var J=new Array(q+1).join("0");E<0?M="-"+J+M.slice(1):M=J+M}}g.push(M)}}else g=m2(c,function(Y){return Hr(Y,!1)});for(var Q=0;Q<g.length;Q++)for(var I=0;I<l.length;I++){var j=u+g[Q]+l[I];(!e||o||j)&&t.push(j)}return t}var ap=an;an.Minimatch=Wt;var Go=f2;an.sep=Go.sep;var cp=an.GLOBSTAR=Wt.GLOBSTAR={},E2=v2,Um={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},yg="[^/]",wg=yg+"*?",T2="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",k2="(?:(?!(?:\\/|^)\\.).)*?",jm=P2("().*{}+?[]^$\\!");function P2(i){return i.split("").reduce(function(e,t){return e[t]=!0,e},{})}var gy=/\/+/;an.filter=R2;function R2(i,e){return e=e||{},function(t,n,r){return an(t,i,e)}}function Si(i,e){e=e||{};var t={};return Object.keys(i).forEach(function(n){t[n]=i[n]}),Object.keys(e).forEach(function(n){t[n]=e[n]}),t}an.defaults=function(i){if(!i||typeof i!="object"||!Object.keys(i).length)return an;var e=an,t=function(r,s,o){return e(r,s,Si(i,o))};return t.Minimatch=function(r,s){return new e.Minimatch(r,Si(i,s))},t.Minimatch.defaults=function(r){return e.defaults(Si(i,r)).Minimatch},t.filter=function(r,s){return e.filter(r,Si(i,s))},t.defaults=function(r){return e.defaults(Si(i,r))},t.makeRe=function(r,s){return e.makeRe(r,Si(i,s))},t.braceExpand=function(r,s){return e.braceExpand(r,Si(i,s))},t.match=function(n,r,s){return e.match(n,r,Si(i,s))},t};Wt.defaults=function(i){return an.defaults(i).Minimatch};function an(i,e,t){return Eu(e),t||(t={}),!t.nocomment&&e.charAt(0)==="#"?!1:new Wt(e,t).match(i)}function Wt(i,e){if(!(this instanceof Wt))return new Wt(i,e);Eu(i),e||(e={}),i=i.trim(),!e.allowWindowsEscape&&Go.sep!=="/"&&(i=i.split(Go.sep).join("/")),this.options=e,this.set=[],this.pattern=i,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}Wt.prototype.debug=function(){};Wt.prototype.make=I2;function I2(){var i=this.pattern,e=this.options;if(!e.nocomment&&i.charAt(0)==="#"){this.comment=!0;return}if(!i){this.empty=!0;return}this.parseNegate();var t=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,t),t=this.globParts=t.map(function(n){return n.split(gy)}),this.debug(this.pattern,t),t=t.map(function(n,r,s){return n.map(this.parse,this)},this),this.debug(this.pattern,t),t=t.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,t),this.set=t}Wt.prototype.parseNegate=x2;function x2(){var i=this.pattern,e=!1,t=this.options,n=0;if(!t.nonegate){for(var r=0,s=i.length;r<s&&i.charAt(r)==="!";r++)e=!e,n++;n&&(this.pattern=i.substr(n)),this.negate=e}}an.braceExpand=function(i,e){return py(i,e)};Wt.prototype.braceExpand=py;function py(i,e){return e||(this instanceof Wt?e=this.options:e={}),i=typeof i>"u"?this.pattern:i,Eu(i),e.nobrace||!/\{(?:(?!\{).)*\}/.test(i)?[i]:E2(i)}var F2=1024*64,Eu=function(i){if(typeof i!="string")throw new TypeError("invalid pattern");if(i.length>F2)throw new TypeError("pattern is too long")};Wt.prototype.parse=M2;var ka={};function M2(i,e){Eu(i);var t=this.options;if(i==="**")if(t.noglobstar)i="*";else return cp;if(i==="")return"";var n="",r=!!t.nocase,s=!1,o=[],a=[],c,u=!1,l=-1,g=-1,h=i.charAt(0)==="."?"":t.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",d=this;function p(){if(c){switch(c){case"*":n+=wg,r=!0;break;case"?":n+=yg,r=!0;break;default:n+="\\"+c;break}d.debug("clearStateChar %j %j",c,n),c=!1}}for(var _=0,b=i.length,k;_<b&&(k=i.charAt(_));_++){if(this.debug("%s	%s %s %j",i,_,n,k),s&&jm[k]){n+="\\"+k,s=!1;continue}switch(k){case"/":return!1;case"\\":p(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",i,_,n,k),u){this.debug("  in class"),k==="!"&&_===g+1&&(k="^"),n+=k;continue}d.debug("call clearStateChar %j",c),p(),c=k,t.noext&&p();continue;case"(":if(u){n+="(";continue}if(!c){n+="\\(";continue}o.push({type:c,start:_-1,reStart:n.length,open:Um[c].open,close:Um[c].close}),n+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,n),c=!1;continue;case")":if(u||!o.length){n+="\\)";continue}p(),r=!0;var y=o.pop();n+=y.close,y.type==="!"&&a.push(y),y.reEnd=n.length;continue;case"|":if(u||!o.length||s){n+="\\|",s=!1;continue}p(),n+="|";continue;case"[":if(p(),u){n+="\\"+k;continue}u=!0,g=_,l=n.length,n+=k;continue;case"]":if(_===g+1||!u){n+="\\"+k,s=!1;continue}var E=i.substring(g+1,_);try{RegExp("["+E+"]")}catch{var M=this.parse(E,ka);n=n.substr(0,l)+"\\["+M[0]+"\\]",r=r||M[1],u=!1;continue}r=!0,u=!1,n+=k;continue;default:p(),s?s=!1:jm[k]&&!(k==="^"&&u)&&(n+="\\"),n+=k}}for(u&&(E=i.substr(g+1),M=this.parse(E,ka),n=n.substr(0,l)+"\\["+M[0],r=r||M[1]),y=o.pop();y;y=o.pop()){var q=n.slice(y.reStart+y.open.length);this.debug("setting tail",n,y),q=q.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(be,Ut,Ue){return Ue||(Ue="\\"),Ut+Ut+Ue+"|"}),this.debug(`tail=%j
   %s`,q,q,y,n);var J=y.type==="*"?wg:y.type==="?"?yg:"\\"+y.type;r=!0,n=n.slice(0,y.reStart)+J+"\\("+q}p(),s&&(n+="\\\\");var Q=!1;switch(n.charAt(0)){case"[":case".":case"(":Q=!0}for(var I=a.length-1;I>-1;I--){var j=a[I],Y=n.slice(0,j.reStart),Z=n.slice(j.reStart,j.reEnd-8),m=n.slice(j.reEnd-8,j.reEnd),W=n.slice(j.reEnd);m+=W;var fe=Y.split("(").length-1,L=W;for(_=0;_<fe;_++)L=L.replace(/\)[+*?]?/,"");W=L;var ee="";W===""&&e!==ka&&(ee="$");var ge=Y+Z+W+ee+m;n=ge}if(n!==""&&r&&(n="(?=.)"+n),Q&&(n=h+n),e===ka)return[n,r];if(!r)return L2(i);var ie=t.nocase?"i":"";try{var ut=new RegExp("^"+n+"$",ie)}catch{return new RegExp("$.")}return ut._glob=i,ut._src=n,ut}an.makeRe=function(i,e){return new Wt(i,e||{}).makeRe()};Wt.prototype.makeRe=A2;function A2(){if(this.regexp||this.regexp===!1)return this.regexp;var i=this.set;if(!i.length)return this.regexp=!1,this.regexp;var e=this.options,t=e.noglobstar?wg:e.dot?T2:k2,n=e.nocase?"i":"",r=i.map(function(s){return s.map(function(o){return o===cp?t:typeof o=="string"?O2(o):o._src}).join("\\/")}).join("|");r="^(?:"+r+")$",this.negate&&(r="^(?!"+r+").*$");try{this.regexp=new RegExp(r,n)}catch{this.regexp=!1}return this.regexp}an.match=function(i,e,t){t=t||{};var n=new Wt(e,t);return i=i.filter(function(r){return n.match(r)}),n.options.nonull&&!i.length&&i.push(e),i};Wt.prototype.match=function(e,t){if(typeof t>"u"&&(t=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;var n=this.options;Go.sep!=="/"&&(e=e.split(Go.sep).join("/")),e=e.split(gy),this.debug(this.pattern,"split",e);var r=this.set;this.debug(this.pattern,"set",r);var s,o;for(o=e.length-1;o>=0&&(s=e[o],!s);o--);for(o=0;o<r.length;o++){var a=r[o],c=e;n.matchBase&&a.length===1&&(c=[s]);var u=this.matchOne(c,a,t);if(u)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate};Wt.prototype.matchOne=function(i,e,t){var n=this.options;this.debug("matchOne",{this:this,file:i,pattern:e}),this.debug("matchOne",i.length,e.length);for(var r=0,s=0,o=i.length,a=e.length;r<o&&s<a;r++,s++){this.debug("matchOne loop");var c=e[s],u=i[r];if(this.debug(e,c,u),c===!1)return!1;if(c===cp){this.debug("GLOBSTAR",[e,c,u]);var l=r,g=s+1;if(g===a){for(this.debug("** at the end");r<o;r++)if(i[r]==="."||i[r]===".."||!n.dot&&i[r].charAt(0)===".")return!1;return!0}for(;l<o;){var h=i[l];if(this.debug(`
globstar while`,i,l,e,g,h),this.matchOne(i.slice(l),e.slice(g),t))return this.debug("globstar found match!",l,o,h),!0;if(h==="."||h===".."||!n.dot&&h.charAt(0)==="."){this.debug("dot detected!",i,l,e,g);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(t&&(this.debug(`
>>> no match, partial?`,i,l,e,g),l===o))}var d;if(typeof c=="string"?(d=u===c,this.debug("string match",c,u,d)):(d=u.match(c),this.debug("pattern match",c,u,d)),!d)return!1}if(r===o&&s===a)return!0;if(r===o)return t;if(s===a)return r===o-1&&i[r]==="";throw new Error("wtf?")};function L2(i){return i.replace(/\\(.)/g,"$1")}function O2(i){return i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DiagnosticFeature=i.DiagnosticPullMode=i.vsdiag=void 0;const e=ap,t=we,n=Se,r=Ne,s=We;function o(k,y){return k[y]===void 0&&(k[y]={}),k[y]}var a;(function(k){(function(y){y.full="full",y.unChanged="unChanged"})(k.DocumentDiagnosticReportKind||(k.DocumentDiagnosticReportKind={}))})(a=i.vsdiag||(i.vsdiag={}));var c;(function(k){k.onType="onType",k.onSave="onSave"})(c=i.DiagnosticPullMode||(i.DiagnosticPullMode={}));var u;(function(k){k.active="open",k.reschedule="reschedule",k.outDated="drop"})(u||(u={}));class l{constructor(){this.open=new Set,this._onOpen=new t.EventEmitter,this._onClose=new t.EventEmitter,l.fillTabResources(this.open);const y=E=>{if(E.closed.length===0&&E.opened.length===0)return;const M=this.open,q=new Set;l.fillTabResources(q);const J=new Set,Q=new Set(q);for(const I of M.values())q.has(I)?Q.delete(I):J.add(I);if(this.open=q,J.size>0){const I=new Set;for(const j of J)I.add(t.Uri.parse(j));this._onClose.fire(I)}if(Q.size>0){const I=new Set;for(const j of Q)I.add(t.Uri.parse(j));this._onOpen.fire(I)}};t.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=t.window.tabGroups.onDidChangeTabs(y):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(y){return y instanceof t.Uri?t.window.activeTextEditor?.document.uri===y:t.window.activeTextEditor?.document===y}isVisible(y){const E=y instanceof t.Uri?y:y.uri;return this.open.has(E.toString())}getTabResources(){const y=new Set;return l.fillTabResources(new Set,y),y}static fillTabResources(y,E){const M=y??new Set;for(const q of t.window.tabGroups.all)for(const J of q.tabs){const Q=J.input;let I;Q instanceof t.TabInputText?I=Q.uri:Q instanceof t.TabInputTextDiff&&(I=Q.modified),I!==void 0&&!M.has(I.toString())&&(M.add(I.toString()),E!==void 0&&E.add(I))}}}var g;(function(k){k[k.document=1]="document",k[k.workspace=2]="workspace"})(g||(g={}));class h{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(y,E,M){const q=y===g.document?this.documentPullStates:this.workspacePullStates,[J,Q,I]=E instanceof t.Uri?[E.toString(),E,M]:[E.uri.toString(),E.uri,E.version];let j=q.get(J);return j===void 0&&(j={document:Q,pulledVersion:I,resultId:void 0},q.set(J,j)),j}update(y,E,M,q){const J=y===g.document?this.documentPullStates:this.workspacePullStates,[Q,I,j,Y]=E instanceof t.Uri?[E.toString(),E,M,q]:[E.uri.toString(),E.uri,E.version,M];let Z=J.get(Q);Z===void 0?(Z={document:I,pulledVersion:j,resultId:Y},J.set(Q,Z)):(Z.pulledVersion=j,Z.resultId=Y)}unTrack(y,E){const M=E instanceof t.Uri?E.toString():E.uri.toString();(y===g.document?this.documentPullStates:this.workspacePullStates).delete(M)}tracks(y,E){const M=E instanceof t.Uri?E.toString():E.uri.toString();return(y===g.document?this.documentPullStates:this.workspacePullStates).has(M)}getResultId(y,E){const M=E instanceof t.Uri?E.toString():E.uri.toString();return(y===g.document?this.documentPullStates:this.workspacePullStates).get(M)?.resultId}getAllResultIds(){const y=[];for(let[E,M]of this.workspacePullStates)this.documentPullStates.has(E)&&(M=this.documentPullStates.get(E)),M.resultId!==void 0&&y.push({uri:E,value:M.resultId});return y}}class d{constructor(y,E,M){this.client=y,this.tabs=E,this.options=M,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new t.EventEmitter,this.provider=this.createProvider(),this.diagnostics=t.languages.createDiagnosticCollection(M.identifier),this.openRequests=new Map,this.documentStates=new h,this.workspaceErrorCounter=0}knows(y,E){return this.documentStates.tracks(y,E)}forget(y,E){this.documentStates.unTrack(y,E)}pull(y,E){if(this.isDisposed)return;const M=y instanceof t.Uri?y:y.uri;this.pullAsync(y).then(()=>{E&&E()},q=>{this.client.error(`Document pull failed for text document ${M.toString()}`,q,!1)})}async pullAsync(y,E){if(this.isDisposed)return;const M=y instanceof t.Uri,q=M?y:y.uri,J=q.toString();E=M?E:y.version;const Q=this.openRequests.get(J),I=M?this.documentStates.track(g.document,y,E):this.documentStates.track(g.document,y);if(Q===void 0){const j=new t.CancellationTokenSource;this.openRequests.set(J,{state:u.active,document:y,version:E,tokenSource:j});let Y,Z;try{Y=await this.provider.provideDiagnostics(y,I.resultId,j.token)??{kind:a.DocumentDiagnosticReportKind.full,items:[]}}catch(m){if(m instanceof s.LSPCancellationError&&n.DiagnosticServerCancellationData.is(m.data)&&m.data.retriggerRequest===!1&&(Z={state:u.outDated,document:y}),Z===void 0&&m instanceof t.CancellationError)Z={state:u.reschedule,document:y};else throw m}if(Z=Z??this.openRequests.get(J),Z===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${J}`),this.diagnostics.delete(q);return}if(this.openRequests.delete(J),!this.tabs.isVisible(y)){this.documentStates.unTrack(g.document,y);return}if(Z.state===u.outDated)return;Y!==void 0&&(Y.kind===a.DocumentDiagnosticReportKind.full&&this.diagnostics.set(q,Y.items),I.pulledVersion=E,I.resultId=Y.resultId),Z.state===u.reschedule&&this.pull(y)}else Q.state===u.active?(Q.tokenSource.cancel(),this.openRequests.set(J,{state:u.reschedule,document:Q.document})):Q.state===u.outDated&&this.openRequests.set(J,{state:u.reschedule,document:Q.document})}forgetDocument(y){const E=y instanceof t.Uri?y:y.uri,M=E.toString(),q=this.openRequests.get(M);this.options.workspaceDiagnostics?q!==void 0?this.openRequests.set(M,{state:u.reschedule,document:y}):this.pull(y,()=>{this.forget(g.document,y)}):(q!==void 0&&(q.state===u.active&&q.tokenSource.cancel(),this.openRequests.set(M,{state:u.outDated,document:y})),this.diagnostics.delete(E),this.forget(g.document,y))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,n.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},y=>{!(y instanceof s.LSPCancellationError)&&!n.DiagnosticServerCancellationData.is(y.data)&&(this.client.error("Workspace diagnostic pull failed.",y,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,n.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new t.CancellationTokenSource;const y=this.documentStates.getAllResultIds().map(E=>({uri:this.client.protocol2CodeConverter.asUri(E.uri),value:E.value}));await this.provider.provideWorkspaceDiagnostics(y,this.workspaceCancellation.token,E=>{if(!(!E||this.isDisposed))for(const M of E.items)M.kind===a.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(g.document,M.uri)||this.diagnostics.set(M.uri,M.items)),this.documentStates.update(g.workspace,M.uri,M.version??void 0,M.resultId)})}createProvider(){const y={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(E,M,q)=>{const J=(I,j,Y)=>{const Z={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(I instanceof t.Uri?I:I.uri)},previousResultId:j};return this.isDisposed===!0||!this.client.isRunning()?{kind:a.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(n.DocumentDiagnosticRequest.type,Z,Y).then(async m=>m==null||this.isDisposed||Y.isCancellationRequested?{kind:a.DocumentDiagnosticReportKind.full,items:[]}:m.kind===n.DocumentDiagnosticReportKind.Full?{kind:a.DocumentDiagnosticReportKind.full,resultId:m.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(m.items,Y)}:{kind:a.DocumentDiagnosticReportKind.unChanged,resultId:m.resultId},m=>this.client.handleFailedRequest(n.DocumentDiagnosticRequest.type,Y,m,{kind:a.DocumentDiagnosticReportKind.full,items:[]}))},Q=this.client.middleware;return Q.provideDiagnostics?Q.provideDiagnostics(E,M,q,J):J(E,M,q)}};return this.options.workspaceDiagnostics&&(y.provideWorkspaceDiagnostics=(E,M,q)=>{const J=async Y=>Y.kind===n.DocumentDiagnosticReportKind.Full?{kind:a.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(Y.uri),resultId:Y.resultId,version:Y.version,items:await this.client.protocol2CodeConverter.asDiagnostics(Y.items,M)}:{kind:a.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(Y.uri),resultId:Y.resultId,version:Y.version},Q=Y=>{const Z=[];for(const m of Y)Z.push({uri:this.client.code2ProtocolConverter.asUri(m.uri),value:m.value});return Z},I=(Y,Z)=>{const m=(0,r.generateUuid)(),W=this.client.onProgress(n.WorkspaceDiagnosticRequest.partialResult,m,async L=>{if(L==null){q(null);return}const ee={items:[]};for(const ge of L.items)try{ee.items.push(await J(ge))}catch(ie){this.client.error("Converting workspace diagnostics failed.",ie)}q(ee)}),fe={identifier:this.options.identifier,previousResultIds:Q(Y),partialResultToken:m};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(n.WorkspaceDiagnosticRequest.type,fe,Z).then(async L=>{if(Z.isCancellationRequested)return{items:[]};const ee={items:[]};for(const ge of L.items)ee.items.push(await J(ge));return W.dispose(),q(ee),{items:[]}},L=>(W.dispose(),this.client.handleFailedRequest(n.DocumentDiagnosticRequest.type,Z,L,{items:[]})))},j=this.client.middleware;return j.provideWorkspaceDiagnostics?j.provideWorkspaceDiagnostics(E,M,q,I):I(E,M)}),y}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(const[y,E]of this.openRequests)E.state===u.active&&E.tokenSource.cancel(),this.openRequests.set(y,{state:u.outDated,document:E.document});this.diagnostics.dispose()}}class p{constructor(y){this.diagnosticRequestor=y,this.documents=new n.LinkedMap,this.isDisposed=!1}add(y){if(this.isDisposed===!0)return;const E=y instanceof t.Uri?y.toString():y.uri.toString();this.documents.has(E)||(this.documents.set(E,y,n.Touch.Last),this.trigger())}remove(y){const E=y instanceof t.Uri?y.toString():y.uri.toString();this.documents.has(E)&&(this.documents.delete(E),this.diagnosticRequestor.pull(y)),this.documents.size===0?this.stop():y===this.endDocument&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,n.RAL)().timer.setInterval(()=>{const y=this.documents.first;if(y!==void 0){const E=y instanceof t.Uri?y.toString():y.uri.toString();this.diagnosticRequestor.pull(y),this.documents.set(E,y,n.Touch.Last),y===this.endDocument&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}}class _{constructor(y,E,M){const q=y.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},J=y.protocol2CodeConverter.asDocumentSelector(M.documentSelector),Q=[],I=L=>{const ee=M.documentSelector;if(q.match!==void 0)return q.match(ee,L);for(const ge of ee)if(!!n.TextDocumentFilter.is(ge)){if(typeof ge=="string"||ge.language!==void 0&&ge.language!=="*"||ge.scheme!==void 0&&ge.scheme!=="*"&&ge.scheme!==L.scheme)return!1;if(ge.pattern!==void 0){const ie=new e.Minimatch(ge.pattern,{noext:!0});if(!ie.makeRe()||!ie.match(L.fsPath))return!1}}return!0},j=L=>L instanceof t.Uri?I(L):t.languages.match(J,L)>0&&E.isVisible(L),Y=L=>L instanceof t.Uri?this.activeTextDocument?.uri.toString()===L.toString():this.activeTextDocument===L;this.diagnosticRequestor=new d(y,E,M),this.backgroundScheduler=new p(this.diagnosticRequestor);const Z=L=>{!j(L)||!M.interFileDependencies||Y(L)||this.backgroundScheduler.add(L)};this.activeTextDocument=t.window.activeTextEditor?.document,t.window.onDidChangeActiveTextEditor(L=>{const ee=this.activeTextDocument;this.activeTextDocument=L?.document,ee!==void 0&&Z(ee),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});const m=y.getFeature(n.DidOpenTextDocumentNotification.method);Q.push(m.onNotificationSent(L=>{const ee=L.original;j(ee)&&this.diagnosticRequestor.pull(ee,()=>{Z(ee)})}));const W=new Set;for(const L of t.workspace.textDocuments)j(L)&&(this.diagnosticRequestor.pull(L,()=>{Z(L)}),W.add(L.uri.toString()));if(q.onTabs===!0)for(const L of E.getTabResources())!W.has(L.toString())&&j(L)&&this.diagnosticRequestor.pull(L,()=>{Z(L)});if(E.onOpen(L=>{for(const ee of L)j(ee)&&!this.diagnosticRequestor.knows(g.document,ee)&&this.diagnosticRequestor.pull(ee,()=>{Z(ee)})}),q.onChange===!0){const L=y.getFeature(n.DidChangeTextDocumentNotification.method);Q.push(L.onNotificationSent(async ee=>{const ge=ee.original.document;(q.filter===void 0||!q.filter(ge,c.onType))&&this.diagnosticRequestor.knows(g.document,ge)&&ee.original.contentChanges.length>0&&this.diagnosticRequestor.pull(ge,()=>{this.backgroundScheduler.trigger()})}))}if(q.onSave===!0){const L=y.getFeature(n.DidSaveTextDocumentNotification.method);Q.push(L.onNotificationSent(ee=>{const ge=ee.original;(q.filter===void 0||!q.filter(ge,c.onSave))&&this.diagnosticRequestor.knows(g.document,ge)&&this.diagnosticRequestor.pull(ee.original,()=>{this.backgroundScheduler.trigger()})}))}const fe=y.getFeature(n.DidCloseTextDocumentNotification.method);Q.push(fe.onNotificationSent(L=>{this.cleanUpDocument(L.original)})),E.onClose(L=>{for(const ee of L)this.cleanUpDocument(ee)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(const L of t.workspace.textDocuments)j(L)&&this.diagnosticRequestor.pull(L)}),M.workspaceDiagnostics===!0&&M.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=t.Disposable.from(...Q,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(y){this.diagnosticRequestor.knows(g.document,y)&&(this.diagnosticRequestor.forgetDocument(y),this.backgroundScheduler.remove(y))}}class b extends s.TextDocumentLanguageFeature{constructor(y){super(y,n.DocumentDiagnosticRequest.type)}fillClientCapabilities(y){let E=o(o(y,"textDocument"),"diagnostic");E.dynamicRegistration=!0,E.relatedDocumentSupport=!1,o(o(y,"workspace"),"diagnostics").refreshSupport=!0}initialize(y,E){this._client.onRequest(n.DiagnosticRefreshRequest.type,async()=>{for(const Q of this.getAllProviders())Q.onDidChangeDiagnosticsEmitter.fire()});let[q,J]=this.getRegistration(E,y.diagnosticProvider);!q||!J||this.register({id:q,registerOptions:J})}dispose(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.dispose()}registerLanguageProvider(y){this.tabs===void 0&&(this.tabs=new l);const E=new _(this._client,this.tabs,y);return[E.disposable,E]}}i.DiagnosticFeature=b})(sp);var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.NotebookDocumentSyncFeature=void 0;const Bt=we,$2=ap,ii=Se,N2=Ne,zm=Ve;function Bm(i,e){return i[e]===void 0&&(i[e]={}),i[e]}var Vr;(function(i){(function(e){function t(g,h){return{version:g.version,uri:h.asUri(g.uri)}}e.asVersionedNotebookDocumentIdentifier=t;function n(g,h,d){const p=ii.NotebookDocument.create(d.asUri(g.uri),g.notebookType,g.version,r(h,d));return Object.keys(g.metadata).length>0&&(p.metadata=s(g.metadata)),p}e.asNotebookDocument=n;function r(g,h){return g.map(d=>o(d,h))}e.asNotebookCells=r;function s(g){return c(new Set,g)}e.asMetadata=s;function o(g,h){const d=ii.NotebookCell.create(a(g.kind),h.asUri(g.document.uri));return Object.keys(g.metadata).length>0&&(d.metadata=s(g.metadata)),g.executionSummary!==void 0&&zm.number(g.executionSummary.executionOrder)&&zm.boolean(g.executionSummary.success)&&(d.executionSummary={executionOrder:g.executionSummary.executionOrder,success:g.executionSummary.success}),d}e.asNotebookCell=o;function a(g){switch(g){case Bt.NotebookCellKind.Markup:return ii.NotebookCellKind.Markup;case Bt.NotebookCellKind.Code:return ii.NotebookCellKind.Code}}function c(g,h){if(g.has(h))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(h)){const d=[];for(const p of h)if(p!==null&&typeof p=="object"||Array.isArray(p))d.push(c(g,p));else{if(p instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");d.push(p)}return d}else{const d=Object.keys(h),p=Object.create(null);for(const _ of d){const b=h[_];if(b!==null&&typeof b=="object"||Array.isArray(b))p[_]=c(g,b);else{if(b instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");p[_]=b}}return p}}function u(g,h){const d=h.asChangeTextDocumentParams(g);return{document:d.textDocument,changes:d.contentChanges}}e.asTextContentChange=u;function l(g,h){const d=Object.create(null);if(g.metadata&&(d.metadata=i.c2p.asMetadata(g.metadata)),g.cells!==void 0){const p=Object.create(null),_=g.cells;_.structure&&(p.structure={array:{start:_.structure.array.start,deleteCount:_.structure.array.deleteCount,cells:_.structure.array.cells!==void 0?_.structure.array.cells.map(b=>i.c2p.asNotebookCell(b,h)):void 0},didOpen:_.structure.didOpen!==void 0?_.structure.didOpen.map(b=>h.asOpenTextDocumentParams(b.document).textDocument):void 0,didClose:_.structure.didClose!==void 0?_.structure.didClose.map(b=>h.asCloseTextDocumentParams(b.document).textDocument):void 0}),_.data!==void 0&&(p.data=_.data.map(b=>i.c2p.asNotebookCell(b,h))),_.textContent!==void 0&&(p.textContent=_.textContent.map(b=>i.c2p.asTextContentChange(b,h))),Object.keys(p).length>0&&(d.cells=p)}return d}e.asNotebookDocumentChangeEvent=l})(i.c2p||(i.c2p={}))})(Vr||(Vr={}));var bg;(function(i){function e(a,c,u){const l=a.length,g=c.length;let h=0;for(;h<g&&h<l&&t(a[h],c[h],u);)h++;if(h<g&&h<l){let d=l-1,p=g-1;for(;d>=0&&p>=0&&t(a[d],c[p],u);)d--,p--;const _=d+1-h,b=h===p+1?void 0:c.slice(h,p+1);return b!==void 0?{start:h,deleteCount:_,cells:b}:{start:h,deleteCount:_}}else return h<g?{start:h,deleteCount:0,cells:c.slice(h)}:h<l?{start:h,deleteCount:l-h}:void 0}i.computeDiff=e;function t(a,c,u=!0){return a.kind!==c.kind||a.document.uri.toString()!==c.document.uri.toString()||a.document.languageId!==c.document.languageId||!n(a.executionSummary,c.executionSummary)?!1:!u||u&&s(a.metadata,c.metadata)}function n(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.executionOrder===c.executionOrder&&a.success===c.success&&r(a.timing,c.timing)}function r(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.startTime===c.startTime&&a.endTime===c.endTime}function s(a,c){if(a===c)return!0;if(a==null||c===null||c===void 0||typeof a!=typeof c||typeof a!="object")return!1;const u=Array.isArray(a),l=Array.isArray(c);if(u!==l)return!1;if(u&&l){if(a.length!==c.length)return!1;for(let g=0;g<a.length;g++)if(!s(a[g],c[g]))return!1}if(o(a)&&o(c)){const g=Object.keys(a),h=Object.keys(c);if(g.length!==h.length||(g.sort(),h.sort(),!s(g,h)))return!1;for(let d=0;d<g.length;d++){const p=g[d];if(!s(a[p],c[p]))return!1}return!0}return!1}function o(a){return a!==null&&typeof a=="object"}i.isObjectLiteral=o})(bg||(bg={}));var Cg;(function(i){function e(t,n){if(typeof t=="string")return t==="*"||n.notebookType===t;if(t.notebookType!==void 0&&t.notebookType!=="*"&&n.notebookType!==t.notebookType)return!1;const r=n.uri;if(t.scheme!==void 0&&t.scheme!=="*"&&r.scheme!==t.scheme)return!1;if(t.pattern!==void 0){const s=new $2.Minimatch(t.pattern,{noext:!0});if(!s.makeRe()||!s.match(r.fsPath))return!1}return!0}i.matchNotebook=e})(Cg||(Cg={}));var Vc;(function(i){function e(n){const r=n.notebookSelector,s=[];for(const o of r){const a=(typeof o.notebook=="string"?o.notebook:o.notebook?.notebookType)??"*",c=typeof o.notebook=="string"?void 0:o.notebook?.scheme,u=typeof o.notebook=="string"?void 0:o.notebook?.pattern;if(o.cells!==void 0)for(const l of o.cells)s.push(t(a,c,u,l.language));else s.push(t(a,c,u,void 0))}return s}i.asDocumentSelector=e;function t(n,r,s,o){return r===void 0&&s===void 0?{notebook:n,language:o}:{notebook:{notebookType:n,scheme:r,pattern:s},language:o}}})(Vc||(Vc={}));var Kc;(function(i){function e(t){return{cells:t,uris:new Set(t.map(n=>n.document.uri.toString()))}}i.create=e})(Kc||(Kc={}));class Pa{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(Vc.asDocumentSelector(t)),Bt.workspace.onDidOpenNotebookDocument(n=>{this.notebookDidOpen.add(n.uri.toString()),this.didOpen(n)},void 0,this.disposables);for(const n of Bt.workspace.notebookDocuments)this.notebookDidOpen.add(n.uri.toString()),this.didOpen(n);Bt.workspace.onDidChangeNotebookDocument(n=>this.didChangeNotebookDocument(n),void 0,this.disposables),this.options.save===!0&&Bt.workspace.onDidSaveNotebookDocument(n=>this.didSave(n),void 0,this.disposables),Bt.workspace.onDidCloseNotebookDocument(n=>{this.didClose(n),this.notebookDidOpen.delete(n.uri.toString())},void 0,this.disposables)}getState(){for(const e of Bt.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return Bt.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,t){if(Bt.languages.match(this.selector,t.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;const n=this.notebookSyncInfo.get(e.uri.toString()),r=this.cellMatches(e,t);if(n!==void 0){const s=n.uris.has(t.document.uri.toString());if(r&&s||!r&&!s)return;if(r){const o=this.getMatchingCells(e);if(o!==void 0){const a=this.asNotebookDocumentChangeEvent(e,void 0,n,o);a!==void 0&&this.doSendChange(a,o).catch(()=>{})}}}else r&&this.doSendOpen(e,[t]).catch(()=>{})}didChangeNotebookCellTextDocument(e,t){Bt.languages.match(this.selector,t.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[t]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,t){const n=this.notebookSyncInfo.get(e.uri.toString());if(n===void 0)return;const r=t.document.uri,s=n.cells.findIndex(o=>o.document.uri.toString()===r.toString());if(s!==-1)if(s===0&&n.cells.length===1)this.doSendClose(e,n.cells).catch(()=>{});else{const o=n.cells.slice(),a=o.splice(s,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:s,deleteCount:1},didClose:a}}},o).catch(()=>{})}}dispose(){for(const e of this.disposables)e.dispose()}didOpen(e,t=this.getMatchingCells(e),n=this.notebookSyncInfo.get(e.uri.toString())){if(n!==void 0)if(t!==void 0){const r=this.asNotebookDocumentChangeEvent(e,void 0,n,t);r!==void 0&&this.doSendChange(r,t).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(t===void 0)return;this.doSendOpen(e,t).catch(()=>{})}}didChangeNotebookDocument(e){const t=e.notebook,n=this.notebookSyncInfo.get(t.uri.toString());if(n===void 0){if(e.contentChanges.length===0)return;const r=this.getMatchingCells(t);if(r===void 0)return;this.didOpen(t,r,n)}else{const r=this.getMatchingCells(t);if(r===void 0){this.didClose(t,n);return}const s=this.asNotebookDocumentChangeEvent(e.notebook,e,n,r);s!==void 0&&this.doSendChange(s,r).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;const n=e.getCells().filter(r=>t.uris.has(r.document.uri.toString()));this.doSendClose(e,n).catch(()=>{})}async sendDidOpenNotebookDocument(e){const t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t){const n=async(s,o)=>{const a=Vr.c2p.asNotebookDocument(s,o,this.client.code2ProtocolConverter),c=o.map(u=>this.client.code2ProtocolConverter.asTextDocumentItem(u.document));try{await this.client.sendNotification(ii.DidOpenNotebookDocumentNotification.type,{notebookDocument:a,cellTextDocuments:c})}catch(u){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",u),u}},r=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),Kc.create(t)),r?.didOpen!==void 0?r.didOpen(e,t,n):n(e,t)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,t=this.getMatchingCells(e.notebook)){const n=async s=>{try{await this.client.sendNotification(ii.DidChangeNotebookDocumentNotification.type,{notebookDocument:Vr.c2p.asVersionedNotebookDocumentIdentifier(s.notebook,this.client.code2ProtocolConverter),change:Vr.c2p.asNotebookDocumentChangeEvent(s,this.client.code2ProtocolConverter)})}catch(o){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",o),o}},r=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),Kc.create(t??[])),r?.didChange!==void 0?r?.didChange(e,n):n(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){const t=async r=>{try{await this.client.sendNotification(ii.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(r.uri)}})}catch(s){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",s),s}},n=this.client.middleware?.notebooks;return n?.didSave!==void 0?n.didSave(e,t):t(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){const n=async(s,o)=>{try{await this.client.sendNotification(ii.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},cellTextDocuments:o.map(a=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))})}catch(a){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",a),a}},r=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),r?.didClose!==void 0?r.didClose(e,t,n):n(e,t)}asNotebookDocumentChangeEvent(e,t,n,r){if(t!==void 0&&t.notebook!==e)throw new Error("Notebook must be identical");const s={notebook:e};t?.metadata!==void 0&&(s.metadata=Vr.c2p.asMetadata(t.metadata));let o;if(t?.cellChanges!==void 0&&t.cellChanges.length>0){const a=[];o=new Set(r.map(c=>c.document.uri.toString()));for(const c of t.cellChanges)o.has(c.cell.document.uri.toString())&&(c.executionSummary!==void 0||c.metadata!==void 0)&&a.push(c.cell);a.length>0&&(s.cells=s.cells??{},s.cells.data=a)}if((t?.contentChanges!==void 0&&t.contentChanges.length>0||t===void 0)&&n!==void 0&&r!==void 0){const a=n.cells,c=r,u=bg.computeDiff(a,c,!1);let l,g;if(u!==void 0){l=u.cells===void 0?new Map:new Map(u.cells.map(p=>[p.document.uri.toString(),p])),g=u.deleteCount===0?new Map:new Map(a.slice(u.start,u.start+u.deleteCount).map(p=>[p.document.uri.toString(),p]));for(const p of Array.from(g.keys()))l.has(p)&&(g.delete(p),l.delete(p));s.cells=s.cells??{};const h=[],d=[];if(l.size>0||g.size>0){for(const p of l.values())h.push(p);for(const p of g.values())d.push(p)}s.cells.structure={array:u,didOpen:h,didClose:d}}}return Object.keys(s).length>1?s:void 0}getMatchingCells(e,t=e.getCells()){if(this.options.notebookSelector!==void 0){for(const n of this.options.notebookSelector)if(n.notebook===void 0||Cg.matchNotebook(n.notebook,e)){const r=this.filterCells(e,t,n.cells);return r.length===0?void 0:r}}}cellMatches(e,t){const n=this.getMatchingCells(e,[t]);return n!==void 0&&n[0]===t}filterCells(e,t,n){const r=n!==void 0?t.filter(s=>{const o=s.document.languageId;return n.some(a=>a.language==="*"||o===a.language)}):t;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,r):r}}class ur{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=ii.NotebookDocumentSyncRegistrationType.type,Bt.workspace.onDidOpenTextDocument(t=>{if(t.uri.scheme!==ur.CellScheme)return;const[n,r]=this.findNotebookDocumentAndCell(t);if(!(n===void 0||r===void 0))for(const s of this.registrations.values())s instanceof Pa&&s.didOpenNotebookCellTextDocument(n,r)}),Bt.workspace.onDidChangeTextDocument(t=>{if(t.contentChanges.length===0)return;const n=t.document;if(n.uri.scheme!==ur.CellScheme)return;const[r]=this.findNotebookDocumentAndCell(n);if(r!==void 0)for(const s of this.registrations.values())s instanceof Pa&&s.didChangeNotebookCellTextDocument(r,t)}),Bt.workspace.onDidCloseTextDocument(t=>{if(t.uri.scheme!==ur.CellScheme)return;const[n,r]=this.findNotebookDocumentAndCell(t);if(!(n===void 0||r===void 0))for(const s of this.registrations.values())s instanceof Pa&&s.didCloseNotebookCellTextDocument(n,r)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(const e of this.registrations.values()){const t=e.getState();if(t.kind==="document"&&t.registrations===!0&&t.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){const t=Bm(Bm(e,"notebookDocument"),"synchronization");t.dynamicRegistration=!0,t.executionSummarySupport=!0}preInitialize(e){const t=e.notebookDocumentSync;t!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(Vc.asDocumentSelector(t)))}initialize(e){const t=e.notebookDocumentSync;if(t===void 0)return;const n=t.id??N2.generateUuid();this.register({id:n,registerOptions:t})}register(e){const t=new Pa(this.client,e.registerOptions);this.registrations.set(e.id,t)}unregister(e){const t=this.registrations.get(e);t&&t.dispose()}dispose(){for(const e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==ur.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&Bt.languages.match(this.dedicatedChannel,e)>0)return!0;for(const t of this.registrations.values())if(t.handles(e))return!0;return!1}getProvider(e){for(const t of this.registrations.values())if(t.handles(e.document))return t}findNotebookDocumentAndCell(e){const t=e.uri.toString();for(const n of Bt.workspace.notebookDocuments)for(const r of n.getCells())if(r.document.uri.toString()===t)return[n,r];return[void 0,void 0]}}Tu.NotebookDocumentSyncFeature=ur;ur.CellScheme="vscode-notebook-cell";var Mi={};Object.defineProperty(Mi,"__esModule",{value:!0});var my=Mi.SyncConfigurationFeature=Mi.toJSONObject=vy=Mi.ConfigurationFeature=void 0;const as=we,io=Se,H2=Ve,q2=Ne,Vm=We;class W2{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(io.ConfigurationRequest.type,(t,n)=>{let r=o=>{let a=[];for(let c of o.items){let u=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;a.push(this.getConfiguration(u,c.section!==null?c.section:void 0))}return a},s=e.middleware.workspace;return s&&s.configuration?s.configuration(t,n,r):r(t)})}getConfiguration(e,t){let n=null;if(t){let r=t.lastIndexOf(".");if(r===-1)n=gr(as.workspace.getConfiguration(void 0,e).get(t));else{let s=as.workspace.getConfiguration(t.substr(0,r),e);s&&(n=gr(s.get(t.substr(r+1))))}}else{let r=as.workspace.getConfiguration(void 0,e);n={};for(let s of Object.keys(r))r.has(s)&&(n[s]=gr(r.get(s)))}return n===void 0&&(n=null),n}dispose(){}}var vy=Mi.ConfigurationFeature=W2;function gr(i){if(i){if(Array.isArray(i))return i.map(gr);if(typeof i=="object"){const e=Object.create(null);for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=gr(i[t]));return e}}return i}Mi.toJSONObject=gr;class U2{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return io.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,Vm.ensure)((0,Vm.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:q2.generateUuid(),registerOptions:{section:e}})}register(e){let t=as.workspace.onDidChangeConfiguration(n=>{this.onDidChangeConfiguration(e.registerOptions.section,n)});this._listeners.set(e.id,t),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(const e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let n;if(H2.string(e)?n=[e]:n=e,n!==void 0&&t!==void 0&&!n.some(a=>t.affectsConfiguration(a)))return;const r=async o=>o===void 0?this._client.sendNotification(io.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(io.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(o)});let s=this._client.middleware.workspace?.didChangeConfiguration;(s?s(n,r):r(n)).catch(o=>{this._client.error(`Sending notification ${io.DidChangeConfigurationNotification.type.method} failed`,o)})}extractSettingsInformation(e){function t(s,o){let a=s;for(let c=0;c<o.length-1;c++){let u=a[o[c]];u||(u=Object.create(null),a[o[c]]=u),a=u}return a}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,r=Object.create(null);for(let s=0;s<e.length;s++){let o=e[s],a=o.indexOf("."),c=null;if(a>=0?c=as.workspace.getConfiguration(o.substr(0,a),n).get(o.substr(a+1)):c=as.workspace.getConfiguration(void 0,n).get(o),c){let u=e[s].split(".");t(r,u)[u[u.length-1]]=gr(c)}}return r}}my=Mi.SyncConfigurationFeature=U2;var en={};Object.defineProperty(en,"__esModule",{value:!0});var _y=en.DidSaveTextDocumentFeature=Sy=en.WillSaveWaitUntilFeature=Cy=en.WillSaveFeature=by=en.DidChangeTextDocumentFeature=wy=en.DidCloseTextDocumentFeature=yy=en.DidOpenTextDocumentFeature=void 0;const bn=we,Pt=Se,lt=We,j2=It,Ts=Ne;class z2 extends lt.TextDocumentEventFeature{constructor(e,t){super(e,bn.workspace.onDidOpenTextDocument,Pt.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,n=>e.code2ProtocolConverter.asOpenTextDocumentParams(n),n=>n,lt.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,lt.ensure)((0,lt.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){const n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register({id:Ts.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return Pt.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;const t=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);bn.workspace.textDocuments.forEach(n=>{const r=n.uri.toString();if(!this._syncedDocuments.has(r)&&bn.languages.match(t,n)>0&&!this._client.hasDedicatedTextSynchronizationFeature(n)){const s=this._client.middleware,o=a=>this._client.sendNotification(this._type,this._createParams(a));(s.didOpen?s.didOpen(n,o):o(n)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(r,n)}})}notificationSent(e,t,n){super.notificationSent(e,t,n),this._syncedDocuments.set(e.uri.toString(),e)}}var yy=en.DidOpenTextDocumentFeature=z2;class B2 extends lt.TextDocumentEventFeature{constructor(e,t){super(e,bn.workspace.onDidCloseTextDocument,Pt.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,n=>e.code2ProtocolConverter.asCloseTextDocumentParams(n),n=>n,lt.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get registrationType(){return Pt.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,lt.ensure)((0,lt.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register({id:Ts.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e,t,n){super.notificationSent(e,t,n),this._syncedDocuments.delete(e.uri.toString())}unregister(e){const t=this._selectors.get(e);super.unregister(e);const n=this._selectors.values();this._syncedDocuments.forEach(r=>{if(bn.languages.match(t,r)>0&&!this._selectorFilter(n,r)&&!this._client.hasDedicatedTextSynchronizationFeature(r)){let s=this._client.middleware,o=a=>this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(r.uri.toString()),(s.didClose?s.didClose(r,o):o(r)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}}var wy=en.DidCloseTextDocumentFeature=B2;class V2 extends lt.DynamicDocumentFeature{constructor(e){super(e),this._forcingDelivery=!1,this._changeData=new Map,this._onNotificationSent=new bn.EventEmitter}get registrationType(){return Pt.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,lt.ensure)((0,lt.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.change!==void 0&&n.change!==Pt.TextDocumentSyncKind.None&&this.register({id:Ts.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:n.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=bn.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}))}*getDocumentSelectors(){for(const e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;const t=[];for(const n of this._changeData.values())if(bn.languages.match(n.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){const r=this._client.middleware;if(n.syncKind===Pt.TextDocumentSyncKind.Incremental){const s=async o=>{const a=this._client.code2ProtocolConverter.asChangeTextDocumentParams(o);await this._client.sendNotification(Pt.DidChangeTextDocumentNotification.type,a),this.notificationSent(o,Pt.DidChangeTextDocumentNotification.type,a)};t.push(r.didChange?r.didChange(e,o=>s(o)):s(e))}else if(n.syncKind===Pt.TextDocumentSyncKind.Full){const s=async o=>{const a=async c=>{const u=this._client.code2ProtocolConverter.asChangeTextDocumentParams(c.document);await this._client.sendNotification(Pt.DidChangeTextDocumentNotification.type,u),this.notificationSent(c,Pt.DidChangeTextDocumentNotification.type,u)};return this._changeDelayer?(this._changeDelayer.uri!==o.document.uri.toString()&&(await this.forceDelivery(),this._changeDelayer.uri=o.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>a(o))):(this._changeDelayer={uri:o.document.uri.toString(),delayer:new j2.Delayer(200)},this._changeDelayer.delayer.trigger(()=>a(o),-1))};t.push(r.didChange?r.didChange(e,o=>s(o)):s(e))}}return Promise.all(t).then(void 0,n=>{throw this._client.error(`Sending document notification ${Pt.DidChangeTextDocumentNotification.type.method} failed`,n),n})}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,n){this._onNotificationSent.fire({original:e,type:t,params:n})}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer!==void 0&&this._changeDelayer.delayer.cancel(),this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{return this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(const t of this._changeData.values())if(bn.languages.match(t.documentSelector,e)>0)return{send:n=>this.callback(n)}}}var by=en.DidChangeTextDocumentFeature=V2;class K2 extends lt.TextDocumentEventFeature{constructor(e){super(e,bn.workspace.onWillSaveTextDocument,Pt.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),t=>t.document,(t,n)=>lt.TextDocumentEventFeature.textDocumentFilter(t,n.document))}get registrationType(){return Pt.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=(0,lt.ensure)((0,lt.ensure)(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSave&&this.register({id:Ts.generateUuid(),registerOptions:{documentSelector:t}})}}var Cy=en.WillSaveFeature=K2;class G2 extends lt.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return Pt.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=(0,lt.ensure)((0,lt.ensure)(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSaveWaitUntil&&this.register({id:Ts.generateUuid(),registerOptions:{documentSelector:t}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=bn.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(lt.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let t=this._client.middleware,n=r=>this._client.sendRequest(Pt.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(r)).then(async s=>{let o=await this._client.protocol2CodeConverter.asTextEdits(s);return o===void 0?[]:o});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}var Sy=en.WillSaveWaitUntilFeature=G2;class J2 extends lt.TextDocumentEventFeature{constructor(e){super(e,bn.workspace.onDidSaveTextDocument,Pt.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),t=>t,lt.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return Pt.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,lt.ensure)((0,lt.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){const n=e.resolvedTextDocumentSync;if(t&&n&&n.save){const r=typeof n.save=="boolean"?{includeText:!1}:{includeText:!!n.save.includeText};this.register({id:Ts.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},r)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}}_y=en.DidSaveTextDocumentFeature=J2;var ku={};Object.defineProperty(ku,"__esModule",{value:!0});var Dy=ku.CompletionItemFeature=void 0;const Q2=we,$e=Se,Td=We,X2=Ne,Y2=[$e.CompletionItemKind.Text,$e.CompletionItemKind.Method,$e.CompletionItemKind.Function,$e.CompletionItemKind.Constructor,$e.CompletionItemKind.Field,$e.CompletionItemKind.Variable,$e.CompletionItemKind.Class,$e.CompletionItemKind.Interface,$e.CompletionItemKind.Module,$e.CompletionItemKind.Property,$e.CompletionItemKind.Unit,$e.CompletionItemKind.Value,$e.CompletionItemKind.Enum,$e.CompletionItemKind.Keyword,$e.CompletionItemKind.Snippet,$e.CompletionItemKind.Color,$e.CompletionItemKind.File,$e.CompletionItemKind.Reference,$e.CompletionItemKind.Folder,$e.CompletionItemKind.EnumMember,$e.CompletionItemKind.Constant,$e.CompletionItemKind.Struct,$e.CompletionItemKind.Event,$e.CompletionItemKind.Operator,$e.CompletionItemKind.TypeParameter];class Z2 extends Td.TextDocumentLanguageFeature{constructor(e){super(e,$e.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=(0,Td.ensure)((0,Td.ensure)(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[$e.MarkupKind.Markdown,$e.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[$e.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[$e.InsertTextMode.asIs,$e.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},t.insertTextMode=$e.InsertTextMode.adjustIndentation,t.completionItemKind={valueSet:Y2},t.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(e,t){const n=this.getRegistrationOptions(t,e.completionProvider);!n||this.register({id:X2.generateUuid(),registerOptions:n})}registerLanguageProvider(e,t){this.labelDetailsSupport.set(t,!!e.completionItem?.labelDetailsSupport);const n=e.triggerCharacters??[],r=e.allCommitCharacters,s=e.documentSelector,o={provideCompletionItems:(a,c,u,l)=>{const g=this._client,h=this._client.middleware,d=(p,_,b,k)=>g.sendRequest($e.CompletionRequest.type,g.code2ProtocolConverter.asCompletionParams(p,_,b),k).then(y=>k.isCancellationRequested?null:g.protocol2CodeConverter.asCompletionResult(y,r,k),y=>g.handleFailedRequest($e.CompletionRequest.type,k,y,null));return h.provideCompletionItem?h.provideCompletionItem(a,c,l,u,d):d(a,c,l,u)},resolveCompletionItem:e.resolveProvider?(a,c)=>{const u=this._client,l=this._client.middleware,g=(h,d)=>u.sendRequest($e.CompletionResolveRequest.type,u.code2ProtocolConverter.asCompletionItem(h,!!this.labelDetailsSupport.get(t)),d).then(p=>d.isCancellationRequested?null:u.protocol2CodeConverter.asCompletionItem(p),p=>u.handleFailedRequest($e.CompletionResolveRequest.type,d,p,h));return l.resolveCompletionItem?l.resolveCompletionItem(a,c,g):g(a,c)}:void 0};return[Q2.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(s),o,...n),o]}}Dy=ku.CompletionItemFeature=Z2;var Pu={};Object.defineProperty(Pu,"__esModule",{value:!0});var Ey=Pu.HoverFeature=void 0;const eP=we,Ws=Se,kd=We,tP=Ne;class nP extends kd.TextDocumentLanguageFeature{constructor(e){super(e,Ws.HoverRequest.type)}fillClientCapabilities(e){const t=(0,kd.ensure)((0,kd.ensure)(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[Ws.MarkupKind.Markdown,Ws.MarkupKind.PlainText]}initialize(e,t){const n=this.getRegistrationOptions(t,e.hoverProvider);!n||this.register({id:tP.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideHover:(r,s,o)=>{const a=this._client,c=(l,g,h)=>a.sendRequest(Ws.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,g),h).then(d=>h.isCancellationRequested?null:a.protocol2CodeConverter.asHover(d),d=>a.handleFailedRequest(Ws.HoverRequest.type,h,d,null)),u=a.middleware;return u.provideHover?u.provideHover(r,s,o,c):c(r,s,o)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return eP.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}Ey=Pu.HoverFeature=nP;var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});var Ty=Ru.DefinitionFeature=void 0;const iP=we,Pd=Se,Rd=We,rP=Ne;class sP extends Rd.TextDocumentLanguageFeature{constructor(e){super(e,Pd.DefinitionRequest.type)}fillClientCapabilities(e){let t=(0,Rd.ensure)((0,Rd.ensure)(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.definitionProvider);!n||this.register({id:rP.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDefinition:(r,s,o)=>{const a=this._client,c=(l,g,h)=>a.sendRequest(Pd.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,g),h).then(d=>h.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(d,h),d=>a.handleFailedRequest(Pd.DefinitionRequest.type,h,d,null)),u=a.middleware;return u.provideDefinition?u.provideDefinition(r,s,o,c):c(r,s,o)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return iP.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}Ty=Ru.DefinitionFeature=sP;var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});var ky=Iu.SignatureHelpFeature=void 0;const Km=we,Us=Se,Id=We,oP=Ne;class aP extends Id.TextDocumentLanguageFeature{constructor(e){super(e,Us.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=(0,Id.ensure)((0,Id.ensure)(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[Us.MarkupKind.Markdown,Us.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.signatureHelpProvider);!n||this.register({id:oP.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t={provideSignatureHelp:(n,r,s,o)=>{const a=this._client,c=(l,g,h,d)=>a.sendRequest(Us.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(l,g,h),d).then(p=>d.isCancellationRequested?null:a.protocol2CodeConverter.asSignatureHelp(p,d),p=>a.handleFailedRequest(Us.SignatureHelpRequest.type,d,p,null)),u=a.middleware;return u.provideSignatureHelp?u.provideSignatureHelp(n,r,o,s,c):c(n,r,o,s)}};return[this.registerProvider(e,t),t]}registerProvider(e,t){const n=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){const r=e.triggerCharacters||[];return Km.languages.registerSignatureHelpProvider(n,t,...r)}else{const r={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return Km.languages.registerSignatureHelpProvider(n,t,r)}}}ky=Iu.SignatureHelpFeature=aP;var xu={};Object.defineProperty(xu,"__esModule",{value:!0});var Py=xu.DocumentHighlightFeature=void 0;const cP=we,xd=Se,Fd=We,uP=Ne;class dP extends Fd.TextDocumentLanguageFeature{constructor(e){super(e,xd.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,Fd.ensure)((0,Fd.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentHighlightProvider);!n||this.register({id:uP.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDocumentHighlights:(r,s,o)=>{const a=this._client,c=(l,g,h)=>a.sendRequest(xd.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,g),h).then(d=>h.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentHighlights(d,h),d=>a.handleFailedRequest(xd.DocumentHighlightRequest.type,h,d,null)),u=a.middleware;return u.provideDocumentHighlights?u.provideDocumentHighlights(r,s,o,c):c(r,s,o)}};return[cP.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}Py=xu.DocumentHighlightFeature=dP;var Fu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DocumentSymbolFeature=i.SupportedSymbolTags=i.SupportedSymbolKinds=void 0;const e=we,t=Se,n=We,r=Ne;i.SupportedSymbolKinds=[t.SymbolKind.File,t.SymbolKind.Module,t.SymbolKind.Namespace,t.SymbolKind.Package,t.SymbolKind.Class,t.SymbolKind.Method,t.SymbolKind.Property,t.SymbolKind.Field,t.SymbolKind.Constructor,t.SymbolKind.Enum,t.SymbolKind.Interface,t.SymbolKind.Function,t.SymbolKind.Variable,t.SymbolKind.Constant,t.SymbolKind.String,t.SymbolKind.Number,t.SymbolKind.Boolean,t.SymbolKind.Array,t.SymbolKind.Object,t.SymbolKind.Key,t.SymbolKind.Null,t.SymbolKind.EnumMember,t.SymbolKind.Struct,t.SymbolKind.Event,t.SymbolKind.Operator,t.SymbolKind.TypeParameter],i.SupportedSymbolTags=[t.SymbolTag.Deprecated];class s extends n.TextDocumentLanguageFeature{constructor(a){super(a,t.DocumentSymbolRequest.type)}fillClientCapabilities(a){let c=(0,n.ensure)((0,n.ensure)(a,"textDocument"),"documentSymbol");c.dynamicRegistration=!0,c.symbolKind={valueSet:i.SupportedSymbolKinds},c.hierarchicalDocumentSymbolSupport=!0,c.tagSupport={valueSet:i.SupportedSymbolTags},c.labelSupport=!0}initialize(a,c){const u=this.getRegistrationOptions(c,a.documentSymbolProvider);!u||this.register({id:r.generateUuid(),registerOptions:u})}registerLanguageProvider(a){const c=a.documentSelector,u={provideDocumentSymbols:(g,h)=>{const d=this._client,p=(b,k)=>d.sendRequest(t.DocumentSymbolRequest.type,d.code2ProtocolConverter.asDocumentSymbolParams(b),k).then(async y=>{if(k.isCancellationRequested||y===void 0||y===null)return null;if(y.length===0)return[];{const E=y[0];return t.DocumentSymbol.is(E)?await d.protocol2CodeConverter.asDocumentSymbols(y,k):await d.protocol2CodeConverter.asSymbolInformations(y,k)}},y=>d.handleFailedRequest(t.DocumentSymbolRequest.type,k,y,null)),_=d.middleware;return _.provideDocumentSymbols?_.provideDocumentSymbols(g,h,p):p(g,h)}},l=a.label!==void 0?{label:a.label}:void 0;return[e.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(c),u,l),u]}}i.DocumentSymbolFeature=s})(Fu);var Mu={};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.WorkspaceSymbolFeature=void 0;const lP=we,js=Se,Md=We,Gm=Fu,hP=Ne;class fP extends Md.WorkspaceFeature{constructor(e){super(e,js.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=(0,Md.ensure)((0,Md.ensure)(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:Gm.SupportedSymbolKinds},t.tagSupport={valueSet:Gm.SupportedSymbolTags},t.resolveSupport={properties:["location.range"]}}initialize(e){!e.workspaceSymbolProvider||this.register({id:hP.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){const t={provideWorkspaceSymbols:(n,r)=>{const s=this._client,o=(c,u)=>s.sendRequest(js.WorkspaceSymbolRequest.type,{query:c},u).then(l=>u.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformations(l,u),l=>s.handleFailedRequest(js.WorkspaceSymbolRequest.type,u,l,null)),a=s.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(n,r,o):o(n,r)},resolveWorkspaceSymbol:e.resolveProvider===!0?(n,r)=>{const s=this._client,o=(c,u)=>s.sendRequest(js.WorkspaceSymbolResolveRequest.type,s.code2ProtocolConverter.asWorkspaceSymbol(c),u).then(l=>u.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformation(l),l=>s.handleFailedRequest(js.WorkspaceSymbolResolveRequest.type,u,l,null)),a=s.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(n,r,o):o(n,r)}:void 0};return[lP.languages.registerWorkspaceSymbolProvider(t),t]}}Mu.WorkspaceSymbolFeature=fP;var Au={};Object.defineProperty(Au,"__esModule",{value:!0});var Ry=Au.ReferencesFeature=void 0;const gP=we,Ad=Se,Ld=We,pP=Ne;class mP extends Ld.TextDocumentLanguageFeature{constructor(e){super(e,Ad.ReferencesRequest.type)}fillClientCapabilities(e){(0,Ld.ensure)((0,Ld.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.referencesProvider);!n||this.register({id:pP.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideReferences:(r,s,o,a)=>{const c=this._client,u=(g,h,d,p)=>c.sendRequest(Ad.ReferencesRequest.type,c.code2ProtocolConverter.asReferenceParams(g,h,d),p).then(_=>p.isCancellationRequested?null:c.protocol2CodeConverter.asReferences(_,p),_=>c.handleFailedRequest(Ad.ReferencesRequest.type,p,_,null)),l=c.middleware;return l.provideReferences?l.provideReferences(r,s,o,a,u):u(r,s,o,a)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return gP.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}Ry=Au.ReferencesFeature=mP;var Lu={};Object.defineProperty(Lu,"__esModule",{value:!0});var Iy=Lu.CodeActionFeature=void 0;const vP=we,on=Se,_P=Ne,Od=We;class yP extends Od.TextDocumentLanguageFeature{constructor(e){super(e,on.CodeActionRequest.type)}fillClientCapabilities(e){const t=(0,Od.ensure)((0,Od.ensure)(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[on.CodeActionKind.Empty,on.CodeActionKind.QuickFix,on.CodeActionKind.Refactor,on.CodeActionKind.RefactorExtract,on.CodeActionKind.RefactorInline,on.CodeActionKind.RefactorRewrite,on.CodeActionKind.Source,on.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!1}initialize(e,t){const n=this.getRegistrationOptions(t,e.codeActionProvider);!n||this.register({id:_P.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideCodeActions:(r,s,o,a)=>{const c=this._client,u=async(g,h,d,p)=>{const _={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g),range:c.code2ProtocolConverter.asRange(h),context:await c.code2ProtocolConverter.asCodeActionContext(d,p)};return c.sendRequest(on.CodeActionRequest.type,_,p).then(b=>p.isCancellationRequested||b===null||b===void 0?null:c.protocol2CodeConverter.asCodeActionResult(b,p),b=>c.handleFailedRequest(on.CodeActionRequest.type,p,b,null))},l=c.middleware;return l.provideCodeActions?l.provideCodeActions(r,s,o,a,u):u(r,s,o,a)},resolveCodeAction:e.resolveProvider?(r,s)=>{const o=this._client,a=this._client.middleware,c=async(u,l)=>o.sendRequest(on.CodeActionResolveRequest.type,await o.code2ProtocolConverter.asCodeAction(u,l),l).then(g=>l.isCancellationRequested?u:o.protocol2CodeConverter.asCodeAction(g,l),g=>o.handleFailedRequest(on.CodeActionResolveRequest.type,l,g,u));return a.resolveCodeAction?a.resolveCodeAction(r,s,c):c(r,s)}:void 0};return[vP.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),n]}}Iy=Lu.CodeActionFeature=yP;var Ou={};Object.defineProperty(Ou,"__esModule",{value:!0});var xy=Ou.CodeLensFeature=void 0;const Jm=we,Fr=Se,wP=Ne,zs=We;class bP extends zs.TextDocumentLanguageFeature{constructor(e){super(e,Fr.CodeLensRequest.type)}fillClientCapabilities(e){(0,zs.ensure)((0,zs.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,zs.ensure)((0,zs.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(Fr.CodeLensRefreshRequest.type,async()=>{for(const s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});const r=this.getRegistrationOptions(t,e.codeLensProvider);!r||this.register({id:wP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,n=new Jm.EventEmitter,r={onDidChangeCodeLenses:n.event,provideCodeLenses:(s,o)=>{const a=this._client,c=(l,g)=>a.sendRequest(Fr.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(l),g).then(h=>g.isCancellationRequested?null:a.protocol2CodeConverter.asCodeLenses(h,g),h=>a.handleFailedRequest(Fr.CodeLensRequest.type,g,h,null)),u=a.middleware;return u.provideCodeLenses?u.provideCodeLenses(s,o,c):c(s,o)},resolveCodeLens:e.resolveProvider?(s,o)=>{const a=this._client,c=(l,g)=>a.sendRequest(Fr.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(l),g).then(h=>g.isCancellationRequested?l:a.protocol2CodeConverter.asCodeLens(h),h=>a.handleFailedRequest(Fr.CodeLensResolveRequest.type,g,h,l)),u=a.middleware;return u.resolveCodeLens?u.resolveCodeLens(s,o,c):c(s,o)}:void 0};return[Jm.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),{provider:r,onDidChangeCodeLensEmitter:n}]}}xy=Ou.CodeLensFeature=bP;var Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});var Fy=Ai.DocumentOnTypeFormattingFeature=Ay=Ai.DocumentRangeFormattingFeature=My=Ai.DocumentFormattingFeature=void 0;const $u=we,ai=Se,up=Ne,ci=We;var Jo;(function(i){function e(t){const n=$u.workspace.getConfiguration("files",t);return{trimTrailingWhitespace:n.get("trimTrailingWhitespace"),trimFinalNewlines:n.get("trimFinalNewlines"),insertFinalNewline:n.get("insertFinalNewline")}}i.fromConfiguration=e})(Jo||(Jo={}));class CP extends ci.TextDocumentLanguageFeature{constructor(e){super(e,ai.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,ci.ensure)((0,ci.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentFormattingProvider);!n||this.register({id:up.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDocumentFormattingEdits:(r,s,o)=>{const a=this._client,c=(l,g,h)=>{const d={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),options:a.code2ProtocolConverter.asFormattingOptions(g,Jo.fromConfiguration(l))};return a.sendRequest(ai.DocumentFormattingRequest.type,d,h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asTextEdits(p,h),p=>a.handleFailedRequest(ai.DocumentFormattingRequest.type,h,p,null))},u=a.middleware;return u.provideDocumentFormattingEdits?u.provideDocumentFormattingEdits(r,s,o,c):c(r,s,o)}};return[$u.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}var My=Ai.DocumentFormattingFeature=CP;class SP extends ci.TextDocumentLanguageFeature{constructor(e){super(e,ai.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){(0,ci.ensure)((0,ci.ensure)(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);!n||this.register({id:up.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDocumentRangeFormattingEdits:(r,s,o,a)=>{const c=this._client,u=(g,h,d,p)=>{const _={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g),range:c.code2ProtocolConverter.asRange(h),options:c.code2ProtocolConverter.asFormattingOptions(d,Jo.fromConfiguration(g))};return c.sendRequest(ai.DocumentRangeFormattingRequest.type,_,p).then(b=>p.isCancellationRequested?null:c.protocol2CodeConverter.asTextEdits(b,p),b=>c.handleFailedRequest(ai.DocumentRangeFormattingRequest.type,p,b,null))},l=c.middleware;return l.provideDocumentRangeFormattingEdits?l.provideDocumentRangeFormattingEdits(r,s,o,a,u):u(r,s,o,a)}};return[$u.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}var Ay=Ai.DocumentRangeFormattingFeature=SP;class DP extends ci.TextDocumentLanguageFeature{constructor(e){super(e,ai.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,ci.ensure)((0,ci.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);!n||this.register({id:up.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideOnTypeFormattingEdits:(s,o,a,c,u)=>{const l=this._client,g=(d,p,_,b,k)=>{let y={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(d),position:l.code2ProtocolConverter.asPosition(p),ch:_,options:l.code2ProtocolConverter.asFormattingOptions(b,Jo.fromConfiguration(d))};return l.sendRequest(ai.DocumentOnTypeFormattingRequest.type,y,k).then(E=>k.isCancellationRequested?null:l.protocol2CodeConverter.asTextEdits(E,k),E=>l.handleFailedRequest(ai.DocumentOnTypeFormattingRequest.type,k,E,null))},h=l.middleware;return h.provideOnTypeFormattingEdits?h.provideOnTypeFormattingEdits(s,o,a,c,u,g):g(s,o,a,c,u)}},r=e.moreTriggerCharacter||[];return[$u.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n,e.firstTriggerCharacter,...r),n]}}Fy=Ai.DocumentOnTypeFormattingFeature=DP;var Nu={};Object.defineProperty(Nu,"__esModule",{value:!0});var Ly=Nu.RenameFeature=void 0;const EP=we,Bi=Se,TP=Ne,Qm=Ve,$d=We;class kP extends $d.TextDocumentLanguageFeature{constructor(e){super(e,Bi.RenameRequest.type)}fillClientCapabilities(e){let t=(0,$d.ensure)((0,$d.ensure)(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=Bi.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.renameProvider);!n||(Qm.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register({id:TP.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){const t=e.documentSelector,n={provideRenameEdits:(r,s,o,a)=>{const c=this._client,u=(g,h,d,p)=>{let _={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g),position:c.code2ProtocolConverter.asPosition(h),newName:d};return c.sendRequest(Bi.RenameRequest.type,_,p).then(b=>p.isCancellationRequested?null:c.protocol2CodeConverter.asWorkspaceEdit(b,p),b=>c.handleFailedRequest(Bi.RenameRequest.type,p,b,null,!1))},l=c.middleware;return l.provideRenameEdits?l.provideRenameEdits(r,s,o,a,u):u(r,s,o,a)},prepareRename:e.prepareProvider?(r,s,o)=>{const a=this._client,c=(l,g,h)=>{let d={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),position:a.code2ProtocolConverter.asPosition(g)};return a.sendRequest(Bi.PrepareRenameRequest.type,d,h).then(p=>h.isCancellationRequested?null:Bi.Range.is(p)?a.protocol2CodeConverter.asRange(p):this.isDefaultBehavior(p)?p.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):p&&Bi.Range.is(p.range)?{range:a.protocol2CodeConverter.asRange(p.range),placeholder:p.placeholder}:Promise.reject(new Error("The element can't be renamed.")),p=>{throw typeof p.message=="string"?new Error(p.message):new Error("The element can't be renamed.")})},u=a.middleware;return u.prepareRename?u.prepareRename(r,s,o,c):c(r,s,o)}:void 0};return[this.registerProvider(t,n),n]}registerProvider(e,t){return EP.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}isDefaultBehavior(e){const t=e;return t&&Qm.boolean(t.defaultBehavior)}}Ly=Nu.RenameFeature=kP;var Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});var Oy=Hu.DocumentLinkFeature=void 0;const PP=we,Bs=Se,Nd=We,RP=Ne;class IP extends Nd.TextDocumentLanguageFeature{constructor(e){super(e,Bs.DocumentLinkRequest.type)}fillClientCapabilities(e){const t=(0,Nd.ensure)((0,Nd.ensure)(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentLinkProvider);!n||this.register({id:RP.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDocumentLinks:(r,s)=>{const o=this._client,a=(u,l)=>o.sendRequest(Bs.DocumentLinkRequest.type,o.code2ProtocolConverter.asDocumentLinkParams(u),l).then(g=>l.isCancellationRequested?null:o.protocol2CodeConverter.asDocumentLinks(g,l),g=>o.handleFailedRequest(Bs.DocumentLinkRequest.type,l,g,null)),c=o.middleware;return c.provideDocumentLinks?c.provideDocumentLinks(r,s,a):a(r,s)},resolveDocumentLink:e.resolveProvider?(r,s)=>{const o=this._client;let a=(u,l)=>o.sendRequest(Bs.DocumentLinkResolveRequest.type,o.code2ProtocolConverter.asDocumentLink(u),l).then(g=>l.isCancellationRequested?u:o.protocol2CodeConverter.asDocumentLink(g),g=>o.handleFailedRequest(Bs.DocumentLinkResolveRequest.type,l,g,u));const c=o.middleware;return c.resolveDocumentLink?c.resolveDocumentLink(r,s,a):a(r,s)}:void 0};return[PP.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}Oy=Hu.DocumentLinkFeature=IP;var qu={};Object.defineProperty(qu,"__esModule",{value:!0});var $y=qu.ExecuteCommandFeature=void 0;const xP=we,Hd=Se,FP=Ne,Xm=We;class MP{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return Hd.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,Xm.ensure)((0,Xm.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:FP.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){const t=this._client,n=t.middleware,r=(s,o)=>{let a={command:s,arguments:o};return t.sendRequest(Hd.ExecuteCommandRequest.type,a).then(void 0,c=>t.handleFailedRequest(Hd.ExecuteCommandRequest.type,void 0,c,void 0))};if(e.registerOptions.commands){const s=[];for(const o of e.registerOptions.commands)s.push(xP.commands.registerCommand(o,(...a)=>n.executeCommand?n.executeCommand(o,a,r):r(o,a)));this._commands.set(e.id,s)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(n=>n.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())}),this._commands.clear()}}$y=qu.ExecuteCommandFeature=MP;var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});Wu.FileSystemWatcherFeature=void 0;const AP=we,Vi=Se,Ra=We;class LP{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return Vi.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,Ra.ensure)((0,Ra.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,Ra.ensure)((0,Ra.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;const t=[];for(const n of e.registerOptions.watchers){const r=this._client.protocol2CodeConverter.asGlobPattern(n.globPattern);if(r===void 0)continue;let s=!0,o=!0,a=!0;n.kind!==void 0&&n.kind!==null&&(s=(n.kind&Vi.WatchKind.Create)!==0,o=(n.kind&Vi.WatchKind.Change)!==0,a=(n.kind&Vi.WatchKind.Delete)!==0);const c=AP.workspace.createFileSystemWatcher(r,!s,!o,!a);this.hookListeners(c,s,o,a,t),t.push(c)}this._watchers.set(e.id,t)}registerRaw(e,t){let n=[];for(let r of t)this.hookListeners(r,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,t,n,r,s){t&&e.onDidCreate(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Vi.FileChangeType.Created}),null,s),n&&e.onDidChange(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Vi.FileChangeType.Changed}),null,s),r&&e.onDidDelete(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Vi.FileChangeType.Deleted}),null,s)}unregister(e){let t=this._watchers.get(e);if(t)for(let n of t)n.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}}Wu.FileSystemWatcherFeature=LP;var Uu={};Object.defineProperty(Uu,"__esModule",{value:!0});var Ny=Uu.ColorProviderFeature=void 0;const OP=we,Vs=Se,qd=We;class $P extends qd.TextDocumentLanguageFeature{constructor(e){super(e,Vs.DocumentColorRequest.type)}fillClientCapabilities(e){(0,qd.ensure)((0,qd.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[n,r]=this.getRegistration(t,e.colorProvider);!n||!r||this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,n={provideColorPresentations:(r,s,o)=>{const a=this._client,c=(l,g,h)=>{const d={color:l,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g.document),range:a.code2ProtocolConverter.asRange(g.range)};return a.sendRequest(Vs.ColorPresentationRequest.type,d,h).then(p=>h.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(p,h),p=>a.handleFailedRequest(Vs.ColorPresentationRequest.type,h,p,null))},u=a.middleware;return u.provideColorPresentations?u.provideColorPresentations(r,s,o,c):c(r,s,o)},provideDocumentColors:(r,s)=>{const o=this._client,a=(u,l)=>{const g={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(u)};return o.sendRequest(Vs.DocumentColorRequest.type,g,l).then(h=>l.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(h,l),h=>o.handleFailedRequest(Vs.DocumentColorRequest.type,l,h,null))},c=o.middleware;return c.provideDocumentColors?c.provideDocumentColors(r,s,a):a(r,s)}};return[OP.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}Ny=Uu.ColorProviderFeature=$P;var ju={};Object.defineProperty(ju,"__esModule",{value:!0});var Hy=ju.ImplementationFeature=void 0;const NP=we,Wd=Se,Ud=We;class HP extends Ud.TextDocumentLanguageFeature{constructor(e){super(e,Wd.ImplementationRequest.type)}fillClientCapabilities(e){let t=(0,Ud.ensure)((0,Ud.ensure)(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,r]=this.getRegistration(t,e.implementationProvider);!n||!r||this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,n={provideImplementation:(r,s,o)=>{const a=this._client,c=(l,g,h)=>a.sendRequest(Wd.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,g),h).then(d=>h.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(d,h),d=>a.handleFailedRequest(Wd.ImplementationRequest.type,h,d,null)),u=a.middleware;return u.provideImplementation?u.provideImplementation(r,s,o,c):c(r,s,o)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return NP.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}Hy=ju.ImplementationFeature=HP;var zu={};Object.defineProperty(zu,"__esModule",{value:!0});var qy=zu.TypeDefinitionFeature=void 0;const qP=we,jd=Se,Ks=We;class WP extends Ks.TextDocumentLanguageFeature{constructor(e){super(e,jd.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,Ks.ensure)((0,Ks.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=(0,Ks.ensure)((0,Ks.ensure)(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,r]=this.getRegistration(t,e.typeDefinitionProvider);!n||!r||this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,n={provideTypeDefinition:(r,s,o)=>{const a=this._client,c=(l,g,h)=>a.sendRequest(jd.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,g),h).then(d=>h.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(d,h),d=>a.handleFailedRequest(jd.TypeDefinitionRequest.type,h,d,null)),u=a.middleware;return u.provideTypeDefinition?u.provideTypeDefinition(r,s,o,c):c(r,s,o)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return qP.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}qy=zu.TypeDefinitionFeature=WP;var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});var Wy=Cs.WorkspaceFoldersFeature=Cs.arrayDiff=void 0;const UP=Ne,Ia=we,Gs=Se;function zd(i,e){if(i!==void 0)return i[e]}function Sg(i,e){return i.filter(t=>e.indexOf(t)<0)}Cs.arrayDiff=Sg;class jP{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Gs.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){const t=Ia.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(n=>this.asProtocol(n))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){const t=this._client;t.onRequest(Gs.WorkspaceFoldersRequest.type,s=>{const o=()=>{const c=Ia.workspace.workspaceFolders;return c===void 0?null:c.map(l=>this.asProtocol(l))},a=t.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(s,o):o()});const n=zd(zd(zd(e,"workspace"),"workspaceFolders"),"changeNotifications");let r;typeof n=="string"?r=n:n===!0&&(r=UP.generateUuid()),r&&this.register({id:r,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&&e){const n=Sg(this._initialFolders,e),r=Sg(e,this._initialFolders);(r.length>0||n.length>0)&&(t=this.doSendEvent(r,n))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&&(t=this.doSendEvent(e,[]));t!==void 0&&t.catch(n=>{this._client.error(`Sending notification ${Gs.DidChangeWorkspaceFoldersNotification.type.method} failed`,n)})}doSendEvent(e,t){let n={event:{added:e.map(r=>this.asProtocol(r)),removed:t.map(r=>this.asProtocol(r))}};return this._client.sendNotification(Gs.DidChangeWorkspaceFoldersNotification.type,n)}register(e){let t=e.id,n=this._client,r=Ia.workspace.onDidChangeWorkspaceFolders(s=>{let o=u=>this.doSendEvent(u.added,u.removed),a=n.middleware.workspace;(a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(s,o):o(s)).catch(u=>{this._client.error(`Sending notification ${Gs.DidChangeWorkspaceFoldersNotification.type.method} failed`,u)})});this._listeners.set(t,r),this.sendInitialEvent(Ia.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}}Wy=Cs.WorkspaceFoldersFeature=jP;var Bu={};Object.defineProperty(Bu,"__esModule",{value:!0});var Uy=Bu.FoldingRangeFeature=void 0;const zP=we,Mr=Se,Bd=We;class BP extends Bd.TextDocumentLanguageFeature{constructor(e){super(e,Mr.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=(0,Bd.ensure)((0,Bd.ensure)(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0,t.foldingRangeKind={valueSet:[Mr.FoldingRangeKind.Comment,Mr.FoldingRangeKind.Imports,Mr.FoldingRangeKind.Region]},t.foldingRange={collapsedText:!1}}initialize(e,t){let[n,r]=this.getRegistration(t,e.foldingRangeProvider);!n||!r||this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,n={provideFoldingRanges:(r,s,o)=>{const a=this._client,c=(l,g,h)=>{const d={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l)};return a.sendRequest(Mr.FoldingRangeRequest.type,d,h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asFoldingRanges(p,h),p=>a.handleFailedRequest(Mr.FoldingRangeRequest.type,h,p,null))},u=a.middleware;return u.provideFoldingRanges?u.provideFoldingRanges(r,s,o,c):c(r,s,o)}};return[zP.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}Uy=Bu.FoldingRangeFeature=BP;var Vu={};Object.defineProperty(Vu,"__esModule",{value:!0});var jy=Vu.DeclarationFeature=void 0;const VP=we,Vd=Se,Kd=We;class KP extends Kd.TextDocumentLanguageFeature{constructor(e){super(e,Vd.DeclarationRequest.type)}fillClientCapabilities(e){const t=(0,Kd.ensure)((0,Kd.ensure)(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){const[n,r]=this.getRegistration(t,e.declarationProvider);!n||!r||this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,n={provideDeclaration:(r,s,o)=>{const a=this._client,c=(l,g,h)=>a.sendRequest(Vd.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,g),h).then(d=>h.isCancellationRequested?null:a.protocol2CodeConverter.asDeclarationResult(d,h),d=>a.handleFailedRequest(Vd.DeclarationRequest.type,h,d,null)),u=a.middleware;return u.provideDeclaration?u.provideDeclaration(r,s,o,c):c(r,s,o)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return VP.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}jy=Vu.DeclarationFeature=KP;var Ku={};Object.defineProperty(Ku,"__esModule",{value:!0});var zy=Ku.SelectionRangeFeature=void 0;const GP=we,Gd=Se,Jd=We;class JP extends Jd.TextDocumentLanguageFeature{constructor(e){super(e,Gd.SelectionRangeRequest.type)}fillClientCapabilities(e){const t=(0,Jd.ensure)((0,Jd.ensure)(e,"textDocument"),"selectionRange");t.dynamicRegistration=!0}initialize(e,t){const[n,r]=this.getRegistration(t,e.selectionRangeProvider);!n||!r||this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,n={provideSelectionRanges:(r,s,o)=>{const a=this._client,c=async(l,g,h)=>{const d={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(l),positions:await a.code2ProtocolConverter.asPositions(g,h)};return a.sendRequest(Gd.SelectionRangeRequest.type,d,h).then(p=>h.isCancellationRequested?null:a.protocol2CodeConverter.asSelectionRanges(p,h),p=>a.handleFailedRequest(Gd.SelectionRangeRequest.type,h,p,null))},u=a.middleware;return u.provideSelectionRanges?u.provideSelectionRanges(r,s,o,c):c(r,s,o)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return GP.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}zy=Ku.SelectionRangeFeature=JP;var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});var By=Gu.ProgressFeature=void 0;const Ym=Se,QP=ca;function XP(i,e){return i[e]===void 0&&(i[e]=Object.create(null)),i[e]}class YP{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:Ym.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){XP(e,"window").workDoneProgress=!0}initialize(){const e=this._client,t=r=>{this.activeParts.delete(r)},n=r=>{this.activeParts.add(new QP.ProgressPart(this._client,r.token,t))};e.onRequest(Ym.WorkDoneProgressCreateRequest.type,n)}dispose(){for(const e of this.activeParts)e.done();this.activeParts.clear()}}By=Gu.ProgressFeature=YP;var Ju={};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.CallHierarchyFeature=void 0;const ZP=we,Qi=Se,Qd=We;class eR{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,t,n){const r=this.client,s=this.middleware,o=(a,c,u)=>{const l=r.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return r.sendRequest(Qi.CallHierarchyPrepareRequest.type,l,u).then(g=>u.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyItems(g,u),g=>r.handleFailedRequest(Qi.CallHierarchyPrepareRequest.type,u,g,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,t,n,o):o(e,t,n)}provideCallHierarchyIncomingCalls(e,t){const n=this.client,r=this.middleware,s=(o,a)=>{const c={item:n.code2ProtocolConverter.asCallHierarchyItem(o)};return n.sendRequest(Qi.CallHierarchyIncomingCallsRequest.type,c,a).then(u=>a.isCancellationRequested?null:n.protocol2CodeConverter.asCallHierarchyIncomingCalls(u,a),u=>n.handleFailedRequest(Qi.CallHierarchyIncomingCallsRequest.type,a,u,null))};return r.provideCallHierarchyIncomingCalls?r.provideCallHierarchyIncomingCalls(e,t,s):s(e,t)}provideCallHierarchyOutgoingCalls(e,t){const n=this.client,r=this.middleware,s=(o,a)=>{const c={item:n.code2ProtocolConverter.asCallHierarchyItem(o)};return n.sendRequest(Qi.CallHierarchyOutgoingCallsRequest.type,c,a).then(u=>a.isCancellationRequested?null:n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(u,a),u=>n.handleFailedRequest(Qi.CallHierarchyOutgoingCallsRequest.type,a,u,null))};return r.provideCallHierarchyOutgoingCalls?r.provideCallHierarchyOutgoingCalls(e,t,s):s(e,t)}}class tR extends Qd.TextDocumentLanguageFeature{constructor(e){super(e,Qi.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){const t=e,n=(0,Qd.ensure)((0,Qd.ensure)(t,"textDocument"),"callHierarchy");n.dynamicRegistration=!0}initialize(e,t){const[n,r]=this.getRegistration(t,e.callHierarchyProvider);!n||!r||this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=this._client,n=new eR(t);return[ZP.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),n),n]}}Ju.CallHierarchyFeature=tR;var Qu={};Object.defineProperty(Qu,"__esModule",{value:!0});var Vy=Qu.SemanticTokensFeature=void 0;const xa=we,Ce=Se,Js=We,nR=Ve;class iR extends Js.TextDocumentLanguageFeature{constructor(e){super(e,Ce.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){const t=(0,Js.ensure)((0,Js.ensure)(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[Ce.SemanticTokenTypes.namespace,Ce.SemanticTokenTypes.type,Ce.SemanticTokenTypes.class,Ce.SemanticTokenTypes.enum,Ce.SemanticTokenTypes.interface,Ce.SemanticTokenTypes.struct,Ce.SemanticTokenTypes.typeParameter,Ce.SemanticTokenTypes.parameter,Ce.SemanticTokenTypes.variable,Ce.SemanticTokenTypes.property,Ce.SemanticTokenTypes.enumMember,Ce.SemanticTokenTypes.event,Ce.SemanticTokenTypes.function,Ce.SemanticTokenTypes.method,Ce.SemanticTokenTypes.macro,Ce.SemanticTokenTypes.keyword,Ce.SemanticTokenTypes.modifier,Ce.SemanticTokenTypes.comment,Ce.SemanticTokenTypes.string,Ce.SemanticTokenTypes.number,Ce.SemanticTokenTypes.regexp,Ce.SemanticTokenTypes.operator,Ce.SemanticTokenTypes.decorator],t.tokenModifiers=[Ce.SemanticTokenModifiers.declaration,Ce.SemanticTokenModifiers.definition,Ce.SemanticTokenModifiers.readonly,Ce.SemanticTokenModifiers.static,Ce.SemanticTokenModifiers.deprecated,Ce.SemanticTokenModifiers.abstract,Ce.SemanticTokenModifiers.async,Ce.SemanticTokenModifiers.modification,Ce.SemanticTokenModifiers.documentation,Ce.SemanticTokenModifiers.defaultLibrary],t.formats=[Ce.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,(0,Js.ensure)((0,Js.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(Ce.SemanticTokensRefreshRequest.type,async()=>{for(const o of this.getAllProviders())o.onDidChangeSemanticTokensEmitter.fire()});const[r,s]=this.getRegistration(t,e.semanticTokensProvider);!r||!s||this.register({id:r,registerOptions:s})}registerLanguageProvider(e){const t=e.documentSelector,n=nR.boolean(e.full)?e.full:e.full!==void 0,r=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,s=new xa.EventEmitter,o=n?{onDidChangeSemanticTokens:s.event,provideDocumentSemanticTokens:(d,p)=>{const _=this._client,b=_.middleware,k=(y,E)=>{const M={textDocument:_.code2ProtocolConverter.asTextDocumentIdentifier(y)};return _.sendRequest(Ce.SemanticTokensRequest.type,M,E).then(q=>E.isCancellationRequested?null:_.protocol2CodeConverter.asSemanticTokens(q,E),q=>_.handleFailedRequest(Ce.SemanticTokensRequest.type,E,q,null))};return b.provideDocumentSemanticTokens?b.provideDocumentSemanticTokens(d,p,k):k(d,p)},provideDocumentSemanticTokensEdits:r?(d,p,_)=>{const b=this._client,k=b.middleware,y=(E,M,q)=>{const J={textDocument:b.code2ProtocolConverter.asTextDocumentIdentifier(E),previousResultId:M};return b.sendRequest(Ce.SemanticTokensDeltaRequest.type,J,q).then(async Q=>q.isCancellationRequested?null:Ce.SemanticTokens.is(Q)?await b.protocol2CodeConverter.asSemanticTokens(Q,q):await b.protocol2CodeConverter.asSemanticTokensEdits(Q,q),Q=>b.handleFailedRequest(Ce.SemanticTokensDeltaRequest.type,q,Q,null))};return k.provideDocumentSemanticTokensEdits?k.provideDocumentSemanticTokensEdits(d,p,_,y):y(d,p,_)}:void 0}:void 0,c=e.range===!0?{provideDocumentRangeSemanticTokens:(d,p,_)=>{const b=this._client,k=b.middleware,y=(E,M,q)=>{const J={textDocument:b.code2ProtocolConverter.asTextDocumentIdentifier(E),range:b.code2ProtocolConverter.asRange(M)};return b.sendRequest(Ce.SemanticTokensRangeRequest.type,J,q).then(Q=>q.isCancellationRequested?null:b.protocol2CodeConverter.asSemanticTokens(Q,q),Q=>b.handleFailedRequest(Ce.SemanticTokensRangeRequest.type,q,Q,null))};return k.provideDocumentRangeSemanticTokens?k.provideDocumentRangeSemanticTokens(d,p,_,y):y(d,p,_)}}:void 0,u=[],l=this._client,g=l.protocol2CodeConverter.asSemanticTokensLegend(e.legend),h=l.protocol2CodeConverter.asDocumentSelector(t);return o!==void 0&&u.push(xa.languages.registerDocumentSemanticTokensProvider(h,o,g)),c!==void 0&&u.push(xa.languages.registerDocumentRangeSemanticTokensProvider(h,c,g)),[new xa.Disposable(()=>u.forEach(d=>d.dispose())),{range:c,full:o,onDidChangeSemanticTokensEmitter:s}]}}Vy=Qu.SemanticTokensFeature=iR;var tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.WillDeleteFilesFeature=tn.WillRenameFilesFeature=tn.WillCreateFilesFeature=tn.DidDeleteFilesFeature=tn.DidRenameFilesFeature=tn.DidCreateFilesFeature=void 0;const Cn=we,rR=ap,ui=Se,sR=Ne;function Zm(i,e){return i[e]===void 0&&(i[e]={}),i[e]}function oR(i,e){return i[e]}function ev(i,e,t){i[e]=t}class pr{constructor(e,t,n,r,s){this._client=e,this._event=t,this._registrationType=n,this._clientCapability=r,this._serverCapability=s,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){const t=Zm(Zm(e,"workspace"),"fileOperations");ev(t,"dynamicRegistration",!0),ev(t,this._clientCapability,!0)}initialize(e){const t=e.workspace?.fileOperations,n=t!==void 0?oR(t,this._serverCapability):void 0;if(n?.filters!==void 0)try{this.register({id:sR.generateUuid(),registerOptions:{filters:n.filters}})}catch(r){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${r}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));const t=e.registerOptions.filters.map(n=>{const r=new rR.Minimatch(n.pattern.glob,pr.asMinimatchOptions(n.pattern.options));if(!r.makeRe())throw new Error(`Invalid pattern ${n.pattern.glob}!`);return{scheme:n.scheme,matcher:r,kind:n.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return pr.getFileType(e)}async filter(e,t){const n=await Promise.all(e.files.map(async s=>{const o=t(s),a=o.fsPath.replace(/\\/g,"/");for(const c of this._filters.values())for(const u of c)if(!(u.scheme!==void 0&&u.scheme!==o.scheme)){if(u.matcher.match(a)){if(u.kind===void 0)return!0;const l=await this.getFileType(o);if(l===void 0)return this._client.error(`Failed to determine file type for ${o.toString()}.`),!0;if(l===Cn.FileType.File&&u.kind===ui.FileOperationPatternKind.file||l===Cn.FileType.Directory&&u.kind===ui.FileOperationPatternKind.folder)return!0}else if(u.kind===ui.FileOperationPatternKind.folder&&await pr.getFileType(o)===Cn.FileType.Directory&&u.matcher.match(`${a}/`))return!0}return!1})),r=e.files.filter((s,o)=>n[o]);return{...e,files:r}}static async getFileType(e){try{return(await Cn.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}}class Ky extends pr{constructor(e,t,n,r,s,o,a){super(e,t,n,r,s),this._notificationType=n,this._accessUri=o,this._createParams=a}async send(e){const t=await this.filter(e,this._accessUri);if(t.files.length){const n=async r=>this._client.sendNotification(this._notificationType,this._createParams(r));return this.doSend(t,n)}}}class Gy extends Ky{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){const t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);const n=await pr.getFileType(e);return n&&this._fsPathFileTypes.set(t,n),n}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}}class aR extends Ky{constructor(e){super(e,Cn.workspace.onDidCreateFiles,ui.DidCreateFilesNotification.type,"didCreate","didCreate",t=>t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){const n=this._client.middleware.workspace;return n?.didCreateFiles?n.didCreateFiles(e,t):t(e)}}tn.DidCreateFilesFeature=aR;class cR extends Gy{constructor(e){super(e,Cn.workspace.onDidRenameFiles,ui.DidRenameFilesNotification.type,"didRename","didRename",t=>t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=Cn.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=>t.oldUri))}doSend(e,t){this.clearFileTypeCache();const n=this._client.middleware.workspace;return n?.didRenameFiles?n.didRenameFiles(e,t):t(e)}}tn.DidRenameFilesFeature=cR;class uR extends Gy{constructor(e){super(e,Cn.workspace.onDidDeleteFiles,ui.DidDeleteFilesNotification.type,"didDelete","didDelete",t=>t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=Cn.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=>t))}doSend(e,t){this.clearFileTypeCache();const n=this._client.middleware.workspace;return n?.didDeleteFiles?n.didDeleteFiles(e,t):t(e)}}tn.DidDeleteFilesFeature=uR;class dp extends pr{constructor(e,t,n,r,s,o,a){super(e,t,n,r,s),this._requestType=n,this._accessUri=o,this._createParams=a}async send(e){const t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){const t=await this.filter(e,this._accessUri);if(t.files.length){const n=r=>this._client.sendRequest(this._requestType,this._createParams(r),r.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,n)}else return}}class dR extends dp{constructor(e){super(e,Cn.workspace.onWillCreateFiles,ui.WillCreateFilesRequest.type,"willCreate","willCreate",t=>t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){const n=this._client.middleware.workspace;return n?.willCreateFiles?n.willCreateFiles(e,t):t(e)}}tn.WillCreateFilesFeature=dR;class lR extends dp{constructor(e){super(e,Cn.workspace.onWillRenameFiles,ui.WillRenameFilesRequest.type,"willRename","willRename",t=>t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){const n=this._client.middleware.workspace;return n?.willRenameFiles?n.willRenameFiles(e,t):t(e)}}tn.WillRenameFilesFeature=lR;class hR extends dp{constructor(e){super(e,Cn.workspace.onWillDeleteFiles,ui.WillDeleteFilesRequest.type,"willDelete","willDelete",t=>t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){const n=this._client.middleware.workspace;return n?.willDeleteFiles?n.willDeleteFiles(e,t):t(e)}}tn.WillDeleteFilesFeature=hR;var Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});var Jy=Xu.LinkedEditingFeature=void 0;const fR=we,Xd=Se,Yd=We;class gR extends Yd.TextDocumentLanguageFeature{constructor(e){super(e,Xd.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){const t=(0,Yd.ensure)((0,Yd.ensure)(e,"textDocument"),"linkedEditingRange");t.dynamicRegistration=!0}initialize(e,t){let[n,r]=this.getRegistration(t,e.linkedEditingRangeProvider);!n||!r||this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,n={provideLinkedEditingRanges:(r,s,o)=>{const a=this._client,c=(l,g,h)=>a.sendRequest(Xd.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(l,g),h).then(d=>h.isCancellationRequested?null:a.protocol2CodeConverter.asLinkedEditingRanges(d,h),d=>a.handleFailedRequest(Xd.LinkedEditingRangeRequest.type,h,d,null)),u=a.middleware;return u.provideLinkedEditingRange?u.provideLinkedEditingRange(r,s,o,c):c(r,s,o)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return fR.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}Jy=Xu.LinkedEditingFeature=gR;var Yu={};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.TypeHierarchyFeature=void 0;const pR=we,Xi=Se,Zd=We;class mR{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,t,n){const r=this.client,s=this.middleware,o=(a,c,u)=>{const l=r.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return r.sendRequest(Xi.TypeHierarchyPrepareRequest.type,l,u).then(g=>u.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(g,u),g=>r.handleFailedRequest(Xi.TypeHierarchyPrepareRequest.type,u,g,null))};return s.prepareTypeHierarchy?s.prepareTypeHierarchy(e,t,n,o):o(e,t,n)}provideTypeHierarchySupertypes(e,t){const n=this.client,r=this.middleware,s=(o,a)=>{const c={item:n.code2ProtocolConverter.asTypeHierarchyItem(o)};return n.sendRequest(Xi.TypeHierarchySupertypesRequest.type,c,a).then(u=>a.isCancellationRequested?null:n.protocol2CodeConverter.asTypeHierarchyItems(u,a),u=>n.handleFailedRequest(Xi.TypeHierarchySupertypesRequest.type,a,u,null))};return r.provideTypeHierarchySupertypes?r.provideTypeHierarchySupertypes(e,t,s):s(e,t)}provideTypeHierarchySubtypes(e,t){const n=this.client,r=this.middleware,s=(o,a)=>{const c={item:n.code2ProtocolConverter.asTypeHierarchyItem(o)};return n.sendRequest(Xi.TypeHierarchySubtypesRequest.type,c,a).then(u=>a.isCancellationRequested?null:n.protocol2CodeConverter.asTypeHierarchyItems(u,a),u=>n.handleFailedRequest(Xi.TypeHierarchySubtypesRequest.type,a,u,null))};return r.provideTypeHierarchySubtypes?r.provideTypeHierarchySubtypes(e,t,s):s(e,t)}}class vR extends Zd.TextDocumentLanguageFeature{constructor(e){super(e,Xi.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){const t=(0,Zd.ensure)((0,Zd.ensure)(e,"textDocument"),"typeHierarchy");t.dynamicRegistration=!0}initialize(e,t){const[n,r]=this.getRegistration(t,e.typeHierarchyProvider);!n||!r||this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=this._client,n=new mR(t);return[pR.languages.registerTypeHierarchyProvider(t.protocol2CodeConverter.asDocumentSelector(e.documentSelector),n),n]}}Yu.TypeHierarchyFeature=vR;var Zu={};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.InlineValueFeature=void 0;const tv=we,Fa=Se,Qs=We;class _R extends Qs.TextDocumentLanguageFeature{constructor(e){super(e,Fa.InlineValueRequest.type)}fillClientCapabilities(e){(0,Qs.ensure)((0,Qs.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,Qs.ensure)((0,Qs.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,t){this._client.onRequest(Fa.InlineValueRefreshRequest.type,async()=>{for(const s of this.getAllProviders())s.onDidChangeInlineValues.fire()});const[n,r]=this.getRegistration(t,e.inlineValueProvider);!n||!r||this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,n=new tv.EventEmitter,r={onDidChangeInlineValues:n.event,provideInlineValues:(s,o,a,c)=>{const u=this._client,l=(h,d,p,_)=>{const b={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(h),range:u.code2ProtocolConverter.asRange(d),context:u.code2ProtocolConverter.asInlineValueContext(p)};return u.sendRequest(Fa.InlineValueRequest.type,b,_).then(k=>_.isCancellationRequested?null:u.protocol2CodeConverter.asInlineValues(k,_),k=>u.handleFailedRequest(Fa.InlineValueRequest.type,_,k,null))},g=u.middleware;return g.provideInlineValues?g.provideInlineValues(s,o,a,c,l):l(s,o,a,c)}};return[this.registerProvider(t,r),{provider:r,onDidChangeInlineValues:n}]}registerProvider(e,t){return tv.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}Zu.InlineValueFeature=_R;var ed={};Object.defineProperty(ed,"__esModule",{value:!0});var Qy=ed.InlayHintsFeature=void 0;const nv=we,Ar=Se,Xs=We;class yR extends Xs.TextDocumentLanguageFeature{constructor(e){super(e,Ar.InlayHintRequest.type)}fillClientCapabilities(e){const t=(0,Xs.ensure)((0,Xs.ensure)(e,"textDocument"),"inlayHint");t.dynamicRegistration=!0,t.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,Xs.ensure)((0,Xs.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,t){this._client.onRequest(Ar.InlayHintRefreshRequest.type,async()=>{for(const s of this.getAllProviders())s.onDidChangeInlayHints.fire()});const[n,r]=this.getRegistration(t,e.inlayHintProvider);!n||!r||this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector,n=new nv.EventEmitter,r={onDidChangeInlayHints:n.event,provideInlayHints:(s,o,a)=>{const c=this._client,u=async(g,h,d)=>{const p={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g),range:c.code2ProtocolConverter.asRange(h)};try{const _=await c.sendRequest(Ar.InlayHintRequest.type,p,d);return d.isCancellationRequested?null:c.protocol2CodeConverter.asInlayHints(_,d)}catch(_){return c.handleFailedRequest(Ar.InlayHintRequest.type,d,_,null)}},l=c.middleware;return l.provideInlayHints?l.provideInlayHints(s,o,a,u):u(s,o,a)}};return r.resolveInlayHint=e.resolveProvider===!0?(s,o)=>{const a=this._client,c=async(l,g)=>{try{const h=await a.sendRequest(Ar.InlayHintResolveRequest.type,a.code2ProtocolConverter.asInlayHint(l),g);if(g.isCancellationRequested)return null;const d=a.protocol2CodeConverter.asInlayHint(h,g);return g.isCancellationRequested?null:d}catch(h){return a.handleFailedRequest(Ar.InlayHintResolveRequest.type,g,h,null)}},u=a.middleware;return u.resolveInlayHint?u.resolveInlayHint(s,o,c):c(s,o)}:void 0,[this.registerProvider(t,r),{provider:r,onDidChangeInlayHints:n}]}registerProvider(e,t){return nv.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}Qy=ed.InlayHintsFeature=yR;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ProposedFeatures=i.BaseLanguageClient=i.MessageTransports=i.SuspendMode=i.State=i.CloseAction=i.ErrorAction=i.RevealOutputChannelOn=void 0;const e=we,t=Se,n=pu,r=Du,s=Ve,o=It,a=Ne,c=ca,u=We,l=sp,g=Tu,h=Mi,d=en,p=ku,_=Pu,b=Ru,k=Iu,y=xu,E=Fu,M=Mu,q=Au,J=Lu,Q=Ou,I=Ai,j=Nu,Y=Hu,Z=qu,m=Wu,W=Uu,fe=ju,L=zu,ee=Cs,ge=Bu,ie=Vu,ut=Ku,be=Gu,Ut=Ju,Ue=Qu,yt=tn,Vt=Xu,Qt=Yu,pt=Zu,Te=ed;var wt;(function(le){le[le.Info=1]="Info",le[le.Warn=2]="Warn",le[le.Error=3]="Error",le[le.Never=4]="Never"})(wt=i.RevealOutputChannelOn||(i.RevealOutputChannelOn={}));var je;(function(le){le[le.Continue=1]="Continue",le[le.Shutdown=2]="Shutdown"})(je=i.ErrorAction||(i.ErrorAction={}));var dt;(function(le){le[le.DoNotRestart=1]="DoNotRestart",le[le.Restart=2]="Restart"})(dt=i.CloseAction||(i.CloseAction={}));var Xt;(function(le){le[le.Stopped=1]="Stopped",le[le.Starting=3]="Starting",le[le.Running=2]="Running"})(Xt=i.State||(i.State={})),function(le){le.off="off",le.on="on"}(i.SuspendMode||(i.SuspendMode={}));class jt{constructor(C,P){this.client=C,this.maxRestartCount=P,this.restarts=[]}error(C,P,D){return D&&D<=3?{action:je.Continue}:{action:je.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:dt.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:dt.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:dt.Restart})}}var ve;(function(le){le.Initial="initial",le.Starting="starting",le.StartFailed="startFailed",le.Running="running",le.Stopping="stopping",le.Stopped="stopped"})(ve||(ve={})),function(le){function C(P){return P&&t.MessageReader.is(P.reader)&&t.MessageWriter.is(P.writer)}le.is=C}(i.MessageTransports||(i.MessageTransports={}));class Ot{constructor(C,P,D){this._traceFormat=t.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new o.Semaphore(1),this._id=C,this._name=P,D=D||{};const U={isTrusted:!1,supportHtml:!1};D.markdown!==void 0&&(U.isTrusted=D.markdown.isTrusted===!0,U.supportHtml=D.markdown.supportHtml===!0),this._clientOptions={documentSelector:D.documentSelector??[],synchronize:D.synchronize??{},diagnosticCollectionName:D.diagnosticCollectionName,outputChannelName:D.outputChannelName??this._name,revealOutputChannelOn:D.revealOutputChannelOn??wt.Error,stdioEncoding:D.stdioEncoding??"utf8",initializationOptions:D.initializationOptions,initializationFailedHandler:D.initializationFailedHandler,progressOnInitialization:!!D.progressOnInitialization,errorHandler:D.errorHandler??this.createDefaultErrorHandler(D.connectionOptions?.maxRestartCount),middleware:D.middleware??{},uriConverters:D.uriConverters,workspaceFolder:D.workspaceFolder,connectionOptions:D.connectionOptions,markdown:U,diagnosticPullOptions:D.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:D.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=ve.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,D.outputChannel?(this._outputChannel=D.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=D.traceOutputChannel,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new o.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new t.Emitter,this._stateChangeEmitter=new t.Emitter,this._trace=t.Trace.Off,this._tracer={log:($,V)=>{s.string($)?this.logTrace($,V):this.logObjectTrace($)}},this._c2p=n.createConverter(D.uriConverters?D.uriConverters.code2Protocol:void 0),this._p2c=r.createConverter(D.uriConverters?D.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=e.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(C){let P=this.getPublicState();this._state=C;let D=this.getPublicState();D!==P&&this._stateChangeEmitter.fire({oldState:P,newState:D})}getPublicState(){switch(this.$state){case ve.Starting:return Xt.Starting;case ve.Running:return Xt.Running;default:return Xt.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(C,...P){if(this.$state===ve.StartFailed||this.$state===ve.Stopping||this.$state===ve.Stopped)return Promise.reject(new t.ResponseError(t.ErrorCodes.ConnectionInactive,"Client is not running"));try{const D=await this.$start();return await this.forceDocumentSync(),D.sendRequest(C,...P)}catch(D){throw this.error(`Sending request ${s.string(C)?C:C.method} failed.`,D),D}}onRequest(C,P){const D=typeof C=="string"?C:C.method;this._requestHandlers.set(D,P);const U=this.activeConnection();let $;return U!==void 0?(this._requestDisposables.set(D,U.onRequest(C,P)),$={dispose:()=>{const V=this._requestDisposables.get(D);V!==void 0&&(V.dispose(),this._requestDisposables.delete(D))}}):(this._pendingRequestHandlers.set(D,P),$={dispose:()=>{this._pendingRequestHandlers.delete(D);const V=this._requestDisposables.get(D);V!==void 0&&(V.dispose(),this._requestDisposables.delete(D))}}),{dispose:()=>{this._requestHandlers.delete(D),$.dispose()}}}async sendNotification(C,P){if(this.$state===ve.StartFailed||this.$state===ve.Stopping||this.$state===ve.Stopped)return Promise.reject(new t.ResponseError(t.ErrorCodes.ConnectionInactive,"Client is not running"));try{const D=await this.$start();return await this.forceDocumentSync(),D.sendNotification(C,P)}catch(D){throw this.error(`Sending notification ${s.string(C)?C:C.method} failed.`,D),D}}onNotification(C,P){const D=typeof C=="string"?C:C.method;this._notificationHandlers.set(D,P);const U=this.activeConnection();let $;return U!==void 0?(this._notificationDisposables.set(D,U.onNotification(C,P)),$={dispose:()=>{const V=this._notificationDisposables.get(D);V!==void 0&&(V.dispose(),this._notificationDisposables.delete(D))}}):(this._pendingNotificationHandlers.set(D,P),$={dispose:()=>{this._pendingNotificationHandlers.delete(D);const V=this._notificationDisposables.get(D);V!==void 0&&(V.dispose(),this._notificationDisposables.delete(D))}}),{dispose:()=>{this._notificationHandlers.delete(D),$.dispose()}}}async sendProgress(C,P,D){if(this.$state===ve.StartFailed||this.$state===ve.Stopping||this.$state===ve.Stopped)return Promise.reject(new t.ResponseError(t.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(C,P,D)}catch(U){throw this.error(`Sending progress for token ${P} failed.`,U),U}}onProgress(C,P,D){this._progressHandlers.set(P,{type:C,handler:D});const U=this.activeConnection();let $;const V=this._clientOptions.middleware?.handleWorkDoneProgress,pe=t.WorkDoneProgress.is(C)&&V!==void 0?Me=>{V(P,Me,()=>D(Me))}:D;return U!==void 0?(this._progressDisposables.set(P,U.onProgress(C,P,pe)),$={dispose:()=>{const Me=this._progressDisposables.get(P);Me!==void 0&&(Me.dispose(),this._progressDisposables.delete(P))}}):(this._pendingProgressHandlers.set(P,{type:C,handler:D}),$={dispose:()=>{this._pendingProgressHandlers.delete(P);const Me=this._progressDisposables.get(P);Me!==void 0&&(Me.dispose(),this._progressDisposables.delete(P))}}),{dispose:()=>{this._progressHandlers.delete(P),$.dispose()}}}createDefaultErrorHandler(C){if(C!==void 0&&C<0)throw new Error(`Invalid maxRestartCount: ${C}`);return new jt(this,C??4)}async setTrace(C){this._trace=C;const P=this.activeConnection();P!==void 0&&await P.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(C){if(C instanceof t.ResponseError){const P=C;return`  Message: ${P.message}
  Code: ${P.code} ${P.data?`
`+P.data.toString():""}`}return C instanceof Error?s.string(C.stack)?C.stack:C.message:s.string(C)?C:C.toString()}info(C,P,D=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${C}`),P!=null&&this.outputChannel.appendLine(this.data2String(P)),D&&this._clientOptions.revealOutputChannelOn<=wt.Info&&this.showNotificationMessage(t.MessageType.Info,C)}warn(C,P,D=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${C}`),P!=null&&this.outputChannel.appendLine(this.data2String(P)),D&&this._clientOptions.revealOutputChannelOn<=wt.Warn&&this.showNotificationMessage(t.MessageType.Warning,C)}error(C,P,D=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${C}`),P!=null&&this.outputChannel.appendLine(this.data2String(P)),(D==="force"||D&&this._clientOptions.revealOutputChannelOn<=wt.Error)&&this.showNotificationMessage(t.MessageType.Error,C)}showNotificationMessage(C,P){P=P??"A request has failed. See the output for more information.",(C===t.MessageType.Error?e.window.showErrorMessage:C===t.MessageType.Warning?e.window.showWarningMessage:e.window.showInformationMessage)(P,"Go to output").then(U=>{U!==void 0&&this.outputChannel.show(!0)})}logTrace(C,P){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${C}`),P&&this.traceOutputChannel.appendLine(this.data2String(P))}logObjectTrace(C){C.isLSPMessage&&C.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),C&&this.traceOutputChannel.appendLine(`${JSON.stringify(C)}`)}needsStart(){return this.$state===ve.Initial||this.$state===ve.Stopping||this.$state===ve.Stopped}needsStop(){return this.$state===ve.Starting||this.$state===ve.Running}activeConnection(){return this.$state===ve.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===ve.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===ve.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;const[C,P,D]=this.createOnStartPromise();this._onStart=C,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?e.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):e.languages.createDiagnosticCollection());for(const[U,$]of this._notificationHandlers)this._pendingNotificationHandlers.has(U)||this._pendingNotificationHandlers.set(U,$);for(const[U,$]of this._requestHandlers)this._pendingRequestHandlers.has(U)||this._pendingRequestHandlers.set(U,$);for(const[U,$]of this._progressHandlers)this._pendingProgressHandlers.has(U)||this._pendingProgressHandlers.set(U,$);this.$state=ve.Starting;try{const U=await this.createConnection();U.onNotification(t.LogMessageNotification.type,$=>{switch($.type){case t.MessageType.Error:this.error($.message,void 0,!1);break;case t.MessageType.Warning:this.warn($.message,void 0,!1);break;case t.MessageType.Info:this.info($.message,void 0,!1);break;default:this.outputChannel.appendLine($.message)}}),U.onNotification(t.ShowMessageNotification.type,$=>{switch($.type){case t.MessageType.Error:e.window.showErrorMessage($.message);break;case t.MessageType.Warning:e.window.showWarningMessage($.message);break;case t.MessageType.Info:e.window.showInformationMessage($.message);break;default:e.window.showInformationMessage($.message)}}),U.onRequest(t.ShowMessageRequest.type,$=>{let V;switch($.type){case t.MessageType.Error:V=e.window.showErrorMessage;break;case t.MessageType.Warning:V=e.window.showWarningMessage;break;case t.MessageType.Info:V=e.window.showInformationMessage;break;default:V=e.window.showInformationMessage}let pe=$.actions||[];return V($.message,...pe)}),U.onNotification(t.TelemetryEventNotification.type,$=>{this._telemetryEmitter.fire($)}),U.onRequest(t.ShowDocumentRequest.type,async $=>{const V=async Me=>{const Ge=this.protocol2CodeConverter.asUri(Me.uri);try{if(Me.external===!0)return{success:await e.env.openExternal(Ge)};{const it={};return Me.selection!==void 0&&(it.selection=this.protocol2CodeConverter.asRange(Me.selection)),Me.takeFocus===void 0||Me.takeFocus===!1?it.preserveFocus=!0:Me.takeFocus===!0&&(it.preserveFocus=!1),await e.window.showTextDocument(Ge,it),{success:!0}}}catch{return{success:!1}}},pe=this._clientOptions.middleware.window?.showDocument;return pe!==void 0?pe($,V):V($)}),U.listen(),await this.initialize(U),P()}catch(U){this.$state=ve.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,U,"force"),D(U)}return this._onStart}createOnStartPromise(){let C,P;return[new Promise((U,$)=>{C=U,P=$}),C,P]}async initialize(C){this.refreshTrace(C,!1);const P=this._clientOptions.initializationOptions,[D,U]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],$={processId:null,clientInfo:{name:e.env.appName,version:e.version},locale:this.getLocale(),rootPath:D||null,rootUri:D?this._c2p.asUri(e.Uri.file(D)):null,capabilities:this.computeClientCapabilities(),initializationOptions:s.func(P)?P():P,trace:t.Trace.toString(this._trace),workspaceFolders:U};if(this.fillInitializeParams($),this._clientOptions.progressOnInitialization){const V=a.generateUuid(),pe=new c.ProgressPart(C,V);$.workDoneToken=V;try{const Me=await this.doInitialize(C,$);return pe.done(),Me}catch(Me){throw pe.cancel(),Me}}else return this.doInitialize(C,$)}async doInitialize(C,P){try{const D=await C.initialize(P);if(D.capabilities.positionEncoding!==void 0&&D.capabilities.positionEncoding!==t.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${D.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=D,this.$state=ve.Running;let U;s.number(D.capabilities.textDocumentSync)?D.capabilities.textDocumentSync===t.TextDocumentSyncKind.None?U={openClose:!1,change:t.TextDocumentSyncKind.None,save:void 0}:U={openClose:!0,change:D.capabilities.textDocumentSync,save:{includeText:!1}}:D.capabilities.textDocumentSync!==void 0&&D.capabilities.textDocumentSync!==null&&(U=D.capabilities.textDocumentSync),this._capabilities=Object.assign({},D.capabilities,{resolvedTextDocumentSync:U}),C.onNotification(t.PublishDiagnosticsNotification.type,$=>this.handleDiagnostics($)),C.onRequest(t.RegistrationRequest.type,$=>this.handleRegistrationRequest($)),C.onRequest("client/registerFeature",$=>this.handleRegistrationRequest($)),C.onRequest(t.UnregistrationRequest.type,$=>this.handleUnregistrationRequest($)),C.onRequest("client/unregisterFeature",$=>this.handleUnregistrationRequest($)),C.onRequest(t.ApplyWorkspaceEditRequest.type,$=>this.handleApplyWorkspaceEdit($));for(const[$,V]of this._pendingNotificationHandlers)this._notificationDisposables.set($,C.onNotification($,V));this._pendingNotificationHandlers.clear();for(const[$,V]of this._pendingRequestHandlers)this._requestDisposables.set($,C.onRequest($,V));this._pendingRequestHandlers.clear();for(const[$,V]of this._pendingProgressHandlers)this._progressDisposables.set($,C.onProgress(V.type,$,V.handler));return this._pendingProgressHandlers.clear(),await C.sendNotification(t.InitializedNotification.type,{}),this.hookFileEvents(C),this.hookConfigurationChanged(C),this.initializeFeatures(C),D}catch(D){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(D)?this.initialize(C):this.stop():D instanceof t.ResponseError&&D.data&&D.data.retry?e.window.showErrorMessage(D.message,{title:"Retry",id:"retry"}).then(U=>{U&&U.id==="retry"?this.initialize(C):this.stop()}):(D&&D.message&&e.window.showErrorMessage(D.message),this.error("Server initialization failed.",D),this.stop()),D}}_clientGetRootPath(){let C=e.workspace.workspaceFolders;if(!C||C.length===0)return;let P=C[0];if(P.uri.scheme==="file")return P.uri.fsPath}stop(C=2e3){return this.shutdown("stop",C)}dispose(C=2e3){try{return this._disposed="disposing",this.stop(C)}finally{this._disposed="disposed"}}async shutdown(C,P){if(this.$state===ve.Stopped||this.$state===ve.Initial)return;if(this.$state===ve.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}const D=this.activeConnection();if(D===void 0||this.$state!==ve.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=ve.Stopping,this.cleanUp(C);const U=new Promise(V=>{(0,t.RAL)().timer.setTimeout(V,P)}),$=(async V=>(await V.shutdown(),await V.exit(),V))(D);return this._onStop=Promise.race([U,$]).then(V=>{if(V!==void 0)V.end(),V.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},V=>{throw this.error("Stopping server failed",V,!1),V}).finally(()=>{this.$state=ve.Stopped,C==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(C){this._fileEvents=[],this._fileEventDelayer.cancel();const P=this._listeners.splice(0,this._listeners.length);for(const D of P)D.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(const D of Array.from(this._features.entries()).map(U=>U[1]).reverse())D.dispose();C==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(C){const P=this;async function D($){return P._fileEvents.push($),P._fileEventDelayer.trigger(async()=>{const V=await P.$start();await P.forceDocumentSync();const pe=V.sendNotification(t.DidChangeWatchedFilesNotification.type,{changes:P._fileEvents});return P._fileEvents=[],pe})}const U=this.clientOptions.middleware?.workspace;(U?.didChangeWatchedFile?U.didChangeWatchedFile(C,D):D(C)).catch($=>{P.error("Notify file events failed.",$)})}async forceDocumentSync(){return this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(t.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(C){if(!this._diagnostics)return;const P=C.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===P&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(C.uri,C.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,t.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;const C=this._diagnosticQueue.entries().next();if(C.done===!0)return;const[P,D]=C.value;this._diagnosticQueue.delete(P);const U=new e.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:P,tokenSource:U},this._p2c.asDiagnostics(D,U.token).then($=>{if(!U.token.isCancellationRequested){const V=this._p2c.asUri(P),pe=this.clientOptions.middleware;pe.handleDiagnostics?pe.handleDiagnostics(V,$,(Me,Ge)=>this.setDiagnostics(Me,Ge)):this.setDiagnostics(V,$)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(C,P){!this._diagnostics||this._diagnostics.set(C,P)}async $start(){if(this.$state===ve.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();const C=this.activeConnection();if(C===void 0)throw new Error("Starting server failed");return C}async createConnection(){let C=(U,$,V)=>{this.handleConnectionError(U,$,V)},P=()=>{this.handleConnectionClosed()};const D=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=nn(D.reader,D.writer,C,P,this._clientOptions.connectionOptions),this._connection}handleConnectionClosed(){if(this.$state===ve.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let C={action:dt.DoNotRestart};if(this.$state!==ve.Stopping)try{C=this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,C.action===dt.DoNotRestart?(this.error(C.message??"Connection to server got closed. Server will not be restarted.",void 0,"force"),this.cleanUp("stop"),this.$state===ve.Starting?this.$state=ve.StartFailed:this.$state=ve.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):C.action===dt.Restart&&(this.info(C.message??"Connection to server got closed. Server will restart."),this.cleanUp("restart"),this.$state=ve.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(P=>this.error("Restarting server failed",P,"force")))}handleConnectionError(C,P,D){const U=this._clientOptions.errorHandler.error(C,P,D);U.action===je.Shutdown&&(this.error(U.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,"force"),this.stop().catch($=>{this.error("Stopping server failed",$,!1)}))}hookConfigurationChanged(C){this._listeners.push(e.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(C,!0)}))}refreshTrace(C,P=!1){const D=e.workspace.getConfiguration(this._id);let U=t.Trace.Off,$=t.TraceFormat.Text;if(D){const V=D.get("trace.server","off");typeof V=="string"?U=t.Trace.fromString(V):(U=t.Trace.fromString(D.get("trace.server.verbosity","off")),$=t.TraceFormat.fromString(D.get("trace.server.format","text")))}this._trace=U,this._traceFormat=$,C.trace(this._trace,this._tracer,{sendNotification:P,traceFormat:this._traceFormat}).catch(V=>{this.error("Updating trace failed with error",V,!1)})}hookFileEvents(C){let P=this._clientOptions.synchronize.fileEvents;if(!P)return;let D;s.array(P)?D=P:D=[P],D&&this._dynamicFeatures.get(t.DidChangeWatchedFilesNotification.type.method).registerRaw(a.generateUuid(),D)}registerFeatures(C){for(let P of C)this.registerFeature(P)}registerFeature(C){if(this._features.push(C),u.DynamicFeature.is(C)){const P=C.registrationType;this._dynamicFeatures.set(P.method,C)}}getFeature(C){return this._dynamicFeatures.get(C)}hasDedicatedTextSynchronizationFeature(C){const P=this.getFeature(t.NotebookDocumentSyncRegistrationType.method);return P===void 0||!(P instanceof g.NotebookDocumentSyncFeature)?!1:P.handles(C)}registerBuiltinFeatures(){this.registerFeature(new h.ConfigurationFeature(this)),this.registerFeature(new d.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new d.DidChangeTextDocumentFeature(this)),this.registerFeature(new d.WillSaveFeature(this)),this.registerFeature(new d.WillSaveWaitUntilFeature(this)),this.registerFeature(new d.DidSaveTextDocumentFeature(this)),this.registerFeature(new d.DidCloseTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new m.FileSystemWatcherFeature(this,C=>this.notifyFileEvent(C))),this.registerFeature(new p.CompletionItemFeature(this)),this.registerFeature(new _.HoverFeature(this)),this.registerFeature(new k.SignatureHelpFeature(this)),this.registerFeature(new b.DefinitionFeature(this)),this.registerFeature(new q.ReferencesFeature(this)),this.registerFeature(new y.DocumentHighlightFeature(this)),this.registerFeature(new E.DocumentSymbolFeature(this)),this.registerFeature(new M.WorkspaceSymbolFeature(this)),this.registerFeature(new J.CodeActionFeature(this)),this.registerFeature(new Q.CodeLensFeature(this)),this.registerFeature(new I.DocumentFormattingFeature(this)),this.registerFeature(new I.DocumentRangeFormattingFeature(this)),this.registerFeature(new I.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new j.RenameFeature(this)),this.registerFeature(new Y.DocumentLinkFeature(this)),this.registerFeature(new Z.ExecuteCommandFeature(this)),this.registerFeature(new h.SyncConfigurationFeature(this)),this.registerFeature(new L.TypeDefinitionFeature(this)),this.registerFeature(new fe.ImplementationFeature(this)),this.registerFeature(new W.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new ee.WorkspaceFoldersFeature(this)),this.registerFeature(new ge.FoldingRangeFeature(this)),this.registerFeature(new ie.DeclarationFeature(this)),this.registerFeature(new ut.SelectionRangeFeature(this)),this.registerFeature(new be.ProgressFeature(this)),this.registerFeature(new Ut.CallHierarchyFeature(this)),this.registerFeature(new Ue.SemanticTokensFeature(this)),this.registerFeature(new Vt.LinkedEditingFeature(this)),this.registerFeature(new yt.DidCreateFilesFeature(this)),this.registerFeature(new yt.DidRenameFilesFeature(this)),this.registerFeature(new yt.DidDeleteFilesFeature(this)),this.registerFeature(new yt.WillCreateFilesFeature(this)),this.registerFeature(new yt.WillRenameFilesFeature(this)),this.registerFeature(new yt.WillDeleteFilesFeature(this)),this.registerFeature(new Qt.TypeHierarchyFeature(this)),this.registerFeature(new pt.InlineValueFeature(this)),this.registerFeature(new Te.InlayHintsFeature(this)),this.registerFeature(new l.DiagnosticFeature(this)),this.registerFeature(new g.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures($t.createAll(this))}fillInitializeParams(C){for(let P of this._features)s.func(P.fillInitializeParams)&&P.fillInitializeParams(C)}computeClientCapabilities(){const C={};(0,u.ensure)(C,"workspace").applyEdit=!0;const P=(0,u.ensure)((0,u.ensure)(C,"workspace"),"workspaceEdit");P.documentChanges=!0,P.resourceOperations=[t.ResourceOperationKind.Create,t.ResourceOperationKind.Rename,t.ResourceOperationKind.Delete],P.failureHandling=t.FailureHandlingKind.TextOnlyTransactional,P.normalizesLineEndings=!0,P.changeAnnotationSupport={groupsOnLabel:!0};const D=(0,u.ensure)((0,u.ensure)(C,"textDocument"),"publishDiagnostics");D.relatedInformation=!0,D.versionSupport=!1,D.tagSupport={valueSet:[t.DiagnosticTag.Unnecessary,t.DiagnosticTag.Deprecated]},D.codeDescriptionSupport=!0,D.dataSupport=!0;const U=(0,u.ensure)(C,"window"),$=(0,u.ensure)(U,"showMessage");$.messageActionItem={additionalPropertiesSupport:!0};const V=(0,u.ensure)(U,"showDocument");V.support=!0;const pe=(0,u.ensure)(C,"general");pe.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(Ot.RequestsToCancelOnContentModified)},pe.regularExpressions={engine:"ECMAScript",version:"ES2020"},pe.markdown={parser:"marked",version:"1.1.0"},pe.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(pe.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let Me of this._features)Me.fillClientCapabilities(C);return C}initializeFeatures(C){const P=this._clientOptions.documentSelector;for(const D of this._features)s.func(D.preInitialize)&&D.preInitialize(this._capabilities,P);for(const D of this._features)D.initialize(this._capabilities,P)}async handleRegistrationRequest(C){if(!this.isRunning()){for(const P of C.registrations)this._ignoredRegistrations.add(P.id);return}for(const P of C.registrations){const D=this._dynamicFeatures.get(P.method);if(D===void 0)return Promise.reject(new Error(`No feature implementation for ${P.method} found. Registration failed.`));const U=P.registerOptions??{};U.documentSelector=U.documentSelector??this._clientOptions.documentSelector;const $={id:P.id,registerOptions:U};try{D.register($)}catch(V){return Promise.reject(V)}}}async handleUnregistrationRequest(C){for(let P of C.unregisterations){if(this._ignoredRegistrations.has(P.id))continue;const D=this._dynamicFeatures.get(P.method);if(!D)return Promise.reject(new Error(`No feature implementation for ${P.method} found. Unregistration failed.`));D.unregister(P.id)}}async handleApplyWorkspaceEdit(C){const P=C.edit,D=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(P)),U=new Map;e.workspace.textDocuments.forEach(V=>U.set(V.uri.toString(),V));let $=!1;if(P.documentChanges){for(const V of P.documentChanges)if(t.TextDocumentEdit.is(V)&&V.textDocument.version&&V.textDocument.version>=0){const pe=U.get(V.textDocument.uri);if(pe&&pe.version!==V.textDocument.version){$=!0;break}}}return $?Promise.resolve({applied:!1}):s.asPromise(e.workspace.applyEdit(D).then(V=>({applied:V})))}handleFailedRequest(C,P,D,U,$=!0){if(D instanceof t.ResponseError){if(D.code===t.ErrorCodes.PendingResponseRejected||D.code===t.ErrorCodes.ConnectionInactive)return U;if(D.code===t.LSPErrorCodes.RequestCancelled||D.code===t.LSPErrorCodes.ServerCancelled){if(P!==void 0&&P.isCancellationRequested)return U;throw D.data!==void 0?new u.LSPCancellationError(D.data):new e.CancellationError}else if(D.code===t.LSPErrorCodes.ContentModified){if(Ot.RequestsToCancelOnContentModified.has(C.method))throw new e.CancellationError;return U}}throw this.error(`Request ${C.method} failed.`,D,$),D}}i.BaseLanguageClient=Ot,Ot.RequestsToCancelOnContentModified=new Set([t.SemanticTokensRequest.method,t.SemanticTokensRangeRequest.method,t.SemanticTokensDeltaRequest.method]);class ln{error(C){(0,t.RAL)().console.error(C)}warn(C){(0,t.RAL)().console.warn(C)}info(C){(0,t.RAL)().console.info(C)}log(C){(0,t.RAL)().console.log(C)}}function nn(le,C,P,D,U){let $=-1;const V=new ln,pe=(0,t.createProtocolConnection)(le,C,V,U);return pe.onError(Ge=>{P(Ge[0],Ge[1],Ge[2])}),pe.onClose(D),{get lastUsed(){return $},resetLastUsed:()=>{$=-1},listen:()=>pe.listen(),sendRequest:(Ge,...it)=>($=Date.now(),pe.sendRequest(Ge,...it)),onRequest:(Ge,it)=>pe.onRequest(Ge,it),hasPendingResponse:()=>pe.hasPendingResponse(),sendNotification:(Ge,it)=>($=Date.now(),pe.sendNotification(Ge,it)),onNotification:(Ge,it)=>pe.onNotification(Ge,it),onProgress:pe.onProgress,sendProgress:pe.sendProgress,trace:(Ge,it,$n)=>{const vi={sendNotification:!1,traceFormat:t.TraceFormat.Text};return $n===void 0?pe.trace(Ge,it,vi):(s.boolean($n),pe.trace(Ge,it,$n))},initialize:Ge=>($=Date.now(),pe.sendRequest(t.InitializeRequest.type,Ge)),shutdown:()=>($=Date.now(),pe.sendRequest(t.ShutdownRequest.type,void 0)),exit:()=>($=Date.now(),pe.sendNotification(t.ExitNotification.type)),end:()=>pe.end(),dispose:()=>pe.dispose()}}var $t;(function(le){function C(P){return[]}le.createAll=C})($t=i.ProposedFeatures||(i.ProposedFeatures={}))})(Ka);class wR extends Ka.BaseLanguageClient{connectionProvider;constructor({id:e,name:t,clientOptions:n,connectionProvider:r}){super(e||t.toLowerCase(),t,n),this.connectionProvider=r;const s=this.handleRegistrationRequest.bind(this);this.handleRegistrationRequest=a=>{s({...a,registrations:a.registrations.filter(c=>this.getFeature(c.method)!=null)})};const o=this.handleUnregistrationRequest.bind(this);this.handleUnregistrationRequest=a=>{o({...a,unregisterations:a.unregisterations.filter(c=>this.getFeature(c.method)!=null)})}}createMessageTransports(e){return this.connectionProvider.get(e)}getLocale(){return navigator.language||"en-US"}registerBuiltinFeatures(){this.registerFeature(new yy(this,this._syncedDocuments)),this.registerFeature(new by(this)),this.registerFeature(new wy(this,this._syncedDocuments)),this.registerFeature(new Dy(this)),this.registerFeature(new Ey(this)),this.registerFeature(new ky(this)),this.registerFeature(new Ty(this)),this.registerFeature(new Ry(this)),this.registerFeature(new Py(this)),this.registerFeature(new Fu.DocumentSymbolFeature(this)),this.registerFeature(new Iy(this)),this.registerFeature(new xy(this)),this.registerFeature(new My(this)),this.registerFeature(new Ay(this)),this.registerFeature(new Fy(this)),this.registerFeature(new Ly(this)),this.registerFeature(new Oy(this)),this.registerFeature(new $y(this)),this.registerFeature(new qy(this)),this.registerFeature(new Hy(this)),this.registerFeature(new Ny(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new Wy(this)),this.registerFeature(new Uy(this)),this.registerFeature(new jy(this)),this.registerFeature(new zy(this)),this.registerFeature(new Vy(this)),this.registerFeature(new Jy(this)),this.registerFeature(new Qy(this)),this.registerFeature(new sp.DiagnosticFeature(this))}registerTextDocumentSaveFeatures(){this.registerFeature(new Cy(this)),this.registerFeature(new Sy(this)),this.registerFeature(new _y(this))}registerConfigurationFeatures(){this.registerFeature(new vy(this)),this.registerFeature(new my(this))}registerProgressFeatures(){this.registerFeature(new By(this))}}class bR{channels=new Map;showMessage(e,t,...n){return e===Lt.Error&&console.error(t),e===Lt.Warning&&console.warn(t),e===Lt.Info&&console.info(t),e===Lt.Ignore&&console.debug(t),Promise.resolve(void 0)}createOutputChannel(e){const t=this.channels.get(e);if(t)return t;const n={name:"default",append(r){console.log(e+": "+r)},appendLine(r){console.log(e+": "+r)},show(){},dispose(){},replace:function(r){},clear:function(){},hide:function(){}};return this.channels.set(e,n),n}}class CR{workspaceFolders;rootPath;constructor(e,t){this.workspaceFolders=e,this.rootPath=t}}var Gc;(function(i){function e(r={}){return{workspace:new CR(r.workspaceFolders,r.rootPath),window:new bR}}i.create=e;function t(r={}){const s=e(r);return ue.install(s)}i.install=t;function n(){return ue.get()}i.get=n})(Gc||(Gc={}));class SR{monaco;constructor(e){this.monaco=e,this.register()}register(){this.monaco.languages.setLanguageConfiguration("dart",{comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"'",close:"'",notIn:["string","comment"]},{open:'"',close:'"',notIn:["string"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/**",close:" */",notIn:["string"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:"'",close:"'"},{open:"(",close:")"},{open:'"',close:'"'},{open:"`",close:"`"}],folding:{markers:{start:/^\s*\s*#?region\b/,end:/^\s*\s*#?endregion\b/}},onEnterRules:[{action:{indentAction:at.IndentAction.None,appendText:"// "},beforeText:/^\s*\/\/ /},{action:{indentAction:at.IndentAction.None,appendText:"//"},beforeText:/^\s*\/\/$/},{action:{indentAction:at.IndentAction.None,appendText:"/// "},beforeText:/^\s*\/\/\/ /},{action:{indentAction:at.IndentAction.None,appendText:"///"},beforeText:/^\s*\/\/\//},{action:{indentAction:at.IndentAction.IndentOutdent,appendText:" * "},afterText:/^\s*\*\/$/,beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/},{action:{indentAction:at.IndentAction.None,appendText:" * "},beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/},{action:{indentAction:at.IndentAction.None,appendText:"* "},beforeText:/^(\t|(\ \ ))*\ \*(\ ([^\*]|\*(?!\/))*)?$/},{action:{indentAction:at.IndentAction.None,removeText:1},beforeText:/^(\t|(\ \ ))*\ \*\/\s*$/},{action:{indentAction:at.IndentAction.None,removeText:80},beforeText:/('''|""")$/}]})}dispose(){}}async function DR(){document.fullscreenElement?document.exitFullscreen?.():await document.documentElement.requestFullscreen()}const ER=[{id:"pub.get",label:"Pub: Get Packages",run(){Pr("pub-get","editor"),Hv()}},{id:"flutter.run",label:"Flutter: Run",async run(){Pr("run","editor"),qv()}},...dl()?[]:[{id:"zapp.debug",label:"Zapp: Toggle Debug Mode",async run(){Pr("debug","editor"),ib(i=>!i)}},{id:"zapp.fork",label:"Zapp: Fork Project",async run(){Pr("fork","editor"),rb({reload:!0})}}],{id:"zapp.download",label:"Zapp: Download Project as ZIP",async run(){Pr("download-zip","editor"),sb()}},{id:"window.fullscreen",label:"Toggle Fullscreen",run(){DR()}},{id:"dart.reanalyze",label:"Dart: Restart Analyzer",async run(){Pr("analyzer-restart","editor"),Zs.workerEnableMirroringSync(),await Zs?.syncFileSystem(),Zs.workerDisableMirroringSync(),await Zs?.workerReanalyze()}}];function Dg(i,e=!0){const t=getComputedStyle(document.body).getPropertyValue(i).trim();return e?t:t.replace("#","")}const TR={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:Dg("--dark-foreground",!1)},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{"editor.background":Dg("--dark-background"),"editor.foreground":"#fff","editor.selectionBackground":"#597BAB","editor.lineHighlightBackground":"#262b2e","editorCursor.foreground":"#7DA5DC","editorWhitespace.foreground":"#545454"}},kR={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:Dg("--light-foreground")},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{"editor.background":"#FFFFFF","editor.foreground":"#2563EB"}};function gt(i,t){var t=t||{};this._capacity=t.capacity,this._head=0,this._tail=0,Array.isArray(i)?this._fromArray(i):(this._capacityMask=3,this._list=new Array(4))}gt.prototype.peekAt=function(e){var t=e;if(t===(t|0)){var n=this.size();if(!(t>=n||t<-n))return t<0&&(t+=n),t=this._head+t&this._capacityMask,this._list[t]}};gt.prototype.get=function(e){return this.peekAt(e)};gt.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};gt.prototype.peekFront=function(){return this.peek()};gt.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(gt.prototype,"length",{get:function(){return this.size()}});gt.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};gt.prototype.unshift=function(e){if(arguments.length===0)return this.size();var t=this._list.length;return this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};gt.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}};gt.prototype.push=function(e){if(arguments.length===0)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};gt.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),n}};gt.prototype.removeOne=function(e){var t=e;if(t===(t|0)&&this._head!==this._tail){var n=this.size(),r=this._list.length;if(!(t>=n||t<-n)){t<0&&(t+=n),t=this._head+t&this._capacityMask;var s=this._list[t],o;if(e<n/2){for(o=e;o>0;o--)this._list[t]=this._list[t=t-1+r&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+r&this._capacityMask}else{for(o=n-1-e;o>0;o--)this._list[t]=this._list[t=t+1+r&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+r&this._capacityMask}return s}}};gt.prototype.remove=function(e,t){var n=e,r,s=t;if(n===(n|0)&&this._head!==this._tail){var o=this.size(),a=this._list.length;if(!(n>=o||n<-o||t<1)){if(n<0&&(n+=o),t===1||!t)return r=new Array(1),r[0]=this.removeOne(n),r;if(n===0&&n+t>=o)return r=this.toArray(),this.clear(),r;n+t>o&&(t=o-n);var c;for(r=new Array(t),c=0;c<t;c++)r[c]=this._list[this._head+n+c&this._capacityMask];if(n=this._head+n&this._capacityMask,e+t===o){for(this._tail=this._tail-t+a&this._capacityMask,c=t;c>0;c--)this._list[n=n+1+a&this._capacityMask]=void 0;return r}if(e===0){for(this._head=this._head+t+a&this._capacityMask,c=t-1;c>0;c--)this._list[n=n+1+a&this._capacityMask]=void 0;return r}if(n<o/2){for(this._head=this._head+e+t+a&this._capacityMask,c=e;c>0;c--)this.unshift(this._list[n=n-1+a&this._capacityMask]);for(n=this._head-1+a&this._capacityMask;s>0;)this._list[n=n-1+a&this._capacityMask]=void 0,s--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+t+a&this._capacityMask,c=o-(t+e);c>0;c--)this.push(this._list[n++]);for(n=this._tail;s>0;)this._list[n=n+1+a&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),r}}};gt.prototype.splice=function(e,t){var n=e;if(n===(n|0)){var r=this.size();if(n<0&&(n+=r),!(n>r))if(arguments.length>2){var s,o,a,c=arguments.length,u=this._list.length,l=2;if(!r||n<r/2){for(o=new Array(n),s=0;s<n;s++)o[s]=this._list[this._head+s&this._capacityMask];for(t===0?(a=[],n>0&&(this._head=this._head+n+u&this._capacityMask)):(a=this.remove(n,t),this._head=this._head+n+u&this._capacityMask);c>l;)this.unshift(arguments[--c]);for(s=n;s>0;s--)this.unshift(o[s-1])}else{o=new Array(r-(n+t));var g=o.length;for(s=0;s<g;s++)o[s]=this._list[this._head+n+t+s&this._capacityMask];for(t===0?(a=[],n!=r&&(this._tail=this._head+n+u&this._capacityMask)):(a=this.remove(n,t),this._tail=this._tail-g+u&this._capacityMask);l<c;)this.push(arguments[l++]);for(s=0;s<g;s++)this.push(o[s])}return a}else return this.remove(n,t)}};gt.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0};gt.prototype.isEmpty=function(){return this._head===this._tail};gt.prototype.toArray=function(){return this._copyArray(!1)};gt.prototype._fromArray=function(e){var t=e.length,n=this._nextPowerOf2(t);this._list=new Array(n),this._capacityMask=n-1,this._tail=t;for(var r=0;r<t;r++)this._list[r]=e[r]};gt.prototype._copyArray=function(e,t){var n=this._list,r=n.length,s=this.length;if(t=t|s,t==s&&this._head<this._tail)return this._list.slice(this._head,this._tail);var o=new Array(t),a=0,c;if(e||this._head>this._tail){for(c=this._head;c<r;c++)o[a++]=n[c];for(c=0;c<this._tail;c++)o[a++]=n[c]}else for(c=this._head;c<this._tail;c++)o[a++]=n[c];return o};gt.prototype._growArray=function(){if(this._head!=0){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};gt.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};gt.prototype._nextPowerOf2=function(e){var t=Math.log(e)/Math.log(2),n=1<<t+1;return Math.max(n,4)};var PR=gt;class RR extends mi.AbstractMessageReader{_unsubscribe;_queue=new PR;_listening=!1;constructor(){super(),this._unsubscribe=ad.on("dartLspOutput",e=>{this._listening?ad.emit("dartLspOutputInternal",e):this._queue.push(e)})}listen(e){if(!this._listening)for(this._listening=!0;this._queue.length;)e(JSON.parse(this._queue.pop()));const t=ad.on("dartLspOutputInternal",n=>e(JSON.parse(n)));return{dispose:()=>{t(),this._unsubscribe(),this._listening=!1}}}}class IR extends mi.AbstractMessageWriter{async write(e){Zs.addDartLspInputSync(e)}end(){}}let Ys;async function xR(){if(Ys)return Ys;const i=po.parse("file:///zapp/project");return i._fsPath="/zapp/project",Ys=new wR({name:"Zapp",clientOptions:{errorHandler:{error:(e,t)=>(console.error("[lsp] [errorHandler]",e,t),{action:Ka.ErrorAction.Continue}),closed:()=>(console.error("[lsp] closed"),{action:Ka.CloseAction.DoNotRestart})},outputChannel:{name:"Zapp: Dart LSP",hide(){},show(){ob("output"),ab("lsp")},clear(){},appendLine(e){La.channel.lsp(e)},append(e){La.channel.lsp(e)}},workspaceFolder:{name:"Zapp Project",uri:i},documentSelector:[{scheme:"file",language:"dart"},{scheme:"file",language:"yaml"},{scheme:"file",language:"plaintext"}],middleware:{handleDiagnostics(e,t,n){return La.diagnostic(e,t),n(e,t)},workspace:{configuration(e,t,n){return Array(n(e,t).length).fill({analysisExcludedFolders:["/zapp/sdk","/zap/pub","/zapp/project/.zapp","/zapp/project/.git"],showTodos:!0,completeFunctionCalls:!0,enableSnippets:!0,maxCompletionItems:20})}}},markdown:{isTrusted:!0,supportHtml:!0},initializationOptions:{onlyAnalyzeProjectsWithOpenFiles:!1,suggestFromUnimportedLibraries:!0,closingLabels:!0,outline:!0,flutterOutline:!1}},connectionProvider:{get:()=>Promise.resolve({reader:new RR,writer:new IR,detached:!0})}}),await Ys.start(),Ys}function FR(){return new Worker("/assets/editor.worker.b9a77fdc.js")}function MR(){return new Worker("/assets/json.worker.5a945e9b.js")}function AR(){return new Worker("/assets/html.worker.f42a22f4.js")}function LR(){return new Worker("/assets/ts.worker.3a8281fb.js")}function OR(){return new Worker("/assets/css.worker.91dbdef6.js")}function $R(){return new Worker("/assets/yaml-worker.78c77df3.js")}class NR{client;editor;disposables=[];decorations=[];labels={};timeout;constructor(e,t){this.client=e,this.editor=t,this.disposables.push(this.client.onNotification("dart/textDocument/publishClosingLabels",n=>{this.labels={...this.labels,[n.uri]:n.labels},clearTimeout(this.timeout),this.update()})),this.disposables.push(this.editor.onDidChangeModel(()=>{this.update()}))}update(){const e=this.editor.getModel();if(!e)return;const t=e.uri.toString();if(!this.labels[t])return;const n=[];for(const r of this.labels[t]){if(r.range.end.character<1)return;n.push({range:new na(r.range.start.line+1,r.range.start.character+1,r.range.end.line+1,e.getLineLength(r.range.end.line+1)+1),options:{after:{content:" // "+r.label,inlineClassName:"!text-gray-500"}}})}this.decorations=this.editor.deltaDecorations(this.decorations,n)}dispose(){clearTimeout(this.timeout),this.editor.deltaDecorations(this.decorations,[]),this.decorations=[];for(const e of this.disposables)e.dispose()}}class HR{client;monaco;editor;disposables=[];dartOutlines={};noopProvider={lenses:[],dispose:()=>{}};constructor(e,t,n){this.client=e,this.monaco=t,this.editor=n,this.disposables.push(this.client.onNotification("dart/textDocument/publishOutline",r=>{this.dartOutlines[r.uri]=r.outline})),t.languages.registerCodeLensProvider("dart",{provideCodeLenses:r=>r.uri.path.startsWith(so)?{lenses:[...this.mainCodeLensProvider(r)],dispose:()=>{}}:this.noopProvider})}isTestFile(e){return Ip(e.path,"**/{test,integration_test,test_driver}/**/*_test.dart")}isDartFile(e){return Ip(e.path,"**/*.dart")}mainCodeLensProvider(e){const t=[];if(!this.isDartFile(e.uri))return t;const n=this.dartOutlines[e.uri.toString()];if(!n)return t;const r=n.children?.find(o=>o.element.name==="main");if(!r)return t;const s=this.editor.addCommand(0,async function(o,a){const c=a.replace(`file://${so}`,"");Wv(c),await qv(c)},"");return t.push({range:{startLineNumber:r.range.start.line+1,startColumn:r.range.start.column+1,endLineNumber:r.range.end.line+1,endColumn:r.range.end.column+1},id:"mainFunction"+Math.random(),command:{id:s,title:this.isTestFile(e.uri)?"Run Tests":"Run Application",arguments:[e.uri.toString()]}}),t}dispose(){for(const e of this.disposables)e.dispose()}}function iv(i,e,t){const n=new Map,r=u=>{if(e==="*")return!0;const l=u.getLanguageId();return Array.isArray(e)?e.includes(l):e===l},s=async u=>{const l=await t.provideMarkerData(u);!u.isDisposed()&&r(u)&&i.editor.setModelMarkers(u,t.owner,l??[])},o=u=>{if(!r(u))return;let l;n.set(String(u.uri),u.onDidChangeContent(()=>{clearTimeout(l),l=setTimeout(()=>{s(u)},500)})),s(u)},a=u=>{i.editor.setModelMarkers(u,t.owner,[]);const l=String(u.uri),g=n.get(l);g&&(g.dispose(),n.delete(l))},c=[i.editor.onDidCreateModel(o),i.editor.onWillDisposeModel(u=>{a(u),t.doReset?.(u)}),i.editor.onDidChangeModelLanguage(u=>{a(u.model),o(u.model),t.doReset?.(u.model)})];for(const u of i.editor.getModels())o(u);return{dispose(){for(const u of n.keys())a(i.editor.getModel(i.Uri.parse(u)));for(;c.length;)c.pop().dispose()}}}function qR(i,e){let{createData:t,interval:n=3e4,label:r,moduleId:s,stopWhenIdleFor:o=12e4}=e,a,c=0,u=!1;const l=()=>{a&&(a.dispose(),a=void 0)},g=setInterval(()=>{if(!a)return;Date.now()-c>o&&l()},n);return{dispose(){u=!0,clearInterval(g),l()},getWorker(...h){if(u)throw new Error("Worker manager has been disposed");return c=Date.now(),a||(a=i.editor.createWebWorker({createData:t,label:r,moduleId:s})),a.withSyncedResources(h)},updateCreateData(h){t=h,l()}}}var gn="yaml";function WR(i){switch(i){case cr.Error:return Ms.Error;case cr.Warning:return Ms.Warning;case cr.Information:return Ms.Info;case cr.Hint:return Ms.Hint;default:return Ms.Info}}function UR(i){switch(i){case Uo.Deprecated:return xp.Deprecated;case Uo.Unnecessary:return xp.Unnecessary}}function Xy(i){var e;return{severity:WR(i.severity),startLineNumber:i.range.start.line+1,startColumn:i.range.start.character+1,endLineNumber:i.range.end.line+1,endColumn:i.range.end.character+1,message:i.message,code:String(i.code),source:i.source,tags:(e=i.tags)==null?void 0:e.map(UR)}}function rv(i){return{owner:gn,async provideMarkerData(e){return(await(await i(e.uri)).doValidation(String(e.uri))).map(Xy)},async doReset(e){await(await i(e.uri)).resetSchema(String(e.uri))}}}function lp(i){if(!!i)return{character:i.column-1,line:i.lineNumber-1}}function Vn(i){if(!!i)return new na(i.start.line+1,i.start.character+1,i.end.line+1,i.end.character+1)}function Yy(i){return{start:{line:i.startLineNumber-1,character:i.startColumn-1},end:{line:i.endLineNumber-1,character:i.endColumn-1}}}function jR(i){return{message:i.message,range:Yy(i),code:typeof i.code=="object"?i.code.value:i.code,source:i.source}}function zR(i){const e=at.CompletionItemKind;switch(i){case bt.Text:return e.Text;case bt.Method:return e.Method;case bt.Function:return e.Function;case bt.Constructor:return e.Constructor;case bt.Field:return e.Field;case bt.Variable:return e.Variable;case bt.Class:return e.Class;case bt.Interface:return e.Interface;case bt.Module:return e.Module;case bt.Property:return e.Property;case bt.Unit:return e.Unit;case bt.Value:return e.Value;case bt.Enum:return e.Enum;case bt.Keyword:return e.Keyword;case bt.Snippet:return e.Snippet;case bt.Color:return e.Color;case bt.File:return e.File;case bt.Reference:return e.Reference;default:return e.Property}}function Zy(i){if(!!i)return{range:Vn(i.range),text:i.newText}}function BR(i){return{triggerCharacters:[" ",":"],async provideCompletionItems(e,t){const n=e.uri,s=await(await i(n)).doComplete(String(n),lp(t));if(!s)return;const o=e.getWordUntilPosition(t),a=new na(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn),c=s.items.map(u=>{const l={label:u.label,insertText:u.insertText||u.label,sortText:u.sortText,filterText:u.filterText,documentation:u.documentation,detail:u.detail,kind:zR(u.kind),range:a};return u.textEdit&&(l.range=Vn("range"in u.textEdit?u.textEdit.range:u.textEdit.replace),l.insertText=u.textEdit.newText),u.additionalTextEdits&&(l.additionalTextEdits=u.additionalTextEdits.map(Zy)),u.insertTextFormat===Uc.Snippet&&(l.insertTextRules=at.CompletionItemInsertTextRule.InsertAsSnippet),l});return{incomplete:s.isIncomplete,suggestions:c}}}}function VR(i){return{originSelectionRange:Vn(i.originSelectionRange),range:Vn(i.targetRange),targetSelectionRange:Vn(i.targetSelectionRange),uri:po.parse(i.targetUri)}}function KR(i){return{async provideDefinition(e,t){const n=e.uri,s=await(await i(n)).doDefinition(String(n),lp(t));return s?.map(VR)}}}function GR(i){return{async provideHover(e,t){const n=e.uri,s=await(await i(n)).doHover(String(n),lp(t));if(!!s)return{range:Vn(s.range),contents:[{value:s.contents.value}]}}}}function JR(i){const e=at.SymbolKind;switch(i){case Ct.File:return e.Array;case Ct.Module:return e.Module;case Ct.Namespace:return e.Namespace;case Ct.Package:return e.Package;case Ct.Class:return e.Class;case Ct.Method:return e.Method;case Ct.Property:return e.Property;case Ct.Field:return e.Field;case Ct.Constructor:return e.Constructor;case Ct.Enum:return e.Enum;case Ct.Interface:return e.Interface;case Ct.Function:return e.Function;case Ct.Variable:return e.Variable;case Ct.Constant:return e.Constant;case Ct.String:return e.String;case Ct.Number:return e.Number;case Ct.Boolean:return e.Boolean;case Ct.Array:return e.Array;default:return e.Function}}function e1(i){return{detail:i.detail||"",range:Vn(i.range),name:i.name,kind:JR(i.kind),selectionRange:Vn(i.selectionRange),children:i.children.map(e1),tags:[]}}function QR(i){return{async provideDocumentSymbols(e){const t=e.uri,r=await(await i(t)).findDocumentSymbols(String(t));if(!!r)return r.map(e1)}}}function XR(i){return{tabSize:i.tabSize,insertSpaces:i.insertSpaces,...i}}function YR(i){return{async provideDocumentFormattingEdits(e,t){const n=e.uri,s=await(await i(n)).format(String(n),XR(t));if(!(!s||s.length===0))return s.map(Zy)}}}function ZR(i){return{range:Vn(i.range),tooltip:i.tooltip,url:i.target}}function eI(i){return{async provideLinks(e){const t=e.uri;return{links:(await(await i(t)).findLinks(String(t))).map(ZR)}}}}function tI(i){const e=[];for(const[t,n]of Object.entries(i.changes))for(const r of n)e.push({resource:po.parse(t),edit:{text:r.newText,range:Vn(r.range)}});return{edits:e}}function nI(i){var e;return{title:i.title,diagnostics:i.diagnostics.map(Xy),disabled:(e=i.disabled)==null?void 0:e.reason,edit:tI(i.edit),kind:i.kind,isPreferred:i.isPreferred}}function iI(i){return{async provideCodeActions(e,t,n){const r=e.uri;return{actions:(await(await i(r)).getCodeAction(String(r),Yy(t),n.markers.map(jR))).map(nI),dispose(){}}}}}var rI={comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],onEnterRules:[{beforeText:/:\s*$/,action:{indentAction:at.IndentAction.Indent}}]};function sI(i){const e=qR(er,{label:"yaml",moduleId:"monaco-yaml/yaml.worker",createData:{languageSettings:i.diagnosticsOptions,enableSchemaRequest:i.diagnosticsOptions.enableSchemaRequest}});i.onDidChange(()=>{e.updateCreateData({languageSettings:i.diagnosticsOptions,enableSchemaRequest:i.diagnosticsOptions.enableSchemaRequest})}),at.registerCompletionItemProvider(gn,BR(e.getWorker)),at.registerHoverProvider(gn,GR(e.getWorker)),at.registerDefinitionProvider(gn,KR(e.getWorker)),at.registerDocumentSymbolProvider(gn,QR(e.getWorker)),at.registerDocumentFormattingEditProvider(gn,YR(e.getWorker)),at.registerLinkProvider(gn,eI(e.getWorker)),at.registerCodeActionProvider(gn,iI(e.getWorker)),at.setLanguageConfiguration(gn,rI);let t=iv(er,gn,rv(e.getWorker));i.onDidChange(()=>{t.dispose(),t=iv(er,gn,rv(e.getWorker))})}var t1={completion:!0,customTags:[],enableSchemaRequest:!1,format:!0,isKubernetes:!1,hover:!0,schemas:[],validate:!0,yamlVersion:"1.2"};function oI(i){const e=new ov;let t=i;const n={get onDidChange(){return e.event},get diagnosticsOptions(){return t},setDiagnosticsOptions(r){t={...t1,...r},e.fire(n)}};return n}var n1=oI(t1);at.register({id:gn,extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml"]});at.onLanguage("yaml",()=>{sI(n1)});function aI(i={}){n1.setDiagnosticsOptions(i)}class cI{monaco;editor;disposables=[];pubGetCommand;constructor(e,t){this.monaco=e,this.editor=t,this.setupSchemaDiagnostics(),this.pubGetCommand=this.createPubGetCommand(),this.regiserCodeLens()}setupSchemaDiagnostics(){aI({enableSchemaRequest:!0,format:!1,schemas:[{uri:"https://json.schemastore.org/pubspec.json",fileMatch:["**/pubspec.yaml"]}]})}createPubGetCommand(){return this.editor.addCommand(0,()=>Hv())}regiserCodeLens(){this.disposables.push(this.monaco.languages.registerCodeLensProvider("yaml",{provideCodeLenses:async e=>e.uri.path.endsWith("pubspec.yaml")?{lenses:[{range:{startLineNumber:1,startColumn:1,endLineNumber:2,endColumn:1},id:"pubspec.pubGet",command:{id:this.pubGetCommand,title:"Run: Pub Get"}}],dispose:()=>{}}:{lenses:[],dispose:()=>{}}}))}dispose(){this.disposables.forEach(e=>e.dispose())}}const uI=d1('<div class="relative h-full w-full"><div class="pointer-events-none absolute inset-0 h-full opacity-0"></div><div class="pointer-events-none absolute inset-0 h-full opacity-0"></div></div>');window.MonacoEnvironment={async getWorker(i,e){switch(e){case"yaml":return new $R;case"json":return new MR;case"css":case"scss":case"less":return new OR;case"html":case"handlebars":case"razor":return new AR;case"typescript":case"javascript":return new LR;default:return new FR}}};const Lr=new Map,bF=()=>{const[i,e]=r1(!1);let t,n,r,s,o;const a=[];s1(async()=>{cb(er);const _=nd(ub),b=await db(so);await Promise.all(b.map(async E=>{if(E.endsWith(".dart")||E.endsWith(".yaml")){const M=await cd(po.parse(E));return E.endsWith(".dart")&&M.getValue().match(/(^|\s)main\s*\(/gm)&&Fp(J=>new Set([...J,E])),M}})),at.register({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"]}),yi.defineTheme("dark",TR),yi.defineTheme("light",kR),c(Mp()),s=yi.create(t,{fixedOverflowWidgets:!0,automaticLayout:!0,minimap:{enabled:!1,renderCharacters:!1,maxColumn:60},tabSize:2,fontSize:_.editorFontSize,padding:{top:8}},{textModelService:{createModelReference:async function(E){const M=await cd(E);return{object:{async load(){return M},textEditorModel:M,dispose(){}},dispose(){}}}}}),o=yi.createDiffEditor(n,{fixedOverflowWidgets:!0,automaticLayout:!0,minimap:{enabled:!1},fontSize:_.editorFontSize,padding:{top:8},renderSideBySide:_.sideBySideDiffs,ignoreTrimWhitespace:!1}),lb(s),hb(o);const k=s._codeEditorService,y=k.openCodeEditor.bind(k);k.openCodeEditor=async(E,M)=>{const q=await y(E,M);if(q===null){const J=E.resource;o1(()=>{Ap(E.options.selection),fb(J.toString())})}return q};for(const E of ER)a.push(s.addAction(E));a.push(new SR(er)),a.push(new cI(er,s)),a.push(s.onDidChangeModelContent(p)),a.push(s.onDidChangeConfiguration(d)),a.push(s.onDidChangeCursorPosition(u)),a.push(o.getOriginalEditor().onDidChangeCursorPosition(u)),a.push(o.getModifiedEditor().onDidChangeCursorPosition(u)),a.push(s.onDidChangeCursorSelection(l)),a.push(s.onDidChangeModel(()=>Lp(null))),a.push(s.onDidChangeModel(g)),a.push(s.onDidChangeModel(h)),e(!0)});function c(_){_==="dark"||_==="light"?yi.setTheme(_):_==="system"&&yi.setTheme(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}function u(_){fa({lineNumber:_.position.lineNumber,column:_.position.column})}function l(_){Lp({start:{lineNumber:_.selection.startLineNumber,column:_.selection.startColumn},end:{lineNumber:_.selection.endLineNumber,column:_.selection.endColumn}})}function g(_){const b=nd(gb);b&&_.newModelUrl&&(s.revealRangeInCenter(b),s.setSelection(b)),Ap(null)}function h(_){const[b,k]=nd(pb);if(b!==null&&k!==null&&_.newModelUrl){const y=s.getModel().getPositionAt(b),E=s.getModel().getPositionAt(k),M=new na(y.lineNumber,y.column,E.lineNumber,E.column);s.revealRangeInCenter(M),s.setSelection(M)}mb([null,null])}function d(_){_.hasChanged(46)}la(async()=>{if(i()&&vb()){Gc.install({rootPath:"file:///zapp/project"}),r=Gc.get(),r.window.showMessage=async(b,k)=>{La.channel.messages(k)};const _=await xR();_b(_),a.push(new NR(_,s)),a.push(new HR(_,er,s))}}),la(()=>{i()&&c(Mp())}),la(async()=>{if(i()){const _=ga(),b=s.getModel(),k=o.getModel();if(b&&Lr.set(b.uri.toString(),s.saveViewState()),k?.modified&&Lr.set(k.modified.uri.with({scheme:"diff"}).toString(),o.saveViewState()),!_){s.setModel(null),o.setModel(null),fa({lineNumber:0,column:0});return}const y=po.parse(_),E=await cd(y.with({scheme:"file"}));if(y.scheme==="diff"){const M=await Op.resolveRef("HEAD");let q="";try{const{blob:Q}=await Op.readBlob(M,y.path.replace(so,""));q=Buffer.from(Q).toString("utf8")}catch{}o.setModel({original:yi.createModel(q,yb(y)),modified:E}),s.setModel(E),Lr.has(y.toString())&&o.restoreViewState(Lr.get(y.toString()));const J=o.getPosition();J&&fa({lineNumber:J.lineNumber,column:J.column}),dl()||o.focus()}else{s.setModel(E),Lr.has(E.uri.toString())&&s.restoreViewState(Lr.get(E.uri.toString()));const M=s.getPosition();M&&fa({lineNumber:M.lineNumber,column:M.column}),dl()||s.focus()}}}),la(()=>{if(i()){const _=ga();s.updateOptions({readOnly:wb(_)})}}),a1(()=>{for(const _ of yi.getModels())_.dispose();for(const _ of a)_.dispose()});function p(){const _=s.getModel()?.uri.path;if(_&&!_.startsWith(bb)&&!_.startsWith(Cb)){const b=s.getValue()??"";if(_.endsWith(".dart")){const k=b.match(/(^|\s)main\s*\(/gm);Fp(y=>{const E=new Set([...y]);return k?E.add(_):y.has(_)&&E.delete(_),E}),k||Wv(y=>y===_?`${so}lib/main.dart`:y)}Sb(_,b)}}return(()=>{const _=c1(uI),b=_.firstChild,k=b.nextSibling,y=t;typeof y=="function"?pp(y,b):t=b;const E=n;return typeof E=="function"?pp(E,k):n=k,u1(M=>{const q={"opacity-100 pointer-events-auto":ga()?.startsWith("file:")},J={"opacity-100 pointer-events-auto":ga()?.startsWith("diff:")};return M._v$=mp(b,q,M._v$),M._v$2=mp(k,J,M._v$2),M},{_v$:void 0,_v$2:void 0}),_})()};export{bF as default};
